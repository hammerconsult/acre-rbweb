DECLARE
texto CLOB := '{"consulta":"select\r\n    ato.propositoAtoLegal as propositoAtoLegal,\r\n    ato.tipoatolegal as tipoatolegal,\r\n    ato.numero || ''/'' || ex.ano as epigrafe,\r\n    ato.nome as nome,\r\n    eg.nome as esferaGoverno,\r\n    vdp.nome as veiculoPublicacao,\r\n    trunc(ato.dataPublicacao) as dataPublicacao,\r\n    ex.ano as exercicio,\r\n    case when ato.descricaoConformeDo is null then ''Não foi informada a descriçao conforme diário oficial para este ato legal.'' else ato.descricaoConformeDo end as conformeDiarioOficial,\r\n    ato.id as id,\r\n    ato.arquivo_id as arquivo\r\nfrom atolegal ato\r\n         left join exercicio ex on ex.id = ato.exercicio_id\r\n         left join veiculoDePublicacao vdp on vdp.id = ato.veiculoDePublicacao_id\r\n         left join esferaGoverno eg on eg.id = ato.esferaGoverno_id\r\n         left join vwhierarquiaadministrativa vw on vw.subordinada_id = ato.unidadeOrganizacional_id\r\n               and trunc(ato.dataPublicacao) between vw.iniciovigencia and coalesce(vw.fimvigencia, trunc(ato.dataPublicacao))\r\nwhere ex.ano = $ANO $WHERE\r\norder by to_number(ato.numero)","count":"select count(ato.id)\r\nfrom atolegal ato\r\n         left join exercicio ex on ex.id = ato.exercicio_id\r\n         left join veiculoDePublicacao vdp on vdp.id = ato.veiculoDePublicacao_id\r\n         left join esferaGoverno eg on eg.id = ato.esferaGoverno_id\r\n         left join vwhierarquiaadministrativa vw on vw.subordinada_id = ato.unidadeOrganizacional_id\r\n               and trunc(ato.dataPublicacao) between vw.iniciovigencia and coalesce(vw.fimvigencia, trunc(ato.dataPublicacao))\r\nwhere ex.ano = $ANO $WHERE\r\norder by to_number(ato.numero)","totalRegistros":0,"fields":[{"posicao":0,"descricao":"Número","columnName":"EPIGRAFE","columnValue":"EPIGRAFE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"","columnOrigem":"","columnDestino":""},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":1,"descricao":"Tipo\t","columnName":"TIPOATOLEGAL","columnValue":"TIPOATOLEGAL","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoAtoLegal","valorPadrao":[null,"DECRETO","PORTARIA","RESOLUCAO","CIRCULAR","DESPACHO","EMENDA","PROJETO_DE_LEI","OFICIO","PARECER","PROCESSO","ATESTADO","MEMORANDO","MEDIDA_PROVISORIA","LEI_COMPLEMENTAR","LEI_ORDINARIA","LEI_ORGANICA","REGIMENTO_INTERNO","TERMO_POSSE","ORIENTACAO_TECNICA","RECOMENDACAO","INSTRUCAO_NORMATIVA","RELATORIO","AUTOGRAFO","LEGISLATIVO","CONTROLE_EXTERNO"],"escondido":false},{"posicao":2,"descricao":"Publicado Em","columnName":"DATAPUBLICACAO","columnValue":"DATAPUBLICACAO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":9,"descricao":"ID","columnName":"ID","columnValue":"ID","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":true},{"posicao":5,"descricao":"Assunto","columnName":"nome","columnValue":"nome","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":6,"descricao":"Download","columnName":"arquivo","columnValue":"arquivo","tipoAlinhamento":null,"totalizar":false,"link":null,"tipo":"ARQUIVO","tipoEnum":null,"valorPadrao":null,"escondido":false}],"pesquisaveis":[{"descricao":"Unidade","columnName":"vw.subordinada_id","columnValue":null,"tipo":"MULTI_SELECT","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":"UNIDADE_ADMINISTRATIVA"},{"descricao":"Objeto","columnName":"ato.propositoatolegal","columnValue":null,"tipo":"ENUM","operacaoPadrao":null,"tipoEnum":"br.com.webpublico.enums.PropositoAtoLegal","valorPadrao":[null,"ORCAMENTO","ALTERACAO_ORCAMENTARIA","RESERVA_DOTACAO","DIRETRIZES_ORCAMENTARIAS","PPA","OUTROS","ATO_DE_PESSOAL","ATO_DE_CARGO","PROGRMACAO_ORACMENTARIA","COMISSAO","TRIBUTARIO","OFICIO_BCE","CONCESSAO_BENEFICIO","BENEFICIO_PREVIDENCIARIO","CONVENIO","ATO_LEGAL_CONCESSAO_DIARIA","ATO_LEGAL_PRECATORIO","ATO_LEGAL_REPASSE","ATO_LEGAL_PESSOAL","ATO_LEGAL_PLANO_MUNICIPAL","EDUCACAO","CULTURA","HABITACAO","SANEAMENTO","SAUDE","TRANSPORTE_PUBLICO","SEGURANCA","DESENVOLVIMENTO_SUSTENTAVEL","GESTAO_URBANA","CONTRATACOES_EMERGENCIAIS","DOACOES","MEDIDAS_FISCAIS","ISOLAMENTO_SOCIAL","POLITICA_SOCIAL","SERVICO_ESSENCIAIS"],"tipoMultiSelect":null},{"descricao":"Tipo","columnName":"ato.tipoatolegal","columnValue":null,"tipo":"ENUM","operacaoPadrao":null,"tipoEnum":"br.com.webpublico.enums.TipoAtoLegal","valorPadrao":[null,"DECRETO","PORTARIA","RESOLUCAO","CIRCULAR","DESPACHO","EMENDA","PROJETO_DE_LEI","OFICIO","PARECER","PROCESSO","ATESTADO","MEMORANDO","MEDIDA_PROVISORIA","LEI_COMPLEMENTAR","LEI_ORDINARIA","LEI_ORGANICA","REGIMENTO_INTERNO","TERMO_POSSE","ORIENTACAO_TECNICA","RECOMENDACAO","INSTRUCAO_NORMATIVA","RELATORIO","AUTOGRAFO","LEGISLATIVO","CONTROLE_EXTERNO"],"tipoMultiSelect":null},{"descricao":"Nome","columnName":"ato.nome","columnValue":null,"tipo":"STRING","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Número","columnName":"  ato.numero || ''/'' || ex.ano ","columnValue":null,"tipo":"STRING","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null}],"tabs":[],"paineis":[]}';
BEGIN
update PAGINAPREFEITURAPORTAL set CONTEUDO = texto where chave = 'ato-legal';
END;
