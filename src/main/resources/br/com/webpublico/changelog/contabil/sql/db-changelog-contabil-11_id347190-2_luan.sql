DECLARE
texto CLOB := '{"consulta":"select distinct\r\n    ex.ano as exercicio,\r\n    coalesce(orgao.codigo, vwAdm.codigo) || '' - '' || coalesce(orgao.descricao, vwAdm.descricao) as secretaria,\r\n    lic.numeroLicitacao || ''/'' || ex.ano                                                        as numerolicitacao,\r\n    lic.numero || ''/'' || exMod.ano                                                              as numeroModalidade,\r\n    lic.modalidadeLicitacao                                                                     as modalidade,\r\n    lic.resumoDoObjeto                                                                          as objeto,\r\n    count(itemPdc.id)                                                                           as numeroItens,\r\n    trunc(lic.abertaem)                                                                         as dataAbertura,\r\n    lic.localdeentrega                                                                          as localAbertura,\r\n    status.tipoSituacaoLicitacao                                                                as situacao,\r\n    uo.contato                                                                                  as contato,\r\n    lic.ID                                                                                      as idLicitacao,\r\n    to_number(lic.numeroLicitacao)\r\nfrom licitacao lic\r\n         inner join exercicio ex on ex.id = lic.exercicio_id\r\n         left join exercicio exMod on exMod.id = lic.exerciciomodalidade_id\r\n         inner join statuslicitacao status on status.licitacao_id = lic.id\r\n         inner join processoDeCompra pdc on pdc.id = lic.processoDeCompra_id\r\n         inner join loteprocessodecompra lotePdc on lotePdc.processodecompra_id = pdc.id\r\n         inner join itemprocessodecompra itemPdc on itemPdc.loteprocessodecompra_id = lotePdc.id\r\n         inner join unidadeorganizacional uo on uo.id = pdc.unidadeOrganizacional_id\r\n         left join vwhierarquiaadministrativa vwAdm on vwAdm.subordinada_id = uo.id\r\n    and trunc(lic.abertaem) between vwAdm.iniciovigencia and coalesce(vwAdm.fimvigencia, trunc(lic.abertaem))\r\n         left join (with hierarquia (codigo, descricao, nivel, id, subordinada_id, superior_id) as (select vw.codigo,\r\n                                                                                                           vw.descricao,\r\n                                                                                                           nivelestrutura(vw.codigo, ''.'') as nivel,\r\n                                                                                                           vw.id,\r\n                                                                                                           vw.subordinada_id,\r\n                                                                                                           vw.superior_id\r\n                                                                                                    from vwhierarquiaadministrativa vw\r\n                                                                                                    where sysdate between vw.iniciovigencia and coalesce(vw.fimvigencia, sysdate)\r\n                                                                                                    union all\r\n                                                                                                    select vw.codigo,\r\n                                                                                                           vw.descricao,\r\n                                                                                                           nivelestrutura(vw.codigo, ''.'') as nivel,\r\n                                                                                                           vw.id,\r\n                                                                                                           vw.subordinada_id,\r\n                                                                                                           vw.superior_id\r\n                                                                                                    from vwhierarquiaadministrativa vw\r\n                                                                                                             inner join hierarquia filho on filho.superior_id = vw.subordinada_id\r\n                                                                                                    where sysdate between vw.iniciovigencia and coalesce(vw.fimvigencia, sysdate))\r\n                    select distinct hierarquia.*\r\n                    from hierarquia\r\n                    where hierarquia.nivel = 2) orgao on orgao.subordinada_id = uo.id\r\nwhere lic.modalidadeLicitacao not in (''DISPENSA_LICITACAO'', ''INEXIGIBILIDADE'')\r\n  and status.datastatus = (select max(st.datastatus) from statuslicitacao st where st.licitacao_id = lic.id)\r\n  $WHERE\r\ngroup by ex.ano, \r\n         lic.ID,\r\n         coalesce(orgao.codigo, vwAdm.codigo),\r\n         coalesce(orgao.descricao, vwAdm.descricao),\r\n         lic.numeroLicitacao || ''/'' || ex.ano,\r\n         lic.numero || ''/'' || exMod.ano,\r\n         lic.modalidadeLicitacao,\r\n         lic.resumoDoObjeto,\r\n         trunc(lic.abertaem),\r\n         lic.localdeentrega,\r\n         status.tipoSituacaoLicitacao,\r\n         uo.contato,\r\n         to_number(lic.numeroLicitacao)\r\norder by ex.ano desc, to_number(lic.numeroLicitacao)","count":"select count(lic.id)\r\nfrom licitacao lic\r\n         inner join exercicio ex on ex.id = lic.exercicio_id\r\nwhere lic.modalidadeLicitacao not in (''DISPENSA_LICITACAO'', ''INEXIGIBILIDADE'')\r\n$WHERE","totalRegistros":320,"fields":[{"posicao":0,"descricao":"Exercício","columnName":"EXERCICIO","columnValue":"EXERCICIO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":1,"descricao":"Secretaria","columnName":"SECRETARIA","columnValue":"SECRETARIA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":2,"descricao":"Número da Licitação","columnName":"NUMEROLICITACAO","columnValue":"NUMEROLICITACAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"processo-licitatorio-ver","columnOrigem":"IDLICITACAO","columnDestino":"dados.idProcessoLicitatorio"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":3,"descricao":"Número da Modalidade","columnName":"NUMEROMODALIDADE","columnValue":"NUMEROMODALIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":4,"descricao":"Modalidade","columnName":"MODALIDADE","columnValue":"MODALIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.ModalidadeLicitacao","valorPadrao":[null,"CONVITE","TOMADA_PRECO","CONCORRENCIA","CONCURSO","PREGAO","DISPENSA_LICITACAO","INEXIGIBILIDADE","RDC","LEILAO","MANIFESTACAO_INTERESSE","PRE_QUALIFICACAO","CREDENCIAMENTO","DIALOGO_COMPETITIVO"],"escondido":false,"agrupador":false},{"posicao":5,"descricao":"Objeto","columnName":"OBJETO","columnValue":"OBJETO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":6,"descricao":"Número de Itens","columnName":"NUMEROITENS","columnValue":"NUMEROITENS","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":7,"descricao":"Data de Abertura","columnName":"DATAABERTURA","columnValue":"DATAABERTURA","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":8,"descricao":"Local de Abertura","columnName":"LOCALABERTURA","columnValue":"LOCALABERTURA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":9,"descricao":"Situação","columnName":"SITUACAO","columnValue":"SITUACAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoSituacaoLicitacao","valorPadrao":[null,"ADJUDICADA","ANDAMENTO","ANULADA","CANCELADA","DESERTA","EM_RECURSO","FRACASSADA","HOMOLOGADA","PRORROGADA","REVOGADA","SUSPENSA"],"escondido":false,"agrupador":false},{"posicao":10,"descricao":"Contato","columnName":"CONTATO","columnValue":"CONTATO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":11,"descricao":"IDLICITACAO","columnName":"IDLICITACAO","columnValue":"IDLICITACAO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":true,"agrupador":false}],"pesquisaveis":[{"descricao":"Exercício","columnName":"ex.ano","columnValue":null,"tipo":"INTEGER","operacaoPadrao":"IGUAL","tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Secretaria","columnName":"SECRETARIA","columnValue":null,"tipo":"STRING","operacaoPadrao":"LIKE","tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Número da Licitação","columnName":"NUMEROLICITACAO","columnValue":null,"tipo":"STRING","operacaoPadrao":"LIKE","tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Objeto","columnName":"OBJETO","columnValue":null,"tipo":"STRING","operacaoPadrao":"LIKE","tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Local de Abertura","columnName":"LOCALABERTURA","columnValue":null,"tipo":"STRING","operacaoPadrao":"LIKE","tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Modalidade","columnName":"MODALIDADE","columnValue":null,"tipo":"ENUM","operacaoPadrao":null,"tipoEnum":"br.com.webpublico.enums.ModalidadeLicitacao","valorPadrao":[null,"CONVITE","TOMADA_PRECO","CONCORRENCIA","CONCURSO","PREGAO","DISPENSA_LICITACAO","INEXIGIBILIDADE","RDC","LEILAO","MANIFESTACAO_INTERESSE","PRE_QUALIFICACAO","CREDENCIAMENTO","DIALOGO_COMPETITIVO"],"tipoMultiSelect":null},{"descricao":"Situação","columnName":"SITUACAO","columnValue":null,"tipo":"ENUM","operacaoPadrao":null,"tipoEnum":"br.com.webpublico.enums.TipoSituacaoLicitacao","valorPadrao":[null,"ADJUDICADA","ANDAMENTO","ANULADA","CANCELADA","DESERTA","EM_RECURSO","FRACASSADA","HOMOLOGADA","PRORROGADA","REVOGADA","SUSPENSA"],"tipoMultiSelect":null},{"descricao":"Data de Abertura","columnName":"DATAABERTURA","columnValue":null,"tipo":"DATE","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null}],"tabs":[],"paineis":[]}';
BEGIN
update PAGINAPREFEITURAPORTAL set CONTEUDO = texto where NOME = 'Licitações' and CHAVE = 'licitacao-outras';
END;
