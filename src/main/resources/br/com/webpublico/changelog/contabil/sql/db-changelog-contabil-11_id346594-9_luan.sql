DECLARE
texto CLOB := '{"consulta":"select tipo,\r\n       numero,\r\n       data,\r\n       ex.ano as exercicio,\r\n       vwconcedido.CODIGO || '' - '' || vwconcedido.DESCRICAO as concedido,\r\n       vwrecebida.CODIGO || '' - '' || vwrecebida.DESCRICAO  as recebida,\r\n       historico,\r\n       situacao,\r\n       valor\r\nfrom (select distinct ''Liberação Financeira''                               as tipo,\r\n                      lcf.NUMERO                                           as numero,\r\n                      trunc(lcf.DATALIBERACAO)                             as data,\r\n                      lcf.EXERCICIO_ID                                     as idExercicio,\r\n                      lcf.UNIDADEORGANIZACIONAL_ID                         as idConcedido,\r\n                      scl.UNIDADEORGANIZACIONAL_ID                         as idRecebida,\r\n                      scl.HISTORICOSOLICITACAO                             as historico,\r\n                      lcf.statusPagamento                                  as situacao,\r\n                      lcf.VALOR                                            as valor\r\n      from LIBERACAOCOTAFINANCEIRA lcf\r\n               inner join solicitacaocotafinanceira scl on lcf.SOLICITACAOCOTAFINANCEIRA_ID = scl.ID\r\n\r\n      union all\r\n      select distinct ''Transferência Financeira''                           as tipo,\r\n                      transf.NUMERO                                        as numero,\r\n                      trunc(transf.DATATRANSFERENCIA)                      as data,\r\n                      transf.EXERCICIO_ID                                  as idExercicio,\r\n                      transf.UNIDADEORGCONCEDIDA_ID                        as idConcedido,\r\n                      transf.UNIDADEORGANIZACIONAL_ID                      as idRecebida,\r\n                      transf.historico                                     as historico,\r\n                      transf.statusPagamento                               as situacao,\r\n                      transf.VALOR                                         as valor\r\n      from TRANSFERENCIACONTAFINANC transf\r\n     ) dados\r\n         inner join EXERCICIO ex on ex.id = dados.idExercicio\r\n         left join VWHIERARQUIAORCAMENTARIA vwconcedido on vwconcedido.SUBORDINADA_ID = dados.idConcedido\r\n                                                               and dados.data between vwconcedido.INICIOVIGENCIA and coalesce(vwconcedido.FIMVIGENCIA, dados.data)\r\n         left join VWHIERARQUIAORCAMENTARIA vwrecebida on vwrecebida.SUBORDINADA_ID = dados.idRecebida\r\n                                                              and dados.data between vwrecebida.INICIOVIGENCIA and coalesce(vwrecebida.FIMVIGENCIA, dados.data)\r\nwhere ex.ano = $ANO\r\n$WHERE\r\norder by to_number(numero)","count":"select count(1)\r\nfrom (select distinct ''Liberação Financeira''                               as tipo,\r\n                      lcf.NUMERO                                           as numero,\r\n                      trunc(lcf.DATALIBERACAO)                             as data,\r\n                      lcf.EXERCICIO_ID                                     as idExercicio,\r\n                      lcf.UNIDADEORGANIZACIONAL_ID                         as idConcedido,\r\n                      scl.UNIDADEORGANIZACIONAL_ID                         as idRecebida,\r\n                      scl.HISTORICOSOLICITACAO                             as historico,\r\n                      lcf.statusPagamento                                  as situacao,\r\n                      lcf.VALOR                                            as valor\r\n      from LIBERACAOCOTAFINANCEIRA lcf\r\n               inner join solicitacaocotafinanceira scl on lcf.SOLICITACAOCOTAFINANCEIRA_ID = scl.ID\r\n\r\n      union all\r\n      select distinct ''Transferência Financeira''                           as tipo,\r\n                      transf.NUMERO                                        as numero,\r\n                      trunc(transf.DATATRANSFERENCIA)                      as data,\r\n                      transf.EXERCICIO_ID                                  as idExercicio,\r\n                      transf.UNIDADEORGCONCEDIDA_ID                        as idConcedido,\r\n                      transf.UNIDADEORGANIZACIONAL_ID                      as idRecebida,\r\n                      transf.historico                                     as historico,\r\n                      transf.statusPagamento                               as situacao,\r\n                      transf.VALOR                                         as valor\r\n      from TRANSFERENCIACONTAFINANC transf\r\n     ) dados\r\n         inner join EXERCICIO ex on ex.id = dados.idExercicio\r\n         left join VWHIERARQUIAORCAMENTARIA vwconcedido on vwconcedido.SUBORDINADA_ID = dados.idConcedido\r\n                                                               and dados.data between vwconcedido.INICIOVIGENCIA and coalesce(vwconcedido.FIMVIGENCIA, dados.data)\r\n         left join VWHIERARQUIAORCAMENTARIA vwrecebida on vwrecebida.SUBORDINADA_ID = dados.idRecebida\r\n                                                              and dados.data between vwrecebida.INICIOVIGENCIA and coalesce(vwrecebida.FIMVIGENCIA, dados.data)\r\nwhere ex.ano = $ANO\r\n$WHERE","totalRegistros":0,"fields":[{"posicao":0,"descricao":"Tipo","columnName":"TIPO","columnValue":"TIPO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":1,"descricao":"Número","columnName":"NUMERO","columnValue":"NUMERO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":2,"descricao":"Data","columnName":"DATA","columnValue":"DATA","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":3,"descricao":"Exercício","columnName":"EXERCICIO","columnValue":"EXERCICIO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":4,"descricao":"Concedido","columnName":"CONCEDIDO","columnValue":"CONCEDIDO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":5,"descricao":"Recebido","columnName":"RECEBIDA","columnValue":"RECEBIDA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":6,"descricao":"Histórico","columnName":"HISTORICO","columnValue":"HISTORICO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":7,"descricao":"Situação","columnName":"SITUACAO","columnValue":"SITUACAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.StatusPagamento","valorPadrao":[null,"ABERTO","DEFERIDO","INDEFERIDO","EFETUADO","BORDERO","PAGO","ESTORNADO","CANCELADO"],"escondido":false},{"posicao":8,"descricao":"Valor","columnName":"VALOR","columnValue":"VALOR","tipoAlinhamento":"DIREITA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false}],"pesquisaveis":[{"descricao":"Periodicidade","columnName":"trunc (lcf.DATALIBERACAO)","columnValue":null,"tipo":"PERIODO","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Unidade Recebida","columnName":"vwrecebida. subordinada_ID","columnValue":null,"tipo":"MULTI_SELECT","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":"UNIDADE_ORCAMENTARIA"},{"descricao":"Unidade Concedida","columnName":"vwconcedido. subordinada_ID","columnValue":null,"tipo":"MULTI_SELECT","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":"UNIDADE_ORCAMENTARIA"}],"tabs":[],"paineis":[]}';
BEGIN
update PAGINAPREFEITURAPORTAL set CONTEUDO = texto where NOME = 'Repasse' and CHAVE = 'liberacao-financeira';
END;
