DECLARE
texto CLOB := '{"consulta":"select servidor,\r\n       case when mes is not null and (mes + 1) > 9 then to_char(mes + 1) else ''0'' || to_char(mes + 1) end || ''/'' || ano as mesAno,\r\n       tipodefolha,\r\n       dataadmissao,\r\n       cargo,\r\n       case when estagiario is not null then ''ESTAGIÁRIO'' else vinculo end         as vinculo,\r\n       cargahorario                                                                as ch,\r\n       coalesce(sum(vencimentobase), 0)                                            as vencimentobase,\r\n       coalesce(sum(valorbruto), 0) - coalesce(sum(vencimentobase), 0)             as outrasverbas,\r\n       coalesce(sum(valorbruto), 0)                                                as salariobruto,\r\n       coalesce(sum(valordesconto), 0)                                             as descontos,\r\n       coalesce(sum(coalesce(valorbruto, 0)) - sum(coalesce(valordesconto, 0)), 0) as salarioliquido,\r\n       id\r\nfrom (select pf.nome                                                                                              as servidor,\r\n             mat.matricula || ''/'' || v.numero                                                                     as matricula,\r\n             folha.mes                                                                                            as mes,\r\n             folha.ano                                                                                            as ano,\r\n             folha.tipofolhadepagamento                                                                           as tipodefolha,\r\n             trunc(cfp.dataadmissao)                                                                              as dataadmissao,\r\n             cargo.codigodocargo || '' - '' || cargo.descricao                                                      as cargo,\r\n             cargo.cargahoraria                                                                                   as cargahorario,\r\n             mcfp.descricao                                                                                       as vinculo,\r\n             ho.descricao                                                                                         as unidade,\r\n             ff.id                                                                                                as id,\r\n             estag.id                                                                                             as estagiario,\r\n             (select sum(item.valor)\r\n              from folhadepagamento folha\r\n                       inner join fichafinanceirafp ficha on ficha.folhadepagamento_id = folha.id\r\n                       inner join itemfichafinanceirafp item on item.fichafinanceirafp_id = ficha.id\r\n                       inner join itembasefp itembase on itembase.eventofp_id = item.eventofp_id\r\n                       inner join basefp b on b.id = itembase.basefp_id\r\n              where ficha.vinculofp_id = v.id\r\n                and itemficha.id = item.id\r\n                and item.tipoeventofp = ''VANTAGEM''\r\n                and b.codigo = (select conf.vencimentobaseportal\r\n                                from configuracaorh conf\r\n                                where to_date(''01/01/'' || folha.ano, ''dd/MM/yyyy'')\r\n                                          between conf.iniciovigencia\r\n                                          and coalesce(conf.finalvigencia, to_date(''01/01/'' || folha.ano, ''dd/MM/yyyy'')))) as vencimentobase,\r\n\r\n             (select sum(item.valor)\r\n              from folhadepagamento folha\r\n                       inner join fichafinanceirafp ficha on ficha.folhadepagamento_id = folha.id\r\n                       inner join itemfichafinanceirafp item on item.fichafinanceirafp_id = ficha.id\r\n              where ficha.vinculofp_id = v.id\r\n                and item.id = itemficha.id\r\n                and item.tipoeventofp = ''VANTAGEM'')                                                               as valorbruto,\r\n             (select sum(item.valor)\r\n              from folhadepagamento folha\r\n                       inner join fichafinanceirafp ficha on ficha.folhadepagamento_id = folha.id\r\n                       inner join itemfichafinanceirafp item on item.fichafinanceirafp_id = ficha.id\r\n              where ficha.vinculofp_id = v.id\r\n                and item.id = itemficha.id\r\n                and item.tipoeventofp = ''DESCONTO'') as valordesconto\r\n      from vinculofp v\r\n               inner join matriculafp mat on mat.id = v.matriculafp_id\r\n               inner join pessoafisica pf on pf.id = mat.pessoa_id\r\n               inner join fichafinanceirafp ff on ff.vinculofp_id = v.id\r\n               inner join folhadepagamento folha on folha.id = ff.folhadepagamento_id\r\n               inner join itemfichafinanceirafp itemficha on itemficha.fichafinanceirafp_id = ff.id\r\n               inner join unidadeorganizacional uo on uo.id = ff.unidadeorganizacional_id\r\n               inner join vwhierarquiaadministrativa ho on ho.subordinada_id = uo.id\r\n               left join estagiario estag on estag.id = v.id\r\n               left join contratofp cfp on cfp.id = coalesce(estag.id, v.id)\r\n               left join cargo on cfp.cargo_id = cargo.id\r\n               left join modalidadecontratofp mcfp on cfp.modalidadecontratofp_id = mcfp.id\r\n      where trunc(folha.efetivadaem) between to_date(''01/01/'' || folha.ano, ''dd/MM/yyyy'') and to_date(''31/12/'' || folha.ano, ''dd/MM/yyyy'')\r\n        and trunc(folha.efetivadaem) between ho.iniciovigencia and coalesce(ho.fimvigencia, trunc(folha.efetivadaem))\r\n          $WHERE) dados\r\ngroup by servidor, cargo, vinculo, cargahorario, matricula, mes, ano, tipodefolha, dataadmissao, unidade, id, estagiario\r\norder by servidor, ano desc, mes desc","count":"select count(1)from (\r\nselect servidor,\r\n       case when mes is not null and (mes + 1) > 9 then to_char(mes + 1) else ''0'' || to_char(mes + 1) end || ''/'' || ano as mesAno,\r\n       tipodefolha,\r\n       dataadmissao,\r\n       cargo,\r\n       case when estagiario is not null then ''ESTAGIÁRIO'' else vinculo end         as vinculo,\r\n       cargahorario                                                                as ch,\r\n       coalesce(sum(vencimentobase), 0)                                            as vencimentobase,\r\n       coalesce(sum(valorbruto), 0) - coalesce(sum(vencimentobase), 0)             as outrasverbas,\r\n       coalesce(sum(valorbruto), 0)                                                as salariobruto,\r\n       coalesce(sum(valordesconto), 0)                                             as descontos,\r\n       coalesce(sum(coalesce(valorbruto, 0)) - sum(coalesce(valordesconto, 0)), 0) as salarioliquido,\r\n       id\r\nfrom (select pf.nome                                                                                              as servidor,\r\n             mat.matricula || ''/'' || v.numero                                                                     as matricula,\r\n             folha.mes                                                                                            as mes,\r\n             folha.ano                                                                                            as ano,\r\n             folha.tipofolhadepagamento                                                                           as tipodefolha,\r\n             trunc(cfp.dataadmissao)                                                                              as dataadmissao,\r\n             cargo.codigodocargo || '' - '' || cargo.descricao                                                      as cargo,\r\n             cargo.cargahoraria                                                                                   as cargahorario,\r\n             mcfp.descricao                                                                                       as vinculo,\r\n             ho.descricao                                                                                         as unidade,\r\n             ff.id                                                                                                as id,\r\n             estag.id                                                                                             as estagiario,\r\n             (select sum(item.valor)\r\n              from folhadepagamento folha\r\n                       inner join fichafinanceirafp ficha on ficha.folhadepagamento_id = folha.id\r\n                       inner join itemfichafinanceirafp item on item.fichafinanceirafp_id = ficha.id\r\n                       inner join itembasefp itembase on itembase.eventofp_id = item.eventofp_id\r\n                       inner join basefp b on b.id = itembase.basefp_id\r\n              where ficha.vinculofp_id = v.id\r\n                and itemficha.id = item.id\r\n                and item.tipoeventofp = ''VANTAGEM''\r\n                and b.codigo = (select conf.vencimentobaseportal\r\n                                from configuracaorh conf\r\n                                where to_date(''01/01/'' || folha.ano, ''dd/MM/yyyy'')\r\n                                          between conf.iniciovigencia\r\n                                          and coalesce(conf.finalvigencia, to_date(''01/01/'' || folha.ano, ''dd/MM/yyyy'')))) as vencimentobase,\r\n\r\n             (select sum(item.valor)\r\n              from folhadepagamento folha\r\n                       inner join fichafinanceirafp ficha on ficha.folhadepagamento_id = folha.id\r\n                       inner join itemfichafinanceirafp item on item.fichafinanceirafp_id = ficha.id\r\n              where ficha.vinculofp_id = v.id\r\n                and item.id = itemficha.id\r\n                and item.tipoeventofp = ''VANTAGEM'')                                                               as valorbruto,\r\n             (select sum(item.valor)\r\n              from folhadepagamento folha\r\n                       inner join fichafinanceirafp ficha on ficha.folhadepagamento_id = folha.id\r\n                       inner join itemfichafinanceirafp item on item.fichafinanceirafp_id = ficha.id\r\n              where ficha.vinculofp_id = v.id\r\n                and item.id = itemficha.id\r\n                and item.tipoeventofp = ''DESCONTO'') as valordesconto\r\n      from vinculofp v\r\n               inner join matriculafp mat on mat.id = v.matriculafp_id\r\n               inner join pessoafisica pf on pf.id = mat.pessoa_id\r\n               inner join fichafinanceirafp ff on ff.vinculofp_id = v.id\r\n               inner join folhadepagamento folha on folha.id = ff.folhadepagamento_id\r\n               inner join itemfichafinanceirafp itemficha on itemficha.fichafinanceirafp_id = ff.id\r\n               inner join unidadeorganizacional uo on uo.id = ff.unidadeorganizacional_id\r\n               inner join vwhierarquiaadministrativa ho on ho.subordinada_id = uo.id\r\n               left join estagiario estag on estag.id = v.id\r\n               left join contratofp cfp on cfp.id = coalesce(estag.id, v.id)\r\n               left join cargo on cfp.cargo_id = cargo.id\r\n               left join modalidadecontratofp mcfp on cfp.modalidadecontratofp_id = mcfp.id\r\n      where trunc(folha.efetivadaem) between to_date(''01/01/'' || folha.ano, ''dd/MM/yyyy'') and to_date(''31/12/'' || folha.ano, ''dd/MM/yyyy'')\r\n        and trunc(folha.efetivadaem) between ho.iniciovigencia and coalesce(ho.fimvigencia, trunc(folha.efetivadaem))\r\n          $WHERE) dados\r\ngroup by servidor, cargo, vinculo, cargahorario, matricula, mes, ano, tipodefolha, dataadmissao, unidade, id, estagiario)\r\n","totalRegistros":71448,"fields":[{"posicao":1,"descricao":"SERVIDOR","columnName":"SERVIDOR","columnValue":"SERVIDOR","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"servidor-ver","columnOrigem":"ID","columnDestino":"ff.id"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":1,"descricao":"Competência","columnName":"MESANO","columnValue":"MESANO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":2,"descricao":"TIPO DE FOLHA","columnName":"TIPODEFOLHA","columnValue":"TIPODEFOLHA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoFolhaDePagamento","valorPadrao":[null,"NORMAL","COMPLEMENTAR","FERIAS","SALARIO_13","RESCISAO","ADIANTAMENTO_NORMAL","ADIANTAMENTO_FERIAS","ADIANTAMENTO_13_SALARIO","RESCISAO_COMPLEMENTAR","MANUAL"],"escondido":false,"agrupador":false},{"posicao":3,"descricao":"ADIMISSÃO","columnName":"DATAADMISSAO","columnValue":"DATAADMISSAO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":4,"descricao":"CARGO","columnName":"CARGO","columnValue":"CARGO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":5,"descricao":"VINCULO","columnName":"VINCULO","columnValue":"VINCULO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":6,"descricao":"CH","columnName":"CH","columnValue":"CH","tipoAlinhamento":"DIREITA","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":7,"descricao":"VENCIMENTO BASE","columnName":"VENCIMENTOBASE","columnValue":"VENCIMENTO","tipoAlinhamento":"ESQUERDA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":8,"descricao":"OUTRAS VERBAS","columnName":"OUTRASVERBAS","columnValue":"OUTRASVERBAS","tipoAlinhamento":"DIREITA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":9,"descricao":"SALARIO BRUTO","columnName":"SALARIOBRUTO","columnValue":"SALARIOBRUTO","tipoAlinhamento":"DIREITA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":10,"descricao":"DESCONTOS","columnName":"DESCONTOS","columnValue":"DESCONTOS","tipoAlinhamento":"DIREITA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":11,"descricao":"SALARIO LIQUIDO","columnName":"SALARIOLIQUIDO","columnValue":"SALARIOLIQUIDO","tipoAlinhamento":"DIREITA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":12,"descricao":"ID","columnName":"ID","columnValue":"ID","tipoAlinhamento":"DIREITA","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":true,"agrupador":false}],"pesquisaveis":[{"descricao":"Exercício","columnName":"folha.ano","columnValue":null,"tipo":"INTEGER","operacaoPadrao":"IGUAL","tipoEnum":null,"valorPadrao":"$ANO","tipoMultiSelect":null},{"descricao":"Mês","columnName":"folha.mes","columnValue":null,"tipo":"ENUM","operacaoPadrao":"IGUAL","tipoEnum":"MesInteiroIniciandoEmZero","valorPadrao":"$MES","tipoMultiSelect":null},{"descricao":"Servidor","columnName":"pf.nome","columnValue":null,"tipo":"STRING","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Tipo de Folha","columnName":"folha.tipofolhadepagamento","columnValue":null,"tipo":"ENUM","operacaoPadrao":null,"tipoEnum":"br.com.webpublico.enums.TipoFolhaDePagamento","valorPadrao":"","tipoMultiSelect":null},{"descricao":"Modalidade de Provimento","columnName":"mcfp.id","columnValue":null,"tipo":"MULTI_SELECT","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":"MODALIDADE_CONTRATO_FP"},{"descricao":"Lotação","columnName":"ho.subordinada_id","columnValue":null,"tipo":"MULTI_SELECT","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":"UNIDADE_ADMINISTRATIVA"},{"descricao":"Cargo","columnName":"cargo.id","columnValue":null,"tipo":"MULTI_SELECT","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":"CARGO"},{"descricao":"Administração Pública","columnName":"ent.tipoadministracao","columnValue":null,"tipo":"ENUM","operacaoPadrao":null,"tipoEnum":"br.com.webpublico.enums.TipoAdministracao","valorPadrao":"","tipoMultiSelect":null},{"descricao":"Função Gratificada","columnName":"fg.descricao","columnValue":null,"tipo":"MULTI_SELECT","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":"FUNCAO_GRATIFICADA"},{"descricao":"Vinculo","columnName":" mcfp.descricao","columnValue":null,"tipo":"STRING","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null}],"tabs":[],"paineis":[]}';
BEGIN
update paginaprefeituraportal set conteudo = texto where nome = 'Pessoal' and chave = 'servidor';
END;
