DECLARE
texto CLOB := '{"consulta":"select distinct\r\n    bem.id as id,\r\n    bem.identificacao as registroPatrimonial,\r\n    bem.descricao as descricaoBem,\r\n    to_char(bem.dataaquisicao, ''dd/mm/yyyy'') as dataAquisicao,\r\n    case when estado.SITUACAOCONSERVACAOBEM = ''USO_NORMAL'' then ''Uso Normal'' \r\n    else estado.situacaoconservacaobem end as situacaoConservacaoBem,\r\n    estado.estadobem as estadoBem,\r\n    grupo.tipobem as tipoBem,\r\n    estado.tipoaquisicaobem as tipoAquisicaoBem,\r\n    ''R$ '' || estado.valororiginal as valorAquisicao,\r\n    vwadm.codigo || '' - '' || vwadm.descricao as unidadeAdm,\r\n    vworc.descricao as unidadeOrc,\r\n    pfresponsavel.nome as responsavel\r\nfrom bem\r\n         inner join eventobem evento on bem.id = evento.bem_id\r\n         inner join estadobem estado on evento.estadoresultante_id = estado.id\r\n         inner join grupobem grupo on estado.grupobem_id = grupo.id\r\n         inner join vwhierarquiaadministrativa vwadm on vwadm.subordinada_id = estado.detentoraadministrativa_id\r\n         inner join vwhierarquiaorcamentaria vworc on vworc.subordinada_id = estado.detentoraorcamentaria_id\r\n         left join responsavelpatrimonio rp on rp.unidadeorganizacional_id = estado.detentoraadministrativa_id\r\n    and $ANO between extract(year from rp.iniciovigencia) and coalesce(extract(year from rp.fimvigencia), $ANO)\r\n    left join pessoafisica pfresponsavel on rp.responsavel_id = pfresponsavel.id\r\nwhere evento.dataoperacao = (select max(evmax.dataoperacao) from eventobem evmax where evmax.bem_id = bem.id)\r\n  and $ANO between extract(year from vwadm.iniciovigencia) and coalesce(extract(year from vwadm.fimvigencia), $ANO)\r\n  and estado.valororiginal > 0\r\n  and evento.situacaoeventobem not in (''BAIXADO'', ''ESTORNADO'')\r\n  and trunc(bem.dataaquisicao) BETWEEN to_date(''01/01/$ANO'', ''dd/MM/yyyy'') AND to_date(''31/12/$ANO'', ''dd/MM/yyyy'')  \r\n  and rownum = 1\r\n  $WHERE","count":"select count(1)\r\nfrom bem\r\n         inner join eventobem evento on bem.id = evento.bem_id\r\n         inner join estadobem estado on evento.estadoresultante_id = estado.id\r\n         inner join grupobem grupo on estado.grupobem_id = grupo.id\r\n         inner join vwhierarquiaadministrativa vwadm on vwadm.subordinada_id = estado.detentoraadministrativa_id\r\n         inner join vwhierarquiaorcamentaria vworc on vworc.subordinada_id = estado.detentoraorcamentaria_id\r\n         left join responsavelpatrimonio rp on rp.unidadeorganizacional_id = estado.detentoraadministrativa_id\r\n    and $ANO between extract(year from rp.iniciovigencia) and coalesce(extract(year from rp.fimvigencia), $ANO)\r\n    left join pessoafisica pfresponsavel on rp.responsavel_id = pfresponsavel.id\r\nwhere evento.dataoperacao = (select max(evmax.dataoperacao) from eventobem evmax where evmax.bem_id = bem.id)\r\n  and $ANO between extract(year from vwadm.iniciovigencia) and coalesce(extract(year from vwadm.fimvigencia), $ANO)\r\n  and estado.valororiginal > 0\r\n  and evento.situacaoeventobem not in (''BAIXADO'', ''ESTORNADO'')\r\n  and trunc(bem.dataaquisicao) BETWEEN to_date(''01/01/$ANO'', ''dd/MM/yyyy'') AND to_date(''31/12/$ANO'', ''dd/MM/yyyy'')  \r\n  and rownum = 1\r\n  $WHERE","totalRegistros":1,"fields":[{"posicao":1,"descricao":"ID","columnName":"ID","columnValue":"ID","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":true},{"posicao":2,"descricao":"Registro Patrimonial:","columnName":"REGISTROPATRIMONIAL","columnValue":"REGISTROPATRIMONIAL","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":3,"descricao":"Descrição:","columnName":"DESCRICAOBEM","columnValue":"DESCRICAOBEM","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":4,"descricao":"Data de Aquisição:","columnName":"DATAAQUISICAO","columnValue":"DATAAQUISICAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":5,"descricao":"Situação de Conservação:","columnName":"SITUACAOCONSERVACAOBEM","columnValue":"SITUACAOCONSERVACAOBEM","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":6,"descricao":"Estado do Bem:","columnName":"ESTADOBEM","columnValue":"ESTADOBEM","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":7,"descricao":"Tipo do Bem:","columnName":"TIPOBEM","columnValue":"TIPOBEM","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":8,"descricao":"Tipo de Aquisição do Bem:","columnName":"TIPOAQUISICAOBEM","columnValue":"TIPOAQUISICAOBEM","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":9,"descricao":"Valor de Aquisição:","columnName":"VALORAQUISICAO","columnValue":"VALORAQUISICAO","tipoAlinhamento":"ESQUERDA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":10,"descricao":"Unidade Administrativa:","columnName":"UNIDADEADM","columnValue":"UNIDADEADM","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":11,"descricao":"Unidade Orçamentária:","columnName":"UNIDADEORC","columnValue":"UNIDADEORC","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":12,"descricao":"Responsável pelo Bem:","columnName":"RESPONSAVEL","columnValue":"RESPONSAVEL","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false}],"pesquisaveis":[],"tabs":[]}';
BEGIN
update PAGINAPREFEITURAPORTAL set CONTEUDO = texto where NOME = 'Detalhes do Bem';
END;
