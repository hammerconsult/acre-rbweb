declare
texto clob := '{"consulta":"select diaria.codigo                                                                      as numero,\r\n       trunc(diaria.datalancamento)                                                       as data,\r\n       diaria.tipoproposta                                                                as tipo,\r\n       pf.nome                                                                            as pessoa,\r\n       via.itinerario                                                                     as itinerario,\r\n       diaria.objetivo                                                                    as motivo,\r\n       case when via.meiodetransporte is null then ''OUTROS'' else via.meiodetransporte end as meiodetransporte,\r\n       diaria.valor                                                                       as valor,\r\n       to_char(via.datainicialsaida, ''dd/MM/yyyy HH24:mi:ss'')                             as saida,\r\n       to_char(via.datainicialretorno, ''dd/MM/yyyy HH24:mi:ss'')                           as retorno,\r\n       ''Núm.: '' || emp.numero || '', Data: '' || to_char(emp.dataempenho, ''dd/MM/yyyy'') || '', Credor: '' ||\r\n       coalesce(pfemp.nome, pjemp.razaosocial) || '', Valor: '' || emp.valor                as empenho,\r\n       diaria.id as id\r\nfrom propostaconcessaodiaria diaria\r\n         inner join empenho emp on diaria.id = emp.propostaconcessaodiaria_id\r\n         left join viagemdiaria via on diaria.id = via.propostaconcessaodiaria_id\r\n         left join pessoafisica pf on diaria.pessoafisica_id = pf.id\r\n         inner join exercicio ex on diaria.exercicio_id = ex.id\r\n         left join pessoafisica pfemp on emp.fornecedor_id = pfemp.id\r\n         left join pessoajuridica pjemp on emp.fornecedor_id = pjemp.id\r\nwhere emp.id not in (select est.empenho_id from empenhoestorno est)\r\n  and diaria.tipoproposta <> ''SUPRIMENTO_FUNDO''\r\n  and ex.ano = $ANO\r\n  and diaria.unidadeorganizacional_id in (select UNIDADE_ID from UNIDADEPREFEITURAPORTAL where PREFEITURA_ID = $PREFEITURAPORTAL_ID) $WHERE\r\n  order by to_number(diaria.codigo)","count":"select count(1)\r\nfrom propostaconcessaodiaria diaria\r\n         inner join empenho emp on diaria.id = emp.propostaconcessaodiaria_id\r\n         left join viagemdiaria via on diaria.id = via.propostaconcessaodiaria_id\r\n         left join pessoafisica pf on diaria.pessoafisica_id = pf.id\r\n         inner join exercicio ex on diaria.exercicio_id = ex.id\r\n         left join pessoafisica pfemp on emp.fornecedor_id = pfemp.id\r\n         left join pessoajuridica pjemp on emp.fornecedor_id = pjemp.id\r\nwhere emp.id not in (select est.empenho_id from empenhoestorno est)\r\n  and diaria.tipoproposta <> ''SUPRIMENTO_FUNDO''\r\n  and ex.ano = $ANO\r\n  and diaria.unidadeorganizacional_id in (select UNIDADE_ID from UNIDADEPREFEITURAPORTAL where PREFEITURA_ID = $PREFEITURAPORTAL_ID) $WHERE","totalRegistros":245,"fields":[{"posicao":1,"descricao":"NÚMERO","columnName":"NUMERO","columnValue":"NUMERO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"diaria-ver","columnOrigem":"ID","columnDestino":"diaria.id"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":2,"descricao":"DATA","columnName":"DATA","columnValue":"DATA","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":3,"descricao":"TIPO","columnName":"TIPO","columnValue":"TIPO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoProposta","valorPadrao":[null,"SUPRIMENTO_FUNDO","CONCESSAO_DIARIA","CONCESSAO_DIARIACAMPO","COLABORADOR_EVENTUAL"],"escondido":false},{"posicao":4,"descricao":"PESSOA","columnName":"PESSOA","columnValue":"PESSOA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":5,"descricao":"ITINERÁRIO","columnName":"ITINERARIO","columnValue":"ITINERARIO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":6,"descricao":"MOTIVO","columnName":"MOTIVO","columnValue":"MOTIVO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":7,"descricao":"MEIO DE TRANSPORTE","columnName":"MEIODETRANSPORTE","columnValue":"MEIODETRANSPORTE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.MeioDeTransporte","valorPadrao":[null,"AEREO","TERRESTRE","OUTROS"],"escondido":false},{"posicao":8,"descricao":"VALOR","columnName":"VALOR","columnValue":"VALOR","tipoAlinhamento":"DIREITA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":9,"descricao":"SAÍDA","columnName":"SAIDA","columnValue":"SAIDA","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":10,"descricao":"RETORNO","columnName":"RETORNO","columnValue":"RETORNO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":11,"descricao":"EMPENHO","columnName":"EMPENHO","columnValue":"EMPENHO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":12,"descricao":"ID","columnName":"ID","columnValue":"ID","tipoAlinhamento":null,"totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":true}],"pesquisaveis":[{"descricao":"Unidade","columnName":"diaria.unidadeorganizacional_id","columnValue":null,"tipo":"MULTI_SELECT","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":"UNIDADE_ORCAMENTARIA"},{"descricao":"Responsavel","columnName":"pf.id","columnValue":null,"tipo":"MULTI_SELECT","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":"PESSOA_EMPENHO"},{"descricao":"Tipo Viagem","columnName":"via.tipoviagem","columnValue":null,"tipo":"ENUM","operacaoPadrao":null,"tipoEnum":"br.com.webpublico.enums.TipoViagem","valorPadrao":[null,"ESTADUAL","INTERESTADUAL","INTERNACIONAL"],"tipoMultiSelect":null},{"descricao":"Tipo de Proposta","columnName":"diaria.tipoproposta","columnValue":null,"tipo":"ENUM","operacaoPadrao":null,"tipoEnum":"br.com.webpublico.enums.TipoProposta","valorPadrao":[null,"SUPRIMENTO_FUNDO","CONCESSAO_DIARIA","CONCESSAO_DIARIACAMPO","COLABORADOR_EVENTUAL"],"tipoMultiSelect":null},{"descricao":"Meio de Transporte","columnName":"via.meiodetransporte","columnValue":null,"tipo":"ENUM","operacaoPadrao":null,"tipoEnum":"br.com.webpublico.enums.MeioDeTransporte","valorPadrao":[null,"AEREO","TERRESTRE","OUTROS"],"tipoMultiSelect":null},{"descricao":"Número","columnName":"diaria.codigo","columnValue":null,"tipo":"STRING","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Motivo","columnName":"diaria.objetivo","columnValue":null,"tipo":"STRING","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Itinerário de Viajem","columnName":"via.itinerario","columnValue":null,"tipo":"STRING","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null}],"tabs":[]}';
begin
update paginaprefeituraportal set conteudo = texto where nome = 'Diária';
end;
