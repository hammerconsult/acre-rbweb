DECLARE
texto CLOB := '{"consulta":"select distinct\r\n    vw.codigo || '' - '' || vw.descricao as unidade,\r\n    coalesce(b.descricao, obj.descricao) as descricao,\r\n    obj.TIPOAQUISICAOOBJETOFROTA       as tipoAquisicaoOF,\r\n    obj.DATAFINALGARANTIA              as dataFinalGarantia,\r\n    case when coalesce(obj.cedido, 0) = 0 then ''Não'' else ''Sim'' end as cedido,\r\n    v.PLACA                            as placa,\r\n    v.ANOFABRICACAO                    as anoFabricacao,\r\n    v.KMAQUISICAO                      as kmAquisicao,\r\n    v.KMFIMGARANTIA                    as kmFimGarantia,\r\n    ct.numerotermo                     as contrato_numero,\r\n    v.id                               as idVeiculo\r\nfrom veiculo v\r\n         inner join objetofrota obj on obj.id = v.id\r\n         inner join unidadeobjetofrota ubf on ubf.objetofrota_id = obj.id\r\n         inner join vwhierarquiaadministrativa vw on vw.subordinada_id = ubf.unidadeorganizacional_id\r\n         left join bem b on obj.bem_id = b.id\r\n         left join contrato ct on obj.contrato_id = ct.id\r\n         left join cor c on v.cor_id = c.id\r\nwhere sysdate between vw.inicioVigencia and coalesce(vw.fimVigencia, sysdate)\r\n  and sysdate between trunc(ubf.inicioVigencia) and coalesce(trunc(ubf.fimVigencia), sysdate)\r\norder by vw.codigo || '' - '' || vw.descricao, coalesce(b.descricao, obj.descricao) $WHERE","count":"select distinct count(v.id)\r\nfrom veiculo v\r\n         inner join objetofrota obj on obj.id = v.id\r\n         inner join unidadeobjetofrota ubf on ubf.objetofrota_id = obj.id\r\n         inner join vwhierarquiaadministrativa vw on vw.subordinada_id = ubf.unidadeorganizacional_id\r\n         left join bem b on obj.bem_id = b.id\r\n         left join contrato ct on obj.contrato_id = ct.id\r\n         left join cor c on v.cor_id = c.id\r\nwhere sysdate between vw.inicioVigencia and coalesce(vw.fimVigencia, sysdate)\r\n  and sysdate between trunc(ubf.inicioVigencia) and coalesce(trunc(ubf.fimVigencia), sysdate)","totalRegistros":12,"fields":[{"posicao":1,"descricao":"Unidade","columnName":"UNIDADE","columnValue":"UNIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":true},{"posicao":2,"descricao":"Descrição","columnName":"DESCRICAO","columnValue":"DESCRICAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"veiculo-ver","columnOrigem":"IDVEICULO","columnDestino":"v.id"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":3,"descricao":"Tipo Aquisição","columnName":"TIPOAQUISICAOOF","columnValue":"TIPOAQUISICAOOF","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoAquisicaoObjetoFrota","valorPadrao":[null,"PROPRIO","ALUGADO"],"escondido":false,"agrupador":false},{"posicao":4,"descricao":"Data Final da Garantia","columnName":"DATAFINALGARANTIA","columnValue":"DATAFINALGARANTIA","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":5,"descricao":"Cedido","columnName":"CEDIDO","columnValue":"CEDIDO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":6,"descricao":"Placa","columnName":"PLACA","columnValue":"PLACA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":7,"descricao":"Ano Fabricação","columnName":"ANOFABRICACAO","columnValue":"ANOFABRICACAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":8,"descricao":"KM Aquisição","columnName":"KMAQUISICAO","columnValue":"KMAQUISICAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"DECIMAL","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":9,"descricao":"KM Fim Garantia","columnName":"KMFIMGARANTIA","columnValue":"KMFIMGARANTIA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"DECIMAL","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":10,"descricao":"Número Contrato","columnName":"CONTRATO_NUMERO","columnValue":"CONTRATO_NUMERO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":11,"descricao":"IDVEICULO","columnName":"IDVEICULO","columnValue":"IDVEICULO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":true,"agrupador":false}],"pesquisaveis":[],"tabs":[],"paineis":[]}';
BEGIN
update PAGINAPREFEITURAPORTAL
set CONTEUDO = texto
where NOME = 'Frota de Veículos'
  and CHAVE = 'frota-veiculos';
END;
