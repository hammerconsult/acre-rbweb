DECLARE
texto CLOB := '{"consulta":"select distinct\r\n    cc.NUMEROTERMO as numeroTermo,\r\n    cc.NUMERO as numero,\r\n    trunc (cc.DATAASSINATURA) as dataassinatura,\r\n    cc.OBJETOCONVENIO as Objeto,\r\n    vwh.codigo|| '' - '' || vwh.descricao as convenente,\r\n    cc.VALORCONVENIO as valor,\r\n    cc.VALORCONTRAPARTIDA as valorcontrapartida,\r\n    cc.VALORREPASSE as valorrepasse,\r\n    trunc(cc.VIGENCIAINICIAL) as vigenciainicial,\r\n    trunc(cc.VIGENCIAFINAL) as vigenciafinal,\r\n    epj.cnpj ||'' - '' || epj.razaosocial as unidadeconcedente,\r\n    coalesce(pf.cpf, pj.cnpj) || '' - '' || coalesce(pf.nome,pj.razaosocial) as unidadeexecutora,\r\n    cc.ID as id,\r\n    e.unidadeorganizacionalorc_id as IDUNIDADEORCAMENTARIA,\r\n    epj.razaosocial as IDUNIDADECONCEDENTE,\r\n    coalesce(pf.nome,pj.razaosocial) as IDUNIDADEEXCECUTORA\r\n\r\nfrom CONVENIORECEITA cc\r\n         left join entidade e on cc.ENTIDADECONVENENTE_ID = e.ID\r\n         left join unidadeorganizacional h on e.UNIDADEORGANIZACIONALORC_ID = h.id\r\n         left join  VWHIERARQUIAORCAMENTARIA vwh on vwh.SUBORDINADA_ID = h.id and trunc(cc.vigenciainicial) between vwh.iniciovigencia and coalesce(vwh.fimvigencia,trunc(cc.vigenciainicial))\r\n         left join exercicio ex on cc.exercicio_id = ex.id\r\n         left join ENTIDADEREPASSADORA er on cc.ENTIDADEREPASSADORA_ID = er.ID\r\n         left join PESSOAJURIDICA epj on er.PESSOAJURIDICA_ID = epj.ID\r\n         left join Pessoa p on p.id = cc.pessoa_id\r\n         left join pessoajuridica pj on p.id = pj.id\r\n         left join pessoafisica pf on p.id = pf.id\r\n\r\n         $WHERE","count":"select count(1)\r\nfrom CONVENIORECEITA cc\r\n         left join entidade e on cc.ENTIDADECONVENENTE_ID = e.ID\r\n         left join unidadeorganizacional h on e.UNIDADEORGANIZACIONALORC_ID = h.id\r\n         left join  VWHIERARQUIAORCAMENTARIA vwh on vwh.SUBORDINADA_ID = h.id and trunc(cc.vigenciainicial) between vwh.iniciovigencia and coalesce(vwh.fimvigencia,trunc(cc.vigenciainicial))\r\n         left join exercicio ex on cc.exercicio_id = ex.id\r\n         left join ENTIDADEREPASSADORA er on cc.ENTIDADEREPASSADORA_ID = er.ID\r\n         left join PESSOAJURIDICA epj on er.PESSOAJURIDICA_ID = epj.ID\r\n                  left join Pessoa p on p.id = cc.pessoa_id\r\n         left join pessoajuridica pj on p.id = pj.id\r\n         left join pessoafisica pf on p.id = pf.id\r\n\r\n         $WHERE","totalRegistros":3951,"fields":[{"posicao":1,"descricao":"Número do Termo","columnName":"NUMEROTERMO","columnValue":"NUMEROTERMO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":2,"descricao":"Número","columnName":"NUMERO","columnValue":"NUMERO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":3,"descricao":"Data de Assinatura","columnName":"DATAASSINATURA","columnValue":"DATAASSINATURA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":4,"descricao":"Objeto","columnName":"OBJETO","columnValue":"OBJETO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":5,"descricao":"Convenente","columnName":"CONVENENTE","columnValue":"CONVENENTE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"hierarquia-orcamentaria-ver","columnOrigem":"IDUNIDADEORCAMENTARIA","columnDestino":"ho.SUBORDINADA_ID"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":6,"descricao":"Valor","columnName":"VALOR","columnValue":"VALOR","tipoAlinhamento":"ESQUERDA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":7,"descricao":"Valor Contrapartida","columnName":"VALORCONTRAPARTIDA","columnValue":"VALORCONTRAPARTIDA","tipoAlinhamento":"ESQUERDA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":8,"descricao":"Valor Repasse","columnName":"VALORREPASSE","columnValue":"VALORREPASSE","tipoAlinhamento":"ESQUERDA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":9,"descricao":"Inicio de Vigência","columnName":"VIGENCIAINICIAL","columnValue":"VIGENCIAINICIAL","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":10,"descricao":"Final de Vigência","columnName":"VIGENCIAFINAL","columnValue":"VIGENCIAFINAL","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":11,"descricao":"Unidade Concedente","columnName":"UNIDADECONCEDENTE","columnValue":"UNIDADECONCEDENTE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"pessoa-ver","columnOrigem":"IDUNIDADECONCEDENTE","columnDestino":"coalesce(pf.nome,pj.razaosocial)"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":12,"descricao":"Unidade Excecutora","columnName":"UNIDADEEXECUTORA","columnValue":"UNIDADEEXECUTORA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"pessoa-ver","columnOrigem":"IDUNIDADEEXCECUTORA","columnDestino":"coalesce(pf.nome,pj.razaosocial)"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":13,"descricao":"ID","columnName":"ID","columnValue":"ID","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":true},{"posicao":14,"descricao":"IDUNIDADEORCAMENTARIA","columnName":"IDUNIDADEORCAMENTARIA","columnValue":"IDUNIDADEORCAMENTARIA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":true},{"posicao":15,"descricao":"IDUNIDADECONCEDENTE","columnName":"IDUNIDADECONCEDENTE","columnValue":"IDUNIDADECONCEDENTE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":true},{"posicao":16,"descricao":"IDUNIDADEEXCECUTORA","columnName":"IDUNIDADEEXCECUTORA","columnValue":"IDUNIDADEEXCECUTORA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":true}],"pesquisaveis":[],"tabs":[]}';
BEGIN
update PAGINAPREFEITURAPORTAL set CONTEUDO = texto where NOME = 'Detalhe do Convênio';
END;
