<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:co="http://java.sun.com/jsf/composite/components/contabil"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <script type="text/javascript">
            function scrollLog() {
                var componente = document.getElementById('log');
                componente.scrollTop = 99999999;
            }

        </script>
        <h:form id="Formulario">


            <co:titulo-panel titulo="Portal da Transparência"/>

            <p:tabView id="tabView" effect="fade" effectDuration="1">
                <p:tab title="Geral">
                    <h:panelGrid columns="2" id="geral">
                        <fc:outputLabelObrigatorio value="URL:"/>
                        <p:inputText value="#{portalTransparenciaNovoControlador.selecionado.url}"
                                     size="50" title="Informe o IP do servidor">
                            <p:ajax event="blur" process="@this" update="@none"/>
                        </p:inputText>

                        <fc:outputLabelObrigatorio value="Data: " for="data"/>
                        <h:panelGrid columns="3">
                            <p:calendar id="data"
                                        value="#{portalTransparenciaNovoControlador.selecionado.dataOperacao}"
                                        pattern="dd/MM/yyyy"
                                        title="Informe a Data de operação"
                                        size="21"
                                        navigator="true"
                                        showButtonPanel="true"
                                        style="margin-left: -4px"

                                        onkeypress="mascara(this, mdata)">
                                <p:ajax event="dateSelect"
                                        update="@form"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"/>
                                <p:ajax event="valueChange"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        update="@form"/>
                            </p:calendar>
                            <co:mensagem
                                mensagem="Toda a movimentação de atualização do portal será baseada nesta data."/>
                        </h:panelGrid>

                    </h:panelGrid>


                </p:tab>
                <p:tab title="Unidade">
                    <p:outputPanel id="panelUnidades">


                        <fc:pesquisaUnidadeOrganizacional tipoHierarquia="ORCAMENTARIA"
                                                          listaDeHierarquias="#{portalTransparenciaNovoControlador.selecionado.unidades}"
                                                          habilitaUnidadeGestora="false"
                                                          apenasOrgaoUnidadeUsuarioLogado="true"/>

                    </p:outputPanel>
                </p:tab>
                <p:tab title="Tipo de Movimento">
                    <p:outputPanel id="gridTipos">
                        <h:panelGrid columns="2">
                            <h:outputText value="Marcar/Desmarcar Todos"
                                          styleClass="negrito"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionarTodos}">
                                <p:ajax event="change" process="@this" update="gridTipos"
                                        listener="#{portalTransparenciaNovoControlador.marcarDesmarcarTodos()}"/>
                            </p:selectBooleanCheckbox>

                            <h:outputText value="Enviar Unidades?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarUnidades}"/>
                            <h:outputText value="Enviar Ato Legal?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarAtoLegal}"/>
                            <h:outputText value="Enviar Dados da Prefeitura?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarDadosDaPrefeitura}"/>
                            <h:outputText value="Enviar Planejamento da Despesa?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarPlanejamentoDespesa}"/>
                            <h:outputText value="Enviar Planejamento da Receita?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarPlanejamentoReceita}"/>
                            <h:outputText value="Enviar Alteração Orçamentária?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarAlteracaoOrcamentaria}"/>
                            <h:outputText value="Enviar Execução Orçamentária?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarExecucaoOrcamentaria}"/>
                            <h:outputText value="Enviar Restos a Pagar?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarRestoAPagar}"/>
                            <h:outputText value="Enviar Receita Realizada?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarReceitaRealizada}"/>
                            <h:outputText value="Enviar Financeiro?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarFinanceiro}"/>
                            <h:outputText value="Enviar Diária?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarDiaria}"/>
                            <h:outputText value="Enviar Licitação?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarLicitacao}"/>
                            <h:outputText value="Enviar Contrato?"/>
                            <h:panelGrid columns="3">
                                <p:selectBooleanCheckbox
                                    value="#{portalTransparenciaNovoControlador.selecionado.enviarContrato}"/>

                                <h:outputText value="Enviar Licitação?"/>
                                <p:selectBooleanCheckbox
                                    value="#{portalTransparenciaNovoControlador.selecionado.enviarContratoLicitacao}"/>
                            </h:panelGrid>
                            <h:outputText value="Enviar Itens/Lote do Pregão?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarItensLotesMapaComparativo}"/>
                            <h:outputText value="Enviar Link?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarLink}"/>
                            <h:outputText value="Enviar Glossário?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarGlossario}"/>
                            <h:outputText value="Enviar Anexos?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarAnexos}"/>
                            <h:outputText value="Enviar Convênios?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarConvenios}"/>
                            <h:outputText value="Enviar Dados do RH?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarDadosRh}"/>
                            <h:outputText value="Enviar Obras?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarObra}"/>
                            <h:outputText value="Enviar Calamidades Públicas?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarCalamidadePublica}"/>
                            <h:outputText value="Enviar Dicionário de Dados?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarDicionarioDeDados}"/>
                            <h:outputText value="Enviar Bens?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarBem}"/>
                            <h:outputText value="Enviar LDO?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarLDO}"/>
                            <h:outputText value="Enviar LOA?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarLOA}"/>
                            <h:outputText value="Enviar PPA?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarPPA}"/>
                            <h:outputText value="Enviar Emenda Parlamentar?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarEmendaParlamentar}"/>

                            <h:outputText value="Enviar Institucional?"/>
                            <p:selectBooleanCheckbox
                                value="#{portalTransparenciaNovoControlador.selecionado.enviarInstitucional}"/>

                        </h:panelGrid>
                    </p:outputPanel>
                </p:tab>
                <p:tab title="Entidades">
                    <p:outputPanel id="gridPrefeitura">

                        <p:commandButton value="Nova Entidade"
                                         icon="ui-icon-plusthick"
                                         title="Clique para cadastrar nova entidade"
                                         actionListener="#{portalTransparenciaNovoControlador.novaPrefeitura}"
                                         process="@this"
                                         disabled="#{portalTransparenciaNovoControlador.selecionado.prefeitura ne null}"
                                         update=":Formulario:tabView:gridPrefeitura"/>


                        <p:outputPanel
                            rendered="#{portalTransparenciaNovoControlador.selecionado.prefeitura ne null}">
                            <h:panelGrid columns="2">

                                <fc:outputLabelObrigatorio for="nomePrefeitura" value="Nome:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.nome}"
                                    title="Informe o nome da Prefeitura"
                                    id="nomePrefeitura"
                                    size="50"/>

                                <fc:outputLabelObrigatorio for="identificador" value="Identificador:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.identificador}"
                                    title="Informe o identificador da Prefeitura"
                                    id="identificador"
                                    size="50"/>

                                <fc:outputLabelObrigatorio for="reduzido" value="Nome Reduzido:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.nomereduzido}"
                                    title="Informe o nome reduzido da Prefeitura"
                                    id="reduzido"
                                    size="50"/>

                                <h:outputText value="Principal: "/>
                                <p:selectBooleanCheckbox
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.principal}"/>

                                <h:outputText value="Habilitar Banner Calamidade Pública? "/>
                                <p:selectBooleanCheckbox
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.habilitarBannerCalamidade}"/>


                                <fc:outputLabelObrigatorio for="esfera" value="Esfera do Poder:"/>
                                <h:selectOneMenu
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.esferaDoPoder}"
                                    id="esfera">
                                    <f:selectItems value="#{portalTransparenciaNovoControlador.esferas}"/>

                                </h:selectOneMenu>


                                <fc:outputLabelObrigatorio for="enderecoPrefeitura" value="Endereço:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.endereco}"
                                    title="Informe o Endereço da Prefeitura"
                                    id="enderecoPrefeitura"
                                    size="50"/>

                                <fc:outputLabelObrigatorio for="horarioPrefeitura"
                                                           value="Horário de Atendimento:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.horarioAtendimento}"
                                    title="Informe o Horário de Atendimento da Prefeitura"
                                    id="horarioPrefeitura"
                                    size="50"/>


                                <fc:outputLabelObrigatorio for="contatoPrefeitura"
                                                           value="Telefone:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.contato}"
                                    title="Informe o telefone de contato"
                                    id="contatoPrefeitura"
                                    size="50"/>


                                <fc:outputLabelObrigatorio for="emailTecnologia"
                                                           value="Email da tecnologia:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.emailTecnologia}"
                                    title="Informe o email de contato da Tecnologia"
                                    id="emailTecnologia"
                                    size="50"/>

                                <fc:outputLabelObrigatorio for="emailTecnologia"
                                                           value="Contato Tecnologia:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.contatoTecnologia}"
                                    title="Informe o telefone de contato da Tecnologia"
                                    id="contatoTecnologia"
                                    size="50"/>

                                <fc:outputLabelObrigatorio for="sitePrefeitura" value="Site:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.site}"
                                    title="Informe o Site da Prefeitura"
                                    id="sitePrefeitura"
                                    size="50"/>

                                <fc:outputLabelObrigatorio for="urlAcesso" value="URL Acesso Informação:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.urlAcessoInformacao}"
                                    title="Informe o URL Acesso Informação da Prefeitura"
                                    id="urlAcesso"
                                    size="50"/>

                                <fc:outputLabelObrigatorio for="urlOuvidoria" value="URL Ouvidoria:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.urlOuvidoria}"
                                    title="Informe o URL Ouvidoria da Prefeitura"
                                    id="urlOuvidoria"
                                    size="50"/>

                                <fc:outputLabelObrigatorio for="urlSic" value="URL E-SIC:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.urlESic}"
                                    title="Informe o URL E-SIC da Prefeitura"
                                    id="urlSic"
                                    size="50"/>

                                <h:outputLabel for="urlExternoPortalTransparencia"
                                               value="URL Externo do Portal da Transparencia:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.urlExternoPortalTransparencia}"
                                    title="Informe o URL externo do portal da transparência."
                                    id="urlExternoPortalTransparencia"
                                    size="50"/>

                                <fc:outputLabelObrigatorio for="atendimento" value="Atendimento Presencial:"/>
                                <p:editor
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.atendimentoPresencial}"
                                    width="300"
                                    height="200" styleClass="mtop20"/>

                                <fc:outputLabelObrigatorio for="descricaoEouv" value="Descrição E-OUV:"/>
                                <p:editor
                                    value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.descricaoEouv}"
                                    width="300"
                                    height="200" styleClass="mtop20"/>

                                <h:outputText value="Logo Topo:"/>
                                <p:outputPanel id="panelArquivoLogoTopo">
                                    <h:panelGrid columns="3" cellspacing="0" cellpadding="0">
                                        <p:fileUpload
                                            fileUploadListener="#{portalTransparenciaNovoControlador.uploadLogoTopo}"
                                            auto="true"
                                            mode="advanced"
                                            styleClass="mtop20"
                                            invalidFileMessage="Extensão do arquivo inválida."
                                            allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                                            update=":Formulario:tabView:panelArquivoLogoTopo"
                                            label="Procurar..."/>

                                        <h:outputText
                                            value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.logoTopo.nome}"
                                            rendered="#{portalTransparenciaNovoControlador.selecionado.prefeitura.logoTopo ne null}"
                                            styleClass="negrito mlef10"/>

                                        <p:commandButton
                                            rendered="#{portalTransparenciaNovoControlador.selecionado.prefeitura.logoTopo ne null}"
                                            icon="ui-icon-trash"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            styleClass="botao-transparente icone-30 mlef05"
                                            title="Clique para remover o arquivo."
                                            update=":Formulario:tabView:panelArquivoLogoTopo"
                                            onclick="if (!confirm('Tem certeza que deseja remover este arquivo?')) {return false; } else {aguarde.show();}"
                                            actionListener="#{portalTransparenciaNovoControlador.limparArquivoLogoTopo()}"/>

                                    </h:panelGrid>
                                </p:outputPanel>

                                <h:outputText value="Organograma:"/>
                                <p:outputPanel id="panelArquivoOrganograma">
                                    <h:panelGrid columns="3" cellspacing="0" cellpadding="0">
                                        <p:fileUpload
                                            fileUploadListener="#{portalTransparenciaNovoControlador.uploadOrganograma}"
                                            auto="true"
                                            mode="advanced"
                                            styleClass="mtop20"
                                            invalidFileMessage="Extensão do arquivo inválida."
                                            allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                                            update=":Formulario:tabView:panelArquivoOrganograma"
                                            label="Procurar..."/>

                                        <h:outputText
                                            value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.organograma.nome}"
                                            rendered="#{portalTransparenciaNovoControlador.selecionado.prefeitura.organograma ne null}"
                                            styleClass="negrito mlef10"/>

                                        <p:commandButton
                                            rendered="#{portalTransparenciaNovoControlador.selecionado.prefeitura.organograma ne null}"
                                            icon="ui-icon-trash"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            styleClass="botao-transparente icone-30 mlef05"
                                            title="Clique para remover o arquivo."
                                            update=":Formulario:tabView:panelArquivoOrganograma"
                                            onclick="if (!confirm('Tem certeza que deseja remover este arquivo?')) {return false; } else {aguarde.show();}"
                                            actionListener="#{portalTransparenciaNovoControlador.limparArquivoOrganograma()}"/>

                                    </h:panelGrid>
                                </p:outputPanel>
                            </h:panelGrid>

                            <p:separator/>
                            <fc:outputLabelObrigatorio for="conteudoBotoes" value="Botões Página incial:"/>
                            <p:editor
                                value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.botaoPaginainicial}"
                                width="800"
                                height="200" styleClass="mtop20"/>

                            <p:separator/>
                            <fc:outputLabelObrigatorio for="conteudo" value="Contéudo Página incial:"/>
                            <p:editor
                                value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.paginainicial}"
                                width="800"
                                height="200" styleClass="mtop20"/>

                            <p:separator/>
                            <h:panelGrid columns="1" style="width: 100%!important;">
                                <p:outputPanel>
                                    <h:panelGrid columns="4">
                                        <fc:outputLabelObrigatorio for="unidade" value="Unidade:"/>
                                        <p:autoComplete queryDelay="1000" widgetVar="unidade" id="unidade"
                                                        title="Selecione a Unidade Organizacional para receber a transferência."
                                                        completeMethod="#{portalTransparenciaNovoControlador.completaHierarquiaOrganizacional}"
                                                        value="#{portalTransparenciaNovoControlador.selecionado.unidade}"
                                                        var="uni" size="70"
                                                        itemLabel="#{uni}"
                                                        itemValue="#{uni.id}"
                                                        converter="#{portalTransparenciaNovoControlador.converterHierarquiaOrganizacional}"
                                                        maxResults="10"/>

                                        <p:commandButton title="Clique para adicionar a unidade."
                                                         value="Adicionar"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         actionListener="#{portalTransparenciaNovoControlador.adicionarUnidadePrefeitura}"
                                                         update=":Formulario:tabView:gridPrefeitura"
                                                         icon="ui-icon-circle-plus"
                                                         styleClass="padrao"/>

                                        <p:commandButton title="Clique para adicionar todas as unidade."
                                                         value="Adicionar Todas"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         actionListener="#{portalTransparenciaNovoControlador.adicionarTodasUnidadePrefeitura}"
                                                         update=":Formulario:tabView:gridPrefeitura"
                                                         icon="ui-icon-circle-plus"
                                                         styleClass="padrao"/>
                                    </h:panelGrid>
                                    <p:dataTable
                                        value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.unidades}"
                                        var="uni"
                                        styleClass="mtop10"
                                        rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                        paginator="true"
                                        rows="10"
                                        paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>UNIDADES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                        currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                        emptyMessage="Não foram localizados registros para serem apresentados."
                                        rowIndexVar="rowlx">
                                        <p:column headerText="Ações" style="text-align: center; width: 10%">

                                            <p:commandButton icon="ui-icon-trash"
                                                             title="Clique para remover este registro."
                                                             onstart="aguarde.show()"
                                                             oncomplete="aguarde.hide()"
                                                             process="@this"
                                                             styleClass="mrig05"
                                                             actionListener="#{portalTransparenciaNovoControlador.removerUnidadePrefeitura(uni)}"
                                                             onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                             update=":Formulario:tabView:gridPrefeitura"/>
                                        </p:column>
                                        <p:column headerText="Nome">
                                            <h:outputText value="#{uni.unidade}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:outputPanel>

                                <p:outputPanel>
                                    <h:panelGrid columns="10" id="modulo">
                                        <fc:outputLabelObrigatorio for="modulo" value="Modulo:"/>
                                        <h:selectOneMenu
                                            value="#{portalTransparenciaNovoControlador.selecionado.modulo.modulo}">
                                            <f:selectItems value="#{portalTransparenciaNovoControlador.modulos}"/>

                                        </h:selectOneMenu>
                                        <fc:outputLabelObrigatorio for="modulo" value="Ordem:"/>
                                        <p:inputText
                                            value="#{portalTransparenciaNovoControlador.selecionado.modulo.ordem}"
                                            size="6"/>
                                        <h:outputLabel for="modulo" value="Chave Página Destino:"/>
                                        <p:inputText
                                            value="#{portalTransparenciaNovoControlador.selecionado.modulo.chavePaginaDestino}"
                                            size="20"/>
                                        <h:outputLabel for="modulo" value="Ícone:"/>
                                        <p:inputText
                                            value="#{portalTransparenciaNovoControlador.selecionado.modulo.icone}"
                                            size="20"/>
                                        <p:commandButton title="Clique para adicionar o Módulo."
                                                         value="Adicionar"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         actionListener="#{portalTransparenciaNovoControlador.adicionarModuloPrefeitura}"
                                                         update=":Formulario:tabView:gridPrefeitura"
                                                         icon="ui-icon-circle-plus"
                                                         styleClass="padrao"/>

                                        <p:commandButton title="Clique para adicionar todos os Módulo."
                                                         value="Adicionar Todos"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         actionListener="#{portalTransparenciaNovoControlador.adicionarTodosModuloPrefeitura}"
                                                         update=":Formulario:tabView:gridPrefeitura"
                                                         icon="ui-icon-circle-plus"
                                                         styleClass="padrao"/>
                                    </h:panelGrid>
                                    <p:dataTable
                                        value="#{portalTransparenciaNovoControlador.selecionado.prefeitura.modulos}"
                                        var="modulo"
                                        sortBy="Ordem"
                                        styleClass="mtop10"
                                        rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                        paginator="true"
                                        rows="10"
                                        paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>MÓDULOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                        currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                        emptyMessage="Não foram localizados registros para serem apresentados."
                                        rowIndexVar="rowlx">
                                        <p:column headerText="Ações" style="text-align: center; width: 10%">

                                            <p:commandButton icon="ui-icon-pencil"
                                                             onstart="aguarde.show()"
                                                             oncomplete="aguarde.hide()"
                                                             process="@this"
                                                             styleClass="mrig05"
                                                             title="Clique para editar este registro."
                                                             actionListener="#{portalTransparenciaNovoControlador.editarModulo(modulo)}"
                                                             update=":Formulario:tabView:modulo"/>

                                            <p:commandButton icon="ui-icon-trash"
                                                             title="Clique para remover este registro."
                                                             onstart="aguarde.show()"
                                                             oncomplete="aguarde.hide()"
                                                             process="@this"
                                                             styleClass="mrig05"
                                                             actionListener="#{portalTransparenciaNovoControlador.removerModuloPrefeitura(modulo)}"
                                                             onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                             update=":Formulario:tabView:gridPrefeitura"/>
                                        </p:column>
                                        <p:column headerText="Módulo" style="text-align: center"
                                                  sortBy="#{modulo.modulo.descricao}">
                                            <h:outputText value="#{modulo.modulo.descricao}"/>
                                        </p:column>
                                        <p:column headerText="Ordem" style="text-align: center"
                                                  sortBy="#{modulo.ordem}">
                                            <h:outputText value="#{modulo.ordem}"/>
                                        </p:column>
                                        <p:column headerText="Chave Página Destino" style="text-align: center">
                                            <h:outputText value="#{modulo.chavePaginaDestino}"/>
                                        </p:column>
                                        <p:column headerText="Ícone" style="text-align: center">
                                            <h:outputText value="#{modulo.icone}"/>
                                        </p:column>

                                    </p:dataTable>
                                </p:outputPanel>

                            </h:panelGrid>

                            <p:commandButton title="Clique para salvar entidade."
                                             value="Salvar"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             actionListener="#{portalTransparenciaNovoControlador.adicionarPrefeitura}"
                                             update=":Formulario:tabView:gridPrefeitura"
                                             styleClass="mtop10 mrig05 prioritario"
                                             style="height: 30px;"
                                             icon="ui-icon-disk"/>

                            <p:commandButton value="Cancelar"
                                             id="cbCancelar"
                                             style="height: 30px;"
                                             styleClass="mtop10"
                                             icon="ui-icon-cancel"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             title="Clique para cancelar e retornar a página anterior"
                                             actionListener="#{portalTransparenciaNovoControlador.atribuirNull}"
                                             update=":Formulario:tabView:gridPrefeitura"
                                             immediate="true"/>
                        </p:outputPanel>


                        <p:dataTable value="#{portalTransparenciaNovoControlador.selecionado.prefeituras}"
                                     var="pre"
                                     styleClass="mtop10"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>Entidades&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Ações" style="text-align: center; width: 10%">
                                <p:commandButton id="btEditar"
                                                 icon="ui-icon-pencil"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="@this"
                                                 styleClass="mrig05"
                                                 title="Clique para editar este registro."
                                                 actionListener="#{portalTransparenciaNovoControlador.editarPrefeitura(pre)}"
                                                 update=":Formulario:tabView:gridPrefeitura"/>

                                <p:commandButton icon="ui-icon-trash"
                                                 title="Clique para remover este registro."
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="@this"
                                                 styleClass="mrig05"
                                                 actionListener="#{portalTransparenciaNovoControlador.removerPrefeitura(pre)}"
                                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                 update=":Formulario:tabView:gridPrefeitura"/>
                            </p:column>
                            <p:column headerText="Nome">
                                <h:outputText value="#{pre.nome}"/>
                            </p:column>

                            <p:column headerText="Identificador">
                                <h:outputText value="#{pre.identificador}"/>
                            </p:column>

                            <p:column headerText="Principal">
                                <h:outputText value="#{utilBean.converterBooleanSimOuNao(pre.principal)}"/>
                            </p:column>


                            <p:column headerText="Logo">
                                <h:outputText value="#{pre.logoTopo.nome}"/>
                            </p:column>
                        </p:dataTable>
                    </p:outputPanel>
                </p:tab>
                <p:tab title="Links">
                    <p:outputPanel id="link">
                        <p:commandButton value="Novo Link"
                                         icon="ui-icon-circle-plus"
                                         actionListener="#{portalTransparenciaNovoControlador.novoLink}"
                                         process="@this"
                                         title="Clique para criar novo Link"
                                         disabled="#{portalTransparenciaNovoControlador.selecionado.linkPortal ne null}"
                                         update=":Formulario:tabView:link"/>

                        <p:panel rendered="#{portalTransparenciaNovoControlador.selecionado.linkPortal ne null}"
                                 styleClass="mtop10">
                            <h:panelGrid columns="2">
                                <h:panelGrid columns="2">
                                    <fc:outputLabelObrigatorio value="Nome:"/>
                                    <p:inputText
                                        value="#{portalTransparenciaNovoControlador.selecionado.linkPortal.nomeLink}"
                                        size="70"/>
                                    <fc:outputLabelObrigatorio value="Site:"/>
                                    <p:inputText
                                        value="#{portalTransparenciaNovoControlador.selecionado.linkPortal.siteLink}"
                                        size="70"/>
                                </h:panelGrid>

                                <h:panelGrid columns="2">
                                    <p:fileUpload
                                        fileUploadListener="#{portalTransparenciaNovoControlador.uploadLogoLink}"
                                        styleClass="mtop10"
                                        auto="true"
                                        mode="advanced"
                                        allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                                        label="Procurar..."
                                    />
                                    <h2 class="azulnegrito">Tamanho da imagem: 160x70</h2>
                                </h:panelGrid>
                            </h:panelGrid>


                            <h:panelGrid columns="2">

                                <p:commandButton value="Adicionar"
                                                 actionListener="#{portalTransparenciaNovoControlador.adicionarLink}"
                                                 update=":Formulario:tabView:link"
                                                 styleClass="mtop10"
                                                 title="Clique para adicionar o link"
                                                 icon="ui-icon-circle-plus"/>

                                <p:commandButton value="Cancelar"
                                                 process="@this"
                                                 title="Clique para cancelar o cadastro do Link"
                                                 styleClass="mtop10"
                                                 update=":Formulario:tabView:link"
                                                 icon="ui-icon-cancel">
                                    <f:setPropertyActionListener value="#{null}"
                                                                 target="#{portalTransparenciaNovoControlador.selecionado.linkPortal}"/>
                                </p:commandButton>
                            </h:panelGrid>

                        </p:panel>

                        <p:dataTable value="#{portalTransparenciaNovoControlador.selecionado.links}"
                                     var="link"
                                     styleClass="mtop10"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>LINKS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">>
                            <p:column headerText="Ação" styleClass="centralizado">
                                <p:commandButton icon="ui-icon-trash"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="@this"
                                                 actionListener="#{portalTransparenciaNovoControlador.removerLink(link)}"
                                                 update=":Formulario:tabView:link"
                                                 title="Clique para remover este registro."
                                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"/>

                            </p:column>
                            <p:column headerText="Nome">
                                <h:outputText value="#{link.nomeLink}"/>
                            </p:column>
                            <p:column headerText="Link">
                                <h:outputText value="#{link.siteLink}"/>
                            </p:column>
                            <p:column headerText="Arquivo">
                                <h:outputText value="#{link.logo}"/>
                            </p:column>
                        </p:dataTable>
                    </p:outputPanel>
                </p:tab>
                <p:tab title="Glossários">
                    <p:outputPanel id="glossario">

                        <p:commandButton value="Novo Glossário"
                                         title="Clique para criar novo Glossário"
                                         icon="ui-icon-circle-plus"
                                         actionListener="#{portalTransparenciaNovoControlador.novoGlossario}"
                                         process="@this"
                                         disabled="#{portalTransparenciaNovoControlador.selecionado.glossarioPortal ne null}"
                                         update=":Formulario:tabView:glossario"/>

                        <p:panel rendered="#{portalTransparenciaNovoControlador.selecionado.glossarioPortal ne null}"
                                 styleClass="mtop10">
                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Nome:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.glossarioPortal.nome}"
                                    size="70"/>
                                <fc:outputLabelObrigatorio value="Descrição:"/>
                                <p:inputText
                                    value="#{portalTransparenciaNovoControlador.selecionado.glossarioPortal.descricao}"
                                    size="70"/>
                            </h:panelGrid>


                            <p:commandButton value="Adicionar"
                                             actionListener="#{portalTransparenciaNovoControlador.adicionarGlossario}"
                                             update=":Formulario:tabView:glossario"
                                             title="Clique para adicionar o Glossário"
                                             styleClass="mtop10"
                                             icon="ui-icon-circle-plus"/>

                            <p:commandButton value="Cancelar"
                                             process="@this"
                                             title="Clique para cancelar o cadastro do Glossário"
                                             styleClass="mtop10"
                                             update=":Formulario:tabView:glossario"
                                             icon="ui-icon-cancel">
                                <f:setPropertyActionListener value="#{null}"
                                                             target="#{portalTransparenciaNovoControlador.selecionado.glossarioPortal}"/>
                            </p:commandButton>

                        </p:panel>
                        <p:dataTable value="#{portalTransparenciaNovoControlador.selecionado.glossarios}"
                                     var="glo"
                                     styleClass="mtop10"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>GLOSSÁRIO&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">>
                            <p:column headerText="Ação" styleClass="centralizado">
                                <p:commandButton icon="ui-icon-trash"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="@this"
                                                 actionListener="#{portalTransparenciaNovoControlador.removerGlossario(glo)}"
                                                 update=":Formulario:tabView:glossario"
                                                 title="Clique para remover este registro."
                                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"/>

                            </p:column>
                            <p:column headerText="Nome">
                                <h:outputText value="#{glo.nome}"/>
                            </p:column>
                            <p:column headerText="Descrição">
                                <h:outputText value="#{glo.descricao}"/>
                            </p:column>
                        </p:dataTable>
                    </p:outputPanel>
                </p:tab>
                <p:tab title="Importação de Ato Legal">
                    <p:outputPanel id="atoLegal">
                        <p:commandButton value="Nova Importação"
                                         icon="ui-icon-circle-plus"
                                         actionListener="#{portalTransparenciaNovoControlador.novaImportacaoAtosLegais}"
                                         process="@this"
                                         title="Clique para efetuar nova importação de Atos Legais"
                                         disabled="#{portalTransparenciaNovoControlador.arquivos ne null}"
                                         update=":Formulario:tabView:atoLegal"/>

                        <p:panel rendered="#{portalTransparenciaNovoControlador.arquivos ne null}" styleClass="mtop10">
                            <h:panelGrid columns="2">
                                <p:fileUpload
                                    fileUploadListener="#{portalTransparenciaNovoControlador.uploadLAtosLegais}"
                                    styleClass="mtop10"
                                    auto="true"
                                    multiple="true"
                                    mode="advanced"
                                    process="@this"
                                    onstart="aguarde.show()"
                                    oncomplete="aguarde.hide()"
                                    update=":Formulario:tabView:arquivoInfo"
                                    allowTypes="/(\.|\/)(doc|docx|pdf|xls|xlsx)$/"
                                    label="Procurar..."/>

                                <h:panelGrid columns="1" id="arquivoInfo">
                                    <h2 class="azulnegrito">Tipos de extensão de arquivos: doc|docx|pdf|xls|xlsx</h2>

                                    <h2 class="azulnegrito">Foram importados #{portalTransparenciaNovoControlador.arquivos.size()}.</h2>
                                </h:panelGrid>
                            </h:panelGrid>
                            <h:panelGrid columns="2">


                                <fc:outputLabelObrigatorio value="Exercício: "/>
                                <p:autoComplete queryDelay="1000" id="exer" title="Informe um exercício."
                                                value="#{portalTransparenciaNovoControlador.selecionado.atoLegal.exercicio}"
                                                completeMethod="#{portalTransparenciaNovoControlador.completaExercicios}"
                                                var="exer"
                                                size="20"
                                                maxResults="10"
                                                itemLabel="#{exer.ano} "
                                                itemValue="#{exer.id}"
                                                forceSelection="true"
                                                converter="#{exercicioControlador.converterGenerico}">
                                    <p:ajax event="itemSelect" process="@this" update="@this"/>
                                </p:autoComplete>

                                <fc:outputLabelObrigatorio value="Propósito do Ato Legal :" for="propositoAtoLegal"/>
                                <h:selectOneMenu title="Selecione um propósito do Ato Legal."
                                                 value="#{portalTransparenciaNovoControlador.selecionado.atoLegal.propositoAtoLegal}"
                                                 id="propositoAtoLegal">
                                    <f:selectItems value="#{atoLegalControlador.propositoAtoLegal}"/>
                                    <p:ajax event="valueChange" process="@this" update="@this"/>
                                </h:selectOneMenu>

                                <fc:outputLabelObrigatorio value="Tipo de Ato Legal: " for="tipoAtoLegal"/>
                                <h:selectOneMenu title="Selecione um Tipo de Ato Legal."
                                                 value="#{portalTransparenciaNovoControlador.selecionado.atoLegal.tipoAtoLegal}"
                                                 id="tipoAtoLegal">
                                    <f:selectItems value="#{atoLegalControlador.tipoAtoLegal}"/>
                                    <p:ajax event="valueChange" process="@this" update="@this"/>
                                </h:selectOneMenu>

                                <fc:outputLabelObrigatorio value="Esfera de Governo: " for="esferaGoverno"/>
                                <h:selectOneMenu title="Selecione a Esfera de Governo"
                                                 styleClass="mrig05"
                                                 value="#{portalTransparenciaNovoControlador.selecionado.atoLegal.esferaGoverno}"
                                                 id="esferaGoverno"
                                                 converter="#{atoLegalControlador.converterEsferaGoverno}">
                                    <f:selectItems value="#{atoLegalControlador.esferaGoverno}"/>
                                    <p:ajax event="valueChange" process="@this" update="@this"/>
                                </h:selectOneMenu>


                                <fc:outputLabelObrigatorio value="Veículo de Publicação: "/>
                                <p:autoComplete queryDelay="1000" id="veiculodepublicacao"
                                                title="Digite o nome do Veículo de publicação"
                                                value="#{portalTransparenciaNovoControlador.selecionado.atoLegal.veiculoDePublicacao}"
                                                completeMethod="#{atoLegalControlador.completaVeiculoDePublicacao}"
                                                var="veiculoPublicacao"
                                                itemLabel="#{veiculoPublicacao.nome}"
                                                itemValue="#{veiculoPublicacao.id}"
                                                forceSelection="true"
                                                size="50"
                                                converter="#{atoLegalControlador.converterVeiculoDePublicacao}">
                                    <p:ajax event="itemSelect" process="@this" update="@this"/>
                                </p:autoComplete>

                                <fc:outputLabelObrigatorio value="Data: "/>
                                <p:calendar title="Informe a data do Ato Legal"
                                            value="#{portalTransparenciaNovoControlador.selecionado.atoLegal.dataEmissao}"
                                            id="dataEmissao" navigator="true"
                                            pattern="dd/MM/yyyy" locale="pt_BR"
                                            onkeyup="mascara(this, mdata)">

                                    <p:ajax event="valueChange" process="@this" update="@this"/>
                                    <p:ajax event="dateSelect" process="@this" update="@this"/>

                                </p:calendar>
                            </h:panelGrid>


                            <h:panelGrid columns="3">
                                <p:commandButton value="Adicionar"
                                                 actionListener="#{portalTransparenciaNovoControlador.adicionarArquivos}"
                                                 update=":Formulario:tabView:atoLegal"
                                                 styleClass="mtop10"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 icon="ui-icon-circle-plus"
                                                 title="Clique para adicionar os arquivos importados"/>

                                <p:commandButton value="Remover Todos"
                                                 actionListener="#{portalTransparenciaNovoControlador.removerArquivos}"
                                                 update=":Formulario:tabView:atoLegal"
                                                 styleClass="mtop10"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 icon="ui-icon-trash"
                                                 title="Clique para remover os arquivos da tabela e os arquivos importados."/>

                                <p:commandButton value="Cancelar"
                                                 process="@this"
                                                 styleClass="mtop10"
                                                 title="Clique para cancelar a importação de Atos Legais"
                                                 update=":Formulario:tabView:atoLegal"
                                                 icon="ui-icon-cancel">
                                    <f:setPropertyActionListener value="#{null}"
                                                                 target="#{portalTransparenciaNovoControlador.arquivos}"/>
                                </p:commandButton>
                            </h:panelGrid>


                        </p:panel>

                        <p:dataTable value="#{portalTransparenciaNovoControlador.selecionado.atos}"
                                     var="ato"
                                     styleClass="mtop10"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ATOS LEGAIS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Ação" styleClass="centralizado">
                                <p:commandButton icon="ui-icon-trash"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="@this"
                                                 actionListener="#{portalTransparenciaNovoControlador.removerAtoLegal(ato)}"
                                                 update=":Formulario:tabView:atoLegal"
                                                 title="Clique para remover este registro."
                                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"/>

                            </p:column>
                            <p:column headerText="Exercício">
                                <p:autoComplete queryDelay="1000" title="Informe um exercício."
                                                value="#{ato.exercicio}"
                                                completeMethod="#{portalTransparenciaNovoControlador.completaExercicios}"
                                                var="exer"
                                                size="10"
                                                maxResults="10"
                                                itemLabel="#{exer.ano} "
                                                itemValue="#{exer.id}"
                                                forceSelection="true"
                                                converter="#{exercicioControlador.converterGenerico}"/>
                            </p:column>
                            <p:column headerText="Número">
                                <p:inputText value="#{ato.numero}" size="10"/>
                            </p:column>
                            <p:column headerText="Nome">
                                <p:inputText value="#{ato.nome}" size="50"/>
                            </p:column>
                            <p:column headerText="Propósito">
                                <h:selectOneMenu title="Selecione um propósito do Ato Legal."
                                                 value="#{ato.propositoAtoLegal}">
                                    <f:selectItems value="#{atoLegalControlador.propositoAtoLegal}"/>
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Tipo">

                                <h:selectOneMenu title="Selecione um Tipo de Ato Legal."
                                                 value="#{ato.tipoAtoLegal}">
                                    <f:selectItems value="#{atoLegalControlador.tipoAtoLegal}"/>
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Esfera">
                                <h:selectOneMenu value="#{ato.esferaGoverno}"
                                                 converter="#{atoLegalControlador.converterEsferaGoverno}">
                                    <f:selectItems value="#{atoLegalControlador.esferaGoverno}"/>
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Data">
                                <h:outputText value="#{ato.dataEmissao}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </p:outputPanel>
                </p:tab>

                <p:tab title="Envio Manual">
                    <p:outputPanel id="panelHql">
                        <co:titulo-panel titulo="Consulta de HQL" separator="true"/>
                        <h:panelGrid columns="2">
                            <fc:outputLabelObrigatorio value="HQL:"/>
                            <p:inputTextarea id="sql" value="#{portalTransparenciaNovoControlador.selecionado.hql}"
                                             cols="100"
                                             rows="10"/>

                            <fc:outputLabelObrigatorio value="Tipo:"/>
                            <h:selectOneMenu value="#{portalTransparenciaNovoControlador.selecionado.tipo}">
                                <f:selectItems value="#{portalTransparenciaNovoControlador.tipos}"/>
                            </h:selectOneMenu>

                            <fc:outputLabelObrigatorio value="Total de Objetos:"/>
                            <h:outputText value="#{portalTransparenciaNovoControlador.selecionado.objetos.size()}"/>
                        </h:panelGrid>

                        <p:commandButton title="Clique para Buscar"
                                         styleClass="mrig05 operacao mtop10"
                                         value="Buscar"
                                         update=":Formulario:tabView:panelHql"
                                         process=":Formulario:tabView:panelHql"
                                         onstart="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         disabled="#{portalTransparenciaNovoControlador.facade.isCalculando()}"
                                         actionListener="#{portalTransparenciaNovoControlador.buscarDados()}"
                                         icon="ui-icon-search"/>

                        <p:commandButton title="Clique para Enviar"
                                         styleClass="prioritario mrig05 operacao mtop10"
                                         value="Enviar"
                                         update=":Formulario"
                                         process="@form"
                                         onstart="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         onclick="poll.start();"
                                         disabled="#{portalTransparenciaNovoControlador.facade.isCalculando()}"
                                         actionListener="#{portalTransparenciaNovoControlador.enviarDados()}"
                                         icon="ui-icon-arrowreturnthick-1-n"/>
                    </p:outputPanel>
                </p:tab>

            </p:tabView>

            <h:panelGrid columns="5" id="panelBotoes">
                <p:commandButton title="Clique para Enviar"
                                 disabled="#{portalTransparenciaNovoControlador.facade.isCalculando()}"
                                 id="salvar"
                                 styleClass="prioritario mrig05 operacao mtop10"
                                 value="Enviar"
                                 update=":Formulario:panelLog :Formulario:panelBotoes"
                                 process=":Formulario:tabView:geral :Formulario:tabView:panelUnidades :Formulario:tabView:gridTipos :Formulario:tabView:gridPrefeitura :Formulario:tabView:link"
                                 actionListener="#{portalTransparenciaNovoControlador.enviar()}"

                                 onclick="poll.star();"
                                 icon="ui-icon-disk"/>

                <p:commandButton icon="ui-icon-cancel"
                                 styleClass="mrig05 operacao mtop10 prioritario"
                                 value="Abortar"
                                 title="Clique para abortar a sincronização"
                                 update="@form"
                                 actionListener="#{portalTransparenciaNovoControlador.abortar()}"/>

                <p:commandButton icon="ui-icon-document"
                                 styleClass="mrig05 operacao mtop10"
                                 value="Limpar"
                                 update="@form"
                                 title="Clique para limpar o Log"
                                 process="@this"
                                 actionListener="#{portalTransparenciaNovoControlador.limpar()}"/>

                <p:commandButton ajax="false"
                                 icon="ui-icon-print"
                                 title="Clique para gerar e efetuar o download do Log em TEXTO"
                                 styleClass="mrig05 operacao mtop10"
                                 id="exportar2"
                                 action="#{portalTransparenciaNovoControlador.gerarTxt()}"
                                 value="Exportar Log">
                    <p:fileDownload value="#{portalTransparenciaNovoControlador.gerarTxt()}"/>
                </p:commandButton>


                <h:panelGrid columns="4">
                    <h:outputText value="Visualizar somente erros?"/>
                    <p:selectBooleanCheckbox
                        value="#{portalTransparenciaNovoControlador.facade.singleton.visualizarErros}">
                        <p:ajax event="change" process="@this" update="panelLog"/>
                    </p:selectBooleanCheckbox>

                    <h:outputText value="Log detalhado?"/>
                    <p:selectBooleanCheckbox
                        value="#{portalTransparenciaNovoControlador.facade.singleton.logDetalhado}">
                        <p:ajax event="change" process="@this" update="panelLog"/>
                    </p:selectBooleanCheckbox>
                </h:panelGrid>
            </h:panelGrid>


            <p:poll interval="1"
                    widgetVar="poll"
                    update="panelLog"
                    listener="#{portalTransparenciaNovoControlador.atualizarFinal()}"
                    autoStart="#{portalTransparenciaNovoControlador.facade.isCalculando() ? 'true' : 'false'}"
                    oncomplete="scrollLog();"
                    stop="#{!portalTransparenciaNovoControlador.facade.isCalculando()}"/>

            <p:outputPanel id="panelLog">
                <div class="ui-widget-header mtop10" style="padding: 2px;">
                    <h:outputText
                        value="Log de ocorrências"
                        style="font-size: 12px;"/>
                </div>
                <div id="log"
                     style="height: 220px; border : solid #92B8D3 1px; overflow: scroll;text-align: left!important;">
                    <h:outputText value="#{portalTransparenciaNovoControlador.facade.singleton.resultado}"
                                  escape="false"/>

                </div>

            </p:outputPanel>
            <br/>
        </h:form>
    </ui:define>
</ui:composition>
</html>
