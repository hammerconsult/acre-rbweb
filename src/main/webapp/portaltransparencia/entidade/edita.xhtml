<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">


        <h:form id="Formulario">
            <fc:cabecalhoPretty id="cpCabecalhoPretty"
                                origem="#{entidadePortalTransparenciaControlador.caminhoPadrao}listar/"
                                controlador="#{entidadePortalTransparenciaControlador}"/>
            <p:panel header="Cadastro de Entidade do Portal transparência">
                <h:panelGrid columns="2">
                    <fc:outputLabelObrigatorio for="nomePrefeitura" value="Nome:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.nome}"
                        title="Informe o nome da Prefeitura"
                        id="nomePrefeitura"
                        size="50"/>

                    <fc:outputLabelObrigatorio for="identificador" value="Identificador:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.identificador}"
                        title="Informe o identificador da Prefeitura"
                        id="identificador"
                        size="50"/>

                    <fc:outputLabelObrigatorio for="reduzido" value="Nome Reduzido:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.nomereduzido}"
                        title="Informe o nome reduzido da Prefeitura"
                        id="reduzido"
                        size="50"/>

                    <h:outputText value="Principal: "/>
                    <p:selectBooleanCheckbox
                        value="#{entidadePortalTransparenciaControlador.selecionado.principal}"/>

                    <h:outputText value="Habilitar Banner Calamidade Pública? "/>
                    <p:selectBooleanCheckbox
                        value="#{entidadePortalTransparenciaControlador.selecionado.habilitarBannerCalamidade}"/>


                    <fc:outputLabelObrigatorio for="esfera" value="Esfera do Poder:"/>
                    <h:selectOneMenu
                        value="#{entidadePortalTransparenciaControlador.selecionado.esferaDoPoder}"
                        id="esfera">
                        <f:selectItems value="#{entidadePortalTransparenciaControlador.esferas}"/>

                    </h:selectOneMenu>


                    <fc:outputLabelObrigatorio for="enderecoPrefeitura" value="Endereço:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.endereco}"
                        title="Informe o Endereço da Prefeitura"
                        id="enderecoPrefeitura"
                        size="50"/>

                    <fc:outputLabelObrigatorio for="horarioPrefeitura"
                                               value="Horário de Atendimento:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.horarioAtendimento}"
                        title="Informe o Horário de Atendimento da Prefeitura"
                        id="horarioPrefeitura"
                        size="50"/>


                    <fc:outputLabelObrigatorio for="contatoPrefeitura"
                                               value="Contato:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.contato}"
                        title="Informe o telefone de contato"
                        id="contatoPrefeitura"
                        size="50"/>


                    <fc:outputLabelObrigatorio for="emailTecnologia"
                                               value="Email da Tecnologia:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.emailTecnologia}"
                        title="Informe o email de contato da Tecnologia"
                        id="emailTecnologia"
                        size="50"/>

                    <fc:outputLabelObrigatorio for="emailTecnologia"
                                               value="Telefone:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.contatoTecnologia}"
                        title="Informe o telefone de contato da Tecnologia"
                        id="contatoTecnologia"
                        size="50"/>

                    <fc:outputLabelObrigatorio for="sitePrefeitura" value="Site:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.site}"
                        title="Informe o Site da Prefeitura"
                        id="sitePrefeitura"
                        size="50"/>

                    <fc:outputLabelObrigatorio for="urlAcesso" value="URL Acesso Informação:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.urlAcessoInformacao}"
                        title="Informe o URL Acesso Informação da Prefeitura"
                        id="urlAcesso"
                        size="50"/>

                    <fc:outputLabelObrigatorio for="urlOuvidoria" value="URL Ouvidoria:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.urlOuvidoria}"
                        title="Informe o URL Ouvidoria da Prefeitura"
                        id="urlOuvidoria"
                        size="50"/>

                    <fc:outputLabelObrigatorio for="urlSic" value="URL E-SIC:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.urlESic}"
                        title="Informe o URL E-SIC da Prefeitura"
                        id="urlSic"
                        size="50"/>

                    <h:outputLabel for="urlExternoPortalTransparencia" value="URL Externo do Portal da Transparencia:"/>
                    <p:inputText
                        value="#{entidadePortalTransparenciaControlador.selecionado.urlExternoPortalTransparencia}"
                        title="Informe o URL externo do portal da transparência."
                        id="urlExternoPortalTransparencia"
                        size="50"/>

                    <fc:outputLabelObrigatorio for="atendimento" value="Atendimento Presencial:"/>
                    <p:editor
                        value="#{entidadePortalTransparenciaControlador.selecionado.atendimentoPresencial}"
                        width="300"
                        height="200" styleClass="mtop20"/>

                    <fc:outputLabelObrigatorio for="descricaoEouv" value="Descrição E-OUV:"/>
                    <p:editor
                        value="#{entidadePortalTransparenciaControlador.selecionado.descricaoEouv}"
                        width="300"
                        height="200" styleClass="mtop20"/>
                </h:panelGrid>

                <p:outputPanel>
                    <h:panelGrid columns="2">
                        <p:graphicImage
                            value="/resources/images/imagem-topo.png"
                            id="topo"
                            alt="Selecione"
                            width="100"
                            style="text-align: center!important;"/>
                        <p:fileUpload
                            fileUploadListener="#{entidadePortalTransparenciaControlador.uploadLogoTopo}"

                            auto="true"
                            mode="advanced"
                            allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                            label="Procurar.."
                        />
                    </h:panelGrid>
                </p:outputPanel>


                <p:separator/>
                <fc:outputLabelObrigatorio for="conteudoBotoes" value="Botões Página incial:"/>
                <p:editor
                    value="#{entidadePortalTransparenciaControlador.selecionado.botaoPaginainicial}"
                    width="800"
                    height="200" styleClass="mtop20"/>

                <p:separator/>


                <p:separator/>
                <fc:outputLabelObrigatorio for="conteudoBotoes" value="Botões Página incial:"/>
                <p:editor
                    value="#{entidadePortalTransparenciaControlador.selecionado.botaoPaginainicial}"
                    width="800"
                    height="200" styleClass="mtop20"/>

                <p:separator/>
                <fc:outputLabelObrigatorio for="conteudo" value="Contéudo Página incial:"/>
                <p:editor
                    value="#{entidadePortalTransparenciaControlador.selecionado.paginainicial}"
                    width="800"
                    height="200" styleClass="mtop20"/>

                <p:separator/>

                <p:outputPanel>
                    <h:panelGrid columns="4">
                        <fc:outputLabelObrigatorio for="unidade" value="Unidade:"/>
                        <p:autoComplete queryDelay="1000" widgetVar="unidade" id="unidade"
                                        title="Selecione a Unidade Organizacional para receber a transferência."
                                        completeMethod="#{entidadePortalTransparenciaControlador.completaHierarquiaOrganizacional}"
                                        value="#{entidadePortalTransparenciaControlador.unidade}"
                                        var="uni" size="70"
                                        itemLabel="#{uni}"
                                        itemValue="#{uni.id}"
                                        converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                        maxResults="10"/>

                        <p:commandButton title="Clique para adicionar a unidade."
                                         value="Adicionar"
                                         onclick="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         actionListener="#{entidadePortalTransparenciaControlador.adicionarUnidadePrefeitura}"
                                         update=":Formulario"
                                         icon="ui-icon-circle-plus"
                                         styleClass="padrao"/>

                        <p:commandButton title="Clique para adicionar todas as unidade."
                                         value="Adicionar Todas"
                                         onclick="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         actionListener="#{entidadePortalTransparenciaControlador.adicionarTodasUnidadePrefeitura}"
                                         update=":Formulario"
                                         icon="ui-icon-circle-plus"
                                         styleClass="padrao"/>
                    </h:panelGrid>
                    <p:dataTable
                        value="#{entidadePortalTransparenciaControlador.selecionado.unidades}"
                        var="uni"
                        styleClass="mtop10"
                        rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                        paginator="true"
                        rows="10"
                        paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>UNIDADES ORÇAMENTÁRIAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                        emptyMessage="Não foram localizados registros para serem apresentados."
                        rowIndexVar="rowlx">
                        <p:column headerText="Ações" style="text-align: center; width: 10%">

                            <p:commandButton icon="ui-icon-trash"
                                             title="Clique para remover este registro."
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             process="@this"
                                             styleClass="mrig05"
                                             actionListener="#{entidadePortalTransparenciaControlador.removerUnidadePrefeitura(uni)}"
                                             onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                             update=":Formulario"/>
                        </p:column>
                        <p:column>
                            <h:commandLink target="_blank"
                                           title="Clique para visualizar os dados dessa unidade em nova aba."
                                           styleClass="azulnegrito"
                                           actionListener="#{utilBeanContabil.redirecionarParaUnidadeOrganizacional(uni.unidade.id)}">
                                <h:outputText value="Acessar"
                                              styleClass="azulnegrito"/>
                            </h:commandLink>
                        </p:column>
                        <p:column headerText="Nome" filterBy="#{uni.unidade}" sortBy="#{uni.unidade}" filterMatchMode="contains">
                            <fc:codigo-descricao-hierarquia
                                dataMovimento="#{entidadePortalTransparenciaControlador.dataOperacao}"
                                tipoHierarquia="ADMINISTRATIVA"
                                unidadeOrganizacional="#{uni.unidade}"/>
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>


                <p:outputPanel>
                    <h:panelGrid columns="4">
                        <fc:outputLabelObrigatorio for="unidade" value="Unidade Administrativa:"/>
                        <p:autoComplete queryDelay="1000" widgetVar="unidadeAdministrativa" id="unidadeAdministrativa"
                                        title="Selecione a Unidade Organizacional para receber a transferência."
                                        completeMethod="#{entidadePortalTransparenciaControlador.completaHierarquiaOrganizacionalAdministrativa}"
                                        value="#{entidadePortalTransparenciaControlador.unidade}"
                                        var="uniAdm" size="70"
                                        itemLabel="#{uniAdm}"
                                        itemValue="#{uniAdm.id}"
                                        converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                        maxResults="10"/>

                        <p:commandButton title="Clique para adicionar a unidade."
                                         value="Adicionar"
                                         onclick="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         actionListener="#{entidadePortalTransparenciaControlador.adicionarUnidadePrefeituraAdm()}"
                                         update=":Formulario"
                                         icon="ui-icon-circle-plus"
                                         styleClass="padrao"/>

                    </h:panelGrid>
                    <p:dataTable
                        value="#{entidadePortalTransparenciaControlador.selecionado.unidadesAdm}"
                        var="uniAdm"
                        styleClass="mtop10"
                        rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                        paginator="true"
                        rows="10"
                        paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>UNIDADES ADMINISTRATIVAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                        emptyMessage="Não foram localizados registros para serem apresentados."
                        rowIndexVar="rowlx">
                        <p:column headerText="Ações" style="text-align: center; width: 10%">

                            <p:commandButton icon="ui-icon-trash"
                                             title="Clique para remover este registro."
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             process="@this"
                                             styleClass="mrig05"
                                             actionListener="#{entidadePortalTransparenciaControlador.removerUnidadePrefeituraAdm(uniAdm)}"
                                             onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                             update=":Formulario"/>
                        </p:column>
                        <p:column>

                            <h:commandLink target="_blank"
                                           title="Clique para visualizar os dados dessa unidade em nova aba."
                                           styleClass="azulnegrito"
                                           actionListener="#{utilBeanContabil.redirecionarParaUnidadeOrganizacional(uniAdm.unidade.id)}">
                                <h:outputText value="Acessar"
                                              styleClass="azulnegrito"/>
                            </h:commandLink>
                        </p:column>
                        <p:column headerText="Nome" filterBy="#{uniAdm.unidade}" sortBy="#{uniAdm.unidade}" filterMatchMode="contains">
                            <fc:codigo-descricao-hierarquia
                                dataMovimento="#{entidadePortalTransparenciaControlador.dataOperacao}"
                                tipoHierarquia="ADMINISTRATIVA"
                                unidadeOrganizacional="#{uniAdm.unidade}"/>
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>

                <p:outputPanel>
                    <h:panelGrid columns="10" id="modulo">
                        <fc:outputLabelObrigatorio for="modulo" value="Modulo:"/>
                        <h:selectOneMenu
                            value="#{entidadePortalTransparenciaControlador.modulo.modulo}">
                            <f:selectItems value="#{entidadePortalTransparenciaControlador.modulos}"/>

                        </h:selectOneMenu>
                        <fc:outputLabelObrigatorio for="modulo" value="Ordem:"/>
                        <p:inputText value="#{entidadePortalTransparenciaControlador.modulo.ordem}"
                                     size="6"/>
                        <h:outputLabel for="modulo" value="Chave Página Destino:"/>
                        <p:inputText
                            value="#{entidadePortalTransparenciaControlador.modulo.chavePaginaDestino}"
                            size="20"/>
                        <h:outputLabel for="modulo" value="Ícone:"/>
                        <p:inputText value="#{entidadePortalTransparenciaControlador.modulo.icone}"
                                     size="20"/>
                        <p:commandButton title="Clique para adicionar o Módulo."
                                         value="Adicionar"
                                         onclick="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         actionListener="#{entidadePortalTransparenciaControlador.adicionarModuloPrefeitura}"
                                         update=":Formulario"
                                         icon="ui-icon-circle-plus"
                                         styleClass="padrao"/>

                        <p:commandButton title="Clique para adicionar todos os Módulo."
                                         value="Adicionar Todos"
                                         onclick="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         actionListener="#{entidadePortalTransparenciaControlador.adicionarTodosModuloPrefeitura}"
                                         update=":Formulario"
                                         icon="ui-icon-circle-plus"
                                         styleClass="padrao"/>
                    </h:panelGrid>
                    <p:dataTable
                        value="#{entidadePortalTransparenciaControlador.selecionado.modulos}"
                        var="modulo"
                        sortBy="Ordem"
                        styleClass="mtop10"
                        rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                        paginator="true"
                        rows="10"
                        paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>MÓDULOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                        emptyMessage="Não foram localizados registros para serem apresentados."
                        rowIndexVar="rowlx">
                        <p:column headerText="Ações" style="text-align: center; width: 10%">

                            <p:commandButton icon="ui-icon-pencil"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             process="@this"
                                             styleClass="mrig05"
                                             title="Clique para editar este registro."
                                             actionListener="#{entidadePortalTransparenciaControlador.editarModulo(modulo)}"
                                             update=":Formulario:modulo"/>

                            <p:commandButton icon="ui-icon-trash"
                                             title="Clique para remover este registro."
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             process="@this"
                                             styleClass="mrig05"
                                             actionListener="#{entidadePortalTransparenciaControlador.removerModuloPrefeitura(modulo)}"
                                             onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                             update=":Formulario"/>
                        </p:column>
                        <p:column headerText="Módulo" style="text-align: center" sortBy="#{modulo.modulo.descricao}">
                            <h:outputText value="#{modulo.modulo.descricao}"/>
                        </p:column>
                        <p:column headerText="Ordem" style="text-align: center" sortBy="#{modulo.ordem}">
                            <h:outputText value="#{modulo.ordem}"/>
                        </p:column>
                        <p:column headerText="Chave Página Destino" style="text-align: center">
                            <h:outputText value="#{modulo.chavePaginaDestino}"/>
                        </p:column>
                        <p:column headerText="Ícone" style="text-align: center">
                            <h:outputText value="#{modulo.icone}"/>
                        </p:column>

                    </p:dataTable>
                </p:outputPanel>

            </p:panel>
            <fc:rodapePretty id="rpRodapePretty" controlador="#{entidadePortalTransparenciaControlador}"/>
        </h:form>


    </ui:define>
</ui:composition>
</html>
