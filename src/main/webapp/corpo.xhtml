<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:deb="http://java.sun.com/jsf/composite/components/tributario/consulta-de-debitos"
      xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core">
<f:view contentType="text/html" encoding="UTF-8">
    <h:head>
        <meta content='text/html; charset=UTF-8' http-equiv='content-Type'/>
        <link rel="shortcut icon" href="#{facesContext.externalContext.requestContextPath}/img/web.gif"/>
        <title>
            RBWeb
        </title>
        <h:outputScript library="js" name="functionswebpublico.js"/>
        <h:outputScript library="js" name="primefaces-inputtextarea-newlines.js"/>
        <h:outputScript library="js" name="jquery.maskedinput.min.js"/>
        <h:outputScript library="js" name="jquery.mask.min.js"/>
        <h:outputScript library="js" name="bootstrap.js"/>
        <h:outputScript library="js" name="jquery.cookie.js"/>
        <!--        <h:outputScript library="js" name="jquery.dcdrilldown.1.2.js"/>-->
        <h:outputScript library="js" name="jquery-stack-menu.js"/>
        <h:outputScript library="js" name="menu.web.js"/>
        <h:outputScript library="js" name="breadcrumb.web.js"/>
        <h:outputScript library="js" name="wp_notificacoes.js"/>
        <h:outputScript library="js" name="unidadesOrganizacionais.web.js"/>
        <h:outputScript library="js" name="jobs.web.js"/>
        <h:outputScript library="js" name="favoritos.web.js"/>
        <h:outputScript library="js" name="mensagens-sistema.web.js"/>
        <h:outputScript library="js" name="autocomplete.web.js"/>
        <h:outputScript library="js" name="/mascaraMonetaria/Parsers.js"/>
        <h:outputScript library="js" name="/mascaraMonetaria/JavaScriptUtil.js"/>
        <h:outputScript library="js" name="/mascaraMonetaria/InputMask.js"/>
        <h:outputScript library="js" name="websocket.js"/>


        <h:outputStylesheet library="css" name="principal.web.css"/>
        <!--        <h:outputStylesheet library="css" name="topo.css"/>-->
        <h:outputStylesheet library="css" name="responsivo.web.css"/>
        <h:outputStylesheet library="css" name="tema.css"/>
        <h:outputStylesheet library="css" name="menu.web.css"/>
        <h:outputStylesheet library="css" name="tip.css"/>
        <h:outputStylesheet library="css" name="animate.web.css"/>
        <h:outputStylesheet library="css" name="jquery-stack-menu.css"/>
        <h:outputStylesheet library="font-awesome" name="css/font-awesome.min.css"/>
        <h:outputScript src="https://code.jquery.com/jquery-1.10.2.js"/>

        <h:inputHidden id="base" value="#{facesContext.externalContext.requestContextPath}"/>
        <h:inputHidden id="urlNotificacaoService" value="#{sistemaControlador.urlNotificacaoService}"/>
    </h:head>
    <h:body>

        <c:if test="#{sistemaControlador.perfilAplicacao eq 'DEV'}">
            <div class="cover-ribbon">
                <div class="cover-ribbon-inside">Homologação</div>
            </div>
        </c:if>

        <ui:include src="menu.xhtml"/>
        <!-- Necessário para apresentar as mensagens no dialog de Log -->
        <ui:include src="navbar.xhtml"/>

        <div id="corpo">
            <div id="cabecalho" onclick="fecharMenu()">
                <ui:insert name="header">
                    <div class="header header-mini subhead" onclick="fecharMenu()">

                        <div class="container-fluid">
                            <div class="row-fluid">
                                <div class="col-md-7 col-sm-12">
                                    <ul class="breadcrumb text-raleway" id="breadcrumb-webpublico">
                                    </ul>
                                </div>
                                <div class="col-md-5 col-sm">
                                    <div style="padding: 8px 15px;">
                                        <h:form id="form-mensagem-versao">
                                            <h:inputHidden value="#{sistemaControlador.exibirVersaoDialog}"
                                                           id="exibir-dialog-versao"/>
                                            <div
                                                class="alert alert-info centralizado"
                                                style="border-radius: 10px">
                                                <p:commandLink actionListener="#{sistemaControlador.verVersao}"
                                                               update=":formulario-versao-sistema"
                                                               style="text-decoration: none !important; color: #242424!important;"
                                                               oncomplete="abrirDialoVersao()">
                                                    Nova versão do sistema:
                                                    <strong>V.#{sistemaControlador.appVersion}</strong>
                                                    - Disponibilizada em #{sistemaControlador.liberacaoVersao}
                                                </p:commandLink>
                                            </div>
                                        </h:form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </ui:insert>
            </div>

            <div class="container-fluid conteudo" onclick="fecharMenu()">

                <ui:insert name="body">

                </ui:insert>
            </div>
        </div>


        <div id="notificacoes">
            <h:form id="formNotificacoes">
                <div id="notificacoes-topo">
                    <div class="topo-direito">
                        <a onclick="notifica()" style="cursor: pointer"><i class="icon-remove"></i></a>
                    </div>
                </div>
                <div id="notificacoes-conteudo" class="notificacoes-conteudo">
                    <legend class="legenda">Notificações</legend>
                    <!--Popuplado via javascript wp_notificacoes.js-->
                    <table class="table"></table>
                </div>
            </h:form>
        </div>

        <h:form id="formRodape">

            <p:remoteCommand name="rcAtualizarPainelMesagemUsuario"
                             actionListener="#{comunicacaoTodosUsuariosControlador.mostrarMensagemUsuario()}"
                             update=":formulario-mensagem-todos-usuarios :panel-mensagem-do-sistema"/>

            <p:remoteCommand name="rcMarcarMensagemComoVisualizado"
                             actionListener="#{comunicacaoTodosUsuariosControlador.marcarComoVisualizado()}"
                             update=":formulario-mensagem-todos-usuarios :panel-mensagem-do-sistema"/>

            <p:remoteCommand name="rcAtualizarRelatoriosUsuario"
                             update=":formRodape :formVisualizarRelatorio"/>

            <p:remoteCommand name="cleanSessionGenericSearch"
                             actionListener="#{templateControlador.limpaSessaoPesquisaGenerico}"/>

            <div id="div-rodape">
                <div class="conteudo-rodape">
                    <table style="width: 100%; height: 100%;">
                        <tr>
                            <td>
                                <div id="divIniciar" style="z-index: 999; cursor: pointer"
                                     onclick="abrirFecharMenu(); $('#busca').select();">
                                    <a class="botao-menu-principal">
                                        <i class="fa fa-bars fa-2x"></i>
                                    </a>
                                </div>
                            </td>
                            <td style="width:90%; text-align: left;" valign="top" onclick="fecharMenu()">
                                <ui:repeat value="#{sistemaControlador.todosRelatoriosUsuario}" var="relatorio"
                                           varStatus="status">

                                    <p:remoteCommand name="verAcompanhamentoRelatorio#{status.index}"
                                                     onstart="aguarde.show()"
                                                     update="@form :formVisualizarRelatorio"
                                                     oncomplete="aguarde.hide();visualizarRelatorio.show()"
                                                     actionListener="#{sistemaControlador.visualizarAcompanhamento(relatorio)}"/>

                                    <p:remoteCommand name="imprimirRelatorio#{status.index}"
                                                     onstart="aguarde.show()"
                                                     rendered="#{sistemaControlador.relatoriosUsuario[relatorio].conteudo ne null}"
                                                     oncomplete="aguarde.hide()"
                                                     update="@form"
                                                     actionListener="#{sistemaControlador.imprimirRelatorio(relatorio)}"/>

                                    <p:remoteCommand name="excluirRelatorio#{status.index}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     update="@form"
                                                     actionListener="#{sistemaControlador.removerRelatorio(relatorio)}"/>

                                    <div class="col-md-2 centralizado relatorio-rodape"
                                         style="margin-top: 0; margin-right: 0">

                                        <a title="Acompanhar andamento do relatório"
                                           onclick="verAcompanhamentoRelatorio#{status.index}()"
                                           style="cursor: pointer">
                                            <i class="fa
                                            #{(sistemaControlador.isRelatorioPDF(relatorio) or sistemaControlador.isRelatorioPDFDownload(relatorio)) ? 'fa-file-pdf-o text-danger' : ''}
                                            #{sistemaControlador.isRelatorioXLS(relatorio) ? 'fa-file-excel-o text-navy' : ''}
                                            #{sistemaControlador.isRelatorioCsv(relatorio) ? 'fa-file-csv text-navy' : ''}
                                            #{sistemaControlador.isRelatorioDocx(relatorio) ? 'fa-file-word-o text-navy' : ''}
                                            #{sistemaControlador.isRelatorioXml(relatorio) ? 'fa-file-code-o text-navy' : ''}
                                            #{sistemaControlador.isRelatorioTxt(relatorio) ? 'fa-file-text-o text-navy' : ''}
                                            #{sistemaControlador.isRelatorioHtml(relatorio) ? 'fa-file-text-o text-navy' : ''}
                                            fa-2x"
                                               aria-hidden="true"
                                               style="#{sistemaControlador.isRelatorioConcluido(relatorio) ?
                                               'display: none':'cursor: pointer'}"></i>
                                        </a>

                                        <a title="Imprimir Relatório" onclick="imprimirRelatorio#{status.index}()"
                                           style="#{sistemaControlador.isRelatorioConcluido(relatorio) and
                                           sistemaControlador.isRelatorioPDF(relatorio) ?
                                           'cursor: pointer' : 'display: none'}">
                                            <i class="fa fa-print fa-2x" aria-hidden="true"></i>
                                        </a>

                                        <p:commandButton ajax="false"
                                                         icon="ui-icon-arrowthick-1-s"
                                                         styleClass="mrig03 botao-transparente"
                                                         style="width: 30px; height: 26px;
                                                         #{sistemaControlador.isRelatorioConcluido(relatorio) and
                                                         !sistemaControlador.isRelatorioPDF(relatorio) ?
                                                         'cursor: pointer' : 'display: none'}">
                                            <p:fileDownload value="#{sistemaControlador.imprimirRelatorio(relatorio)}"/>
                                        </p:commandButton>

                                        <i class="fa #{!sistemaControlador.relatoriosUsuario[relatorio].isConcluido()?
                                        'fa-spinner fa-spin':'fa-check-circle-o text-success'} fa-fw"
                                           aria-hidden="true"
                                           style="margin-left: -8px"></i>

                                        <i class="fa fa-exclamation-triangle" aria-hidden="true"
                                           style="margin-left: -8px;#{!sistemaControlador.relatoriosUsuario[relatorio].isDeuErro() ? 'display:none':''}">
                                        </i>

                                        <a title="Acompanhar andamento do relatório"
                                           onclick="verAcompanhamentoRelatorio#{status.index}()"
                                           style="cursor: pointer">
                                            <small title="#{sistemaControlador.relatoriosUsuario[relatorio].nome}"
                                                   style="max-width: 100px; text-overflow: ellipsis;">
                                                #{sistemaControlador.relatoriosUsuario[relatorio].nomeReduzido}
                                            </small>
                                        </a>

                                        <a title="Remover Relatório da Fila"
                                           class="text-danger"
                                           onclick="excluirRelatorio#{status.index}()"
                                           style="cursor: pointer; margin-left: -20px; margin-top: -5px;">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                        </a>
                                    </div>
                                </ui:repeat>
                            </td>
                            <td style="width:2%; text-align: right;" valign="middle">
                                <fc:ajaxLoader16x16-rodape/>
                            </td>
                            <td style="width:2%; text-align: right;" valign="middle">

                                <a onclick="verVersaoSistema()"
                                   style="font-size: 14px; text-decoration: none; cursor: pointer"
                                   class="text-raleway">
                                    V.${sistemaControlador.appVersion}
                                </a>

                                <p:remoteCommand actionListener="#{sistemaControlador.verVersao()}"
                                                 name="verVersaoSistema" update=":formulario-versao-sistema"
                                                 oncomplete="abrirDialoVersao()"/>
                            </td>
                            <td style="width:2%; text-align: center;" valign="middle">
                                <i class="verde fa fa-check-circle-o icone-status-usuario" title="Usuário Ativo!"></i>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </h:form>

        <p:outputPanel id="panel-mensagem-do-sistema">
            <a onclick="rcAtualizarPainelMesagemUsuario()">
                <p:panel
                    header="Você tem #{comunicacaoTodosUsuariosControlador.mensagem.size()} #{comunicacaoTodosUsuariosControlador.mensagem.size() > 1 ? ' Mensagens': ' Mensagem' } "
                    rendered="#{!empty comunicacaoTodosUsuariosControlador.mensagem and !comunicacaoTodosUsuariosControlador.visualizado}"
                    id="dialog-Box"
                    styleClass="text-raleway danger"
                    style="position: fixed; cursor: pointer;
                              right: 20px;
                              width: 330px;
                              bottom: 60px!important;
                              z-index: 30;
                              text-align: justify">
                    <a onclick="rcAtualizarPainelMesagemUsuario()"
                       style="position: absolute; margin-top: -40px; margin-left: 200px; cursor: pointer">
                        <i class="fa fa-exclamation-triangle text-warning fa-2x" id="icone-sino-mensagem-geral"></i>
                    </a>

                    <a onclick="rcMarcarMensagemComoVisualizado()"
                       style="position: absolute; margin-top: -40px; margin-left: 250px; cursor: pointer">
                        <i class="fa fa-close fa-2x"></i>
                    </a>
                </p:panel>
            </a>
        </p:outputPanel>

        <h:outputScript>
            function animacaoMinimize() {
                $('#dialog-Box').animate(
                    {height: '55px'},
                    {
                        step: function () {
                            $('#dialog-Box').css({"height": "55px", "overflow": "hidden"})
                        }
                    }, 1000
                ), function () {
                    $('dialog-Box').stop().animate();
                }
            }

            function animacaoMaximize() {
                $('#dialog-Box').animate(
                    {height: '220px'}, 1000), function () {
                    $('dialog-Box').stop().animate();
                }
            }
        </h:outputScript>

        <h:form prependId="false">
            <fc:aguarde/>
            <h:inputHidden id="mostra-cabecalho" value="#{templateControlador.mostraCabecalho}"/>
            <h:inputHidden id="mostra-rodape" value="#{templateControlador.mostraRodape}"/>
            <h:inputHidden id="mostra-menu"/>

            <p:remoteCommand name="sincronizar" update="mostra-cabecalho mostra-rodape"
                             process="mostra-cabecalho mostra-rodape"
                             immediate="true"/>


            <p:hotkey bind="alt+m" oncomplete="notifica()"
                      immediate="true"/>
            <p:hotkey bind="alt+l" actionListener="#{templateControlador.limparTodasMensagens()}"
                      update=":formRodape" immediate="true"/>
            <p:hotkey bind="alt+up" handler="toggleCabecalho();" immediate="true"/>
            <p:hotkey bind="alt+down" handler="toggleRodape();" immediate="true"/>
            <p:hotkey bind="shift+up" handler="toggleCabecalho(); sincronizar();" immediate="true"/>
            <p:hotkey bind="shift+down" handler="toggleRodape(); sincronizar();" immediate="true"/>
            <p:hotkey bind="shift+f" handler="favoritos.show();" immediate="true"/>

            <p:hotkey bind="alt+1" handler="abrirFecharMenu(); $('#busca').select();"
                      immediate="true"/>
            <p:hotkey bind="f1" handler="window.open('#{request.contextPath}/','_blank');" process="@none"
                      update="@none"
                      immediate="true"/>
            <p:hotkey bind="f2" handler="window.open(document.URL,'_blank');" process="@none" update="@none"
                      immediate="true"/>
            <p:hotkey bind="f4"
                      handler="if (!confirm('Tem certeza que deseja ir para a tela inicial?')){return;}; window.location = '#{request.contextPath}/'"
                      immediate="true"/>
        </h:form>

        <p:dialog widgetVar="ajudaDialog"
                  modal="true"
                  header="Ajuda"
                  dynamic="true"
                  position="center"
                  closable="true"
                  resizable="false"
                  draggable="false">
            <h:form id="formulario-ajuda-dialog">
                <h:outputText value="Teclas de Atalho e Informações" styleClass="destaque"
                              style="text-decoration: underline;"/><br/><br/>
                <table class="bordaSimples" style="width : 100%;">
                    <tr class="ui-widget-header">
                        <td style="width: 250px;"><h:outputText value="Teclas"/></td>
                        <td><h:outputText value="Resultado"/></td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText value="ALT + 1"/></td>
                        <td><h:outputText value="Abrir/Fechar o menu lateral."/></td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText value="ALT + M"/></td>
                        <td><h:outputText
                            value="Abrir a caixa de diálogo com todas as mensagens emitidas pelo sistema. (Log de Mensagens)"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText value="ALT + L"/></td>
                        <td><h:outputText value="Limpar as mensagens da caixa de diálogo. (Limpar Log do Sistema)"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText value="F2"/></td>
                        <td><h:outputText value="Duplicar a aba atual."/></td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText value="F4"/></td>
                        <td><h:outputText value="Redirecionar o usuário para a tela inicial (home)."/></td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText escape="false" value="ALT+"/><h:outputText
                            value="?"
                            style="font-size: 18px;"/><h:outputText
                            value="  (Seta p/ cima)"/></td>
                        <td><h:outputText escape="false"
                                          value="Ocultar/Apresentar o cabeçalho do sistema &lt;b>para a tela atual&lt;/b>."/>
                        </td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText escape="false" value="ALT+"/><h:outputText
                            value="?"
                            style="font-size: 18px;"/><h:outputText
                            value="  (Seta p/ baixo)"/></td>
                        <td><h:outputText escape="false"
                                          value="Ocultar/Apresentar o rodapé do sistema &lt;b>para a tela atual&lt;/b>."/>
                        </td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText escape="false" value="SHIFT+"/><h:outputText
                            value="?"
                            style="font-size: 18px;"/><h:outputText
                            value="  (Seta p/ cima)"/></td>
                        <td><h:outputText escape="false"
                                          value="Ocultar/Apresentar o cabeçalho de &lt;b>todas as telas do sistema&lt;/b>."/>
                        </td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText escape="false" value="SHIFT+"/><h:outputText
                            value="?"
                            style="font-size: 18px;"/><h:outputText
                            value="  (Seta p/ baixo)"/></td>
                        <td><h:outputText escape="false"
                                          value="Ocultar/Apresentar o rodapé de &lt;b>todas as telas do sistema&lt;/b>."/>
                        </td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText escape="false" value="SHIFT+F"/></td>
                        <td><h:outputText escape="false" value="Meus Favoritos"/></td>
                    </tr>
                </table>
                <br/>
                <table class="bordaSimples" style="width : 100%;">
                    <tr class="ui-widget-header">
                        <td style="width: 250px;"><h:outputText value="Propriedade"/></td>
                        <td><h:outputText value="Valor"/></td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText value="User DB"/></td>
                        <td><h:outputText value="#{sistemaControlador.usuarioBancoConectado}"/></td>
                    </tr>
                    <tr>
                        <td class="centralizado negrito"><h:outputText value="URL DB"/></td>
                        <td><h:outputText value="#{sistemaControlador.urlBanco}"/></td>
                    </tr>
                </table>
                <br/>
                <h:outputText style="color : #a11"
                              value="Obs.: Os atalhos apresentados acima não funcionarão caso o usuário esteja com o foco em algum campo de entrada de dados."/>
                <br/>

                <div align="center" class="mtop10">
                    <p:commandButton value="OK" icon="ui-icon-check" styleClass="botao_azul icone_branco"
                                     onclick="ajudaDialog.hide()"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog modal="true" widgetVar="statusDialog"
                  position="center"
                  showHeader="false"
                  style="position: fixed !important;"
                  draggable="false" closable="false" resizable="false">
            <div style="text-align: center">
                <h:outputText value="Por favor aguarde, processando operação..."/>
                <br/>
                <p:graphicImage value="/img/ajaxloadingbar.gif"/>
            </div>
        </p:dialog>

        <p:dialog widgetVar="favoritos"
                  header="Meus Favoritos"
                  dynamic="true"
                  position="center"
                  modal="true"
                  closable="true"
                  resizable="false"
                  draggable="false">
            <h:form id="formulario-favoritos">
                <h:panelGrid columns="2">
                    <h:outputText value="Nome:"/>
                    <p:inputText size="50"
                                 requiredMessage="O Campo Nome é obrigátorio."
                                 required="true"
                                 value="#{sistemaControlador.nomeFavorito}"/>

                    <h:outputText value="URL:"/>
                    <p:inputText size="50"
                                 requiredMessage="O Campo URL é obrigátorio."
                                 required="true"
                                 value="#{sistemaControlador.urlFavorito}"/>
                </h:panelGrid>

                <p:commandButton
                    id="btn-salvar-favoritos"
                    icon="ui-icon-disk"
                    process="@form"
                    actionListener="#{sistemaControlador.adicionarFavorito()}"
                    update="@form"/>

                <p:separator styleClass="mtop10 mbot10"/>

                <h:panelGrid columns="2" styleClass="mbot05">
                    <h:outputText value="Filtro:"/>
                    <p:inputText size="50" value="#{sistemaControlador.filtroFavorido}">
                        <p:ajax event="keyup"
                                update="panelFavoritos"
                                process="@this"
                                immediate="true"/>
                    </p:inputText>
                </h:panelGrid>

                <p:outputPanel id="panelFavoritos">
                    <p:scrollPanel mode="native" style="max-height: 200px;">
                        <p:dataTable value="#{sistemaControlador.favoritos}"
                                     var="fav"
                                     styleClass="semCabecalho"
                                     emptyMessage="Nenhum favorito encontrado.">
                            <p:column style="text-align: center;width: 5px;">
                                <p:commandButton id="bt-informacao"
                                                 icon="ui-icon-info"
                                                 process="@none"
                                                 update="@none"
                                                 styleClass="icone-20"/>
                                <p:overlayPanel for="bt-informacao"

                                                style="border : solid black 2px;"
                                                showEvent="mouseover"
                                                hideEvent="mouseout">
                                    <h:outputText value="#{fav.url}"/>
                                </p:overlayPanel>
                            </p:column>

                            <p:column style="text-align: center;width: 5px;">
                                <p:commandButton icon="ui-icon-closethick"
                                                 title="Clique para remover o favorito"
                                                 actionListener="#{sistemaControlador.removerFavorito(fav)}"
                                                 update="@form"
                                                 onclick="aguarde.show();"
                                                 oncomplete="aguarde.hide();location.reload();"
                                                 process="@this"
                                                 styleClass="icone-20"
                                                 immediate="true"/>
                            </p:column>

                            <p:column style="text-align: center;">
                                <a href="#{request.contextPath}#{fav.url}">
                                    <h:outputText value="#{fav.nome}"
                                                  title="#{fav.url}"/>
                                </a>
                            </p:column>
                        </p:dataTable>
                    </p:scrollPanel>
                </p:outputPanel>
            </h:form>
        </p:dialog>

        <div id="relatorio"
             class="modal hide fade" style="z-index: 99999999" tabindex="-1" role="dialog" aria-labelledby="relatorio"
             aria-hidden="true">
            <div class="modal-header" style="text-align: center">

                <h:form id="FormularioDownloadRelatorio">
                    <div class="pull-left">
                        <p:commandButton actionListener="#{sistemaControlador.imprimirRelatorioDaSessao(false)}"
                                         styleClass="meu-botao mrig05"
                                         value="Download"
                                         icon="ui-icon-circle-arrow-s"
                                         ajax="false">
                        </p:commandButton>

                        <p:commandButton
                            styleClass="meu-botao mrig05"
                            value="Nova Aba"
                            icon="ui-icon-newwin"
                            onclick="form.target='_blank'"
                            actionListener="#{sistemaControlador.imprimirRelatorioDaSessao(true)}"
                            ajax="false"/>

                    </div>

                    <div class="pull-right">


                        <a class="btn-dialog-full mrig05" onclick="dialogFullScreen()">
                            <i class="fa fa-expand"></i>
                        </a>

                        <a class="btn-dialog-full mrig05" onclick="dialogFullScreen(true)">
                            <i class="fa fa-arrows-alt"></i>
                        </a>

                        <a class="btn-dialog-normal mrig05 hidden" onclick="dialogNormalScreen()">
                            <i class="fa fa-undo"></i>
                        </a>

                        <a data-dismiss="modal" aria-hidden="true" onclick="dialogNormalScreen()">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>

                    <h5 id="tituloRelatorio">Impressão de Relatório</h5>
                </h:form>
            </div>
            <div class="modal-content" style="text-align: center">
                <h:form id="FormularioRelatorio">
                    <p:media rendered="#{facesContext.externalContext.sessionMap.get('relatorio') ne null}"
                             value="#{facesContext.externalContext.sessionMap.get('relatorio')}"
                             styleClass="relatorioMedia"
                             width="100%" player="pdf">
                        <f:param name="filename"
                                 value="#{facesContext.externalContext.sessionMap.get('relatorio').name}.pdf"/>
                        <center>
                            Se seu navegador não pode abrir o arquivo,
                            <p:commandLink value="clique aqui"
                                           actionListener="#{sistemaControlador.imprimirRelatorioDaSessao(false)}"
                                           ajax="false"/>
                            para efetuar o download.
                        </center>
                    </p:media>
                    <script type="text/javascript">
                        function dialogFullScreen(totalFull) {
                            $('#relatorio').addClass("modal-full");
                            $('.modal-content').addClass("modal-content-full");
                            $('.btn-dialog-full').addClass("hidden");
                            $('.btn-dialog-normal').removeClass("hidden");
                            $('.tituloRelatorio').addClass("hidden");
                            $('.relatorioMedia').css("height", "99%");
                            if (totalFull)
                                openFullscreen(document.getElementById('relatorio'));
                        }

                        function dialogNormalScreen() {
                            $('#relatorio').removeClass("modal-full");
                            $('.modal-content').removeClass("modal-content-full");
                            $('.btn-dialog-normal').addClass("hidden");
                            $('.btn-dialog-full').removeClass("hidden");
                            $('.tituloRelatorio').removeClass("hidden");
                            ajustaImpressaoRelatorio();
                            closeFullscreen(document.getElementById('relatorio'));
                        }
                    </script>
                </h:form>
            </div>
        </div>
        <h:form id="FormularioDocumentoOficial">
            <div id="documentoOficial"
                 class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="documentoOficial"
                 aria-hidden="true">
                <div class="modal-header" style="text-align: center">
                    <div class="centralizado">
                        Visualização de Documento Oficial
                    </div>
                </div>
                <div class="modal-body" id="modal-body-documento-oficial" style="background: #808080">
                    <div style="padding: 20px 50px 20px 50px; background: #ffffff">
                        <p:outputPanel id="areaDocumentoOficial">
                            <div id="areaDocumentoOficialContent">
                                <h:outputText value="#{facesContext.externalContext.sessionMap.get('documentoOficial')}"
                                              escape="false"/>
                            </div>
                        </p:outputPanel>
                    </div>
                </div>

                <div class="modal-footer">
                    <p:commandButton value="Imprimir" type="button" id="imprimeDocumentoOficial"
                                     icon="ui-icon-print" styleClass="operacao prioritario">
                        <p:printer target="areaDocumentoOficial"/>
                    </p:commandButton>
                    <p:commandButton icon="ui-icon-cancel" styleClass="operacao" value="Cancelar"
                                     onclick="$('#documentoOficial').modal('hide');"/>
                </div>
            </div>
        </h:form>

        <p:dialog widgetVar="dialogMensagensNaoLidas"
                  modal="true"
                  id="dialog-mensagens-nao-lidas"
                  header="Você possui a(s) seguinte(s) mensagem(ns):"
                  dynamic="false"
                  position="center"
                  closable="false"
                  style="z-index: 9999999999999 !important; position: fixed !important;"
                  onShow="redimensionarLadosDialog(this.id); setaFoco('bt-continuar'); limparMensagensNaoLidasNoServidor();"
                  resizable="false"
                  draggable="true">
            <h:form id="formulario-dialog-mensagens-nao-lidas">
                <div id="div-info-dialog-mensagens-nao-lidas"
                     class="div-info-tabela"
                     style="overflow-y: auto;
                         overflow-x: hidden;
                         max-height: 400px !important;">

                </div>
                <div id="div-rodape-mensagens"
                     style="padding-top: 5px; margin-top: 5px; text-align: center; border-top: #92b8d3 solid 1px">
                    <script type="text/javascript">
                        $(document).keyup(function (event) {
                            if (event.which == 27) {
                                $('#bt-continuar').click();
                            }
                        });
                    </script>
                    <button type="button"
                            id="bt-continuar"
                            onclick="dialogMensagensNaoLidas.hide();"
                            class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left operacao prioritario mtop05 mrig05">
                        <span class="ui-button-icon-left ui-icon ui-icon-check"></span>
                        <span class="ui-button-text">Continuar</span>
                    </button>
                </div>
            </h:form>
        </p:dialog>

        <p:outputPanel id="painel-consulta-debitos">
            <deb:consulta-debitos id="tabela-consulta-debitos"
                                  objetos="#{componenteConsultaDebitos.resultadosParcela}"/>
        </p:outputPanel>

        <div id="trocouUnidade"
             class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="unidadeOrganizacional"
             aria-hidden="true">
            <div class="modal-header alert" style="text-align: center">
                <div class="alert centralizado ">
                    Atenção!
                </div>
            </div>
            <div class="modal-body" id="modal-body-trocou-unidade" style="text-align: center">
                <div>
                    <p id="msgAoUsuarioByServer">

                    </p>
                </div>
            </div>

            <div class="modal-footer">
                <p:commandButton icon="ui-icon-refresh" styleClass="operacao" value="Recarregar"
                                 onclick="$('#trocouUnidade').modal('hide')"/>
            </div>
        </div>


        <div id="modalIdleMonitor" class="modal hide fade"
             tabindex="-1" role="dialog"
             aria-labelledby="modalIdleMonitor"
             aria-hidden="true">
            <h:form>
                <p:remoteCommand name="keepAlive" actionListener="#{sistemaControlador.keepSessionAlive}"
                                 update="@form"
                                 process="@form"/>
                <div class="modal-header alert alert-info" style="text-align: center">
                    <div class="centralizado">
                        Você ainda estar por aí?
                    </div>
                </div>
                <div class="modal-body" id="modal-body-sem-sessao" style="text-align: center">
                    <div>
                        <p>
                            Parece que você ficou inativo por mais de #{sistemaControlador.getTempoAntesDoAvisoEncerrarSessaoMinutos()} minutos.
                            Em #{sistemaControlador.getTempoAntesDeEncerrarSessaoMinutos()} minutos, a sessão irá se encerrar.
                            Caso ainda esteja utilizando a aplicação apenas confirme pressionando
                            <strong>'Continuar'</strong>.
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <p:commandButton
                        value="Continuar"
                        icon="ui-icon-check"
                        styleClass="operacao"
                        actionListener="#{sistemaControlador.keepSessionAlive}"
                        update="@form"
                        process="@form"
                        oncomplete="$('#modalIdleMonitor').modal('hide')"/>
                </div>
            </h:form>
        </div>

        <div id="aguardetrocarunidade"
             style="padding-top: 10px!important;padding-bottom: 10px!important;"
             class="modal hide fade"
             tabindex="-1" role="dialog"
             aria-labelledby="modalIdleMonitor"
             aria-hidden="true">
            <div style="text-align: center">
                <h:outputText value="Aguarde, processando operação..."/>
                <br/>
                <p:graphicImage value="/img/ajaxloadingbar.gif"/>
            </div>
        </div>

        <p:dialog modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  draggable="false"
                  resizable="false"
                  widgetVar="trocarUnidadeLogada"
                  closable="false">
            <h:form id="form-trocarUnidadeLogada">

                <div class="modal-header alert alert-info" style="text-align: center">
                    <div class="centralizado">
                        Selecione a data e unidade administrativa/orçamentária que deseja logar ...
                    </div>
                </div>
                <div class="modal-body">
                    <div>
                        <h:panelGrid columns="2">
                            <fc:outputLabelObrigatorio value="Tipo:"/>
                            <h:selectOneMenu value="#{sistemaControlador.alterarDataUnidadeLogada.tipo}">
                                <f:selectItems value="#{sistemaControlador.tiposHierarquias}"/>
                            </h:selectOneMenu>

                            <fc:outputLabelObrigatorio value="Data logada:"/>
                            <h:panelGrid columns="2" id="gridData" cellpadding="0" cellspacing="0">
                                <p:calendar id="dataLogada"
                                            title="Informe a data logada"
                                            navigator="true"
                                            disabled="#{!sistemaControlador.usuarioCorrente.podeAlterarData}"
                                            value="#{sistemaControlador.alterarDataUnidadeLogada.dataOperacao}"
                                            onkeypress="mascara(this, mdata)"
                                            pattern="dd/MM/yyyy"
                                            size="10">
                                    <p:ajax event="blur"
                                            process="@this :form-trocarUnidadeLogada:gridData"
                                            update=":form-trocarUnidadeLogada:aCadministrativa
                                                    :form-trocarUnidadeLogada:sMorcamentaria
                                                    :form-trocarUnidadeLogada:aCorcamentaria
                                                    :form-trocarUnidadeLogada:sMadministrativa"
                                            listener="#{sistemaControlador.atribuirNulUnidades()}"/>
                                    <p:ajax event="dateSelect"
                                            process="@this :form-trocarUnidadeLogada:gridData"
                                            update=":form-trocarUnidadeLogada:aCadministrativa
                                                    :form-trocarUnidadeLogada:sMorcamentaria
                                                    :form-trocarUnidadeLogada:aCorcamentaria
                                                    :form-trocarUnidadeLogada:sMadministrativa"
                                            listener="#{sistemaControlador.atribuirNulUnidades()}"/>
                                </p:calendar>

                                <p:commandButton
                                    value="Hoje"
                                    icon="ui-icon-calendar"
                                    rendered="#{sistemaControlador.usuarioCorrente.podeAlterarData}"
                                    style="min-width: 50px;min-height: 20px;"
                                    actionListener="#{sistemaControlador.atribuirDataHoje}"
                                    styleClass="mlef05"
                                    title="Clique para alterar data logada para data de hoje"
                                    update=":form-trocarUnidadeLogada"
                                    process="@this"
                                    onclick="aguarde.show()"
                                    oncomplete="aguarde.hide();"/>

                                <h:outputText value="Usuário sem permissão para alterar a data"
                                              styleClass="negrito"
                                              rendered="#{!sistemaControlador.usuarioCorrente.podeAlterarData}"/>
                            </h:panelGrid>

                            <fc:outputLabelObrigatorio value="Administrativa:"
                                                       rendered="#{sistemaControlador.alterarDataUnidadeLogada.isAdministrativa()}"/>
                            <p:autoComplete queryDelay="1000"
                                            rendered="#{sistemaControlador.alterarDataUnidadeLogada.isAdministrativa()}"
                                            id="aCadministrativa"
                                            title="Informe a Unidade Administrativa."
                                            value="#{sistemaControlador.alterarDataUnidadeLogada.administrativa}"
                                            completeMethod="#{sistemaControlador.completarHierarquiaAdministrativa}"
                                            var="unidade"
                                            size="50"
                                            dropdown="true"
                                            panelStyle="max-height: 250px;max-width: 800px;"
                                            process="@this"
                                            maxResults="50"
                                            itemLabel="#{unidade}"
                                            itemValue="#{unidade.id}"
                                            converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}">
                                <p:ajax event="itemSelect"
                                        process="@this :form-trocarUnidadeLogada:aCadministrativa :form-trocarUnidadeLogada:sMorcamentaria"
                                        update=":form-trocarUnidadeLogada"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"/>
                            </p:autoComplete>

                            <fc:outputLabelObrigatorio value="Orçamentária:"
                                                       rendered="#{sistemaControlador.alterarDataUnidadeLogada.isAdministrativa()}"/>
                            <h:selectOneMenu
                                rendered="#{sistemaControlador.alterarDataUnidadeLogada.isAdministrativa()}"
                                value="#{sistemaControlador.alterarDataUnidadeLogada.orcamentaria}"
                                converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                style="width: 400px"
                                id="sMorcamentaria">
                                <f:selectItems
                                    value="#{sistemaControlador.buscarHierarquiasOrcamentariaDaAdministrativa()}"/>
                            </h:selectOneMenu>


                            <fc:outputLabelObrigatorio value="Orçamentaria:"
                                                       rendered="#{!sistemaControlador.alterarDataUnidadeLogada.isAdministrativa()}"/>
                            <p:autoComplete queryDelay="1000"
                                            rendered="#{!sistemaControlador.alterarDataUnidadeLogada.isAdministrativa()}"
                                            id="aCorcamentaria"
                                            title="Informe a Unidade Orçamentária."
                                            value="#{sistemaControlador.alterarDataUnidadeLogada.orcamentaria}"
                                            completeMethod="#{sistemaControlador.completarHierarquiaOrcamentaria}"
                                            var="unidade"
                                            size="50"
                                            dropdown="true"
                                            panelStyle="max-height: 250px;max-width: 800px;"
                                            process="@this"
                                            maxResults="50"
                                            itemLabel="#{unidade}"
                                            itemValue="#{unidade.id}"
                                            converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}">
                                <p:ajax event="itemSelect"
                                        process="@this :form-trocarUnidadeLogada:aCorcamentaria :form-trocarUnidadeLogada:sMadministrativa"
                                        update=":form-trocarUnidadeLogada"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"/>
                            </p:autoComplete>

                            <fc:outputLabelObrigatorio value="Administrativa:"
                                                       rendered="#{!sistemaControlador.alterarDataUnidadeLogada.isAdministrativa()}"/>
                            <h:selectOneMenu
                                rendered="#{!sistemaControlador.alterarDataUnidadeLogada.isAdministrativa()}"
                                value="#{sistemaControlador.alterarDataUnidadeLogada.administrativa}"
                                converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                style="width: 400px"
                                id="sMadministrativa">
                                <f:selectItems
                                    value="#{sistemaControlador.buscarHierarquiasAdministrativaDaOrcamentaria()}"/>
                            </h:selectOneMenu>
                        </h:panelGrid>
                    </div>
                </div>
                <div class="modal-footer">
                    <p:commandButton
                        value="Confirmar"
                        icon="ui-icon-check"
                        styleClass="operacao"
                        actionListener="#{sistemaControlador.confirmarTrocarUnidade}"
                        update="@form"
                        process="@form"
                        onclick="aguarde.show()"
                        oncomplete="aguarde.hide();"/>
                    <p:commandButton
                        value="Cancel"
                        icon="ui-icon-cancel"
                        styleClass="operacao mlef05"
                        update="@form"
                        process="@form"
                        onclick="aguarde.show()"
                        oncomplete="aguarde.hide();trocarUnidadeLogada.hide()"/>
                </div>
            </h:form>
        </p:dialog>


        <p:dialog modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  draggable="false"
                  header="Emissão de Relatório"
                  resizable="false"
                  widgetVar="visualizarRelatorio"
                  closable="false">
            <h:form id="formVisualizarRelatorio">

                <div class="modal-header alert alert-info" style="text-align: center">
                    <div class="centralizado">
                        #{sistemaControlador.webReportDTO.nome}
                    </div>
                </div>
                <div class="modal-body">
                    <div>
                        <h:panelGrid columns="2">
                            <h:outputText value="Data:" styleClass="negrito"/>
                            <h:outputText value="#{sistemaControlador.webReportDTO.solicitadoEm}">
                                <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                            </h:outputText>

                            <h:outputText value="Usuário:" styleClass="negrito"/>
                            <h:outputText value="#{sistemaControlador.webReportDTO.usuarioSistema.pessoaFisica.nome}"/>

                            <h:outputText value="Tempo gasto:" styleClass="negrito"/>
                            <h:outputText value="#{sistemaControlador.webReportDTO.tempoAsString}"/>
                        </h:panelGrid>

                        <p:outputPanel id="barraAndamento">
                            <div class="alinhamentoCentralizado">

                                <br></br>
                                <br></br>
                                <c:if
                                    test="#{sistemaControlador.webReportDTO ne null and sistemaControlador.webReportDTO.conteudo eq null and !sistemaControlador.webReportDTO.isDeuErro()}">
                                    <i class="fa fa-spinner fa-spin"></i>
                                    Em andamento
                                </c:if>

                                <c:if
                                    test="#{sistemaControlador.webReportDTO ne null and sistemaControlador.webReportDTO.conteudo ne null and !sistemaControlador.webReportDTO.isDeuErro()}">
                                    Finalizado.
                                </c:if>

                                <c:if
                                    test="#{sistemaControlador.webReportDTO ne null and sistemaControlador.webReportDTO.isDeuErro()}">
                                    <div class="alert alert-danger">
                                        <h5>Erro ao gerar o relatório#{sistemaControlador.webReportDTO.erro}</h5>
                                    </div>
                                </c:if>

                                <br></br>
                                <br></br>
                                <div
                                    class="progress #{sistemaControlador.webReportDTO.isConcluido() ? 'progress-success' : 'progress-info'}  active"
                                    id="barraProgressoAndamento">
                                    <div class="bar"
                                         style="width: #{sistemaControlador.webReportDTO.porcentagem}%;"></div>
                                </div>

                                <h:outputText value="#{sistemaControlador.webReportDTO.porcentagem}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>%
                            </div>
                        </p:outputPanel>
                    </div>
                </div>
                <div class="modal-footer">
                    <p:commandButton title="Imprimir"
                                     value="Imprimir"
                                     icon="ui-icon-print"
                                     styleClass="operacao mlef05 prioritario"
                                     onclick="aguarde.show()"
                                     rendered="#{sistemaControlador.isRelatorioConcluido(sistemaControlador.webReportDTO.uuid) and
                                     sistemaControlador.isRelatorioPDF(sistemaControlador.webReportDTO.uuid)}"
                                     oncomplete="aguarde.hide()"
                                     update="@form"
                                     process="@form"
                                     actionListener="#{sistemaControlador.imprimirRelatorio(sistemaControlador.webReportDTO.uuid)}"/>

                    <p:commandButton value="Download"
                                     ajax="false"
                                     icon="ui-icon-arrowthick-1-s"
                                     styleClass="mrig03"
                                     rendered="#{sistemaControlador.isRelatorioConcluido(sistemaControlador.webReportDTO.uuid)
                                     and !sistemaControlador.isRelatorioPDF(sistemaControlador.webReportDTO.uuid)}">
                        <p:fileDownload
                            value="#{sistemaControlador.imprimirRelatorio(sistemaControlador.webReportDTO.uuid)}"/>
                    </p:commandButton>

                    <p:commandButton
                        value="Fechar"
                        icon="ui-icon-cancel"
                        styleClass="operacao mlef05"
                        update="@form"
                        process="@form :formRodape"
                        onclick="aguarde.show()"
                        oncomplete="aguarde.hide();visualizarRelatorio.hide()"/>
                </div>
            </h:form>
        </p:dialog>


        <p:dialog modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  draggable="false"
                  header="Emissão de Relatório"
                  resizable="false"
                  widgetVar="visualizarRelatorioOutroUsuario"
                  closable="false">
            <h:form id="formvisualizarRelatorioOutroUsuario">
                <div class="modal-header alert alert-info" style="text-align: center">
                    <div class="centralizado">
                        #{sistemaControlador.webReportDTO.nome}
                    </div>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger" style="text-align: center;">
                        <h:outputText value="ATENÇÃO!" styleClass="vermelhonegrito"/>
                        <p:spacer width="3px"/>
                        <h:outputText value="#{sistemaControlador.webReportDTO.erro}" escape="false"/>
                    </div>
                </div>
                <div class="modal-footer">
                    <p:commandButton title="Re-Imprimir"
                                     value="Imprimir"
                                     icon="ui-icon-print"
                                     styleClass="operacao mlef05 prioritario"
                                     onclick="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     update="@form"
                                     process="@form"
                                     actionListener="#{sistemaControlador.imprimirRelatorio(sistemaControlador.webReportDTO.uuid)}"/>


                    <p:commandButton
                        value="Re-gerar"
                        icon="ui-icon-refresh"
                        styleClass="operacao mlef05"
                        update="@form"
                        process="@form :formRodape"
                        actionListener="#{sistemaControlador.cancelarUltimoRelatorioGerandoNovo()}"
                        onclick="aguarde.show()"
                        oncomplete="aguarde.hide();visualizarRelatorioOutroUsuario.hide()"/>

                    <p:commandButton
                        value="Fechar"
                        icon="ui-icon-cancel"
                        styleClass="operacao mlef05"
                        update="@form"
                        process="@form :formRodape"
                        onclick="aguarde.show()"
                        oncomplete="aguarde.hide();visualizarRelatorioOutroUsuario.hide()"/>
                </div>
            </h:form>
        </p:dialog>

        <script>
            var exibirTelaVersao = $('#form-mensagem-versao\\:exibir-dialog-versao')[0].value;
            if (exibirTelaVersao === 'true') {
                $(document).ready(function () {
                    verVersao();
                });
            }


        </script>

        <h:form>
            <p:remoteCommand
                update=":formulario-versao-sistema"
                actionListener="#{sistemaControlador.verVersao()}"
                oncomplete="abrirDialoVersao();"
                name="verVersao"/>
        </h:form>
        <h:form id="formulario-versao-sistema">
            <div id="versaoDialog"
                 style="padding-top: 10px!important;padding-bottom: 10px!important;"
                 class="modal hide fade"
                 tabindex="-1" role="dialog"
                 aria-labelledby="modalIdleMonitor"
                 aria-hidden="true">
                <div class="modal-content">
                    <div class="modal-header alert alert-info " style="text-align: center">
                        Atualizações da versão #{sistemaControlador.appVersion}
                    </div>
                    <div class="modal-body" style="text-align: justify; overflow-y: auto; height: 300px;">
                        <h:outputText value="#{sistemaControlador.notasVersao}"
                                      escape="false"/>
                    </div>
                    <div class="modal-footer">
                        <p:commandButton value="Fechar"
                                         icon="ui-icon-circle-check"
                                         styleClass="mlef05"
                                         title="Clique para fechar"
                                         update=":form-mensagem-versao"
                                         onclick="$('#versaoDialog').modal('hide')"
                                         actionListener="#{sistemaControlador.difinirUltimaVersaoAoUsuario()}"/>
                    </div>
                </div>
            </div>
        </h:form>

        <h:form id="formulario-mensagem-todos-usuarios">
            <div id="mensagemTodosUsuariosDialog"
                 style="padding-top: 10px!important;padding-bottom: 10px!important;"
                 class="modal hide fade"
                 tabindex="-1" role="dialog"
                 aria-labelledby="modalIdleMonitor"
                 aria-hidden="true">
                <div class="modal-content">
                    <div class="modal-header alert alert-info " style="text-align: center">
                        Mensagens
                    </div>
                    <div class="modal-body text-center" style="text-align: justify; overflow-y: auto;">
                        <ui:repeat value="#{comunicacaoTodosUsuariosControlador.mensagem}" var="mensagem">
                            <div class="alert alert-warning ">
                                <b>#{mensagem.titulo}</b><br/>
                                #{mensagem.conteudo}
                            </div>
                        </ui:repeat>
                    </div>
                    <div class="modal-footer">
                        <p:commandButton value="Fechar"
                                         icon="ui-icon-circle-check"
                                         styleClass="mlef05"
                                         title="Clique para fechar"
                                         update=":form-mensagem-versao"
                                         onclick="$('#mensagemTodosUsuariosDialog').modal('hide')"/>
                    </div>
                </div>
            </div>
        </h:form>

        <p:dialog showHeader="false"
                  modal="true"
                  dynamic="true"
                  position="top"
                  style="position: fixed !important; margin-top: 70px!important;"
                  draggable="false"
                  width="1000"
                  resizable="false"
                  widgetVar="dlgFaleConosco"
                  closable="false">
            <h:form id="formFaleConosco">
                <legend
                    class="legenda" style="margin-bottom: 5px">Fale Conosco
                    <i class="fa fa-commenting-o fa-2x" style="float: right !important;"></i>
                </legend>

                <div class="modal-body" style="margin-top: -10px">

                    <p:commandLink styleClass="special-link"
                                   onclick="aguarde.show()"
                                   oncomplete="aguarde.hide()"
                                   style="text-decoration: none !important; font-size: 13px"
                                   update=":formFaleConosco"
                                   process="@this"
                                   rendered="#{faleConoscoWebControlador.selecionado eq null}"
                                   actionListener="#{faleConoscoWebControlador.novoFaleConosco}"
                                   title="Clique para criar um novo fale conosco.">
                        <i class="fa fa-plus-circle" style="width: 15px"></i>
                        Nova Mensagem
                    </p:commandLink>

                    <p:outputPanel rendered="#{faleConoscoWebControlador.renderListFaleConosco()}"
                                   styleClass="mtop05">
                        <p:outputPanel rendered="#{!faleConoscoWebControlador.renderFaleConoscoComRegistros()}">
                            <div class="alert alert-info" align="center" style="font-size: 13px">
                                #{faleConoscoWebControlador.usuarioiSistema.pessoaFisica.primeiroNome}, você não possui mensagens no fale conosco.
                            </div>
                        </p:outputPanel>

                        <table class="table table-hover" id="tabelaFaleConosco">
                            <tr>
                                <td style="width: 80%; padding: 8px 0 8px 8px;">
                                    <p:inputText value="#{faleConoscoWebControlador.filtro}"
                                                 rendered="#{faleConoscoWebControlador.renderFaleConoscoComRegistros()}"
                                                 maxlength="70"
                                                 styleClass="form-control"
                                                 style="width: 100%"
                                                 id="filtro"/>
                                    <p:watermark for="filtro"
                                                 value="Pesquise por título, conteúdo ou o recurso"
                                                 id="watermark"/>
                                </td>

                                <td style="padding: 8px 35px 8px 8px;">
                                    <p:commandButton icon="ui-icon-search"
                                                     styleClass="mrig10 prioritario"
                                                     rendered="#{faleConoscoWebControlador.renderFaleConoscoComRegistros()}"
                                                     style="height: 27px;width: 100%"
                                                     value="Pesquisar"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     update=":formFaleConosco"
                                                     process=":formFaleConosco"
                                                     actionListener="#{faleConoscoWebControlador.filtrar()}"/>
                                </td>
                            </tr>

                            <ui:repeat value="#{faleConoscoWebControlador.faleConoscoWebList}"
                                       var="fale">
                                <tr>
                                    <td colspan="2" style="padding: 8px 35px 8px 8px;">
                                        <h:outputText
                                            value="#{fale.titulo}"
                                            styleClass="#{fale.isVisualizado() ? 'italico': 'negrito'}"/>

                                        <h:outputText value="#{fale.dataEnvio}" styleClass="pull-right">
                                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                                        </h:outputText><br/>

                                        <h:outputText value="#{fale.conteudoReduzido}"
                                                      escape="false"
                                                      styleClass="#{fale.isVisualizado() ? 'italico': ''} m-t-sm"/><br/>

                                        <h:commandLink
                                            actionListener="#{faleConoscoWebControlador.verFaleConosco(fale)}"
                                            id="visualizar#{fale.id}"
                                            styleClass="visualizar#{fale.id} m-sm"
                                            onclick="aguarde.show()"
                                            style="text-decoration: none !important;"
                                            title="Clique para visualizar este fale conosco.">
                                            <i class="icon-eye-open"/>
                                        </h:commandLink>

                                        <p:commandLink styleClass="special-link"
                                                       style="text-decoration: none !important"
                                                       update=":formFaleConosco"
                                                       process="@this"
                                                       actionListener="#{faleConoscoWebControlador.responderFaleConoscoUsuario(fale)}"
                                                       title="Clique para responder a mensagem.">
                                            <i class="icon-share-alt"/>
                                        </p:commandLink>
                                    </td>
                                </tr>
                            </ui:repeat>
                        </table>
                    </p:outputPanel>

                    <p:outputPanel rendered="#{faleConoscoWebControlador.renderResposta()}" id="panelResposta">
                        <div class="alert alert-info" style="font-size: 14px; margin-bottom: -1px" align="center">
                            Mensagens
                        </div>
                        <p:dataList value="#{faleConoscoWebControlador.selecionado.respostas}"
                                    var="respUsu" type="definition">
                            <br/>
                            <h:outputText
                                styleClass="italico negrito mlef05"
                                style="color: #5a5c5b"
                                value="#{respUsu.usuario} - "/>
                            <h:outputText value="#{respUsu.enviadaEm}"
                                          styleClass="italico negrito"
                                          style="color: #5a5c5b">
                                <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                            </h:outputText>

                            <f:facet name="description">
                                <h:outputText value="#{respUsu.conteudo}"
                                              rendered="#{respUsu.isVisualizada()}"
                                              escape="false"/>
                            </f:facet>

                            <p:editor value="#{faleConoscoWebControlador.resposta.conteudo}"
                                      rendered="#{!respUsu.isVisualizada()}"
                                      width="850"
                                      style="margin-left: 5%"
                                      height="150"/>
                        </p:dataList>
                    </p:outputPanel>

                    <p:tabView id="tabView" rendered="#{faleConoscoWebControlador.renderFaleConosco()}">
                        <p:tab title="Mensagem">
                            <p:commandButton icon="ui-icon-close"
                                             process="@this"
                                             update=":formFaleConosco"
                                             title="Clique para cancelar esta mensagem."
                                             style="float: right"
                                             styleClass="pull-right botao-transparente"
                                             actionListener="#{faleConoscoWebControlador.cancelarFaleConosco()}"
                                             onclick="aguarde.show();"
                                             oncomplete="aguarde.hide()"/>

                            <h:panelGrid columns="2">
                                <h:outputText value="Título: "/>
                                <p:inputText value="#{faleConoscoWebControlador.selecionado.titulo}"
                                             size="70"/>

                                <h:outputLabel value="Data de Lançamento: "/>
                                <h:outputText value="#{faleConoscoWebControlador.selecionado.dataLancamento}"
                                              styleClass="negrito">
                                    <f:convertDateTime type="both"/>
                                </h:outputText>

                                <h:outputLabel value="Página: "/>
                                <h:outputText value="#{faleConoscoWebControlador.selecionado.pagina}"
                                              styleClass="negrito"/>

                                <h:outputLabel value="Recurso: "/>
                                <h:outputText value="#{faleConoscoWebControlador.selecionado.recurso}"
                                              styleClass="negrito"/>

                                <fc:outputLabelObrigatorio value="Módulo: "/>
                                <h:selectOneMenu value="#{faleConoscoWebControlador.selecionado.modulo}">
                                    <f:selectItems value="#{faleConoscoWebControlador.modulosSistema}"/>
                                </h:selectOneMenu>

                                <h:outputLabel value="Usuário: "/>
                                <h:outputText value="#{faleConoscoWebControlador.selecionado.usuario}"
                                              styleClass="negrito"/>

                                <h:outputLabel value="Enviado Em: "/>
                                <h:outputText value="#{faleConoscoWebControlador.selecionado.dataEnvio}"
                                              styleClass="negrito">
                                    <f:convertDateTime type="both"/>
                                </h:outputText>

                                <h:outputLabel value="Unidade Administrativa: "/>
                                <h:outputText value="#{faleConoscoWebControlador.selecionado.hierarquiaAdministrativa}"
                                              styleClass="negrito"/>

                                <h:outputLabel value="Unidade Orçamentária: "/>
                                <h:outputText value="#{faleConoscoWebControlador.selecionado.hierarquiaOrcametaria}"
                                              styleClass="negrito"/>

                                <fc:outputLabelObrigatorio value="Tipo: "/>
                                <h:selectOneMenu value="#{faleConoscoWebControlador.selecionado.tipo}">
                                    <f:selectItems value="#{faleConoscoWebControlador.tiposFaleConosco}"/>
                                </h:selectOneMenu>
                            </h:panelGrid>

                            <p:editor value="#{faleConoscoWebControlador.selecionado.conteudo}"
                                      height="180"
                                      width="900"/>
                        </p:tab>

                        <p:tab title="Anexos">
                            <fc:filesUploadWP selecionado="#{faleConoscoWebControlador.selecionado}"/>
                        </p:tab>
                    </p:tabView>
                </div>

                <div class="modal-footer">
                    <p:commandButton value="Cancelar"
                                     icon="ui-icon-arrowreturnthick-1-w"
                                     process="@this"
                                     style="float: right"
                                     styleClass="operacao"
                                     onclick="aguarde.show();"
                                     rendered="#{faleConoscoWebControlador.renderFaleConosco() or faleConoscoWebControlador.renderListFaleConosco()}"
                                     actionListener="#{faleConoscoWebControlador.cancelarFaleConosco()}"
                                     oncomplete="aguarde.hide();dlgFaleConosco.hide();"/>

                    <p:commandButton value="Enviar"
                                     process="formFaleConosco"
                                     icon="ui-icon-circle-triangle-e"
                                     styleClass="operacao mrig05"
                                     style="float: right"
                                     update="@none"
                                     onclick="aguarde.show();"
                                     oncomplete="aguarde.hide()"
                                     rendered="#{faleConoscoWebControlador.renderFaleConosco()}"
                                     actionListener="#{faleConoscoWebControlador.salvar()}"/>

                    <p:outputPanel rendered="#{faleConoscoWebControlador.renderResposta()}">
                        <p:commandButton value="Cancelar"
                                         icon="ui-icon-arrowreturnthick-1-w"
                                         process="@this"
                                         update=":formFaleConosco"
                                         style="float: right"
                                         styleClass="operacao"
                                         onclick="aguarde.show();"
                                         oncomplete="aguarde.hide();"
                                         title="Clique para cancelar nova mensagem."
                                         actionListener="#{faleConoscoWebControlador.cancelarResponder()}"/>

                        <p:commandButton value="Enviar"
                                         icon="ui-icon-circle-triangle-e"
                                         styleClass="operacao mrig05"
                                         style="float: right"
                                         onstart="aguarde.show();"
                                         oncomplete="aguarde.hide()"
                                         actionListener="#{faleConoscoWebControlador.salvarRespostaUsuario()}"/>
                    </p:outputPanel>
                </div>
            </h:form>
        </p:dialog>

    </h:body>
</f:view>
</html>

