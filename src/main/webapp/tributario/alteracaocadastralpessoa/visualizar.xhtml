<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:f="http://java.sun.com/jsf/core"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <p:messages showDetail="true"/>
        <h:form id="Formulario">
            <p:tabView>
                <p:tab title="Alteração Cadastral Pessoa">
                    <table>
                        <tr>
                            <td>
                                <p:panel id="panelCadastro" styleClass="mtop05" style="border: none;">
                                    <h:panelGrid columns="1">
                                        <h:outputText value="Dados Alterados Via Portal do Contribuinte"
                                                      styleClass="negrito"/>
                                    </h:panelGrid>
                                    <h:panelGrid id="panelGridALteracao" columns="2" styleClass="mtop05">

                                        <h:outputText value="CPF/CNPJ:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.selecionado.pessoa.cpf_Cnpj}"
                                            styleClass="negrito"/>

                                        <h:outputText value="Nome/Razão Social:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.selecionado.nomeRazaoSocial}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="Data de Nascimento/Abertura:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.selecionado.dataNascimentoAbertura}"
                                            styleClass="negrito">
                                            <f:convertDateTime type="date"/>
                                        </h:outputText>

                                        <h:outputText value="CEP:"/>
                                        <h:outputText value="#{alteracaoCadastralPessoaControlador.selecionado.cep}"
                                                      styleClass="negrito"/>

                                        <h:outputText value="Logradouro:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.selecionado.logradouro}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="Numero:"/>
                                        <h:outputText value="#{alteracaoCadastralPessoaControlador.selecionado.numero}"
                                                      styleClass="negrito maiusculo"/>

                                        <h:outputText value="Bairro:"/>
                                        <h:outputText value="#{alteracaoCadastralPessoaControlador.selecionado.bairro}"
                                                      styleClass="negrito maiusculo"/>

                                        <h:outputText value="Cidade:"/>
                                        <h:outputText value="#{alteracaoCadastralPessoaControlador.selecionado.cidade}"
                                                      styleClass="negrito maiusculo"/>

                                        <h:outputText value="UF:"/>
                                        <h:outputText value="#{alteracaoCadastralPessoaControlador.selecionado.uf}"
                                                      styleClass="negrito maiusculo"/>

                                        <h:outputText value="Complemento:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.selecionado.complemento}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="Email:"/>
                                        <h:outputText value="#{alteracaoCadastralPessoaControlador.selecionado.email}"
                                                      styleClass="negrito minusculo"/>

                                        <h:outputText value="Telefone:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.selecionado.telefone}"
                                            styleClass="negrito maiusculo"/>
                                    </h:panelGrid>
                                </p:panel>
                            </td>

                            <td>
                                <p:panel id="panelCad" styleClass="mtop05" style="border: none;">
                                    <h:panelGrid columns="1">
                                        <h:outputText value="Dados Atuais da Pessoa" styleClass="negrito"/>
                                    </h:panelGrid>
                                    <h:panelGrid id="panelGridAL" columns="2" styleClass="mtop05">

                                        <h:outputText value="CPF/CNPJ:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.selecionado.pessoa.cpf_Cnpj}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="Nome/Razão Social:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.selecionado.pessoa.nome}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="Data de Nascimento/Abertura:"/>
                                        <h:outputText
                                            rendered="#{alteracaoCadastralPessoaControlador.pessoaFisicaOuPessoaJuridica}"
                                            value="#{alteracaoCadastralPessoaControlador.selecionado.pessoa.asPessoaFisica.dataNascimento}"
                                            styleClass="negrito maiusculo">
                                            <f:convertDateTime type="date"/>
                                        </h:outputText>

                                        <h:outputText
                                            rendered="#{!alteracaoCadastralPessoaControlador.pessoaFisicaOuPessoaJuridica}"
                                            value="#{alteracaoCadastralPessoaControlador.selecionado.pessoa.asPessoaJuridica.inicioAtividade}"
                                            styleClass="negrito maiusculo">
                                            <f:convertDateTime type="date"/>
                                        </h:outputText>

                                        <h:outputText value="CEP:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.enderecoPessoa.cep}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="Logradouro:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.enderecoPessoa.logradouro}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="Numero:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.enderecoPessoa.numero}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="Bairro:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.enderecoPessoa.bairro}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="Cidade:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.enderecoPessoa.localidade}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="UF:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.enderecoPessoa.uf}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="Complemento:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.enderecoPessoa.complemento}"
                                            styleClass="negrito maiusculo"/>

                                        <h:outputText value="Email:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.selecionado.pessoa.email}"
                                            styleClass="negrito minusculo"/>

                                        <h:outputText value="Telefone:"/>
                                        <h:outputText
                                            value="#{alteracaoCadastralPessoaControlador.telefonePessoa.telefone}"
                                            styleClass="negrito maiusculo"/>

                                    </h:panelGrid>
                                </p:panel>
                            </td>
                        </tr>
                    </table>

                    <p:separator styleClass="mtop05"/>
                    <h:panelGrid columns="2" styleClass="mtop05">
                        <h:outputText value="Situação:"/>
                        <h:outputText
                            value="#{alteracaoCadastralPessoaControlador.selecionado.situacao.descricao}"
                            styleClass="azulnegrito"/>

                        <h:outputText value="Usuário:"/>
                        <h:outputText
                            value="#{alteracaoCadastralPessoaControlador.selecionado.usuarioResponsavel}"
                            styleClass="negrito maiusculo"/>

                        <h:outputText value="Data:"/>
                        <h:outputText
                            value="#{alteracaoCadastralPessoaControlador.selecionado.dataAlteracao}"
                            styleClass="negrito">
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                        </h:outputText>
                    </h:panelGrid>
                </p:tab>
                <p:tab title="Anexos">
                    <p:outputPanel id="panelAnexos">
                        <fc:filesUploadWP id="upload-empregador"
                                          isTelaEditar="false"
                                          selecionado="#{alteracaoCadastralPessoaControlador.selecionado}"/>
                    </p:outputPanel>
                </p:tab>
                <p:tab title="Dados da Conclusão"
                       rendered="#{alteracaoCadastralPessoaControlador.canAprovar()}">
                    <h:panelGrid columns="2">
                        <h:outputText value="Situação:"/>
                        <h:outputText value="#{alteracaoCadastralPessoaControlador.selecionado.situacao.descricao}"
                                      styleClass="negrito"/>

                        <h:outputText value="Usuário:"/>
                        <h:outputText value="#{alteracaoCadastralPessoaControlador.selecionado.usuarioConclusao}"
                                      styleClass="negrito"/>

                        <h:outputText value="Data:"/>
                        <h:outputText value="#{alteracaoCadastralPessoaControlador.selecionado.dataConclusao}"
                                      styleClass="negrito">
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                        </h:outputText>

                        <h:outputText value="Motivo:"/>
                        <h:outputText value="#{alteracaoCadastralPessoaControlador.selecionado.motivoConclusao}"
                                      styleClass="negrito"/>
                    </h:panelGrid>
                </p:tab>
            </p:tabView>

            <p:commandButton styleClass="operacao prioritario mtop10"
                             icon="ui-icon-check"
                             id="btnAprovar"
                             update="@form"
                             onclick="statusDialog.show()"
                             oncomplete="statusDialog.hide()"
                             disabled="#{alteracaoCadastralPessoaControlador.canAprovar()}"
                             actionListener="#{alteracaoCadastralPessoaControlador.aprovarAlteracoes()}"
                             value="Deferir"/>

            <p:commandButton styleClass="operacao mtop10 mlef05"
                             icon="ui-icon-close"
                             id="btnAbrirIndeferir"
                             update=":formIndeferir"
                             process="@this"
                             onclick="dialogIndeferir.show()"
                             disabled="#{alteracaoCadastralPessoaControlador.canAprovar()}"
                             value="Indeferir"/>

            <p:commandButton value="Voltar"
                             immediate="true"
                             process="@this"
                             update="@this"
                             icon="ui-icon-cancel"
                             styleClass="operacao mtop10 mlef05"
                             action="lista"/>

        </h:form>

        <p:dialog id="dlgIndeferir" width="450" modal="true"
                  widgetVar="dialogIndeferir"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  header="Indeferir Alteração Cadastral" resizable="false">
            <h:form id="formIndeferir">
                <p:panel>
                    <h:panelGrid columns="1">
                        <h:outputText value="Motivo: "/>
                        <p:inputTextarea value="#{alteracaoCadastralPessoaControlador.selecionado.motivoConclusao}"
                                         rows="5" cols="60" maxlength="1000"
                                         counterTemplate="{0} Caracteres Restantes."
                                         counter="counter-motivo"/>
                        <h:outputText id="counter-motivo"
                                      styleClass="mlef05 azulnegrito"/>

                    </h:panelGrid>

                    <p:commandButton styleClass="operacao mtop10"
                                     icon="ui-icon-check"
                                     id="btnIndeferir"
                                     update="@form"
                                     process="@form"
                                     onclick="statusDialog.show()"
                                     oncomplete="statusDialog.hide()"
                                     disabled="#{alteracaoCadastralPessoaControlador.canAprovar()}"
                                     actionListener="#{alteracaoCadastralPessoaControlador.indeferirAlteracoes()}"
                                     value="Confirmar"/>

                    <p:commandButton value="Fechar" icon="ui-icon-close"
                                     onclick="dialogIndeferir.hide()"
                                     styleClass="operacao mtop10"/>
                </p:panel>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
