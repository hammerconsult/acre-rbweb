<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <fc:cabecalhoPretty origem="#{programacaoCobrancaControlador.caminhoPadrao}listar/"
                                mostrarBotaoNovo="${false}"
                                auditavel="${true}"
                                controlador="#{programacaoCobrancaControlador}"/>

            <p:panel>
                <p:tabView id="tabViewGeral">
                    <p:tab title="Programação de Cobrança">

                        <h:panelGrid columns="2">
                            <h:outputText value="Número: "/>
                            <h:outputText value="#{programacaoCobrancaControlador.selecionado.numero}"
                                          styleClass="negrito"/>
                            <h:outputText value="Tipo de Cadastro:" style="padding-right: 18px;"/>
                            <h:outputText value="#{programacaoCobrancaControlador.selecionado.tipoCadastro.descricao}"
                                          styleClass="negrito"/>
                            <h:outputText value="Protocolo: "/>
                            <fc:protocolo ano="#{programacaoCobrancaControlador.selecionado.anoProtocolo}"
                                          readonly="true"
                                          numero="#{programacaoCobrancaControlador.selecionado.numeroProtocolo}"
                                          controlador="#{programacaoCobrancaControlador}" mostrarLabel="false"/>

                            <h:outputText value="Data da Criação: "/>
                            <h:outputText value="#{programacaoCobrancaControlador.selecionado.dataProgramacaoCobranca}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                            <h:outputText value="Usuário: "/>
                            <h:outputText value="#{programacaoCobrancaControlador.selecionado.usuarioSistema.nome}"
                                          styleClass="negrito"/>
                            <h:outputText value="Descrição: "/>
                            <h:outputText value="#{programacaoCobrancaControlador.selecionado.descricao}"
                                          styleClass="negrito"/>
                            <h:outputText value="Situação: "/>
                            <h:outputText styleClass="negrito"
                                          value="#{programacaoCobrancaControlador.selecionado.ultimaSituacao.descricao}"/>
                        </h:panelGrid>

                    </p:tab>
                    <p:tab title="Filtros Utilizados">
                        <h:panelGrid columns="2"
                                     rendered="#{programacaoCobrancaControlador.selecionado.tipoCadastro eq 'PESSOA'}"
                                     styleClass="mtop10">

                            <h:outputText value="Contribuinte(s): " rendered="#{!programacaoCobrancaControlador.selecionado.dividas.isEmpty()}"/>
                            <h:panelGroup id="pessoasContribuinte" rendered="#{!programacaoCobrancaControlador.selecionado.dividas.isEmpty()}">
                                <table class="table table-striped">
                                    <ui:repeat
                                        value="#{programacaoCobrancaControlador.selecionado.contribuintes}"
                                        var="pessoa">
                                        <tr>
                                            <td style="border: none">
                                                <h:outputText value="#{pessoa.contribuinte}" styleClass="negrito"/>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </table>
                            </h:panelGroup>

                            <p:separator style="border: none;"/>
                            <p:separator style="border: none;"/>

                            <h:outputText value="Dívida(s): "/>
                            <h:panelGroup id="dividasPessoa">
                                <table class="table">
                                    <ui:repeat value="#{programacaoCobrancaControlador.selecionado.dividas}"
                                               var="dividaP">
                                        <tr>
                                            <td style="border: none">
                                                <h:outputText value="#{dividaP.divida.descricao}" styleClass="negrito"/>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </table>
                            </h:panelGroup>

                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.dividas.isEmpty()}"/>
                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.dividas.isEmpty()}"/>

                            <h:outputText value="Exercício: "/>
                            <h:panelGrid columns="4">
                                <h:outputText value="Inicial: "/>
                                <p:inputText value="#{programacaoCobrancaControlador.selecionado.exercicioInicial}"
                                             size="8"
                                             styleClass="negrito" disabled="true"/>
                                <h:outputText value="Final: "/>
                                <p:inputText value="#{programacaoCobrancaControlador.selecionado.exercicioFinal}"
                                             size="8"
                                             styleClass="negrito" disabled="true"/>
                            </h:panelGrid>
                            <h:outputText value="Vencimento: "/>
                            <h:panelGrid columns="4">
                                <h:outputText value="Inicial: "/>
                                <p:inputText value="#{programacaoCobrancaControlador.selecionado.vencimentoInicial}"
                                             size="8"
                                             styleClass="negrito" disabled="true">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </p:inputText>
                                <h:outputText value="Final: "/>
                                <p:inputText value="#{programacaoCobrancaControlador.selecionado.vencimentoFinal}"
                                             size="8"
                                             styleClass="negrito" disabled="true">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </p:inputText>
                            </h:panelGrid>
                        </h:panelGrid>

                        <h:panelGrid columns="2"
                                     rendered="#{programacaoCobrancaControlador.selecionado.tipoCadastro eq 'ECONOMICO'}"
                                     styleClass="mtop10">

                            <h:outputText value="CNAE(s): " rendered="#{!programacaoCobrancaControlador.selecionado.cnaes.isEmpty()}"/>
                            <h:panelGroup id="cnaes" rendered="#{!programacaoCobrancaControlador.selecionado.cnaes.isEmpty()}">
                                <table class="table">
                                    <ui:repeat
                                        value="#{programacaoCobrancaControlador.selecionado.cnaes}"
                                        var="pcnae">
                                        <tr>
                                            <td style="border: none">
                                                <h:outputText value="#{pcnae.cnae.codigoCnae} - #{pcnae.cnae.descricaoReduzida}"
                                                              styleClass="negrito"/>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </table>
                            </h:panelGroup>

                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.cnaes.isEmpty()}"/>
                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.cnaes.isEmpty()}"/>

                            <h:outputText value="Serviço(s): " rendered="#{!programacaoCobrancaControlador.selecionado.servicos.isEmpty()}"/>
                            <h:panelGroup id="servicos" rendered="#{!programacaoCobrancaControlador.selecionado.servicos.isEmpty()}">
                                <table class="table">
                                    <ui:repeat
                                        value="#{programacaoCobrancaControlador.selecionado.servicos}"
                                        var="pservico">
                                        <tr>
                                            <td style="border: none">
                                                <h:outputText value="#{pservico.servico.codigo} - #{pservico.servico.nome}"
                                                              styleClass="negrito"/>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </table>
                            </h:panelGroup>

                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.servicos.isEmpty()}"/>
                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.servicos.isEmpty()}"/>

                            <h:outputText value="Classificação de Atividade: " rendered="#{!programacaoCobrancaControlador.selecionado.atividades.isEmpty()}"/>
                            <h:panelGroup id="atividades" rendered="#{!programacaoCobrancaControlador.selecionado.atividades.isEmpty()}">
                                <table class="table">
                                    <ui:repeat
                                        value="#{programacaoCobrancaControlador.selecionado.atividades}"
                                        var="atividade">
                                        <tr>
                                            <td style="border: none">
                                                <h:outputText value="#{atividade.classificacaoAtividade.descricao}"
                                                              styleClass="negrito"/>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </table>
                            </h:panelGroup>

                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.atividades.isEmpty()}"/>
                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.atividades.isEmpty()}"/>

                            <h:outputText value="Bairro(s): " rendered="#{!programacaoCobrancaControlador.selecionado.bairros.isEmpty()}"/>
                            <h:panelGroup id="bairrosEconomico" rendered="#{!programacaoCobrancaControlador.selecionado.bairros.isEmpty()}">
                                <table class="table table-striped">
                                    <ui:repeat
                                        value="#{programacaoCobrancaControlador.selecionado.bairros}"
                                        var="bairro">
                                        <tr>
                                            <td style="border: none">
                                                <h:outputText value="#{bairro.bairro}" styleClass="negrito"/>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </table>
                            </h:panelGroup>

                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.bairros.isEmpty()}"/>
                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.bairros.isEmpty()}"/>

                            <h:outputText value="Logradouro(s): " rendered="#{!programacaoCobrancaControlador.selecionado.logradouros.isEmpty()}"/>
                            <h:panelGroup id="logradourosEconomico" rendered="#{!programacaoCobrancaControlador.selecionado.logradouros.isEmpty()}">
                                <table class="table table-striped">
                                    <ui:repeat
                                        value="#{programacaoCobrancaControlador.selecionado.logradouros}"
                                        var="logradouro">
                                        <tr>
                                            <td style="border: none">
                                                <h:outputText value="#{logradouro.logradouro}" styleClass="negrito"/>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </table>
                            </h:panelGroup>

                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.logradouros.isEmpty()}"/>
                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.logradouros.isEmpty()}"/>

                            <h:outputText value="Dívida(s): " rendered="#{!programacaoCobrancaControlador.selecionado.dividas.isEmpty()}"/>
                            <h:panelGroup id="dividasEconomico" rendered="#{!programacaoCobrancaControlador.selecionado.dividas.isEmpty()}">
                                <table class="table">
                                    <ui:repeat value="#{programacaoCobrancaControlador.selecionado.dividas}"
                                               var="dividaE">
                                        <tr>
                                            <td style="border: none">
                                                <h:outputText value="#{dividaE.divida.descricao}" styleClass="negrito"/>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </table>
                            </h:panelGroup>

                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.dividas.isEmpty()}"/>
                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.dividas.isEmpty()}"/>

                            <fc:outputLabelObrigatorio value="Inscrição cadastral: "/>
                            <h:panelGrid columns="4">
                                <h:outputText value="Inicial: "/>
                                <p:inputText value="#{programacaoCobrancaControlador.selecionado.cadastroInicial}"
                                             styleClass="negrito" disabled="true"/>

                                <h:outputText value="Final: "/>
                                <p:inputText value="#{programacaoCobrancaControlador.selecionado.cadastroFinal}"
                                             styleClass="negrito" disabled="true"/>
                            </h:panelGrid>
                            <h:outputText value="Exercício: "/>
                            <h:panelGrid columns="4">
                                <h:outputText value="Inicial: "/>
                                <p:inputText value="#{programacaoCobrancaControlador.selecionado.exercicioInicial}"
                                             size="8"
                                             styleClass="negrito" disabled="true"/>
                                <h:outputText value="Final: "/>
                                <p:inputText value="#{programacaoCobrancaControlador.selecionado.exercicioFinal}"
                                             size="8"
                                             styleClass="negrito" disabled="true"/>
                            </h:panelGrid>
                            <h:outputText value="Vencimento: "/>
                            <h:panelGrid columns="4">
                                <h:outputText value="Inicial: "/>
                                <p:inputText value="#{programacaoCobrancaControlador.selecionado.vencimentoInicial}"
                                             size="8"
                                             styleClass="negrito" disabled="true">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </p:inputText>
                                <h:outputText value="Final: "/>
                                <p:inputText value="#{programacaoCobrancaControlador.selecionado.vencimentoFinal}"
                                             size="8"
                                             styleClass="negrito" disabled="true">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </p:inputText>
                            </h:panelGrid>
                        </h:panelGrid>

                        <h:panelGrid columns="2"
                                     rendered="#{programacaoCobrancaControlador.selecionado.tipoCadastro eq 'IMOBILIARIO'}"
                                     styleClass="mtop10">

                            <h:outputText value="Bairro(s): " rendered="#{!programacaoCobrancaControlador.selecionado.bairros.isEmpty()}"/>
                            <h:panelGroup id="bairrosImobiliario" rendered="#{!programacaoCobrancaControlador.selecionado.bairros.isEmpty()}">
                                <table class="table table-striped">
                                    <ui:repeat
                                        value="#{programacaoCobrancaControlador.selecionado.bairros}"
                                        var="bairro">
                                        <tr>
                                            <td style="border: none">
                                                <h:outputText value="#{bairro.bairro}" styleClass="negrito"/>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </table>
                            </h:panelGroup>

                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.bairros.isEmpty()}"/>
                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.bairros.isEmpty()}"/>

                            <h:outputText value="Logradouro(s): " rendered="#{!programacaoCobrancaControlador.selecionado.logradouros.isEmpty()}"/>
                            <h:panelGroup id="logradourosImobiliario" rendered="#{!programacaoCobrancaControlador.selecionado.logradouros.isEmpty()}">
                                <table class="table table-striped">
                                    <ui:repeat
                                        value="#{programacaoCobrancaControlador.selecionado.logradouros}"
                                        var="logradouro">
                                        <tr>
                                            <td style="border: none">
                                                <h:outputText value="#{logradouro.logradouro.nome}" styleClass="negrito"/>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </table>
                            </h:panelGroup>

                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.logradouros.isEmpty()}"/>
                            <p:separator style="border: none;" rendered="#{!programacaoCobrancaControlador.selecionado.logradouros.isEmpty()}"/>

                            <h:outputLabel value="Setor: "
                                           rendered="#{programacaoCobrancaControlador.selecionado.setorInicial ne null and programacaoCobrancaControlador.selecionado.setorFinal ne null}"/>
                            <h:panelGrid columns="5"
                                         rendered="#{programacaoCobrancaControlador.selecionado.setorInicial ne null and programacaoCobrancaControlador.selecionado.setorFinal ne null}">
                                <h:outputText value="Inicial: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.setorInicial}"
                                              styleClass="negrito"/>
                                <h:outputText value="Final: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.setorFinal}"
                                              styleClass="negrito"/>
                            </h:panelGrid>
                            <h:outputLabel value="Quadra: "
                                           rendered="#{programacaoCobrancaControlador.selecionado.quadraInicial ne null and programacaoCobrancaControlador.selecionado.quadraFinal ne null}"/>
                            <h:panelGrid columns="5"
                                         rendered="#{programacaoCobrancaControlador.selecionado.quadraInicial ne null and programacaoCobrancaControlador.selecionado.quadraFinal ne null}">
                                <h:outputText value="Inicial: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.quadraInicial}"
                                              styleClass="negrito"/>
                                <h:outputText value="Final: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.quadraFinal}"
                                              styleClass="negrito"/>
                            </h:panelGrid>

                            <h:outputLabel value="Lote: "
                                           rendered="#{programacaoCobrancaControlador.selecionado.loteInicial ne null and programacaoCobrancaControlador.selecionado.loteFinal ne null}"/>
                            <h:panelGrid columns="5"
                                         rendered="#{programacaoCobrancaControlador.selecionado.loteInicial ne null and programacaoCobrancaControlador.selecionado.loteFinal ne null}">
                                <h:outputText value="Inicial: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.loteInicial}"
                                              styleClass="negrito"/>
                                <h:outputText value="Final: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.loteFinal}"
                                              styleClass="negrito"/>
                            </h:panelGrid>

                            <h:outputText value="Inscrição cadastral: "
                                          rendered="#{programacaoCobrancaControlador.selecionado.cadastroInicial ne null and programacaoCobrancaControlador.selecionado.cadastroFinal ne null}"/>
                            <h:panelGrid columns="4"
                                         rendered="#{programacaoCobrancaControlador.selecionado.cadastroInicial ne null and programacaoCobrancaControlador.selecionado.cadastroFinal ne null}">
                                <h:outputText value="Inicial: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.cadastroInicial}"
                                              styleClass="negrito"/>
                                <h:outputText value="Final: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.cadastroFinal}"
                                              styleClass="negrito"/>
                            </h:panelGrid>
                            <h:outputText value="Exercício: "
                                          rendered="#{programacaoCobrancaControlador.selecionado.exercicioInicial ne null and programacaoCobrancaControlador.selecionado.exercicioFinal ne null}"/>
                            <h:panelGrid columns="4"
                                         rendered="#{programacaoCobrancaControlador.selecionado.exercicioInicial ne null and programacaoCobrancaControlador.selecionado.exercicioFinal ne null}">
                                <h:outputText value="Inicial: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.exercicioInicial}"
                                              size="8"
                                              styleClass="negrito"/>
                                <h:outputText value="Final: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.exercicioFinal}"
                                              size="8"
                                              styleClass="negrito"/>
                            </h:panelGrid>
                            <h:outputText value="Vencimento: "
                                          rendered="#{programacaoCobrancaControlador.selecionado.vencimentoInicial ne null and programacaoCobrancaControlador.selecionado.vencimentoFinal ne null}"/>
                            <h:panelGrid columns="4"
                                         rendered="#{programacaoCobrancaControlador.selecionado.vencimentoInicial ne null and programacaoCobrancaControlador.selecionado.vencimentoFinal ne null}">
                                <h:outputText value="Inicial: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.vencimentoInicial}"
                                              size="8"
                                              styleClass="negrito">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                                <h:outputText value="Final: "/>
                                <h:outputText value="#{programacaoCobrancaControlador.selecionado.vencimentoFinal}"
                                              size="8"
                                              styleClass="negrito">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </h:panelGrid>

                        </h:panelGrid>

                    </p:tab>
                </p:tabView>
                <p:panel style="border: none">
                    <div style="background: wheat; width: auto; overflow: scroll; max-height: 500px;">
                        <p:dataTable id="tabelaConsultas"
                                     paginator="true"
                                     rows="25"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>PARCELAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                     rowsPerPageTemplate="25,50,100"
                                     var="parcela"
                                     rowStyleClass="#{parcela.situacaoDescricaoEnum eq 'Em Aberto'? parcela.vencimento lt programacaoCobrancaControlador.dataOperacao? 'vermelho': 'verde': ''}"
                                     emptyMessage="Nenhuma parcela encontrada"
                                     value="#{programacaoCobrancaControlador.debitoSelecionados}">
                            <p:column headerText="Cadastro" style="width: 8%;">
                                <h:outputText value="#{parcela.cadastro}"/>
                            </p:column>
                            <p:column headerText="Contribuinte do Cadastro" style="width: 13%;">
                                <h:outputText escape="false"
                                              value="#{programacaoCobrancaControlador.pessoasDoCalculoDoValorDivida(parcela)}"/>
                            </p:column>
                            <p:column headerText="Dívida" style="width: 12%;">
                                <h:outputText value="#{parcela.divida}"/>
                            </p:column>
                            <p:column headerText="Exercício" style="width: 5%; text-align: center;">
                                <h:outputText value="#{parcela.exercicio}"/>
                            </p:column>
                            <p:column headerText="Tipo de Débito" style="width: 5%;">
                                <h:outputText value="#{parcela.tipoDeDebito}"/>
                            </p:column>
                            <p:column headerText="Parcela" style="width: 2%; text-align: center;">
                                <h:outputText value="#{parcela.parcela}"/>
                            </p:column>
                            <p:column headerText="SD" style="width: 2%; text-align: center;">
                                <h:outputText value="#{parcela.sd}"/>
                            </p:column>
                            <p:column headerText="Vencimento" style="width: 5%; text-align: center;">
                                <h:outputText value="#{parcela.vencimentoToString}"/>
                            </p:column>
                            <p:column headerText="Imposto" style="text-align: right">
                                <h:outputText value="#{parcela.valorImposto}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                                <f:facet name="footer">
                                    <h:outputText
                                        value="#{programacaoCobrancaControlador.totalTabelaParcelas.totalImposto}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </f:facet>
                            </p:column>
                            <p:column headerText="Taxa" style="text-align: right">
                                <h:outputText value="#{parcela.valorTaxa}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                                <f:facet name="footer">
                                    <h:outputText
                                        value="#{programacaoCobrancaControlador.totalTabelaParcelas.totalTaxa}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </f:facet>
                            </p:column>
                            <p:column headerText="Desconto" style="text-align: right">
                                <h:outputText value="#{parcela.valorDesconto}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                                <f:facet name="footer">
                                    <h:outputText
                                        value="#{programacaoCobrancaControlador.totalTabelaParcelas.totalDesconto}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </f:facet>
                            </p:column>
                            <p:column headerText="Juros" style="text-align: right">
                                <h:outputText value="#{parcela.valorJuros}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                                <f:facet name="footer">
                                    <h:outputText
                                        value="#{programacaoCobrancaControlador.totalTabelaParcelas.totalJuros}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </f:facet>
                            </p:column>
                            <p:column headerText="Multa" style="text-align: right">
                                <h:outputText value="#{parcela.valorMulta}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                                <f:facet name="footer">
                                    <h:outputText
                                        value="#{programacaoCobrancaControlador.totalTabelaParcelas.totalMulta}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </f:facet>
                            </p:column>
                            <p:column headerText="Correção" style="text-align: right">
                                <h:outputText value="#{parcela.valorCorrecao}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                                <f:facet name="footer">
                                    <h:outputText
                                        value="#{programacaoCobrancaControlador.totalTabelaParcelas.totalCorrecao}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </f:facet>
                            </p:column>
                            <p:column headerText="Honorários" style="text-align: right">
                                <h:outputText value="#{parcela.valorHonorarios}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                                <f:facet name="footer">
                                    <h:outputText
                                        value="#{programacaoCobrancaControlador.totalTabelaParcelas.totalHonorarios}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </f:facet>
                            </p:column>
                            <p:column headerText="Total" style="text-align: right">
                                <h:outputText value="#{parcela.valorTotal}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                                <f:facet name="footer">
                                    <h:outputText
                                        value="#{programacaoCobrancaControlador.totalTabelaParcelas.totalGeral}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </f:facet>
                            </p:column>
                            <p:column headerText="Situação">
                                <h:outputText value="#{parcela.situacaoDescricaoEnum}"
                                              title="cod. ${parcela.idParcela}"/>
                            </p:column>
                        </p:dataTable>
                    </div>
                </p:panel>
            </p:panel>
            <h:panelGrid columns="4">
                <fc:rodapeVisualizarPretty controlador="#{programacaoCobrancaControlador}"
                                           mostrarEditar="#{programacaoCobrancaControlador.selecionado.ultimaSituacao.descricao eq 'Simulação'}"/>

                <p:commandButton value="Efetivar"
                                 id="cbEfetivar"
                                 onsuccess="aguarde.hide()"
                                 disabled="#{programacaoCobrancaControlador.selecionado.ultimaSituacao.name() ne 'SIMULACAO' or programacaoCobrancaControlador.selecionado.id eq null}"
                                 ajax="false"
                                 onclick="if (!confirm('Ao efetivar esta programação não será possível editá-la. Deseja confirmar a efetivação?')) return false; aguarde.show()"
                                 styleClass="mtop10 prioritario"
                                 style=" height: 30px;"
                                 icon="ui-icon-check"
                                 title="Clique para salvar o registro"
                                 actionListener="#{programacaoCobrancaControlador.efetivarProgramacao()}"
                />

                <fc:botaoTargetBlank
                    actionListener="#{programacaoCobrancaControlador.gerarRelatorio()}"
                    label="Imprimir Demonstrativo"
                    styleClass="mtop10"
                    style=" height: 30px"
                    icon="ui-icon-print"
                    title="Clique para imprimir o demonstrativo"
                    imprimeNoDialog="true"/>

            </h:panelGrid>

        </h:form>
        <p:dialog id="idDiailogCNAE" widgetVar="dailogCNAEs" modal="true" header="CNAEs"
                  closeOnEscape="false">
            <h:form id="formCNAEs">
                <p:fieldset legend="CNAEs">
                    <p:dataTable value="#{programacaoCobrancaControlador.selecionado.cnaes}" var="procnae"
                                 id="tabelaCNAE" emptyMessage="Nenhum CNAE adicionado!"
                    >
                        <p:column headerText="Código" style="text-align: center; width: 8%">
                            <h:outputText value="#{procnae.cnae.codigoCnae}"/>
                        </p:column>
                        <p:column headerText="Descrição" style="text-align: left">
                            <h:outputText value="#{procnae.cnae.descricaoDetalhada}"/>
                        </p:column>
                    </p:dataTable>
                </p:fieldset>
                <br/>
                <p:commandButton value="OK" icon="ui-icon-check" onclick="dailogCNAEs.hide()"/>
            </h:form>
        </p:dialog>
        <p:dialog widgetVar="dialogServico" modal="true" id="dialogServicoDlg" width="1000" header="Seviços">
            <h:form id="FormularioServico">
                <p:panel id="panelTabelaServico">
                    <p:dataTable id="tabelaSelecionados" var="obj"
                                 value="#{programacaoCobrancaControlador.selecionado.servicos}"
                                 emptyMessage="Nenhum Serviço adicionado!"
                    >
                        <p:column headerText="Código" style="width: 10%">
                            <h:outputText value="#{obj.servico.codigo}"/>
                        </p:column>
                        <p:column headerText="Descrição" style="text-align: left">
                            <h:outputText value="#{obj.servico.nome}"/>
                        </p:column>
                    </p:dataTable>
                    <br/>
                    <p:commandButton value="OK" icon="ui-icon-check" onclick="dialogServico.hide()"/>
                </p:panel>
            </h:form>
        </p:dialog>
        <p:dialog widgetVar="dialogDividas" modal="true" id="dialogDividaDlg" width="1000" header="Dívidas">
            <h:form id="FormularioDividas">
                <p:panel id="panelTabelaDivida" header="Dívidas">
                    <p:dataTable id="tabelaDivida" var="divida"
                                 value="#{programacaoCobrancaControlador.selecionado.dividas}"
                                 emptyMessage="Nenhuma dívida adicionado!"
                    >
                        <p:column headerText="Código" style="width: 10%">
                            <h:outputText value="#{divida.divida.codigo}"/>
                        </p:column>
                        <p:column headerText="Descrição" style="text-align: left">
                            <h:outputText value="#{divida.divida.descricao}"/>
                        </p:column>
                    </p:dataTable>
                    <br/>
                    <p:commandButton value="OK" icon="ui-icon-check" onclick="dialogDividas.hide()"/>
                </p:panel>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
