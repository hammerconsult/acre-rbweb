<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
    >
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <fc:cabecalhoPretty origem="#{contaCorrenteTributariaControlador.caminhoPadrao}listar/"
                                mostrarBotaoNovo="${false}"
                                auditavel="${true}"
                                controlador="#{contaCorrenteTributariaControlador}"/>
            <p:panel header="Detalhes da Conta Corrente">
                <h:panelGrid columns="2">
                    <h:outputText value="Código: "/>
                    <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.codigo}"
                                  styleClass="negrito"/>

                    <h:outputText value="Data: "/>
                    <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.dataCadastro}"
                                  styleClass="negrito">
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </h:outputText>

                    <h:outputText value="Origem: "/>
                    <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.origem.descricao}"
                                  styleClass="negrito"/>

                    <h:outputText value="Contribuinte: "/>
                    <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.pessoa}"
                                  styleClass="negrito"/>
                </h:panelGrid>
                <p:tabView id="tabView" styleClass="mtop10">
                    <p:tab title="Contribuinte Geral">
                        <h:panelGrid columns="2" rendered="#{contaCorrenteTributariaControlador.isPessoaFisica()}">
                            <h:outputText value="Nome: "/>
                            <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.pessoa.nome}"
                                          styleClass="negrito"/>

                            <h:outputText value="CPF: "/>
                            <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.pessoa.cpf_Cnpj}"
                                          styleClass="negrito"/>

                            <h:outputText value="Data de Nascimento: "/>
                            <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.pessoa.dataNascimento}"
                                          styleClass="negrito"/>

                            <h:outputText value="RG: "/>
                            <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.pessoa.rg_InscricaoEstadual}"
                                          styleClass="negrito"/>

                            <h:outputText value="Email: "/>
                            <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.pessoa.email}"
                                          styleClass="negrito"/>
                        </h:panelGrid>

                        <h:panelGrid columns="2" rendered="#{contaCorrenteTributariaControlador.isPessoaJuridica()}">
                            <h:outputText value="Razão Social: "/>
                            <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.pessoa.nome}"
                                          styleClass="negrito"/>

                            <h:outputText value="Nome Fantasia: "/>
                            <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.pessoa.nomeFantasia}"
                                          styleClass="negrito"/>

                            <h:outputText value="CNPJ: "/>
                            <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.pessoa.cpf_Cnpj}"
                                          styleClass="negrito"/>

                            <h:outputText value="Email: "/>
                            <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.pessoa.email}"
                                          styleClass="negrito"/>

                            <h:outputText value="Classe de Pessoa: "/>
                            <h:outputText value="#{contaCorrenteTributariaControlador.selecionado.pessoa.classePessoa.descricao}"
                                          styleClass="negrito"/>
                        </h:panelGrid>

                        <p:tabView>
                            <p:tab title="Telefones" id="pTelefones">
                                <p:dataTable value="#{contaCorrenteTributariaControlador.selecionado.pessoa.telefones}"
                                             id="fones"
                                             var="fone"
                                             widgetVar="tabelaFones"
                                             styleClass="mtop03"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>FONES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Telefone">
                                        <h:outputText value="#{fone.telefone}"/>
                                    </p:column>
                                    <p:column headerText="Tipo">
                                        <h:outputText value="#{fone.tipoFone}"/>
                                    </p:column>
                                    <p:column headerText="Principal">
                                        <h:outputText value="#{fone.principal ? 'Principal' : ''}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <br/>
                            <p:tab title="Endereços" id="pEnderecos">
                                <p:dataTable value="#{contaCorrenteTributariaControlador.selecionado.pessoa.enderecos}"
                                             id="enderecos"
                                             var="ender"
                                             widgetVar="tabelaEnderecos"
                                             styleClass="mtop03"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ENDEREÇOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Endereço">
                                        <h:outputText
                                            value="#{ender.enderecoCompleto}"/>
                                    </p:column>
                                    <p:column headerText="Principal">
                                        <h:outputText value="#{ender.principal ? 'Principal' : ''}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                        </p:tabView>
                    </p:tab>

                    <p:tab title="Crédito da Arrecadação">
                        <p:outputPanel id="panelCreditos">
                            <p:scrollPanel mode="native" style="max-height: 400px">
                                <p:dataTable var="item"
                                             rowStyleClass="#{(item.compensada or item.calculoContaCorrente ne null) ? 'fundo-verde' : ''}"
                                             emptyMessage="Nenhuma parcela de Crédito da Arrecadação na conta corrente."
                                             id="tabelaCreditos" value="#{contaCorrenteTributariaControlador.selecionado.parcelasCreditos}">
                                    <p:column headerText="Detalhes" style="width: 8px; text-align: center">
                                        <p:commandButton icon="ui-icon-search" onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                         actionListener="#{contaCorrenteTributariaControlador.abrirDetalhesDAM(item)}"/>
                                    </p:column>
                                    <p:column headerText="Cadastro" style="text-align: left">
                                        <h:outputText value="#{item.resultadoParcela.cadastro}"/>
                                    </p:column>
                                    <p:column headerText="Referência" style="text-align: left">
                                        <h:outputText value="#{item.resultadoParcela.referencia}"/>
                                    </p:column>
                                    <p:column headerText="Dívida" style="text-align: left">
                                        <h:outputText value="#{item.resultadoParcela.divida}"/>
                                    </p:column>
                                    <p:column headerText="Exercício" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.exercicio}"/>
                                    </p:column>
                                    <p:column headerText="Tipo de Débito" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.tipoDeDebito}"/>
                                    </p:column>
                                    <p:column headerText="Parcela" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.parcela}"
                                                      title="#{item.parcelaValorDivida.id}"/>
                                    </p:column>
                                    <p:column headerText="Vencimento" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.vencimento}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Pagamento" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.pagamento}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Valor" style="text-align: right">
                                        <h:outputText value="#{item.resultadoParcela.valorTotal}">
                                            <f:convertNumber pattern="###,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Valor Pago" style="text-align: right">
                                        <h:outputText value="#{item.resultadoParcela.valorPago}">
                                            <f:convertNumber pattern="###,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Situação" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.situacaoDescricaoEnum}"/>
                                    </p:column>
                                    <p:column headerText="Diferença" style="text-align: right">
                                        <h:outputText value="#{item.valorDiferenca}">
                                            <f:convertNumber pattern="###,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Dif. Atualizada" style="text-align: right">
                                        <h:outputText value="#{item.valorDiferencaAtualizada}">
                                            <f:convertNumber pattern="###,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Compensado/Restituído" style="text-align: right">
                                        <h:outputText value="#{contaCorrenteTributariaControlador.getValorCompensadoRestituido(item)}">
                                            <f:convertNumber pattern="###,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Origem" style="text-align: center">
                                        <h:outputText value="#{item.origem.descricaoCurta}"
                                                      title="#{item.origem.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Remover" style="width: 8px; text-align: center">
                                        <p:commandButton icon="ui-icon-trash" onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                         disabled="#{!contaCorrenteTributariaControlador.podeRemoverParcela(item)}"
                                                         update="@form"
                                                         title="Remover a parcela da conta corrente"
                                                         actionListener="#{contaCorrenteTributariaControlador.removerParcelaDaContaCorrente(item)}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:scrollPanel>
                        </p:outputPanel>

                        <table style="width: 100%; border: 0">
                            <tr>
                                <td style="width: 40%;">
                                    <table style="width: 100%; text-align: right;"
                                           class="table table-bordered mtop10">
                                        <tr>
                                            <td colspan="2" style="text-align: center">
                                                <h:outputText value="Totais" style="color: steelblue; font-weight: bold"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h:outputText value="Valor Total de Crédito:"/>
                                            </td>
                                            <td style="text-align: right">
                                                <h:outputText value="#{contaCorrenteTributariaControlador.totalDoCredito}"
                                                    readonly="true"
                                                    styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h:outputText value="Valor Compensado/Restituído:"/>
                                            </td>
                                            <td style="text-align: right">
                                                <h:outputText value="#{contaCorrenteTributariaControlador.valorCreditoUtilizado}"
                                                              readonly="true"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h:outputText value="Valor do Crédito à Compensar/Restituir:"/>
                                            </td>
                                            <td style="text-align: right">
                                                <h:outputText value="#{contaCorrenteTributariaControlador.saldoCreditoDisponivel}"
                                                              readonly="true"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td style="width: 50%; vertical-align: bottom">
                                    <p:commandButton value="Compensação"
                                                     disabled="#{contaCorrenteTributariaControlador.todasParcelasCompensadas}"
                                                     icon="ui-icon-arrowreturnthick-1-e"
                                                     actionListener="#{contaCorrenteTributariaControlador.criarIrProcessoCompensacao()}"
                                                     styleClass="operacao mlef05"/>

                                    <p:commandButton value="Restituição"
                                                     disabled="#{contaCorrenteTributariaControlador.todasParcelasCompensadas}"
                                                     icon="ui-icon-arrowreturnthick-1-s"
                                                     actionListener="#{contaCorrenteTributariaControlador.criarProcessoRestituicao()}"
                                                     styleClass="operacao mlef05"/>
                                </td>
                            </tr>
                        </table>
                    </p:tab>

                    <p:tab title="Resíduo da Arrecadação">
                        <p:outputPanel id="panelResiduos">
                            <p:scrollPanel mode="native" style="max-height: 400px">
                                <p:dataTable var="item"
                                             emptyMessage="Nenhuma parcela de Resíduo da Arrecadação na conta corrente."
                                             rowStyleClass="#{item.calculoContaCorrente ne null ? 'fundo-verde' : ''}"
                                             id="tabelaResiduos" value="#{contaCorrenteTributariaControlador.selecionado.parcelasResiduos}">
                                    <p:column headerText="Detalhes" style="width: 8px; text-align: center">
                                        <p:commandButton icon="ui-icon-search" onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                         actionListener="#{contaCorrenteTributariaControlador.abrirDetalhesDAM(item)}"/>
                                    </p:column>
                                    <p:column headerText="Cadastro" style="text-align: left">
                                        <h:outputText value="#{item.resultadoParcela.cadastro}"/>
                                    </p:column>
                                    <p:column headerText="Referência" style="text-align: left">
                                        <h:outputText value="#{item.resultadoParcela.referencia}"/>
                                    </p:column>
                                    <p:column headerText="Dívida" style="text-align: left">
                                        <h:outputText value="#{item.resultadoParcela.divida}"/>
                                    </p:column>
                                    <p:column headerText="Exercício" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.exercicio}"/>
                                    </p:column>
                                    <p:column headerText="Tipo de Débito" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.tipoDeDebito}"/>
                                    </p:column>
                                    <p:column headerText="Parcela" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.parcela}"
                                                      title="#{item.parcelaValorDivida.id}"/>
                                    </p:column>
                                    <p:column headerText="Vencimento" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.vencimento}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Pagamento" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.pagamento}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Valor" style="text-align: right">
                                        <h:outputText value="#{item.resultadoParcela.valorTotal}">
                                            <f:convertNumber pattern="###,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Valor Pago" style="text-align: right">
                                        <h:outputText value="#{item.resultadoParcela.valorPago}">
                                            <f:convertNumber pattern="###,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Situação" style="text-align: center">
                                        <h:outputText value="#{item.resultadoParcela.situacaoDescricaoEnum}" title="COD: #{item.resultadoParcela.idParcela}"/>
                                    </p:column>
                                    <p:column headerText="Diferença" style="text-align: right">
                                        <h:outputText value="#{item.valorDiferenca}">
                                            <f:convertNumber pattern="###,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Dif. Atualizada" style="text-align: right">
                                        <h:outputText value="#{item.valorDiferencaAtualizada}">
                                            <f:convertNumber pattern="###,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Origem" style="text-align: center">
                                        <h:outputText value="#{item.origem.descricaoCurta}"
                                                      title="#{item.origem.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Remover" style="width: 8px; text-align: center">
                                        <p:commandButton icon="ui-icon-trash" onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                         disabled="#{!contaCorrenteTributariaControlador.podeRemoverParcela(item)}"
                                                         update="@form"
                                                         title="Remover a parcela da conta corrente"
                                                         actionListener="#{contaCorrenteTributariaControlador.removerParcelaDaContaCorrente(item)}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:scrollPanel>
                        </p:outputPanel>
                        <table style="width: 100%; border: 0">
                            <tr>
                                <td style="width: 40%;">
                                    <table style="width: 100%; text-align: right;"
                                           class="table table-bordered mtop10">
                                        <tr>
                                            <td colspan="2" style="text-align: center">
                                                <h:outputText value="Totais" style="color: steelblue; font-weight: bold"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h:outputText value="Valor Total de Resíduo:"/>
                                            </td>
                                            <td style="text-align: right">
                                                <h:outputText value="#{contaCorrenteTributariaControlador.totalDoResiduo}"
                                                              readonly="true"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h:outputText value="Valor Utilizado:"/>
                                            </td>
                                            <td style="text-align: right">
                                                <h:outputText value="#{contaCorrenteTributariaControlador.valorResiduoUtilizado}"
                                                              readonly="true"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h:outputText value="Valor do Resíduo para geração de débito:"/>
                                            </td>
                                            <td style="text-align: right">
                                                <h:outputText value="#{contaCorrenteTributariaControlador.saldoResiduoDisponivel}"
                                                              readonly="true"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td style="width: 50%; vertical-align: bottom">
                                    <p:commandButton value="Gerar Débito do Saldo"
                                                     icon="ui-icon-arrowreturnthick-1-e"
                                                     update="@form"
                                                     rendered="false"
                                                     onclick="confirmaDebito.show();"
                                                     styleClass="operacao"/>
                                </td>
                            </tr>
                        </table>

                        <div style="background: wheat; width: 100%;" class="mtop10">
                            <p:dataTable id="tabelaparcelas"
                                         paginator="true"
                                         rows="100"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="10,20,30"
                                         var="parcela"
                                         rowStyleClass="#{parcela.situacaoDescricaoEnum eq 'Em Aberto'? (parcela.vencimento lt contaCorrenteTributariaControlador.dataOperacao) ? 'vermelho' : 'verde' : ''}"
                                         emptyMessage="Nenhuma parcela encontrada"
                                         value="#{contaCorrenteTributariaControlador.parcelasDoResidual}">
                                <f:facet name="header">
                                    <p:outputPanel>
                                        <h:outputText value="Parcelas"/>
                                    </p:outputPanel>
                                </f:facet>
                                <p:column headerText="Dívida" style="width: 12%;">
                                    <h:outputText value="#{parcela.divida}"/>
                                </p:column>
                                <p:column headerText="Exercício" style="width: 5%; text-align: center;">
                                    <h:outputText value="#{parcela.exercicio}"/>
                                </p:column>
                                <p:column headerText="Tipo de Débito" style="width: 5%;">
                                    <h:outputText value="#{parcela.tipoDeDebito}"/>
                                </p:column>
                                <p:column headerText="Parcela" style="width: 2%; text-align: center;">
                                    <h:outputText value="#{parcela.parcela}"
                                                  title="#{parcela.idParcela}"/>
                                </p:column>
                                <p:column headerText="SD" style="width: 2%; text-align: center;">
                                    <h:outputText value="#{parcela.sd}"/>
                                </p:column>
                                <p:column headerText="Vencimento" style="width: 5%; text-align: center;">
                                    <h:outputText value="#{parcela.vencimentoToString}"/>
                                </p:column>
                                <p:column headerText="Valor" style="text-align: right">
                                    <h:outputText value="#{parcela.valorOriginal}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Imposto" style="text-align: right">
                                    <h:outputText value="#{parcela.valorImposto}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Taxa" style="text-align: right">
                                    <h:outputText value="#{parcela.valorTaxa}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Desconto" style="text-align: right">
                                    <h:outputText value="#{parcela.valorDesconto}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Juros" style="text-align: right">
                                    <h:outputText value="#{parcela.valorJuros}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Multa" style="text-align: right">
                                    <h:outputText value="#{parcela.valorMulta}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Correção" style="text-align: right">
                                    <h:outputText value="#{parcela.valorCorrecao}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Honorários" style="text-align: right">
                                    <h:outputText value="#{parcela.valorHonorarios}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Total" style="text-align: right">
                                    <h:outputText value="#{parcela.valorTotal}">
                                        <f:convertNumber pattern="###,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Situação" style="text-align: center">
                                    <h:outputText value="#{parcela.situacaoDescricaoEnum}" title="cod. ${parcela.idParcela}"/>
                                </p:column>
                                <p:column headerText="DAM" style="text-align: center">
                                    <p:commandButton
                                        title="Emitir o DAM"
                                        disabled="#{!parcela.emAberto}"
                                        icon="ui-icon-print"
                                        onclick="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        styleClass="wp-botao-tabela"
                                        actionListener="#{contaCorrenteTributariaControlador.imprimirDam(parcela)}"/>
                                </p:column>
                            </p:dataTable>
                        </div>
                    </p:tab>
                </p:tabView>
            </p:panel>
            <p:commandButton id="consultaDebitos" value="Consulta de Débitos" icon="ui-icon-search"
                             actionListener="#{contaCorrenteTributariaControlador.inicializarFiltros()}"
                             update=":FormDialog"
                             styleClass="mtop10 mrig03 operacao" oncomplete="consultaDebitos.show()"/>
            <fc:rodapePretty controlador="#{contaCorrenteTributariaControlador}" nomeBotaoCancelar="Voltar" ocultarSalvar="true"/>

        </h:form>

        <p:dialog draggable="false"
                  id="dialog" width="1100" height="550"
                  dynamic="true"
                  position="center"
                  modal="true"
                  style="position: fixed !important;"
                  widgetVar="consultaDebitos" header="Consultar Débitos" resizable="true" closable="false">
            <h:form id="FormDialog">
                <p:panel header="Filtros">
                    <h:panelGrid columns="2" id="gridFiltros">
                        <h:outputText value="Descrição da Dívida: "/>
                        <p:autoComplete queryDelay="1000"
                                        value="#{contaCorrenteTributariaControlador.filtroDivida}"
                                        completeMethod="#{contaCorrenteTributariaControlador.completarDivida}"
                                        converter="#{contaCorrenteTributariaControlador.converterDivida}"
                                        var="divida"
                                        maxResults="10"
                                        itemLabel="#{divida.descricao}"
                                        itemValue="#{divida.id}"
                                        size="60">
                            <p:ajax event="itemSelect" update="gridFiltros"/>
                        </p:autoComplete>
                        <h:outputText value="Situação da Dívida: "/>
                        <h:panelGrid columns="9">
                            <h:outputText value="Do Exercício: "/>
                            <p:selectBooleanCheckbox
                                value="#{contaCorrenteTributariaControlador.dividaDoExercicio}">
                                <p:ajax update="gridFiltros"/>
                            </p:selectBooleanCheckbox> &nbsp;
                            <h:outputText value="Dívida Ativa: "/>
                            <p:selectBooleanCheckbox
                                value="#{contaCorrenteTributariaControlador.dividaAtiva}">
                                <p:ajax update="gridFiltros"/>
                            </p:selectBooleanCheckbox> &nbsp;
                            <h:outputText value="Dívida Ativa Ajuizada: "/>
                            <p:selectBooleanCheckbox
                                value="#{contaCorrenteTributariaControlador.dividaAtivaAzuijada}">
                                <p:ajax update="gridFiltros"/>
                            </p:selectBooleanCheckbox> &nbsp;
                        </h:panelGrid>
                        <h:outputText value="Exercício: "/>
                        <h:panelGrid columns="6">
                            <fc:exercicioInicialFinal
                                exercicioInicial="#{contaCorrenteTributariaControlador.filtroExercicioInicio}"
                                exercicioFinal="#{contaCorrenteTributariaControlador.filtroExercicioFinal}"/>
                        </h:panelGrid>

                        <h:outputText value="Date de Vencimento Inicial:"/>
                        <p:calendar value="#{contaCorrenteTributariaControlador.vencimentoInicial}"
                                    pattern="dd/MM/yyyy"
                                    onkeyup="mascara(this, Data)" maxlength="10" showOn="button" size="12">
                            <p:ajax event="blur" process="@this"/>
                        </p:calendar>
                        <h:outputText value="Date de Vencimento Final:"/>
                        <p:calendar value="#{contaCorrenteTributariaControlador.vencimentoFinal}"
                                    pattern="dd/MM/yyyy"
                                    onkeyup="mascara(this, Data)" maxlength="10" showOn="button" size="12">
                            <p:ajax event="blur" process="@this"/>
                        </p:calendar>

                    </h:panelGrid>
                    <p:separator styleClass="mtop10 mbot10"/>
                    <h:panelGrid columns="4">
                        <p:commandButton
                            onstart="aguarde.show()"
                            onsuccess="aguarde.hide()"
                            value="Pesquisar" icon="ui-icon-search" styleClass="operacao prioritario"
                            actionListener="#{contaCorrenteTributariaControlador.pesquisar()}"
                            update=":FormDialog"/>
                        <p:commandButton value="Limpar Campos/Tabela" style="width: 200px;" icon="ui-icon-document"
                                         styleClass="operacao" onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                         actionListener="#{contaCorrenteTributariaControlador.inicializarFiltros()}"
                                         update=":FormDialog"/>
                        <p:commandButton value="Fechar" icon="ui-icon-closethick" styleClass="operacao"
                                         onclick="consultaDebitos.hide(); aguarde.show()" oncomplete="aguarde.hide()"
                                         update=":Formulario"/>
                    </h:panelGrid>
                </p:panel>
                <p:dataTable id="tabelaConsultas" rows="10" var="parcela"
                             rowKey="#{parcela.idParcela}"
                             widgetVar="tabela"
                             selection="#{contaCorrenteTributariaControlador.resultados}"
                             styleClass="mtop10 mbot10"
                             emptyMessage="Nenhuma parcela encontrada" paginator="true"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink}
                                 {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="10,50,100"
                             value="#{contaCorrenteTributariaControlador.resultadoConsulta}">
                    <f:facet name="header">
                        <p:outputPanel>
                            <h:outputText value="Busca: "/>
                            <h:inputText id="globalFilter" onkeyup="tabela.filter()" size="70"/>
                        </p:outputPanel>
                    </f:facet>
                    <p:column selectionMode="multiple" style="width: 5%; text-align: center;"
                              disabledSelection="#{(parcela.situacaoDescricaoEnum ne 'Em Aberto' and parcela.situacaoDescricaoEnum ne 'Aguardando') or (parcela.cotaUnica and parcela.vencido) or (parcela.bloqueiaImpressao)}"/>
                    <p:column headerText="Cadastro">
                        <h:outputText
                            value="#{parcela.cadastro} #{parcela.tipoCadastro eq 'ECONOMICO' ? '(Cadastro Econômico)' : parcela.tipoCadastro eq 'IMOBILIARIO' ? '(Cadastro Imobiliario)' :  parcela.tipoCadastro eq 'RURAL' ? '(Cadastro Rural)' : '(Contribuinte Geral)'}"/>
                    </p:column>
                    <p:column headerText="Dívida">
                        <h:outputText value="#{parcela.divida}"/>
                    </p:column>
                    <p:column headerText="Referência">
                        <h:outputText value="#{parcela.referencia}"/>
                    </p:column>
                    <p:column headerText="Exercício">
                        <h:outputText value="#{parcela.exercicio}"/>
                    </p:column>
                    <p:column headerText="Vencimento">
                        <h:outputText value="#{parcela.vencimento}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Parcela">
                        <h:outputText value="#{parcela.parcela}"
                                      title="#{parcela.idParcela}"/>
                    </p:column>
                    <p:column headerText="Valor (R$)">
                        <h:outputText value="#{parcela.valorTotal}">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Tipo">
                        <h:outputText value="#{parcela.tipoDeDebito}"/>
                    </p:column>
                    <p:column headerText="Última Situação">
                        <h:outputText value="#{parcela.situacaoDescricaoEnum}"/>
                    </p:column>
                </p:dataTable>

                <p:commandButton value="Gerar DAM"
                                 actionListener="#{contaCorrenteTributariaControlador.prepararImpressaoDam()}"
                                 process="@form"
                                 disabled="#{empty contaCorrenteTributariaControlador.resultadoConsulta}"
                                 update=":formConfirmaDam"
                                 styleClass="operacao prioritario mbot10"
                                 icon="ui-icon-print"/>

                <fc:botaoTargetBlank actionListener="#{contaCorrenteTributariaControlador.imprimirConsulta()}"
                                     disabled="#{empty contaCorrenteTributariaControlador.resultadoConsulta}"
                                     label="Imprimir Demonstrativo" styleClass="operacao mbot10"/>
            </h:form>
        </p:dialog>

        <p:dialog header="Confirmação de Lançamento do DAM"
                  modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  resizable="false"
                  widgetVar="confirmaDam">
            <h:form id="formConfirmaDam">
                <div class="centralizado">
                    <h:outputText value="Você selecionou mais de uma parcela. O que deseja fazer? "
                                  rendered="#{contaCorrenteTributariaControlador.maisDeUmaParcela}"
                                  styleClass="negrito"/>
                </div>
                <h:panelGrid columns="2">
                    <h:outputText value="Valor: R$"/>
                    <h:outputText value="#{contaCorrenteTributariaControlador.valorDam}" styleClass="negrito">
                        <f:convertNumber pattern="#,##0.00"/>
                    </h:outputText>
                </h:panelGrid>

                <div class="alert alert-info">
                    <strong>Atenção! </strong> Para parcelas vencidas ou DAMs agrupados será gerado um DAM com vencimento para o último dia útil do mês.
                    (<h:outputText value="#{contaCorrenteTributariaControlador.vencimentoDam}" styleClass="negrito">
                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                </h:outputText>)
                </div>
                <p:separator/>
                <h:panelGrid columns="2" style="width: 100%" styleClass="centralizado">
                    <p:commandButton
                        value="#{contaCorrenteTributariaControlador.maisDeUmaParcela ? 'DAM Individual' : 'Imprimir DAM'}"
                        icon="ui-icon-print"
                        onclick="aguarde.show()"
                        oncomplete="aguarde.hide();confirmaDam.hide()"
                        actionListener="#{contaCorrenteTributariaControlador.imprimirDamIndividual()}"
                        styleClass="operacao"/>

                    <p:commandButton value="DAM Agrupado"
                                     rendered="#{contaCorrenteTributariaControlador.maisDeUmaParcela}"
                                     icon="ui-icon-print"
                                     onclick="aguarde.show()"
                                     oncomplete="aguarde.hide();confirmaDam.hide()"
                                     styleClass="operacao"
                                     actionListener="#{contaCorrenteTributariaControlador.imprimirDamAgrupado()}"/>
                </h:panelGrid>
            </h:form>
        </p:dialog>

        <p:dialog modal="true" widgetVar="detalhesDAM" header="Detalhes do DAM"
                  dynamic="true"
                  width="1100"
                  position="center"
                  style="position: fixed !important;"
                  draggable="false" resizable="false" closable="false"
                  onShow="setaFoco('formDetalhesDAM:btFechaDialog');">
            <h:form id="formDetalhesDAM">
                <p:panel style="overflow: scroll; width: 100%; max-height: 600px">
                    <p:dataTable value="#{contaCorrenteTributariaControlador.damSelecionado}"
                                 var="dam" emptyMessage="Nenhum dado encontrado.">
                        <f:facet name="header">
                            <h:outputText value="Dados do DAM"/>
                        </f:facet>
                        <p:column headerText="Número do DAM">
                            <h:outputText value="#{dam.numeroDAM}"/>
                        </p:column>
                        <p:column headerText="Número">
                            <h:outputText value="#{dam.numero}"/>
                        </p:column>
                        <p:column headerText="Ano">
                            <h:outputText value="#{dam.exercicio.ano}"/>
                        </p:column>
                        <p:column headerText="Data de Emissão">
                            <h:outputText value="#{dam.emissao}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Data de Vencimento">
                            <h:outputText value="#{dam.vencimento}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Data de Pagamento">
                            <h:outputText value="#{contaCorrenteTributariaControlador.buscarDataPagamentoDAMSelecioado()}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Tipo">
                            <h:outputText value="#{dam.tipo.descricao}"/>
                        </p:column>
                        <p:column headerText="Valor Original">
                            <h:outputText value="#{dam.valorOriginal}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Desconto">
                            <h:outputText value="#{dam.desconto}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Multa">
                            <h:outputText value="#{dam.multa}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Juros">
                            <h:outputText value="#{dam.juros}">
                                <f:convertNumber pattern="#,##0.00"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Correção">
                            <h:outputText value="#{dam.correcaoMonetaria}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Honorários">
                            <h:outputText value="#{dam.honorarios ne null ? dam.honorarios : 0}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Total">
                            <h:outputText value="#{dam.valorTotal}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Situação">
                            <h:outputText value="#{dam.situacao.descricao}"/>
                        </p:column>
                    </p:dataTable>
                    &nbsp;
                    <p:dataTable value="#{contaCorrenteTributariaControlador.damSelecionado.itens}"
                                 var="itemDAM" emptyMessage="Nenhum débito encontrado.">
                        <f:facet name="header">
                            <h:outputText value="Débito(s) do DAM"/>
                        </f:facet>
                        <p:column headerText="Cadastro">
                            <h:outputText value="#{consultaDAMControlador.recuperaCadastro(itemDAM.parcela.valorDivida)}"/>
                        </p:column>
                        <p:column headerText="Tipo de Cadastro">
                            <h:outputText
                                value="#{consultaDAMControlador.recuperaCadastro(itemDAM.parcela.valorDivida).tipoDeCadastro.descricaoLonga}"/>
                        </p:column>
                        <p:column headerText="Pessoa - CPF/CNPJ">
                            <h:outputText value="#{consultaDAMControlador.recuperaPessoas(itemDAM.parcela.valorDivida)}"/>
                        </p:column>
                        <p:column headerText="Dívida">
                            <h:outputText value="#{itemDAM.parcela.valorDivida.divida}"/>
                        </p:column>
                        <p:column headerText="Exercício">
                            <h:outputText value="#{itemDAM.parcela.valorDivida.exercicio.ano}"/>
                        </p:column>
                        <p:column headerText="Parcela">
                            <h:outputText value="#{consultaDAMControlador.sequenciaParcela(itemDAM.parcela)}"/>
                        </p:column>
                        <p:column headerText="Vencimento">
                            <h:outputText value="#{itemDAM.parcela.vencimento}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Valor Original">
                            <h:outputText value="#{itemDAM.valorOriginalDevido}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Desconto">
                            <h:outputText value="#{itemDAM.desconto}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Multa">
                            <h:outputText value="#{itemDAM.multa}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Juros">
                            <h:outputText value="#{itemDAM.juros}">
                                <f:convertNumber pattern="#,##0.00"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Correção">
                            <h:outputText value="#{itemDAM.correcaoMonetaria}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Honorários">
                            <h:outputText value="#{itemDAM.honorarios ne null ? itemDAM.honorarios : 0}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Total">
                            <h:outputText value="#{itemDAM.valorTotal}">
                                <f:converter converterId="moedaConverter"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Situação da Parcela">
                            <h:outputText value="#{itemDAM.parcela.ultimaSituacao.situacaoParcela.descricao}"/>
                        </p:column>
                    </p:dataTable>
                    &nbsp;
                    <h:panelGroup>
                        <p:dataTable value="#{contaCorrenteTributariaControlador.itemLoteBaixasDoDamSelecionado}" var="item"
                                     rendered="#{contaCorrenteTributariaControlador.itemLoteBaixasDoDamSelecionado.size() gt 0}"
                                     rowStyleClass="#{item.id eq contaCorrenteTributariaControlador.parcelaContaCorrenteSelecionada.itemLoteBaixa.id ? 'verde' : ''}"
                                     emptyMessage="Nenhum pagamento encontrado.">
                            <f:facet name="header">
                                <h:outputText value="Pagamentos do DAM"/>
                            </f:facet>
                            <p:column headerText="Lote">
                                <h:outputText value="#{item.loteBaixa.codigoLote}"/>
                            </p:column>
                            <p:column headerText="Banco">
                                <h:outputText value="#{item.loteBaixa.banco.descricao}"/>
                            </p:column>
                            <p:column headerText="Arquivo">
                                <h:outputText value="#{consultaDAMControlador.numeroDoArquivoBancario(item.loteBaixa)}"/>
                            </p:column>
                            <p:column headerText="Conta" style="width: 10%">
                                <h:outputText value="#{item.loteBaixa.subConta.descricao}"/>
                            </p:column>
                            <p:column headerText="Forma Pagamento">
                                <h:outputText value="#{item.loteBaixa.formaPagamento.descricao}"/>
                            </p:column>
                            <p:column headerText="Pagamento">
                                <h:outputText value="#{item.loteBaixa.dataPagamento}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Movimento">
                                <h:outputText value="#{item.loteBaixa.dataFinanciamento}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Tipo Pagamento">
                                <h:outputText value="#{item.loteBaixa.tipoDePagamentoBaixa.descricao}"/>
                            </p:column>
                            <p:column headerText="Valor">
                                <h:outputText value="#{item.dam.valorOriginal}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Multa">
                                <h:outputText value="#{item.dam.multa}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Juros">
                                <h:outputText value="#{item.dam.juros}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Correção">
                                <h:outputText value="#{item.dam.correcaoMonetaria}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Desconto">
                                <h:outputText value="#{item.dam.desconto}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Honorários">
                                <h:outputText value="#{item.dam.honorarios}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Pago">
                                <h:outputText value="#{item.valorPago}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Diferença">
                                <h:outputText value="#{item.valorDiferenca}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Situação">
                                <h:outputText value="#{item.loteBaixa.situacaoLoteBaixa.descricao}"/>
                            </p:column>
                        </p:dataTable>
                        <p:dataTable value="#{contaCorrenteTributariaControlador.itemProcessoDebitosDoDamSelecionado}" var="item"
                                     rendered="#{contaCorrenteTributariaControlador.itemProcessoDebitosDoDamSelecionado.size() gt 0}"
                                     emptyMessage="Nenhum processo de baixa encontrado.">
                            <f:facet name="header">
                                <h:outputText value="Processo de Baixa"/>
                            </f:facet>
                            <p:column headerText="Processo">
                                <h:outputText value="#{item.processoDebito.codigo}"/>
                            </p:column>
                            <p:column headerText="Exercício">
                                <h:outputText value="#{item.processoDebito.exercicio.ano}"/>
                            </p:column>
                            <p:column headerText="Data">
                                <h:outputText value="#{item.processoDebito.lancamento}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Protocolo">
                                <h:outputText value="#{item.processoDebito.numeroProtocolo}"/>
                            </p:column>
                            <p:column headerText="Usuário">
                                <h:outputText value="#{item.processoDebito.usuarioIncluiu.pessoaFisica.nome}"/>
                            </p:column>
                        </p:dataTable>
                        <p:dataTable value="#{contaCorrenteTributariaControlador.pagamentosAvulsosDoDamSelecionado}" var="item"
                                     rendered="#{contaCorrenteTributariaControlador.pagamentosAvulsosDoDamSelecionado.size() gt 0}"
                                     emptyMessage="Nenhum pagamento avulso encontrado.">
                            <f:facet name="header">
                                <h:outputText value="Pagamentos Avulsos"/>
                            </f:facet>
                            <p:column headerText="Data">
                                <h:outputText value="#{item.dataPagamento}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Valor Pago">
                                <h:outputText value="#{item.valorPago}">
                                    <f:convertNumber type="currency"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </h:panelGroup>
                    &nbsp;
                    <p:dataTable value="#{contaCorrenteTributariaControlador.historico}"
                                 var="historico" emptyMessage="Nenhum débito encontrado.">
                        <f:facet name="header">
                            <h:outputText value="Histórico de Impressão do DAM"/>
                        </f:facet>
                        <p:column headerText="Data/Hora">
                            <h:outputText value="#{historico.dataImpressao}">
                                <f:convertDateTime pattern="dd/MM/yyyy hh:mm"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Usuário">
                            <h:outputText value="#{historico.usuarioSistema.nome}"/>
                        </p:column>
                        <p:column headerText="Local de Impressão">
                            <h:outputText value="#{historico.tipoImpressao.descricao}"/>
                        </p:column>
                    </p:dataTable>
                </p:panel>
                <p:separator/>

                <div style="width: 100%; text-align: center">
                    <p:commandButton
                        id="btFechaDialog"
                        value="Fechar" onclick="detalhesDAM.hide()"
                        styleClass="operacao prioritario"
                        style="height: 30px;"
                        icon="ui-icon-close"/>

                    <p:commandButton value="Gerar Débito da Diferença"
                                     disabled="#{!contaCorrenteTributariaControlador.hasSaldoResiduoParcelaSelecionada()}"
                                     icon="ui-icon-arrowreturnthick-1-e"
                                     update=":formConfirmaDebito"
                                     rendered="#{contaCorrenteTributariaControlador.isParcelaSelecionadaDeResiduo()}"
                                     onclick="confirmaDebito.show();"
                                     styleClass="operacao"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog header="Confirmação de Lançamento de Débito"
                  modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  resizable="false"
                  widgetVar="confirmaDebito">
            <h:form id="formConfirmaDebito">
                <div class="centralizado">
                    <h:outputText value="Tem certeza que deseja gerar um novo débito para esse contribuinte?"
                                  styleClass="negrito"/>
                </div>
                <h:panelGrid columns="2">
                    <h:outputText value="Valor: R$"/>
                    <h:outputText value="#{contaCorrenteTributariaControlador.parcelaContaCorrenteSelecionada.valorDiferencaAtualizada}"
                                  styleClass="negrito">
                        <f:convertNumber pattern="#,##0.00"/>
                    </h:outputText>
                </h:panelGrid>
                <p:separator/>
                <h:panelGrid columns="2" style="width: 100%" styleClass="centralizado">
                    <p:commandButton
                        value="Gerar Débito"
                        icon="ui-icon-print"
                        onclick="aguarde.show()"
                        actionListener="#{contaCorrenteTributariaControlador.gerarDebitoDoResidualParcelaSelecionada()}"
                        oncomplete="aguarde.hide(); confirmaDam.hide();"
                        styleClass="operacao prioritario"/>

                    <p:commandButton value="Cancelar"
                                     icon="ui-icon-close"
                                     onclick="aguarde.show()"
                                     oncomplete="aguarde.hide();confirmaDebito.hide()"
                                     styleClass="operacao"/>
                </h:panelGrid>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
