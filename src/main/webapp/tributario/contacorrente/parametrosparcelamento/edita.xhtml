<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <div align="right" class="mbot05">
                <p:button href="../../duplicar/#{parametroParcelamentoControlador.urlKeyValue}/"
                          value="Duplicar"
                          id="btDuplicar"
                          styleClass="operacao"
                          icon="ui-icon-newwin"
                          rendered="#{parametroParcelamentoControlador.selecionado.id ne null}"
                          title="Clique para inserir um novo registro"
                          disabled="#{!autorizacao.isPodeEditar(request)}"/>

                <p:button href="../../novo/"
                          value="Novo"
                          id="btNovo"
                          rendered="#{parametroParcelamentoControlador.selecionado.id ne null}"
                          styleClass="operacao"
                          icon="ui-icon-circle-plus"
                          title="Clique para inserir um novo registro"
                          disabled="#{!autorizacao.isPodeEditar(request)}"/>
            </div>
            <p:panel header="Parâmetros de Parcelamento de Débitos">
                <h:panelGrid columns="1">
                    <h:outputText value="Código"/>
                    <p:inputText id="codigo"
                                 size="15"
                                 styleClass="opaco"
                                 disabled="true"
                                 value="#{parametroParcelamentoControlador.selecionado.codigo}"
                                 title="Código"/>

                    <h:outputText value="Descrição"/>
                    <p:inputText size="70"
                                 id="descricao"
                                 maxlength="254"
                                 value="#{parametroParcelamentoControlador.selecionado.descricao}"
                                 title="Informe a Descrição"/>

                    <h:outputText value="Ato Legal"/>
                    <p:autoComplete queryDelay="1000" id="atoLegal"
                                    forceSelection="true"
                                    completeMethod="#{parametroParcelamentoControlador.completaAtoLegal}"
                                    value="#{parametroParcelamentoControlador.selecionado.atoLegal}"
                                    converter="#{parametroParcelamentoControlador.converterAtoLegal}"
                                    var="atoLegal"
                                    itemLabel="#{atoLegal.nome} #{atoLegal.numero}"
                                    itemValue="#{atoLegal.id}"
                                    size="100" dropdown="true"
                                    title="Informe o Ato Legal que define o parcelamento"/>
                </h:panelGrid>
                <h:panelGrid columns="3" cellspacing="5">
                    <h:outputText value="Tipo de Cadastro"/>
                    <h:outputText value="Situação dos Débitos"/>
                    <p:spacer/>

                    <h:selectOneMenu id="tipoCadastro"
                                     value="#{parametroParcelamentoControlador.selecionado.tipoCadastroTributario}">
                        <f:selectItems value="#{parametroParcelamentoControlador.tiposCadastro}"/>
                        <p:ajax event="change" update="gridTipoDocto"/>
                    </h:selectOneMenu>
                    <h:selectOneMenu id="situacaoDebito"
                                     value="#{parametroParcelamentoControlador.selecionado.situacaoDebito}">
                        <f:selectItems value="#{parametroParcelamentoControlador.situacoesDebitos}"/>
                    </h:selectOneMenu>
                    <p:spacer/>

                    <h:outputText value="Início da Vigência"/>
                    <h:outputText value="Final da Vigência"/>
                    <h:outputText value="Dias Venc. Entrada"/>
                    <p:calendar value="#{parametroParcelamentoControlador.selecionado.vigenciaInicio}"
                                pattern="dd/MM/yyyy"
                                onkeyup="mascara(this, mdata);"/>
                    <p:calendar value="#{parametroParcelamentoControlador.selecionado.vigenciaFim}" pattern="dd/MM/yyyy"
                                onkeyup="mascara(this, mdata);"/>
                    <p:inputText value="#{parametroParcelamentoControlador.selecionado.diasVencimentoEntrada}"/>
                </h:panelGrid>
                <h:panelGrid columns="3" cellspacing="5">
                    <h:outputText value="Qtde Reparcelamentos Permitidos"/>
                    <h:outputText value="Qtde Parcelas para a Inadimplência"/>
                    <h:outputText value="Tipo de Inadimplimento"/>

                    <p:inputText value="#{parametroParcelamentoControlador.selecionado.quantidadeReparcelamento}"/>
                    <p:inputText value="#{parametroParcelamentoControlador.selecionado.parcelasInadimplencia}"/>
                    <h:selectOneMenu id="tipoInadimplento" styleClass="width150"
                                     value="#{parametroParcelamentoControlador.selecionado.tipoInadimplimento}">
                        <f:selectItems value="#{parametroParcelamentoControlador.tiposInadimplentos}"/>
                    </h:selectOneMenu>

                </h:panelGrid>

                <h:panelGrid id="gridTipoDocto"
                             columns="#{parametroParcelamentoControlador.selecionado.tipoCadastroTributario ne 'PESSOA' ? '1':'2'}">
                    <h:outputText value="Tipo de Documento para emissão do Termo"
                                  rendered="#{parametroParcelamentoControlador.selecionado.tipoCadastroTributario ne 'PESSOA'}"/>
                    <h:outputText value="Tipo de Documento para emissão do Termo Pessoa Física"
                                  rendered="#{parametroParcelamentoControlador.selecionado.tipoCadastroTributario eq 'PESSOA'}"/>
                    <h:outputText value="Tipo de Documento para emissão do Termo Pessoa Jurídica"
                                  rendered="#{parametroParcelamentoControlador.selecionado.tipoCadastroTributario eq 'PESSOA'}"/>


                    <p:autoComplete queryDelay="1000" id="tipoDoctoTermo"
                                    value="#{parametroParcelamentoControlador.selecionado.termoCadastro}"
                                    completeMethod="#{parametroParcelamentoControlador.completaTermoCadastro}"
                                    converter="#{parametroParcelamentoControlador.converterTipoDocumento}"
                                    rendered="#{parametroParcelamentoControlador.selecionado.tipoCadastroTributario ne 'PESSOA'}"
                                    var="tipoDoctoTermo" dropdown="true"
                                    itemLabel="#{tipoDoctoTermo.descricao} #{tipoDoctoTermo.tipoCadastroDoctoOficial.descricao}"
                                    itemValue="#{tipoDoctoTermo.id}"
                                    forceSelection="true"
                                    title="Selecione um Tipo de Documento Oficial" size="70"
                                    maxResults="5"/>
                    <p:autoComplete queryDelay="1000" id="tipoDoctoTermoPF"
                                    value="#{parametroParcelamentoControlador.selecionado.termoPessoaFisica}"
                                    completeMethod="#{parametroParcelamentoControlador.completaTermoPessoaFisica}"
                                    converter="#{parametroParcelamentoControlador.converterTipoDocumento}"
                                    rendered="#{parametroParcelamentoControlador.selecionado.tipoCadastroTributario eq 'PESSOA'}"
                                    var="tipoDoctoTermo" dropdown="true"
                                    itemLabel="#{tipoDoctoTermo.descricao} #{tipoDoctoTermo.tipoCadastroDoctoOficial.descricao}"
                                    itemValue="#{tipoDoctoTermo.id}"
                                    forceSelection="true"
                                    title="Selecione um Tipo de Documento Oficial" size="70"
                                    maxResults="5"/>
                    <p:autoComplete queryDelay="1000" id="tipoDoctoTermoPJ"
                                    value="#{parametroParcelamentoControlador.selecionado.termoPessoaJuridica}"
                                    completeMethod="#{parametroParcelamentoControlador.completaTermoPessoaJuridica}"
                                    converter="#{parametroParcelamentoControlador.converterTipoDocumento}"
                                    rendered="#{parametroParcelamentoControlador.selecionado.tipoCadastroTributario eq 'PESSOA'}"
                                    var="tipoDoctoTermo" dropdown="true"
                                    itemLabel="#{tipoDoctoTermo.descricao} #{tipoDoctoTermo.tipoCadastroDoctoOficial.descricao}"
                                    itemValue="#{tipoDoctoTermo.id}"
                                    forceSelection="true"
                                    title="Selecione um Tipo de Documento Oficial" size="70"
                                    maxResults="5"/>
                </h:panelGrid>
                <h:panelGrid columns="2" id="gridDividas">

                    <h:outputText value="Dívida de Destino"/>
                    <h:outputText value="Tipo de Parcelamento"/>
                    <p:autoComplete queryDelay="1000" id="divida"
                                    forceSelection="true"
                                    completeMethod="#{parametroParcelamentoControlador.completaDivida}"
                                    value="#{parametroParcelamentoControlador.selecionado.dividaParcelamento}"
                                    converter="#{parametroParcelamentoControlador.converterDivida}"
                                    var="divida"
                                    itemLabel="#{divida.descricao}"
                                    itemValue="#{divida.id}"
                                    dropdown="true"
                                    size="50"
                                    title="Informe a Dívida de Destino do Parcelamento"/>

                    <h:panelGrid columns="8">
                        <p:selectBooleanCheckbox disabled="true"
                                                 value="#{parametroParcelamentoControlador.selecionado.incluiValorOriginal}">
                            <p:ajax update="Formulario:labelPrincipal"/>
                        </p:selectBooleanCheckbox>
                        <h:outputText value="Valor Original + " id="labelPrincipal"
                                      styleClass="#{parametroParcelamentoControlador.selecionado.incluiValorOriginal ? 'azulnegrito':'negrito'}"/>
                        <p:selectBooleanCheckbox value="#{parametroParcelamentoControlador.selecionado.incluiJuros}">
                            <p:ajax update="Formulario:labelJuros"/>
                        </p:selectBooleanCheckbox>
                        <h:outputText value="Juros" id="labelJuros"
                                      styleClass="#{parametroParcelamentoControlador.selecionado.incluiJuros ? 'azulnegrito':'negrito'}"/>
                        <p:selectBooleanCheckbox value="#{parametroParcelamentoControlador.selecionado.incluiMulta}">
                            <p:ajax update="Formulario:labelMulta"/>
                        </p:selectBooleanCheckbox>
                        <h:outputText value="Multa" id="labelMulta"
                                      styleClass="#{parametroParcelamentoControlador.selecionado.incluiMulta ? 'azulnegrito':'negrito'}"/>
                        <p:selectBooleanCheckbox value="#{parametroParcelamentoControlador.selecionado.incluiCorrecao}">
                            <p:ajax update="Formulario:labelCorrecao"/>
                        </p:selectBooleanCheckbox>
                        <h:outputText value="Correção Monetária" id="labelCorrecao"
                                      styleClass="#{parametroParcelamentoControlador.selecionado.incluiCorrecao ? 'azulnegrito':'negrito'}"/>
                    </h:panelGrid>
                </h:panelGrid>

                <h:panelGrid columns="3">
                    <h:outputText value="Exige Entrada"/>
                    <h:outputText value="Percentual"/>
                    <h:outputText value="Valor Mínimo da Parcela (UFM)"/>
                    <p:selectBooleanButton id="exigePercentualEntrada"
                                           value="#{parametroParcelamentoControlador.selecionado.exigePercentualEntrada}"
                                           onLabel="Sim"
                                           offLabel="Não" onIcon="ui-icon-check" offIcon="ui-icon-close"
                                           style="width:60px">
                        <p:ajax update="vlrPercentualEntrada" event="change"/>
                    </p:selectBooleanButton>
                    <p:inputText size="20"
                                 disabled="#{!parametroParcelamentoControlador.selecionado.exigePercentualEntrada}"
                                 id="vlrPercentualEntrada"
                                 value="#{parametroParcelamentoControlador.selecionado.valorPercentualEntrada}"
                                 maxlength="15"
                                 title="Informe o percentual de entrada do parcelamento">
                        <f:convertNumber pattern="#,##0.00"/>
                    </p:inputText>
                    <p:inputText size="20"
                                 id="vlrMinimoParcela"
                                 value="#{parametroParcelamentoControlador.selecionado.valorMinimoParcelaUfm}"
                                 maxlength="15"
                                 title="Informe o percentual de entrada do parcelamento">
                        <f:convertNumber pattern="#,##0.00"/>
                    </p:inputText>
                </h:panelGrid>


                <h:panelGrid columns="2">
                    <h:outputText value="Dias Vencidos Para Cancelamento"/>
                    <h:outputText value="Verificar Cancelamento Automático" styleClass="mlef10"/>

                    <p:inputText size="20"
                                 value="#{parametroParcelamentoControlador.selecionado.diasVencidosCancelamento}"/>
                    <h:selectOneMenu styleClass="mlef10"
                                     value="#{parametroParcelamentoControlador.selecionado.verificaCancelamentoAutomatico}">
                        <f:selectItems
                            value="#{parametroParcelamentoControlador.buscarTiposVerificacaoCancelamentoAutomatico()}"/>
                    </h:selectOneMenu>
                </h:panelGrid>

                <h:panelGrid columns="1">
                    <h:outputText value="Permite Parcelamento Para CPF/CNPJ Inválido/Zerado"/>
                    <h:selectOneMenu value="#{parametroParcelamentoControlador.selecionado.parcelamentoCpfCnpjInvalido}">
                        <f:selectItems value="#{parametroParcelamentoControlador.buscarTiposSimNao()}"/>
                    </h:selectOneMenu>
                </h:panelGrid>

                <br/>

                <p:tabView id="tabView">
                    <p:tab title="Dívidas de Origem">
                        <p:panel id="panelDividas">
                            <h:panelGrid columns="3">
                                <h:outputText value="Dívida"/>
                                <h:outputText value="Exercício Inicial"/>
                                <h:outputText value="Exercício Final"/>

                                <p:autoComplete queryDelay="1000" id="dividaFiltro"
                                                completeMethod="#{parametroParcelamentoControlador.completaDivida}"
                                                forceSelection="true"
                                                value="#{parametroParcelamentoControlador.itemDivida.divida}"
                                                converter="#{parametroParcelamentoControlador.converterDivida}"
                                                var="divida"
                                                dropdown="true"
                                                itemLabel="#{divida.descricao}"
                                                itemValue="#{divida.id}"
                                                size="40"
                                                title="Informe as Dívidas de Origem que serão envolvidas no parcelamento"/>

                                <p:inputMask mask="9999" id="exericicioInicial"
                                             value="#{parametroParcelamentoControlador.itemDivida.exercicioInicial}"
                                             converter="#{exercicioInicialFinalControlador.converterExercicio}"
                                             size="10"
                                             maxlength="4">
                                    <p:ajax event="blur"
                                            onsuccess="copiaValor(document.getElementById('Formulario:tabView:exericicioInicial'), 'Formulario:tabView:exericicioFinal');"/>
                                </p:inputMask>
                                <p:inputMask mask="9999" id="exericicioFinal"
                                             value="#{parametroParcelamentoControlador.itemDivida.exercicioFinal}"
                                             converter="#{exercicioInicialFinalControlador.converterExercicio}"
                                             size="10"
                                             maxlength="4">
                                </p:inputMask>
                            </h:panelGrid>
                            <p:commandButton value="Adicionar Dívida"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao" icon="ui-icon-arrowthickstop-1-s"
                                             actionListener="#{parametroParcelamentoControlador.addItemDivida}"
                                             update=":Formulario:tabView:panelDividas"/>
                        </p:panel>
                        <p:dataTable id="listaDividas"
                                     var="divida" styleClass="mtop10"
                                     value="#{parametroParcelamentoControlador.selecionado.dividas}"
                                     emptyMessage="Nenhuma Dívida foi adicionada">
                            <f:facet name="header">
                                <h:outputText value="Dívidas de Origem"/>
                            </f:facet>
                            <p:column headerText="Dívida" style="text-align: left">
                                <h:outputText value="#{divida.divida.descricao}"/>
                            </p:column>
                            <p:column headerText="Exercício Inicial" style="text-align: center">
                                <h:outputText value="#{divida.exercicioInicial.ano}"/>
                            </p:column>
                            <p:column headerText="Exercício Final" style="text-align: center">
                                <h:outputText value="#{divida.exercicioFinal.ano}"/>
                            </p:column>
                            <p:column headerText="Remover" style="text-align: center">
                                <p:commandButton icon="ui-icon-trash" styleClass="icone_vermelho"
                                                 actionListener="#{parametroParcelamentoControlador.removeItemDivida}"
                                                 update=":Formulario:tabView:listaDividas">
                                    <f:attribute name="objeto" value="#{divida}"/>
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Faixas de Valores">
                        <p:panel id="panelFaixaValores">
                            <h:panelGrid columns="3">
                                <h:outputText value="Valor Inicial"/>
                                <h:outputText value="Valor Final"/>
                                <h:outputText value="Qtde Máxima de Parcelas"/>
                                <p:inputText size="20"
                                             id="vlInicioFaixa"
                                             value="#{parametroParcelamentoControlador.itemFaixa.valorInicial}"
                                             maxlength="15"
                                             onkeypress="mascaraMonetaria(this)"
                                             converter="moneyConverter"
                                             title="Informe o valor inicial da faixa"/>
                                <p:inputText size="20"
                                             id="vlFimFaixa"
                                             value="#{parametroParcelamentoControlador.itemFaixa.valorFinal}"
                                             maxlength="15"
                                             onkeypress="mascaraMonetaria(this)"
                                             converter="moneyConverter"
                                             title="Informe o valor final da faixa"/>
                                <p:inputText id="qntMaxParcelas"
                                             value="#{parametroParcelamentoControlador.itemFaixa.quantidadeMaximaParcelas}"/>

                            </h:panelGrid>
                            <p:commandButton value="Adicionar Faixa"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao" icon="ui-icon-arrowthickstop-1-s"
                                             actionListener="#{parametroParcelamentoControlador.addItemFaixa}"
                                             update=":Formulario:tabView:panelFaixaValores :Formulario:tabView:listaFaixa"/>
                        </p:panel>
                        <p:dataTable id="listaFaixa"
                                     var="faixa" styleClass="mtop10"
                                     value="#{parametroParcelamentoControlador.selecionado.faixas}"
                                     emptyMessage="Nenhuma Faixa foi adicionada">
                            <f:facet name="header">
                                <h:outputText value="Faixas de Valores"/>
                                <br/>
                                <p:commandButton value="Editar Faixas"
                                                 disabled="${empty parametroParcelamentoControlador.selecionado.faixas}"
                                                 actionListener="#{parametroParcelamentoControlador.editarFaixas}"
                                                 update="listaFaixa"
                                                 rendered="#{!parametroParcelamentoControlador.editandoFaixa}"
                                                 icon="ui-icon-pencil"/>
                                <p:commandButton value="Confirmar Edição de Faixas"
                                                 disabled="${empty parametroParcelamentoControlador.selecionado.faixas}"
                                                 actionListener="#{parametroParcelamentoControlador.confirmaEdicaoFaixas()}"
                                                 update="listaFaixa"
                                                 rendered="#{parametroParcelamentoControlador.editandoFaixa}"
                                                 icon="ui-icon-check"/>
                            </f:facet>
                            <p:column headerText="Valor Inicial" style="text-align: left">
                                <h:outputText value="#{faixa.valorInicial}"
                                              rendered="#{!parametroParcelamentoControlador.editandoFaixa}"
                                              converter="moneyConverter"/>

                                <p:inputText size="20"
                                             value="#{faixa.valorInicial}"
                                             maxlength="15"
                                             rendered="#{parametroParcelamentoControlador.editandoFaixa}"
                                             onkeypress="mascaraMonetaria(this)"
                                             converter="moneyConverter"
                                             title="Informe o valor inicial da faixa"/>
                            </p:column>
                            <p:column headerText="Valor Final" style="text-align: left">
                                <h:outputText value="#{faixa.valorFinal}"
                                              rendered="#{!parametroParcelamentoControlador.editandoFaixa}"
                                              converter="moneyConverter"/>

                                <p:inputText size="20"
                                             value="#{faixa.valorFinal}"
                                             maxlength="15"
                                             rendered="#{parametroParcelamentoControlador.editandoFaixa}"
                                             onkeypress="mascaraMonetaria(this)"
                                             converter="moneyConverter"
                                             title="Informe o valor inicial da faixa"/>
                            </p:column>
                            <p:column headerText="Qtde Máx. de Parc."  style="text-align: center">
                                <h:outputText value="#{faixa.quantidadeMaximaParcelas}"
                                              rendered="#{!parametroParcelamentoControlador.editandoFaixa}"/>
                                <p:inputText value="#{faixa.quantidadeMaximaParcelas}"
                                             rendered="#{parametroParcelamentoControlador.editandoFaixa}"/>
                            </p:column>
                            <p:column headerText="Remover" style="text-align: center">
                                <p:commandButton icon="ui-icon-trash" styleClass="icone_vermelho"
                                                 actionListener="#{parametroParcelamentoControlador.removeItemFaixa}"
                                                 update=":Formulario:tabView:listaFaixa">
                                    <f:attribute name="objeto" value="#{faixa}"/>
                                </p:commandButton>
                            </p:column>

                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Parcelas e Descontos">
                        <p:panel id="panelPeriodoDesconto" styleClass="mbot05">
                            <h:panelGrid columns="4">
                                <h:outputText value="Data Inicial para Desconto: "/>
                                <p:calendar pattern="dd/MM/yyyy" showOn="button" onkeyup="mascara(this, mdata);"
                                            value="#{parametroParcelamentoControlador.selecionado.inicioDesconto}">
                                    <p:ajax event="blur" process="@this"/>
                                </p:calendar>

                                <h:outputText value="Data Final para Desconto: "/>
                                <p:calendar pattern="dd/MM/yyyy" showOn="button" onkeyup="mascara(this, mdata);"
                                            value="#{parametroParcelamentoControlador.selecionado.finalDesconto}">
                                    <p:ajax event="blur" process="@this"/>
                                </p:calendar>
                            </h:panelGrid>
                        </p:panel>
                        <p:panel id="panelDesconto">
                            <h:panelGrid columns="2"
                                         id="panelGridAplicacaoDesconto">

                                <h:outputText value="Tipo de Aplicação de Desconto: "/>
                                <h:selectOneMenu id="tipoLancamentoDesconto" style="width: 175px"
                                                 disabled="#{parametroParcelamentoControlador.selecionado.tributos.size() gt 0}"
                                                 value="#{parametroParcelamentoControlador.selecionado.tipoLancamentoDesconto}">
                                    <f:selectItems value="#{parametroParcelamentoControlador.tipoLancamentosDesconto}"/>
                                    <p:ajax update="panelGridAplicacaoDesconto" process="@this"/>
                                </h:selectOneMenu>

                                <h:outputText value="Vigência para Desconto: "/>
                                <h:selectOneMenu id="vigenciaDesconto" style="width: 175px"
                                                 disabled="#{parametroParcelamentoControlador.selecionado.tributos.size() gt 0}"
                                                 value="#{parametroParcelamentoControlador.selecionado.tipoVigenciaDesconto}">
                                    <f:selectItems value="#{parametroParcelamentoControlador.tipoVigenciasDesconto}"/>
                                    <p:ajax update="panelGridAplicacaoDesconto" process="@this"/>
                                </h:selectOneMenu>

                                <h:outputText value="Data de Vencimento Final: "
                                              rendered="#{parametroParcelamentoControlador.selecionado.tipoLancamentoDesconto eq 'VENCIMENTO_FINAL'}"/>
                                <p:calendar
                                    value="#{parametroParcelamentoControlador.itemTributo.vencimentoFinalParcela}"
                                    rendered="#{parametroParcelamentoControlador.selecionado.tipoLancamentoDesconto eq 'VENCIMENTO_FINAL'}"
                                    onkeyup="mascara(this, mdata);"
                                    pattern="dd/MM/yyyy"/>

                                <h:outputText value="Número da Parcela Inicial: "
                                              rendered="#{parametroParcelamentoControlador.selecionado.tipoLancamentoDesconto eq 'NUMERO_PARCELA'}"/>
                                <p:inputText
                                    value="#{parametroParcelamentoControlador.itemTributo.numeroParcelaInicial}"
                                    rendered="#{parametroParcelamentoControlador.selecionado.tipoLancamentoDesconto eq 'NUMERO_PARCELA'}"/>


                                <h:outputText value="Número da Parcela Final: "
                                              rendered="#{parametroParcelamentoControlador.selecionado.tipoLancamentoDesconto eq 'NUMERO_PARCELA'}"/>
                                <p:inputText value="#{parametroParcelamentoControlador.itemTributo.numeroParcelaFinal}"
                                             rendered="#{parametroParcelamentoControlador.selecionado.tipoLancamentoDesconto eq 'NUMERO_PARCELA'}"/>

                                <h:outputText value="Desconto sobre Imposto (%): "/>
                                <p:inputText size="20"
                                             id="vlDescontoImposto"
                                             value="#{parametroParcelamentoControlador.itemTributo.percDescontoImposto}"
                                             maxlength="15"
                                             title="Informe o percentual de desconto sobre o imposto">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>

                                <h:outputText value="Desconto sobre Taxa (%): "/>
                                <p:inputText size="20"
                                             id="vlDescontoTaxa"
                                             value="#{parametroParcelamentoControlador.itemTributo.percDescontoTaxa}"
                                             maxlength="15"
                                             title="Informe o percentual de desconto sobre a taxa">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>

                                <h:outputText value="Desconto sobre Multa (%): "/>
                                <p:inputText size="20"
                                             id="vlTipoMulta"
                                             value="#{parametroParcelamentoControlador.itemTributo.percentualMulta}"
                                             maxlength="15"
                                             title="Informe o percentual de desconto sobre a multa">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>

                                <h:outputText value="Desconto sobre Juros (%): "/>
                                <p:inputText size="20"
                                             id="vlTipoJuros"
                                             value="#{parametroParcelamentoControlador.itemTributo.percentualJuros}"
                                             maxlength="15"
                                             title="Informe o percentual de desconto sobre os juros">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>

                                <h:outputText value="Desconto sobre Correção Monetária (%): "/>
                                <p:inputText size="20"
                                             id="vlTipoCorrecao"
                                             value="#{parametroParcelamentoControlador.itemTributo.percentualCorrecaoMonetaria}"
                                             maxlength="15"
                                             title="Informe o percentual de desconto sobre a correção monetária">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>

                                <h:outputText value="Desconto sobre Honorários (%): "/>
                                <p:inputText size="20"
                                             id="vlTipoHonorarios"
                                             value="#{parametroParcelamentoControlador.itemTributo.percentualHonorarios}"
                                             maxlength="15"
                                             title="Informe o percentual de desconto sobre os honorários">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>
                            </h:panelGrid>
                            <p:commandButton value="Adicionar Desconto"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao" icon="ui-icon-arrowthickstop-1-s"
                                             actionListener="#{parametroParcelamentoControlador.addItemTributo()}"
                                             update=":Formulario:tabView:panelDesconto :Formulario:tabView:listaDesconto"/>
                        </p:panel>
                        <p:dataTable id="listaDesconto"
                                     var="tributo" styleClass="mtop10"
                                     value="#{parametroParcelamentoControlador.selecionado.tributos}"
                                     emptyMessage="Nenhum Desconto foi adicionado">
                            <f:facet name="header">
                                <h:outputText value="Parcelas e Descontos"/>
                                <br/>
                                <p:commandButton value="Editar Descontos"
                                                 disabled="${empty parametroParcelamentoControlador.selecionado.tributos}"
                                                 actionListener="#{parametroParcelamentoControlador.editarDescontos()}"
                                                 update="listaDesconto"
                                                 rendered="#{!parametroParcelamentoControlador.editandoDescontos}"
                                                 icon="ui-icon-pencil"/>
                                <p:commandButton value="Confirmar Edição de Descontos"
                                                 disabled="${empty parametroParcelamentoControlador.selecionado.tributos}"
                                                 actionListener="#{parametroParcelamentoControlador.confirmaEdicaoDescontos()}"
                                                 update="listaDesconto"
                                                 rendered="#{parametroParcelamentoControlador.editandoDescontos}"
                                                 icon="ui-icon-check"/>
                            </f:facet>
                            <p:column headerText="Vencimento Final" style="text-align: center"
                                      rendered="#{parametroParcelamentoControlador.selecionado.tipoLancamentoDesconto eq 'VENCIMENTO_FINAL'}">

                                <h:outputText value="#{tributo.vencimentoFinalParcela}"
                                              rendered="#{!parametroParcelamentoControlador.editandoDescontos}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>

                                <p:calendar value="#{tributo.vencimentoFinalParcela}"
                                            rendered="#{parametroParcelamentoControlador.editandoDescontos}"
                                            size="10"
                                            onkeyup="mascara(this, mdata);"
                                            pattern="dd/MM/yyyy"/>
                            </p:column>
                            <p:column headerText="Número da Parcela" style="text-align: center"
                                      rendered="#{parametroParcelamentoControlador.selecionado.tipoLancamentoDesconto eq 'NUMERO_PARCELA'}">

                                <h:outputText rendered="#{!parametroParcelamentoControlador.editandoDescontos}"
                                              value="#{tributo.numeroParcelaInicial} à #{tributo.numeroParcelaFinal}"/>

                                <h:panelGrid columns="3"
                                             rendered="#{parametroParcelamentoControlador.editandoDescontos}">
                                    <p:inputText value="#{tributo.numeroParcelaInicial}" size="5" maxlength="4"/>
                                    <h:outputText value="À"/>
                                    <p:inputText value="#{tributo.numeroParcelaFinal}" size="5" maxlength="4"/>
                                </h:panelGrid>
                            </p:column>
                            <p:column headerText="Desconto sobre Imposto (%)" style="text-align: center">
                                <h:outputText rendered="#{!parametroParcelamentoControlador.editandoDescontos}"
                                              value="#{tributo.percDescontoImposto}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                                <p:inputText size="10"
                                             value="#{tributo.percDescontoImposto}"
                                             maxlength="15"
                                             rendered="#{parametroParcelamentoControlador.editandoDescontos}"
                                             title="Informe o percentual de desconto sobre o imposto">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>
                            </p:column>
                            <p:column headerText="Desconto sobre Taxa (%)" style="text-align: center">
                                <h:outputText rendered="#{!parametroParcelamentoControlador.editandoDescontos}"
                                              value="#{tributo.percDescontoTaxa}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                                <p:inputText size="10"
                                             value="#{tributo.percDescontoTaxa}"
                                             maxlength="15"
                                             rendered="#{parametroParcelamentoControlador.editandoDescontos}"
                                             title="Informe o percentual de desconto sobre a taxa">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>
                            </p:column>
                            <p:column headerText="Desconto sobre Juros (%)" style="text-align: center">
                                <h:outputText value="#{tributo.percentualJuros}"
                                              rendered="#{!parametroParcelamentoControlador.editandoDescontos}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                                <p:inputText size="10"
                                             value="#{tributo.percentualJuros}"
                                             maxlength="15"
                                             rendered="#{parametroParcelamentoControlador.editandoDescontos}"
                                             title="Informe o percentual de desconto sobre os juros">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>
                            </p:column>
                            <p:column headerText="Desconto sobre Multa (%)" style="text-align: center">
                                <h:outputText value="#{tributo.percentualMulta}"
                                              rendered="#{!parametroParcelamentoControlador.editandoDescontos}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                                <p:inputText size="10"
                                             value="#{tributo.percentualMulta}"
                                             maxlength="15"
                                             rendered="#{parametroParcelamentoControlador.editandoDescontos}"
                                             title="Informe o percentual de desconto sobre a multa">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>
                            </p:column>
                            <p:column headerText="Desconto sobre Correção (%)" style="text-align: center">
                                <h:outputText value="#{tributo.percentualCorrecaoMonetaria}"
                                              rendered="#{!parametroParcelamentoControlador.editandoDescontos}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                                <p:inputText size="10"
                                             value="#{tributo.percentualCorrecaoMonetaria}"
                                             maxlength="15"
                                             rendered="#{parametroParcelamentoControlador.editandoDescontos}"
                                             title="Informe o percentual de desconto sobre a correção monetária">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>
                            </p:column>
                            <p:column headerText="Desconto sobre Honorários (%)" style="text-align: center">
                                <h:outputText value="#{tributo.percentualHonorarios}"
                                              rendered="#{!parametroParcelamentoControlador.editandoDescontos}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                                <p:inputText size="10"
                                             value="#{tributo.percentualHonorarios}"
                                             maxlength="15"
                                             rendered="#{parametroParcelamentoControlador.editandoDescontos}"
                                             title="Informe o percentual de desconto sobre os honorários">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </p:inputText>
                            </p:column>
                            <p:column headerText="Remover" style="text-align: center">
                                <p:commandButton icon="ui-icon-trash" styleClass="icone_vermelho"
                                                 actionListener="#{parametroParcelamentoControlador.removeItemTributo}"
                                                 update=":Formulario:tabView:listaDesconto :Formulario:tabView:panelGridAplicacaoDesconto">
                                    <f:attribute name="objeto" value="#{tributo}"/>
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>

                    </p:tab>
                </p:tabView>
            </p:panel>
            <fc:rodapePretty controlador="#{parametroParcelamentoControlador}"/>
        </h:form>


    </ui:define>
</ui:composition>
</html>
