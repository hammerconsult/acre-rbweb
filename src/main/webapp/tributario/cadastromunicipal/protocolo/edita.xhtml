<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:adm="http://java.sun.com/jsf/composite/components/administrativo"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">

            <p:outputPanel rendered="#{protocoloControlador.tramitacaoProtocolo.processo.protocolo eq false}">
                <p:panel header="Trâmite">
                    <h:panelGrid columns="8">
                        <h:outputText value="Processo:"/>
                        <p:inputText
                            value="#{protocoloControlador.tramitacaoProtocolo.processo.numero}/#{protocoloControlador.tramitacaoProtocolo.processo.ano}"
                            readonly="true" id="numeroProcesso"/>
                        <h:outputText value="Situação:"/>
                        <p:inputText value="#{protocoloControlador.tramitacaoProtocolo.processo.situacao.descricao}"
                                     readonly="true"
                                     id="statusProcesso"/>
                        <h:outputText value="Tipo Processo:"/>
                        <p:inputText
                            value="#{protocoloControlador.tramitacaoProtocolo.processo.tipoProcessoTramite.descricao}"
                            readonly="true" id="tipoProcessoProcesso"/>
                        <h:outputText value="Data Processo:"/>
                        <p:inputText value="#{protocoloControlador.tramitacaoProtocolo.processo.dataRegistro}"
                                     readonly="true"
                                     id="dataProcesso">
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                        </p:inputText>
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <h:outputText value="Nº Processo Antigo:"/>
                        <p:inputText value="#{protocoloControlador.tramitacaoProtocolo.processo.numeroProcessoAntigo}"
                                     readonly="true"
                                     size="30" id="numeroProcessoAntigo"/>
                        <h:outputText value="Nº Processo SAJ:"/>
                        <p:inputText value="#{protocoloControlador.tramitacaoProtocolo.processo.numeroProcessoSAJ}"
                                     readonly="true"
                                     size="30" id="numeroProcessoSAJ"/>
                        <h:outputText value="Solicitante:"/>
                        <p:inputText value="#{protocoloControlador.tramitacaoProtocolo.processo.pessoa.nome}"
                                     readonly="true" size="60"
                                     id="solicitanteProcesso"/>
                        <h:outputText value="Assunto:"/>
                        <p:inputText
                            value="#{protocoloControlador.tramitacaoProtocolo.processo.subAssunto.assunto.nome}"
                            readonly="true"
                            size="60" id="assuntoProcesso"/>
                        <h:outputText value="Subassunto:"/>
                        <p:inputText value="#{protocoloControlador.tramitacaoProtocolo.processo.subAssunto.nome}"
                                     readonly="true"
                                     size="60" id="subassuntoProcesso"/>
                        <h:outputText value="Observações:"/>
                        <p:inputText value="#{protocoloControlador.tramitacaoProtocolo.processo.observacoes}"
                                     readonly="true" size="60"
                                     autoResize="true" id="observacoesProcesso"/>
                        <h:outputText value="Confidencial:"/>
                        <p:inputText
                            value="#{protocoloControlador.tramitacaoProtocolo.processo.confidencial ? 'Sim' : 'Não'}"
                            readonly="true" size="30" id="confidencialProcesso"/>
                    </h:panelGrid>
                    <p:tabView id="tabViewProtocolo">
                        <p:tab title="Geral">
                            <h:panelGrid columns="3">
                                <h:outputText value="Data do Aceite: " styleClass="negrito"/>
                                <h:outputText value="#{protocoloControlador.selecionado.dataAceite}"
                                              styleClass="azulnegrito">
                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                                </h:outputText>
                                <p:spacer/>

                                <h:outputText value="Responsável pelo Aceite: " styleClass="negrito"/>
                                <h:outputText value="#{protocoloControlador.selecionado.responsavel}"
                                              styleClass="azulnegrito"/>
                                <p:spacer/>

                                <fc:outputLabelObrigatorio value="Situação do Parecer: "/>
                                <h:panelGrid columns="2" cellspacing="0" cellpadding="0">
                                    <h:selectOneMenu value="#{protocoloControlador.selecionado.situacaoTramite}"
                                                     id="situacaoTramite1" styleClass="mrig05"
                                                     converter="#{situacaoTramiteControlador.converterGenerico}">
                                        <f:selectItems value="#{protocoloControlador.situacaoTramite}"/>
                                        <p:ajax update="conteudoEmail pausaPrazo"
                                                listener="#{protocoloControlador.definirConteudoEmail()}"/>
                                    </h:selectOneMenu>
                                    <h:outputText id="pausaPrazo"
                                                  value="#{protocoloControlador.selecionado.situacaoTramite.paraPrazo ? 'Pausa Prazo' : ''}"
                                                  styleClass="vermelhonegrito"/>
                                </h:panelGrid>
                                <p:spacer/>

                                <h:outputText value="Conteúdo do E-mail :"/>
                                <p:inputTextarea id="conteudoEmail"
                                                 value="#{protocoloControlador.tramitacaoProtocolo.conteudoEmail}"
                                                 cols="70" rows="3"/>
                                <p:spacer/>

                                <fc:outputLabelObrigatorio value="Responsável pelo Parecer: "/>
                                <p:inputText id="responsavelParecer"
                                             value="#{protocoloControlador.selecionado.responsavelParecer}" size="70"
                                             maxlength="70"/>
                                <p:spacer/>

                                <h:outputText value="Parecer: "/>
                                <p:inputTextarea id="parecer" value="#{protocoloControlador.selecionado.parecer}"
                                                 rows="3" cols="70"/>
                                <p:spacer/>
                            </h:panelGrid>
                        </p:tab>
                        <p:tab title="Documentos">
                            <p:panel header="Documentos">
                                <p:dataTable var="doc"
                                             value="#{protocoloControlador.tramitacaoProtocolo.documentosProcesso}"
                                             emptyMessage="Nenhum documento informado.">
                                    <p:column headerText="Nome do Documento">
                                        <h:outputText value="#{doc.documento}"/>
                                    </p:column>
                                    <p:column headerText="Nº  do Documento">
                                        <h:outputText value="#{doc.numeroDocumento}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>

                        <p:tab title="Anexos">
                            <p:panel id="panelfileUpload">
                                <p:fileUpload multiple="true" cancelLabel="Cancelar"
                                              sizeExceedMessage="Arquivo Maior que 10 MB." label="Selecione..."
                                              uploadLabel="Upload Arquivo" update="fileUpload1" sizeLimit="15728640"
                                              id="fileUploadProcesso"
                                              fileUploadListener="#{protocoloControlador.uploadArquivo}"/>
                                <br/>
                                <p:dataTable id="fileUpload1"
                                             value="#{protocoloControlador.tramitacaoProtocolo.processo.arquivos}"
                                             var="arq" emptyMessage="Nenhum anexo informado.">
                                    <f:facet name="header">
                                        <h:outputText value="Arquivos"/>
                                    </f:facet>
                                    <p:column headerText="Nome">
                                        <h:outputText value="${arq.arquivo.nome}"/>
                                    </p:column>
                                    <p:column headerText="Tamanho">
                                        <h:outputText value="${arq.arquivo.tamanho}"/>
                                    </p:column>
                                    <p:column headerText="Download">
                                        <a target="_blank"
                                           href='${facesContext.externalContext.requestContextPath}/arquivos/#{arq.arquivo.nome}?id=#{arq.arquivo.id}'>
                                            <h:outputText value="Download"/>
                                        </a>
                                    </p:column>
                                    <p:column headerText="Remover" style="width: 15%">
                                        <p:commandButton icon="ui-icon-trash" title="Remover" update="fileUpload1"
                                                         actionListener="#{protocoloControlador.removeFileUpload}"
                                                         id="btRemoveAnexoProcesso">
                                            <f:attribute name="remove" id="remove" value="#{arq}"/>
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>

                        <p:tab title="Trâmite">
                            <p:dataTable id="tabelaTramites"
                                         value="#{protocoloControlador.tramitacaoProtocolo.processo.tramites}"
                                         var="t" dynamic="true">
                                <p:column headerText="Índice" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{t.indice}"/>
                                </p:column>
                                <p:column headerText="Situação do Parecer" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{t.situacaoTramite.nome}"/>
                                </p:column>
                                <p:column headerText="Parecer" styleClass="alinhamentoEsquerda">
                                    <fc:codigo-descricao-hierarquia
                                        styleClass="default"
                                        dataMovimento="#{sistemaControlador.dataOperacao}"
                                        tipoHierarquia="ADMINISTRATIVA"
                                        unidadeOrganizacional="#{t.unidadeOrganizacional}"/>
                                </p:column>
                                <p:column headerText="Parecer" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{t.parecer}"/>
                                </p:column>
                                <p:column headerText="Prazo" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{t.prazo} (#{t.tipoPrazo.descricao})"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Rotas">
                            <p:outputPanel id="panelRotas">
                                <p:tree id="orcTree1" value="#{protocoloControlador.tramitacaoProtocolo.rootOrc}"
                                        var="treeOrc"
                                        style="width: 100%;border: 0px " selectionMode="single"
                                        selection="#{protocoloControlador.tramitacaoProtocolo.selectedNode}">
                                    <p:treeNode expandedIcon="ui-icon-folder-open"
                                                collapsedIcon="ui-icon-folder-collapsed">
                                        <h:outputText
                                            style="#{protocoloControlador.styleNaoTemUsuario(treeOrc.subordinada)}"
                                            value="#{treeOrc.descricao}"/>
                                    </p:treeNode>
                                </p:tree>
                                <p:commandButton value="Selecionar Unidade Organizacional"
                                                 styleClass="mbot05"
                                                 actionListener="#{protocoloControlador.selecionarHierarquiaDaArvore}"
                                                 update="panelGridUnidade" id="btSelecionaUO"/>

                                <h:panelGrid columns="3" id="panelGridUnidade">
                                    <h:outputText value="Unidade Organizacional: "/>
                                    <p:autoComplete queryDelay="1000" widgetVar="hierarquiaOrgEnt"
                                                    id="hierarquiaOrgEnt1"
                                                    title="Digite a descrição"
                                                    completeMethod="#{protocoloControlador.completaHierarquiaOrganizacionalAdministrativaComUsuarios}"
                                                    value="#{protocoloControlador.tramitacaoProtocolo.processoRota.hierarquiaOrganizacional}"
                                                    var="un"
                                                    size="70"
                                                    maxResults="10"
                                                    itemLabel="#{un}"
                                                    itemValue="#{un.id}"
                                                    forceSelection="true"
                                                    converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}">
                                    </p:autoComplete>
                                    <p:spacer/>

                                    <h:outputText value="Prazo:"/>
                                    <p:inputText title="Digite o Prazo"
                                                 value="#{protocoloControlador.tramitacaoProtocolo.processoRota.prazo}"
                                                 id="prazo">
                                        <f:convertNumber integerOnly="true"/>
                                    </p:inputText>
                                    <p:message for="prazo" id="pra" showDetail="true"/>
                                    <h:outputText value="Tipo de Prazo:"/>
                                    <h:selectOneMenu title="Selecione o Tipo de Prazo"
                                                     value="#{protocoloControlador.tramitacaoProtocolo.processoRota.tipoPrazo}"
                                                     id="tipoPrazo">
                                        <f:selectItems value="#{protocoloControlador.tiposPrazo}"/>
                                    </h:selectOneMenu>
                                </h:panelGrid>

                                <p:commandButton value="Adicionar" icon="ui-icon-arrowthick-1-s"
                                                 update=":Formulario:tabViewProtocolo:panelRotas"
                                                 process=":Formulario:tabViewProtocolo:panelRotas @this"
                                                 styleClass="mtop05 mbot05"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 actionListener="#{protocoloControlador.novoTramiteProcesso()}"
                                                 id="btAdicionaTramiteProcesso"/>

                                <p:dataTable id="tabelaRotas"
                                             value="#{protocoloControlador.tramitacaoProtocolo.processo.rotas}"
                                             var="rota" dynamic="true">
                                    <p:columnGroup type="header">
                                        <p:row>
                                            <p:column headerText="Indice"></p:column>
                                            <p:column headerText="Destinatário"></p:column>
                                            <p:column headerText="Prazo"></p:column>
                                            <p:column headerText="Excluir"></p:column>
                                            <p:column headerText="Subir"></p:column>
                                            <p:column headerText="Descer"></p:column>
                                        </p:row>
                                    </p:columnGroup>
                                    <p:column>
                                        <h:outputText value="#{rota.indice}"/>
                                    </p:column>
                                    <p:column>
                                        <fc:codigo-descricao-hierarquia
                                            styleClass="default"
                                            dataMovimento="#{sistemaControlador.dataOperacao}"
                                            tipoHierarquia="ADMINISTRATIVA"
                                            unidadeOrganizacional="#{rota.unidadeOrganizacional}"/>
                                    </p:column>
                                    <p:column>
                                        <h:outputText value="#{rota.prazo} (#{rota.tipoPrazo.descricao})"/>
                                    </p:column>
                                    <p:column style="text-align: center; width: 5%">
                                        <p:commandButton icon="ui-icon-trash"
                                                         update=":Formulario:tabViewProtocolo:panelRotas"
                                                         actionListener="#{protocoloControlador.removerRota(rota)}"
                                                         id="btRemoveRotaProcesso"
                                                         disabled="#{protocoloControlador.podeExcluirRota(rota)}"/>
                                    </p:column>
                                    <p:column style="text-align: center; width: 5%">
                                        <p:commandButton title="Subir trâmite na tabela"
                                                         update=":Formulario:tabViewProtocolo:panelRotas"
                                                         actionListener="#{protocoloControlador.subirRota(rota)}"
                                                         disabled="#{protocoloControlador.disabledBotaoAlteraParaCima(rota)}"
                                                         icon="ui-icon-arrowthick-1-n" id="btSobeRota"/>
                                    </p:column>
                                    <p:column style="text-align: center; width: 5%">
                                        <p:commandButton title="Descer trâmite na tabela"
                                                         update=":Formulario:tabViewProtocolo:panelRotas"
                                                         actionListener="#{protocoloControlador.descerRota(rota)}"
                                                         disabled="#{protocoloControlador.disabledBotaoAlteraParaBaixo(rota)}"
                                                         icon="ui-icon-arrowthick-1-s" id="btDesceRota"/>
                                    </p:column>
                                </p:dataTable>
                            </p:outputPanel>
                        </p:tab>
                    </p:tabView>
                    <br/>
                    <h:panelGrid columns="2">
                        <h:outputText value="Finalizar este Trâmite: "/>
                        <p:selectOneRadio value="#{protocoloControlador.selecionado.status}" id="finalizarProcesso">
                            <f:selectItem itemValue="#{false}" itemLabel="Sim"/>
                            <f:selectItem itemValue="#{true}" itemLabel="Não"/>
                        </p:selectOneRadio>
                    </h:panelGrid>
                </p:panel>
                <br/>

                <div align="left">
                    <p:commandButton id="salvaTramite" title="Clique para Salvar"
                                     icon="ui-icon-disk"
                                     styleClass="operacao prioritario mrig05"
                                     value="Salvar"
                                     ajax="true"
                                     process=":Formulario"
                                     onclick="confirmSalvarSemImprimir.show()"/>

                    <fc:botaoTargetBlank
                        id="btLinkImprimirProcesso" label="Imprimir" icon="ui-icon-print"
                        actionListener="#{protocoloControlador.imprimeTramiteProcesso()}"
                        imprimeNoDialog="true" styleClass="operacao mrig05"/>

                    <p:commandButton title="Clique para Cancelar" styleClass="operacao" icon="ui-icon-cancel"
                                     value="Voltar" action="#{protocoloControlador.cancelar()}" immediate="true"
                                     id="btVoltarProcesso"/>
                </div>
            </p:outputPanel>

            <p:outputPanel id="panelProtocolo"
                           rendered="#{protocoloControlador.tramitacaoProtocolo.processo.protocolo eq true}">
                <p:panel id="panelTramites" header="Trâmite" styleClass="mbot05">

                    <h:panelGrid columns="2" cellspacing="2" cellpadding="2">
                        <h:outputText value="Protocolo:"/>
                        <h:panelGroup>
                            <h:outputText
                                styleClass="negrito"
                                value="#{protocoloControlador.tramitacaoProtocolo.processo.numero}/#{protocoloControlador.tramitacaoProtocolo.processo.ano}"
                                id="numeroProtocolo"/>

                            <h:outputText value="Situação:" styleClass="mlef20"/>
                            <h:outputText
                                value="#{protocoloControlador.tramitacaoProtocolo.processo.situacao.descricao}"
                                styleClass="negrito"
                                id="statusProtocolo"/>

                            <h:outputText value="Tipo Processo: " styleClass="mlef20"/>
                            <h:outputText
                                value="#{protocoloControlador.tramitacaoProtocolo.processo.tipoProcessoTramite.descricao}"
                                styleClass="negrito" id="tipoProcessoProtocolo"/>

                            <h:outputText value="Data do Processo: " styleClass="mlef20"/>
                            <h:outputText value="#{protocoloControlador.tramitacaoProtocolo.processo.dataRegistro}"
                                          styleClass="negrito"
                                          id="dataProtocolo">
                                <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                            </h:outputText>
                        </h:panelGroup>

                        <h:outputText value="Nº Protocolo Antigo: "/>
                        <h:outputText value="#{protocoloControlador.tramitacaoProtocolo.processo.numeroProcessoAntigo}"
                                      styleClass="negrito"
                                      id="numeroProtocoloAntigo"/>

                        <h:outputText value="Nº Protocolo SAJ:"/>
                        <h:outputText value="#{protocoloControlador.tramitacaoProtocolo.processo.numeroProcessoSAJ}"
                                      styleClass="negrito"
                                      id="numeroProtocoloSAJ"/>

                        <h:outputText value="Solicitante:"/>
                        <h:outputText value="#{protocoloControlador.tramitacaoProtocolo.processo.pessoa.nome}"
                                      styleClass="negrito"
                                      id="solicitanteProtocolo"/>

                        <h:outputText value="Assunto:"/>
                        <h:outputText value="#{protocoloControlador.tramitacaoProtocolo.processo.assunto}"
                                      styleClass="negrito"
                                      id="assuntoProtocolo"/>

                        <h:outputText value="Resumo/Conteúdo:"/>
                        <h:outputText value="#{protocoloControlador.tramitacaoProtocolo.processo.objetivo}"
                                      styleClass="negrito"
                                      autoResize="true" id="resumoProtocolo"/>

                        <h:outputText value="Observações:"/>
                        <h:outputText value="#{protocoloControlador.tramitacaoProtocolo.processo.observacoes}"
                                      styleClass="negrito"
                                      autoResize="true" id="observacaoProtocolo"/>

                        <h:outputText value="Confidencial:"/>
                        <h:outputText
                            value="#{protocoloControlador.tramitacaoProtocolo.processo.confidencial ? 'Sim' : 'Não'}"
                            styleClass="negrito"
                            id="confidencialProtocolo"/>

                        <h:outputText value="Trâmite finalizado:"/>
                        <h:outputText value="#{protocoloControlador.selecionado.status ? 'Não' : 'Sim'}"
                                      styleClass="negrito"
                                      id="situacaoTramite"/>
                    </h:panelGrid>

                    <p:tabView id="tabViewGeral" styleClass="mtop05">
                        <p:tab title="Geral" id="tabGeral">
                            <h:panelGrid columns="2">
                                <h:outputText value="Observações: "/>
                                <p:inputText
                                    value="#{protocoloControlador.tramitacaoProtocolo.observacaoTramiteSelecionado}"
                                    maxlength="70"
                                    size="70" id="observacoesProtocolo">
                                    <p:ajax process="@this" event="blur"/>
                                </p:inputText>

                                <fc:outputLabelObrigatorio value="Motivo: "/>
                                <p:inputText
                                    value="#{protocoloControlador.tramitacaoProtocolo.motivoTramiteSelecionado}"
                                    size="70"
                                    maxlength="255"
                                    id="motivoProtocolo">
                                    <p:ajax process="@this" event="blur"/>
                                </p:inputText>

                                <h:outputText value="Tipo de Encaminhamento: "/>
                                <p:selectOneMenu value="#{protocoloControlador.tramitacaoProtocolo.tipoEncaminhamento}"
                                                 style="width: 150px" id="tipoProcesso">
                                    <f:selectItems value="#{protocoloControlador.tipoProcessoTramites}"/>
                                    <p:ajax event="change"
                                            update="@form"
                                            process="@form"/>
                                </p:selectOneMenu>
                            </h:panelGrid>

                            <p:panel id="panelDestinoInterno" rendered="#{protocoloControlador.interno}"
                                     styleClass="mbot05">
                                <p:tree id="orcTree" value="#{protocoloControlador.tramitacaoProtocolo.rootOrc}"
                                        var="treeOrc"
                                        style="width: 100%;border: 0px " selectionMode="single"
                                        selection="#{protocoloControlador.tramitacaoProtocolo.selectedNode}">
                                    <p:treeNode expandedIcon="ui-icon-folder-open"
                                                collapsedIcon="ui-icon-folder-collapsed">
                                        <h:outputText
                                            style="#{protocoloControlador.styleNaoTemUsuario(treeOrc.subordinada)}"
                                            value="#{treeOrc.descricao}"/>
                                    </p:treeNode>
                                </p:tree>
                                <p:commandButton value="Selecionar Unidade Organizacional" icon="ui-icon-arrowthick-1-s"
                                                 actionListener="#{protocoloControlador.selecionarHierarquiaDaArvore()}"
                                                 update="gridHO"/>
                                <h:panelGrid columns="4" id="gridHO">
                                    <h:outputText value="Unidade de Destino: "/>
                                    <h:panelGroup>
                                        <p:autoComplete queryDelay="1000" widgetVar="hierarquiaOrgEnt"
                                                        id="hierarquiaOrgEnt"
                                                        title="Digite a descrição"
                                                        completeMethod="#{protocoloControlador.completaHierarquiaOrganizacionalAdministrativaComUsuarios}"
                                                        value="#{protocoloControlador.tramitacaoProtocolo.hierarquiaOrganizacional}"
                                                        var="unidDestino"
                                                        size="70"
                                                        maxResults="10"
                                                        itemLabel="#{unidDestino}"
                                                        itemValue="#{unidDestino.id}"
                                                        forceSelection="true"
                                                        converter="#{protocoloControlador.converterHierarquiaOrganizacional}">
                                            <p:ajax process="@this"
                                                    event="itemSelect"
                                                    onstart="aguarde.show()"
                                                    oncomplete="aguarde.hide()"
                                                    update="btnVisualizarGestores"/>
                                        </p:autoComplete>

                                        <p:commandButton icon="ui-icon-person"
                                                         id="btnVisualizarGestores"
                                                         disabled="#{protocoloControlador.tramitacaoProtocolo.hierarquiaOrganizacional eq null or protocoloControlador.tramitacaoProtocolo.hierarquiaOrganizacional.subordinada eq null}"
                                                         update="opVisualizarGestores"
                                                         styleClass="mlef05"
                                                         process="@this"
                                                         title="Clique para visualizar os usuários gestores da unidade destino"
                                                         oncomplete="wopVisualizarGestores.show()"/>

                                        <p:overlayPanel id="opVisualizarGestores"
                                                        for="btnVisualizarGestores"
                                                        widgetVar="wopVisualizarGestores"
                                                        showEffect="fade"
                                                        style="max-width: 500px"
                                                        showEvent="@none">
                                            <p:panel styleClass="semBorda">
                                                <f:facet name="header">
                                                    <h:outputText
                                                        value="Usuários Gestores do Protocolo da unidade selecionada"/>
                                                </f:facet>

                                                <p:scrollPanel mode="native" style="max-height: 200px"
                                                               styleClass="semBorda">
                                                    <h:panelGrid columns="1"
                                                                 width="100%"
                                                                 columnClasses="none"
                                                                 rowClasses="none, linha-selecionada">
                                                        <c:forEach
                                                            items="#{protocoloControlador.buscarUsuariosDaUnidadeOrganizacionalProtocolo()}"
                                                            var="usuario" varStatus="variavel">
                                                            <h:outputText value="#{usuario}"/>
                                                        </c:forEach>
                                                    </h:panelGrid>
                                                </p:scrollPanel>
                                            </p:panel>
                                        </p:overlayPanel>
                                    </h:panelGroup>

                                    <p:selectBooleanCheckbox
                                        value="#{protocoloControlador.tramitacaoProtocolo.encaminhamentoMultiplo}"
                                        id="encaminhamento">
                                        <p:ajax update="panelDestinoInterno"
                                                process="@this"
                                                listener="#{protocoloControlador.limparListaUnidadesDestino}"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"/>
                                    </p:selectBooleanCheckbox>
                                    <h:outputText value="Encaminhamento Múltiplo"/>
                                </h:panelGrid>

                                <p:panel id="panelMultiplos"
                                         rendered="#{protocoloControlador.tramitacaoProtocolo.encaminhamentoMultiplo}"
                                         styleClass="mtop05">

                                    <p:commandButton value="Adicionar"
                                                     icon="ui-icon-arrowthick-1-s"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     update="tabelaEncaminhamentosMultiplos panelMultiplos gridHO"
                                                     process="tabelaEncaminhamentosMultiplos panelMultiplos gridHO"
                                                     id="btAdicionaTramite"
                                                     actionListener="#{protocoloControlador.adicionarUnidadeOrganizacional()}"/>

                                    <p:dataTable id="tabelaEncaminhamentosMultiplos"
                                                 value="#{protocoloControlador.tramitacaoProtocolo.unidadesEncaminhamentosMultiplos}"
                                                 var="uni"
                                                 emptyMessage="Nenhum encaminhamento informado.">
                                        <f:facet name="header">
                                            <h:outputText value="Encaminhamento Múltiplo"/>
                                        </f:facet>
                                        <p:column headerText="Unidade de Destino">
                                            <fc:codigo-descricao-hierarquia
                                                styleClass="default"
                                                dataMovimento="#{protocoloControlador.tramitacaoProtocolo.processo.dataRegistro}"
                                                tipoHierarquia="ADMINISTRATIVA"
                                                unidadeOrganizacional="#{uni}"/>
                                        </p:column>
                                        <p:column headerText="Remover" style="width: 5%">
                                            <p:commandButton icon="ui-icon-trash" title="Remover"
                                                             update="tabelaEncaminhamentosMultiplos"
                                                             actionListener="#{protocoloControlador.removeUnidadeOrganizacional(uni)}"
                                                             id="btRemoveUni"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:panel>
                            </p:panel>

                            <p:outputPanel id="panelDestinoExterno" rendered="#{protocoloControlador.externo}"
                                           styleClass="mtop05">
                                <fc:outputLabelObrigatorio value="Destino Externo: "/>
                                <p:inputText value="#{protocoloControlador.tramitacaoProtocolo.destinoExterno}"
                                             size="70"
                                             style="margin-left: 40px"
                                             id="destinoExterno" maxlength="70" styleClass="maiusculo"/>
                            </p:outputPanel>
                        </p:tab>

                        <p:tab title="Documentos">
                            <p:panel header="Documentos">
                                <p:dataTable var="doc"
                                             value="#{protocoloControlador.tramitacaoProtocolo.documentosProcesso}"
                                             styleClass="mtop03"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>DOCUMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Nome do Documento">
                                        <h:outputText value="#{doc.documento}"/>
                                    </p:column>
                                    <p:column headerText="Nº  do Documento">
                                        <h:outputText value="#{doc.numeroDocumento}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>

                        <p:tab title="Anexos">
                            <p:fileUpload multiple="true" cancelLabel="Cancelar"
                                          sizeExceedMessage="Arquivo Maior que 10 MB." label="Selecione..."
                                          uploadLabel="Upload Arquivo" update="fileUpload2" sizeLimit="15728640"
                                          id="fileUpload"
                                          fileUploadListener="#{protocoloControlador.uploadArquivo}"/>
                            <br/>
                            <p:dataTable id="fileUpload2"
                                         value="#{protocoloControlador.tramitacaoProtocolo.processo.arquivos}"
                                         var="arq"
                                         styleClass="mtop03"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ANEXOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Nome" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="${arq.arquivo.nome}"/>
                                </p:column>
                                <p:column headerText="Tamanho" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="${arq.arquivo.tamanho}"/>
                                </p:column>
                                <p:column headerText="Download" styleClass="alinhamentoCentralizado" style="width: 5%">
                                    <a target="_blank"
                                       href='${facesContext.externalContext.requestContextPath}/arquivos/#{arq.arquivo.nome}?id=#{arq.arquivo.id}'>
                                        <h:outputText value="Download"/>
                                    </a>
                                </p:column>
                                <p:column headerText="Remover" style="width: 5%" styleClass="alinhamentoCentralizado">
                                    <p:commandButton icon="ui-icon-trash" id="btRemoveAnexo" title="Remover"
                                                     update="fileUpload2"
                                                     actionListener="#{protocoloControlador.removeFileUpload}">
                                        <f:attribute name="remove" id="remove" value="#{arq}"/>
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="Trâmite">
                            <p:dataTable id="tabelaVisualizaArquivos"
                                         value="#{protocoloControlador.tramitacaoProtocolo.processo.tramites}"
                                         var="t"
                                         styleClass="mtop03"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>TRÂMITES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Índice" style="width: 5%">
                                    <h:outputText value="#{t.indice}"/>
                                </p:column>
                                <p:column headerText="Destinatário" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{t.destinoExterno}"
                                                  rendered="#{t.destinoExterno ne null and !empty t.destinoExterno}"/>
                                    <fc:codigo-descricao-hierarquia
                                        dataMovimento="#{t.dataRegistro}"
                                        tipoHierarquia="ADMINISTRATIVA"
                                        styleClass="default"
                                        visivel="#{t.destinoExterno eq null or empty t.destinoExterno}"
                                        unidadeOrganizacional="#{t.unidadeOrganizacional}"/>
                                </p:column>
                                <p:column headerText="Data de Envio" style="width: 15%"
                                          styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{t.dataRegistro}">
                                        <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Data de Aceite" style="width: 15%"
                                          styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{t.dataAceite}">
                                        <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Incorporados" id="tabIncoporados">
                            <p:dataTable id="incorporados"
                                         value="#{protocoloControlador.tramitesIncorporados}"
                                         var="inc"
                                         styleClass="mtop03"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>INCORPORADOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Ações" styleClass="centralizado" style="width: 8%">
                                    <h:commandLink actionListener="#{protocoloControlador.visualizarProcesso(inc)}"
                                                   target="_blank">
                                        <p:commandButton icon="ui-icon-search"
                                                         styleClass="botao_azul icone_branco mlef05"
                                                         ajax="false"
                                                         title="Clique para visualizar o registro"/>
                                    </h:commandLink>
                                </p:column>
                                <p:column headerText="Trâmite" styleClass="alinhamentoCentralizado" style="width: 10%">
                                    <h:outputText
                                        value="#{inc.englobado.numero}/#{inc.englobado.ano}"/>
                                </p:column>
                                <p:column headerText="Motivo">
                                    <h:outputText value="#{inc.motivo}"/>
                                </p:column>
                                <p:column headerText="Usuário">
                                    <h:outputText value="#{inc.usuarioSistema.nome}"/>
                                </p:column>
                                <p:column headerText="Data" styleClass="alinhamentoCentralizado" style="width: 10%">
                                    <h:outputText value="#{inc.dataRegistro}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Status" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{inc.status.descricao}"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                    </p:tabView>
                </p:panel>

                <p:outputPanel styleClass="mbot10" style="width: 100%"
                               rendered="#{!protocoloControlador.selecionado.status and !protocoloControlador.tramitacaoProtocolo.movimentar}">
                    <div class="alinhamentoCentralizado alert alert-error">
                        <h:outputText
                            value="O Trâmite já foi encaminhado, não é possível alterar as informações desse trâmite."
                            styleClass="negrito"/>
                    </div>
                </p:outputPanel>

                <h:panelGrid columns="5">
                    <p:commandButton title="Clique para encaminhar"
                                     styleClass="operacao prioritario"
                                     icon="ui-icon-arrowreturnthick-1-n"
                                     value="Encaminhar"
                                     onclick="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{protocoloControlador.iniciarEncaminhamentoProtocolo()}"
                                     update=":formDialogEncaminhar"
                                     id="btEncaminharProtocolo"
                                     rendered="#{protocoloControlador.selecionado.status or protocoloControlador.tramitacaoProtocolo.movimentar}"/>

                    <p:commandButton title="Clique para arquivar"
                                     styleClass="operacao"
                                     icon="ui-icon-folder-collapsed"
                                     value="Arquivar"
                                     onclick="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{protocoloControlador.arquivar()}"
                                     update=":formDialogArquivar"
                                     id="btArquivarProtocolo"
                                     rendered="#{protocoloControlador.selecionado.status or protocoloControlador.tramitacaoProtocolo.movimentar}"/>

                    <p:commandButton title="Clique para encerrar"
                                     styleClass="operacao"
                                     icon="ui-icon-close"
                                     value="Encerrar" onclick="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{protocoloControlador.encerrar()}"
                                     update=":formDialogEncerrar"
                                     id="btEncerrarProtocolo"
                                     rendered="#{protocoloControlador.selecionado.status or protocoloControlador.tramitacaoProtocolo.movimentar}"/>

                    <p:commandButton title="Clique para incorporar"
                                     styleClass="operacao"
                                     icon="ui-icon-gear"
                                     value="Incorporar"
                                     onclick="aguarde.show();"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{protocoloControlador.incorporar()}"
                                     id="btIncorporar"
                                     rendered="#{protocoloControlador.selecionado.status or protocoloControlador.tramitacaoProtocolo.movimentar}"/>

                    <p:commandButton title="Clique para voltar" styleClass="operacao" icon="ui-icon-cancel"
                                     value="Voltar" immediate="true" id="btVoltarProtocolo"
                                     actionListener="#{protocoloControlador.cancelar()}"/>
                </h:panelGrid>
            </p:outputPanel>
        </h:form>

        <p:confirmDialog id="dialogConfirmEncaminhar"
                         header="Encaminhar Trâmite"
                         message="Tem certeza que deseja encaminhar este trâmite?"
                         style="position: fixed !important;"
                         severity="alert" widgetVar="confirmEncaminhar"
                         closable="false">

            <h:form id="formDialogEncaminhar">
                <div align="center">
                    <p:commandButton id="confirm"
                                     styleClass="operacao prioritario"
                                     icon="ui-icon-arrowreturnthick-1-n"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     value="Encaminhar"
                                     actionListener="#{protocoloControlador.encaminharTramiteProtocolo()}"/>

                    <p:commandButton id="decline"
                                     styleClass="operacao"
                                     icon="ui-icon-cancel"
                                     value="Fechar"
                                     oncomplete="confirmEncaminhar.hide()"
                                     immediate="true"/>
                </div>
            </h:form>
        </p:confirmDialog>

        <p:confirmDialog id="dialogConfirmEncerrar"
                         header="Encerrar Trâmite"
                         message="Tem certeza que deseja encerrar este trâmite?"
                         style="position: fixed !important;"
                         severity="alert" widgetVar="confirmEncerrar" closable="false">

            <h:form id="formDialogEncerrar">
                <div align="center">
                    <p:commandButton id="confirm3"
                                     styleClass="operacao prioritario mtop10"
                                     icon="ui-icon-close"
                                     value="Encerrar"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide(); confirmEncerrar.hide()"
                                     actionListener="#{protocoloControlador.encerrarProtocolo()}"/>

                    <p:commandButton id="decline3"
                                     styleClass="operacao mtop10 mlef05"
                                     icon="ui-icon-cancel"
                                     value="Fechar"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide(); confirmEncerrar.hide()"/>
                </div>
            </h:form>
        </p:confirmDialog>

        <p:confirmDialog id="dialogConfirmArquivar" header="Arquivar Trâmite"
                         message="Tem certeza que deseja arquivar este trâmite?"
                         style="position: fixed !important;"
                         severity="alert" widgetVar="confirmArquivar" closable="false">
            <h:form id="formDialogArquivar">
                <div align="center">
                    <p:commandButton id="confirm2"
                                     styleClass="operacao prioritario mtop10"
                                     icon="ui-icon-folder-collapsed"
                                     value="Arquivar"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide(); confirmArquivar.hide()"
                                     actionListener="#{protocoloControlador.arquivarProtocolo()}"/>

                    <p:commandButton id="decline2"
                                     styleClass="operacao mtop10 mlef05"
                                     icon="ui-icon-cancel"
                                     value="Fechar"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide();confirmArquivar.hide()"/>
                </div>
            </h:form>

        </p:confirmDialog>

        <p:confirmDialog id="dialogConfirmSalvarSemImprimir"
                         header="Salvar Trâmite"
                         message="Tem certeza que deseja salvar o trâmite?"
                         severity="alert"
                         style="position: fixed !important;"
                         widgetVar="confirmSalvarSemImprimir"
                         closable="false">

            <h:form id="formDialogSalvarSemImprimir" styleClass="centralizado">

                <p:commandButton id="confirm1" value="Salvar" icon="ui-icon-disk"
                                 styleClass="operacao prioritario"
                                 onstart="aguarde.show()"
                                 oncomplete="aguarde.hide(); confirmSalvarSemImprimir.hide()"
                                 ajax="false"
                                 actionListener="#{protocoloControlador.salvaTramite()}"/>
                <p:commandButton id="decline1" icon="ui-icon-cancel" styleClass="operacao" value="Cancelar"
                                 oncomplete="confirmSalvarSemImprimir.hide()" immediate="true"/>
            </h:form>
        </p:confirmDialog>

        <p:dialog id="dialogConfirmaEncaminhar" showHeader="false" widgetVar="imprimeGuia" position="center"
                  modal="true"
                  style="position: fixed !important;" closable="false">
            <div style="text-align: center">
                <div class="alinhamentoCentralizado alert alert-info">
                    <p style="font-size: 12px">
                        <h:outputText
                            value="O Protocolo foi encaminhado com sucesso, a guia foi gerada, para imprimi-la clique no botão imprimir guia."/>
                    </p>
                </div>
                <h:form>
                    <fc:botaoTargetBlank label="Imprimir Guia"
                                         imprimeNoDialog="true"
                                         actionListener="#{protocoloControlador.imprimirGuiaEncaminhamento(false)}"
                                         styleClass="operacao prioritario mtop10"
                                         id="btImprimirGuia"/>

                    <p:commandButton id="btVoltarDialogEnc"
                                     value="Voltar"
                                     icon="ui-icon-cancel"
                                     action="#{protocoloControlador.cancelar()}"
                                     styleClass="operacao mlef10 mtop10"/>
                </h:form>
            </div>
        </p:dialog>

        <p:dialog id="dialogConfirmEncaminharMultiplo"
                  showHeader="false"
                  widgetVar="imprimeGuiaMultiplo"
                  position="center"
                  modal="true"
                  resizable="false"
                  style="position: fixed !important;" closable="false">
            <div style="text-align: center">
                <div class="alinhamentoCentralizado alert alert-info">
                    <p style="font-size: 12px">
                        <h:outputText
                            value="O Protocolo foi encaminhado com sucesso, a guia foi gerada, para imprimi-la clique no botão imprimir guia."/>
                    </p>
                </div>
                <h:form id="FormDialogEncaminhar">
                    <fc:botaoTargetBlank label="Imprimir Guia"
                                         imprimeNoDialog="true"
                                         actionListener="#{protocoloControlador.imprimirGuiaEncaminhamento(true)}"
                                         styleClass="operacao prioritario mtop10"
                                         id="btImprimirGuiaMultiplo"/>

                    <p:commandButton id="btVoltarDialogEncMult"
                                     ajax="false"
                                     value="Voltar"
                                     icon="ui-icon-cancel"
                                     action="#{protocoloControlador.cancelar()}"
                                     styleClass="operacao mlef10 mtop10"/>
                </h:form>
            </div>
        </p:dialog>

        <p:dialog id="dialogConsultarTramites"
                  showHeader="true"
                  widgetVar="consultarTramites"
                  position="center"
                  width="1000"
                  height="500"
                  header="Incorporar Trâmites"
                  style="position: fixed !important;"
                  draggable="true"
                  modal="true"
                  dynamic="true"
                  closable="false">
            <h:form id="formConsultar">
                <p:scrollPanel mode="native"
                               id="panelBotoesSelecionaTramites"
                               style="max-height: 450px"
                               styleClass="semBorda">

                    <p:outputPanel id="outputTramites">
                        <h:panelGrid columns="2">
                            <fc:outputLabelObrigatorio value="Motivo da Incorporação: "/>
                            <h:panelGrid columns="2">
                                <p:inputTextarea id="motivo"
                                                 title="Informe o motivo da incorporação."
                                                 value="#{protocoloControlador.tramitacaoProtocolo.motivoIncorporacao}"
                                                 cols="70"
                                                 maxlength="250"
                                                 style="margin-left: -3px"
                                                 autoResize="true" counterTemplate="{0} Caracteres Restantes."
                                                 counter="counter"/>
                                <h:outputText id="counter"/>
                            </h:panelGrid>

                            <h:outputLabel value="Número:"/>
                            <h:panelGrid columns="3" style="margin-left: -3px">
                                <p:inputText value="#{protocoloControlador.filtrosTramitesParaIncorporar.filtro.numero}"
                                             size="12"
                                             maxlength="10"
                                             onkeyup="somenteNumeros(this)"/>
                                <h:outputLabel value="/"/>
                                <p:inputText value="#{protocoloControlador.filtrosTramitesParaIncorporar.filtro.ano}"
                                             size="4"
                                             onkeyup="somenteNumeros(this)"
                                             maxlength="5"/>
                            </h:panelGrid>

                            <h:outputLabel value="Autor/Requerente:"/>
                            <p:inputText
                                value="#{protocoloControlador.filtrosTramitesParaIncorporar.filtro.solicitante}"
                                size="70"
                                maxlength="70"/>
                        </h:panelGrid>

                        <p:commandButton value="Pesquisar"
                                         id="pesquisarProcesso"
                                         title="Clique para pesquisar"
                                         icon="ui-icon-search"
                                         onstart="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         update="tramitesParaIncorporar"
                                         process="@this :formConsultar:outputTramites"
                                         actionListener="#{protocoloControlador.pesquisarTramitesParaIncorporar}"
                                         styleClass="operacao prioritario mtop10"/>

                        <p:dataTable value="#{protocoloControlador.filtrosTramitesParaIncorporar.tramites}"
                                     var="t"
                                     rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada ' : ''}"
                                     rowIndexVar="rowIx"
                                     styleClass="mtop02"
                                     id="tramitesParaIncorporar"
                                     emptyMessage="Nenhum trâmite aceito.">

                            <f:facet name="header">
                                <adm:botoes-paginacao-protocolo
                                    filtroPesquisa="#{protocoloControlador.filtrosTramitesParaIncorporar}"
                                    buscarProximos="#{protocoloControlador.proximosTramitesParaIncorporar()}"
                                    update=":formConsultar:tramitesParaIncorporar"
                                    buscarUltimos="#{protocoloControlador.ultimosTramitesParaIncorporar()}"
                                    pesquisar="#{protocoloControlador.pesquisarTramitesParaIncorporar()}"
                                    buscarPrimeiros="#{protocoloControlador.buscarTramitesParaIncorporar()}"
                                    buscarAnteriores="#{protocoloControlador.anterioresTramitesParaIncorporar()}"
                                    alterouPagina="#{protocoloControlador.alterouPaginaTramitesParaIncorporar()}"/>
                            </f:facet>

                            <p:column style="width: 20px; text-align: center">
                                <p:commandButton id="botaoSelecionarTramite"
                                                 title="Click para selecionar este registro"
                                                 styleClass="vinteLarguraVinteAltura"
                                                 value=" "
                                                 process="@this"
                                                 update="tramitesParaIncorporar"
                                                 actionListener="#{protocoloControlador.adicionarTramitesParaIncorporar(t)}"
                                                 rendered="#{!protocoloControlador.hasTramiteParaIncorporar(t)}"
                                                 onclick="aguarde.show()"
                                                 oncomplete="aguarde.hide()"/>

                                <p:commandButton icon="ui-icon-check"
                                                 id="botaoDeselecionarTramite"
                                                 title="Click para retirar a seleção deste registro"
                                                 styleClass="vinteLarguraVinteAltura"
                                                 process="@this"
                                                 update="tramitesParaIncorporar"
                                                 actionListener="#{protocoloControlador.removerTramiteParaIncorporar(t)}"
                                                 rendered="#{protocoloControlador.hasTramiteParaIncorporar(t)}"
                                                 onclick="aguarde.show()"
                                                 oncomplete="aguarde.hide()"/>
                            </p:column>
                            <p:column headerText="Número" style="width: 12%; text-align: center">
                                <h:outputText value="#{t.processo.numero}/#{t.processo.ano}"/>
                            </p:column>
                            <p:column headerText="Data/Hora" style="width: 12%; text-align: center">
                                <h:outputText value="#{t.processo.dataRegistro}">
                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Unidade Organizacional" styleClass="alinhamentoEsquerda">
                                <fc:codigo-descricao-hierarquia
                                    dataMovimento="#{t.processo.dataRegistro}"
                                    tipoHierarquia="ADMINISTRATIVA"
                                    styleClass="default"
                                    visivel="#{t.unidadeOrganizacional ne null}"
                                    unidadeOrganizacional="#{t.unidadeOrganizacional}"/>
                            </p:column>
                            <p:column headerText="Autor/Requerente" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{t.processo.nomeAutorRequerente}"/>
                            </p:column>
                            <p:column headerText="Assunto">
                                <h:outputText value="#{t.processo.assunto}"/>
                            </p:column>
                            <p:column headerText="Situação" style="width: 7%; text-align: center">
                                <h:outputText value="#{t.processo.situacao.descricao}"/>
                            </p:column>
                            <p:column headerText="Data Aceite" style="width: 12%; text-align: center">
                                <h:outputText value="#{t.dataAceite}">
                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </p:outputPanel>
                </p:scrollPanel>
                <br/>

                <div style="text-align: center">
                    <p:commandButton value="Confirmar"
                                     icon="ui-icon-circle-plus"
                                     onclick="if (confirm('Atenção! Deseja realmente incorporar este trâmite?')){aguarde.show()} else {return false};"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{protocoloControlador.incorporarTramites}"
                                     styleClass="operacao mlef05"/>

                    <p:commandButton value="Cancelar"
                                     icon="ui-icon-cancel"
                                     oncomplete="aguarde.hide()"
                                     onclick="aguarde.show()"
                                     actionListener="#{protocoloControlador.limparFiltrosTramite}"
                                     styleClass="operacao mlef05"/>
                </div>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
