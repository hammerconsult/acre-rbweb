<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:deb="http://java.sun.com/jsf/composite/components/tributario/consulta-de-debitos"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <script type="text/javascript">
            function abrirExpandDataTable() {
                rowExpansion();
            };

            function rowExpansion() {
                console.log($('.togglerClass > div > span'));
                $('.togglerClass > div > span').click();
            }
        </script>
        <h:form id="Formulario">

            <p:panel header="Cadastro Econômico - C.M.C." id="panelCMC">
                <p:panel header="Dados da Pessoa" id="dadosPessoa">
                    <h:panelGrid columns="3">
                        <h:outputText value="Pessoa: "/>
                        <h:outputText value="#{cadastroEconomicoControlador.selecionado.pessoa}"
                                      styleClass="negrito"
                                      rendered="#{cadastroEconomicoControlador.isOperacaoEditar()}"/>

                        <p:autoComplete queryDelay="1000"
                                        rendered="#{cadastroEconomicoControlador.isOperacaoNovo()}"
                                        id="pessoaCmc"
                                        style="margin: 0 !important"
                                        title="Selecione o registro desejado"
                                        value="#{cadastroEconomicoControlador.selecionado.pessoa}"
                                        completeMethod="#{cadastroEconomicoControlador.completaPessoa}"
                                        var="pessoa" size="70" dropdown="true"
                                        itemLabel="#{pessoa}"
                                        itemValue="#{pessoa.id}"
                                        converter="#{cadastroEconomicoControlador.converterPessoa}"
                                        maxResults="10">
                            <p:ajax event="itemSelect" process="@this" update="@form"
                                    onstart="aguarde.show()" oncomplete="aguarde.hide()"
                                    listener="#{cadastroEconomicoControlador.atualizarDadosPessoa()}"/>
                        </p:autoComplete>

                        <p:outputPanel id="botoesPessoa">
                            <p:commandButton icon="ui-icon-pencil"
                                             process="@form"
                                             rendered="#{cadastroEconomicoControlador.isOperacaoNovo()}"
                                             disabled="#{cadastroEconomicoControlador.selecionado.id ne null or cadastroEconomicoControlador.selecionado.pessoa eq null}"
                                             styleClass="mlef02 mrig05"
                                             onclick="aguarde.show();" oncomplete="aguarde.hide();"
                                             actionListener="#{cadastroEconomicoControlador.editaPessoa(cadastroEconomicoControlador.selecionado.pessoa, cadastroEconomicoControlador.tipoPessoaCadastro)}"/>

                            <p:commandButton icon="ui-icon-plus" id="novoBtnPessoa"
                                             rendered="#{cadastroEconomicoControlador.isOperacaoNovo()}"
                                             disabled="#{cadastroEconomicoControlador.selecionado.id ne null}"/>
                            <p:overlayPanel id="novoPessoaPanel" for="novoBtnPessoa"
                                            hideEffect="fade">
                                <h:panelGrid>
                                    <p:commandButton icon="ui-icon-plus"
                                                     process="@form"
                                                     value="PF"
                                                     onclick="aguarde.show();"
                                                     oncomplete="aguarde.hide();"
                                                     actionListener="#{cadastroEconomicoControlador.novoPessoaFisica(cadastroEconomicoControlador.tipoPessoaCadastro)}"/>
                                    <p:commandButton icon="ui-icon-plus"
                                                     process="@form"
                                                     value="PJ"
                                                     onclick="aguarde.show();"
                                                     oncomplete="aguarde.hide();"
                                                     actionListener="#{cadastroEconomicoControlador.novoPessoaJuridica(cadastroEconomicoControlador.tipoPessoaCadastro)}"/>
                                </h:panelGrid>
                            </p:overlayPanel>

                            <deb:botao-consulta-debitos
                                idObjeto="#{cadastroEconomicoControlador.selecionado.pessoa.id}"
                                rendered="#{cadastroEconomicoControlador.selecionado.pessoa.id ne null}"
                                tipoCadastro="#{cadastroEconomicoControlador.tipoCadastroContribuinte}"/>

                        </p:outputPanel>
                    </h:panelGrid>
                    <br/>
                    <p:panel id="panelDadosPessoa" visible="#{cadastroEconomicoControlador.selecionado.pessoa ne null}">
                        <p:outputPanel id="panelDadosPessoaJuridica"
                                       rendered="#{cadastroEconomicoControlador.juridica}">
                            <h:panelGrid columns="5" style="width: 90%">
                                <h:outputText value="CNPJ"/>
                                <h:outputText value="Razão Social"/>
                                <h:outputText value="Nome Reduzido"/>
                                <h:outputText value="Nome Fantasia"/>
                                <h:outputText value="Inscrição Estadual"/>

                                <h:outputText styleClass="negrito"
                                              value="#{cadastroEconomicoControlador.selecionado.pessoa.cpf_Cnpj}"/>
                                <h:outputText styleClass="negrito"
                                              value="#{cadastroEconomicoControlador.selecionado.pessoa.nome}"/>
                                <h:outputText styleClass="negrito"
                                              value="#{cadastroEconomicoControlador.pessoaJuridica.nomeReduzido}"/>

                                <h:outputText styleClass="negrito"
                                              value="#{cadastroEconomicoControlador.pessoaJuridica.nomeFantasia}"/>
                                <h:outputText styleClass="negrito"
                                              value="#{cadastroEconomicoControlador.pessoaJuridica.inscricaoEstadual}"/>
                            </h:panelGrid>

                            <h:panelGrid columns="7" style="width: 90%"
                                         rendered="#{cadastroEconomicoControlador.juridica}">
                                <h:outputText value="Nire: "/>
                                <h:outputText value="Descrição do Objeto: "/>
                                <h:outputText value="Capital Social: "/>
                                <h:outputText value="Início da Atividade: "/>
                                <h:outputText value="Capital Integralizado: "/>
                                <h:outputText value="Valor Quota: "/>
                                <h:outputText value="Porte: "/>

                                <h:outputText value="#{cadastroEconomicoControlador.pessoaJuridica.nire}"
                                              styleClass="negrito"/>

                                <h:outputText value="#{cadastroEconomicoControlador.pessoaJuridica.descricaoObjeto}"
                                              styleClass="negrito"/>

                                <h:outputText value="#{cadastroEconomicoControlador.pessoaJuridica.capitalSocial}"
                                              styleClass="negrito">
                                    <f:convertNumber pattern="###,###,##0.00"/>
                                </h:outputText>

                                <h:outputText value="#{cadastroEconomicoControlador.pessoaJuridica.inicioAtividade}"
                                              styleClass="negrito">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>

                                <h:outputText
                                    value="#{cadastroEconomicoControlador.pessoaJuridica.capitalIntegralizado}"
                                    styleClass="negrito">
                                    <f:convertNumber pattern="###,###,##0.00"/>
                                </h:outputText>

                                <h:outputText value="#{cadastroEconomicoControlador.pessoaJuridica.valorCota}"
                                              styleClass="negrito">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>

                                <h:outputText value="#{cadastroEconomicoControlador.pessoaJuridica.porte.descricao}"
                                              styleClass="negrito"/>
                            </h:panelGrid>
                        </p:outputPanel>
                        <br/>
                        <fc:naturezaJuridicaTipoAutonomo
                            naturezaJuridica="#{cadastroEconomicoControlador.selecionado.naturezaJuridica}"
                            pessoa="#{cadastroEconomicoControlador.selecionado.pessoa}"
                            tipoAutonomo="#{cadastroEconomicoControlador.selecionado.tipoAutonomo}"
                            somenteAutonomo="false"
                            listener="#{cadastroEconomicoControlador.atualizarPainelAutonomo()}"
                            disabled="#{cadastroEconomicoControlador.cadastroDerivadoRBTrans()}"/>
                        <br/>

                        <p:panel styleClass="mbot10">
                            <h:outputText value="Classificação da Atividade: "/>
                            <h:selectOneMenu title="Selecione a Classificação da Atividade"
                                             value="#{cadastroEconomicoControlador.selecionado.classificacaoAtividade}"
                                             id="classificacaoatividade">
                                <f:selectItems value="#{cadastroEconomicoControlador.classificacaoAtividade}"/>
                                <p:ajax event="change" update=":Formulario:tabDadosCadastro:camposEnquadramento"
                                        process="@this"
                                        listener="#{cadastroEconomicoControlador.mudouClassificacaoAtividade()}"
                                        onstart="aguarde.show()" oncomplete="aguarde.hide()"/>
                            </h:selectOneMenu>
                        </p:panel>

                        <p:panel id="panelAutonomo" style="border: none;"
                                 visible="#{cadastroEconomicoControlador.habilitaPanelTipoAutonomo}"
                                 rendered="#{cadastroEconomicoControlador.selecionado.tipoAutonomo ne null and cadastroEconomicoControlador.selecionado.tipoAutonomo.necessitaPlacas}">
                            <h:panelGrid columns="2">
                                <h:outputText value="Nova Placa: "
                                              rendered="#{cadastroEconomicoControlador.selecionado.tipoAutonomo ne null and cadastroEconomicoControlador.selecionado.tipoAutonomo.necessitaPlacas}"/>
                                <h:panelGroup>
                                    <p:inputMask mask="SSS0A99"
                                                 value="#{cadastroEconomicoControlador.placa.placa}"
                                                 styleClass="maiusculo"
                                                 rendered="#{cadastroEconomicoControlador.selecionado.tipoAutonomo ne null
                                                 and cadastroEconomicoControlador.selecionado.tipoAutonomo.necessitaPlacas}">
                                        <p:ajax process="@this" event="blur"/>
                                    </p:inputMask>

                                    <p:spacer width="5"/>
                                    <p:commandButton icon="ui-icon-arrowthick-1-s"
                                                     actionListener="#{cadastroEconomicoControlador.adicionarPlaca()}"
                                                     update="listaPlacas"
                                                     rendered="#{cadastroEconomicoControlador.selecionado.tipoAutonomo ne null and cadastroEconomicoControlador.selecionado.tipoAutonomo.necessitaPlacas}"/>
                                </h:panelGroup>

                                <h:outputText value="Placas: "
                                              rendered="#{cadastroEconomicoControlador.selecionado.tipoAutonomo ne null and cadastroEconomicoControlador.selecionado.tipoAutonomo.necessitaPlacas}"/>

                                <h:panelGroup id="listaPlacas"
                                              rendered="#{cadastroEconomicoControlador.selecionado.tipoAutonomo ne null and cadastroEconomicoControlador.selecionado.tipoAutonomo.necessitaPlacas}">
                                    <ui:repeat value="#{cadastroEconomicoControlador.selecionado.placas}" var="placa">
                                        <h:outputText value="#{placa.placa}" styleClass="azulnegrito"/>
                                        <p:spacer width="5"/>
                                        <p:commandButton styleClass="botao-transparente" icon="ui-icon-trash"
                                                         actionListener="#{cadastroEconomicoControlador.removerPlaca(placa)}"
                                                         update=":Formulario:listaPlacas"
                                                         rendered="#{cadastroEconomicoControlador.selecionado.tipoAutonomo ne null and cadastroEconomicoControlador.selecionado.tipoAutonomo.necessitaPlacas}"/>
                                        <br/>
                                    </ui:repeat>
                                </h:panelGroup>
                            </h:panelGrid>
                        </p:panel>
                        <p:outputPanel
                            rendered="#{cadastroEconomicoControlador.telefones ne null and cadastroEconomicoControlador.telefones.size() gt 0}">
                            <p:dataTable var="telefone"
                                         emptyMessage="Nenhum registro encontrado"
                                         id="tabelaTelefones" value="#{cadastroEconomicoControlador.telefones}">
                                <f:facet name="header">
                                    <h:outputText value="Telefone(s) da Pessoa"/>
                                </f:facet>
                                <p:column headerText="Telefone" style="width: 50%">
                                    <h:outputText value="#{telefone.telefone}"/>
                                </p:column>
                                <p:column headerText="Tipo" style="width: 50%">
                                    <h:outputText value="#{telefone.tipoFone}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:panel>
                </p:panel>

                <br/>
                <p:outputPanel rendered="#{!cadastroEconomicoControlador.apresentaDadosParaRBTrans}">
                    <p:tabView id="tabDadosCadastro" activeIndex="#{cadastroEconomicoControlador.activeIndex}">
                        <p:ajax event="tabChange" listener="#{cadastroEconomicoControlador.changeTab}"
                                process="tabDadosCadastro"/>
                        <p:tab title="Dados do Cadastro" id="tabDados">
                            <p:panel header="Dados do Cadastro">
                                <h:panelGrid columns="2" id="panel">
                                    <h:panelGrid columns="2">
                                        <h:outputText value="C.M.C.: "
                                                      rendered="#{cadastroEconomicoControlador.selecionado.id ne null}"/>
                                        <h:panelGrid columns="2"
                                                     rendered="#{cadastroEconomicoControlador.selecionado.id ne null}"
                                                     cellpadding="0" cellspacing="0">
                                            <p:inputText
                                                value="#{cadastroEconomicoControlador.selecionado.inscricaoCadastralSemDigito}"
                                                rendered="#{cadastroEconomicoControlador.isPessoaFisica()}"
                                                disabled="true" size="10">
                                            </p:inputText>
                                            <p:inputText disabled="true"
                                                         rendered="#{cadastroEconomicoControlador.isPessoaFisica()}"
                                                         value="#{cadastroEconomicoControlador.selecionado.digitoVerificadorInscricao}"
                                                         size="1"/>
                                            <p:inputText disabled="true"
                                                         rendered="#{!cadastroEconomicoControlador.isPessoaFisica()}"
                                                         value="#{cadastroEconomicoControlador.selecionado.inscricaoCadastral}"/>
                                        </h:panelGrid>

                                        <h:outputText value="Data de Cadastro na Prefeitura: "/>
                                        <p:calendar navigator="true"
                                                    value="#{cadastroEconomicoControlador.selecionado.dataCadastro}"
                                                    pattern="dd/MM/yyyy" id="dataCadastro"
                                                    disabled="#{!cadastroEconomicoControlador.cadastroDeOficio}"/>

                                        <h:outputText value="Data de Abertura: "/>
                                        <p:calendar pattern="dd/MM/yyyy"
                                                    value="#{cadastroEconomicoControlador.selecionado.abertura}"
                                                    id="Abertura" showOn="button"
                                                    onkeyup="mascara(this, mdata)"
                                                    title="Selecione a Data de Abertura"/>

                                        <h:outputText value="Total da Área de Utilização (m²): "/>
                                        <h:outputText styleClass="negrito" id="areaUtilizacaoTotal"
                                                      value="#{cadastroEconomicoControlador.selecionado.areaUtilizacao}">
                                            <f:convertNumber pattern="###,##0.00"/>
                                        </h:outputText>

                                        <h:outputText value="Data do Alvará de Localização : "/>
                                        <p:inputText id="dataAlvaraLoc"
                                                     value="#{cadastroEconomicoControlador.selecionado.dataAlvaraLocalizacao}"
                                                     disabled="true"/>

                                        <h:outputText value="Data do Alvará de Funcionamento: "/>
                                        <p:inputText id="dataAlvaraFun"
                                                     value="#{cadastroEconomicoControlador.selecionado.dataAlvaraFuncionamento}"
                                                     disabled="true"/>
                                    </h:panelGrid>
                                </h:panelGrid>

                                <fc:atributosGenericos atributos="#{cadastroEconomicoControlador.selecionado.atributos}"
                                                       classe="#{sistemaControlador.classeCadastroEconomico}"/>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Enquadramento Fiscal">
                            <p:panel header="Enquadramento Fiscal" id="panelEnquadramento">
                                <h:panelGrid columns="2" id="camposEnquadramento"
                                             rendered="#{cadastroEconomicoControlador.hasPermissaoAlterar() and cadastroEconomicoControlador.podeEditarOuExcluirEnquadramento()}">
                                    <h:outputText value="Porte:"/>
                                    <h:selectOneMenu value="#{cadastroEconomicoControlador.enquadramentoFiscal.porte}"
                                                     styleClass="width200">
                                        <f:selectItems value="#{cadastroEconomicoControlador.tipoPorte}"/>
                                    </h:selectOneMenu>

                                    <fc:outputLabelObrigatorio value="Tipo de Contribuinte:"/>
                                    <h:selectOneMenu
                                        value="#{cadastroEconomicoControlador.enquadramentoFiscal.tipoContribuinte}"
                                        styleClass="width200">
                                        <f:selectItems value="#{cadastroEconomicoControlador.tipoContribuinte}"/>
                                    </h:selectOneMenu>

                                    <fc:outputLabelObrigatorio value="Regime Tributário:"/>
                                    <h:selectOneMenu
                                        value="#{cadastroEconomicoControlador.enquadramentoFiscal.regimeTributario}"
                                        styleClass="width200">
                                        <f:selectItems value="#{cadastroEconomicoControlador.regimesTributario}"/>
                                        <p:ajax event="change" update="camposEnquadramento" process="@form"
                                                onstart="aguarde.show()" oncomplete="aguarde.hide()"/>
                                    </h:selectOneMenu>

                                    <fc:outputLabelObrigatorio value="Regime Especial Tributação:"/>
                                    <h:selectOneMenu
                                        value="#{cadastroEconomicoControlador.enquadramentoFiscal.regimeEspecialTributacao}"
                                        styleClass="width200">
                                        <f:selectItems
                                            value="#{cadastroEconomicoControlador.regimesEspeciaisTributacao}"/>
                                        <p:ajax event="change" update="camposEnquadramento" process="@form"
                                                onstart="aguarde.show()" oncomplete="aguarde.hide()"/>
                                    </h:selectOneMenu>

                                    <fc:outputLabelObrigatorio value="Banco:"
                                                               rendered="#{cadastroEconomicoControlador.enquadramentoFiscal.instituicaoFinanceira}"/>
                                    <h:panelGroup
                                        rendered="#{cadastroEconomicoControlador.enquadramentoFiscal.instituicaoFinanceira}">
                                        <p:autoComplete queryDelay="1000"
                                                        value="#{cadastroEconomicoControlador.enquadramentoFiscal.banco}"
                                                        rendered="#{cadastroEconomicoControlador.enquadramentoFiscal.instituicaoFinanceira}"
                                                        converter="#{bancoControlador.converterGenerico}"
                                                        completeMethod="#{bancoControlador.completarEstaEntidade}"
                                                        var="banco"
                                                        itemLabel="#{banco}"
                                                        itemValue="#{banco.id}"
                                                        forceSelection="true"
                                                        size="70"
                                                        title="Selecione o Banco"
                                                        maxResults="10"/>
                                        <p:button icon="ui-icon-eye"
                                                  styleClass="mlef03"
                                                  title="Clique aqui para ir para tela de plano geral de contas comentado"
                                                  href="#{planoGeralContasComentadoControlador.caminhoPadrao}listar"/>
                                    </h:panelGroup>

                                    <fc:outputLabelObrigatorio value="Versão DES-IF:"
                                                               rendered="#{cadastroEconomicoControlador.enquadramentoFiscal.instituicaoFinanceira}"/>
                                    <h:selectOneMenu
                                        rendered="#{cadastroEconomicoControlador.enquadramentoFiscal.instituicaoFinanceira}"
                                        value="#{cadastroEconomicoControlador.enquadramentoFiscal.versaoDesif}"
                                        styleClass="width200">
                                        <f:selectItems value="#{cadastroEconomicoControlador.versoesDesif}"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="Tipo de ISSQN:"/>
                                    <h:panelGroup>
                                        <h:selectOneMenu
                                            value="#{cadastroEconomicoControlador.enquadramentoFiscal.tipoIssqn}"
                                            styleClass="width200">
                                            <f:selectItems value="#{cadastroEconomicoControlador.tipoIss}"/>
                                            <p:ajax update="issestimado tipoPeriodoiss" event="change"/>
                                        </h:selectOneMenu>
                                        <fc:botaoInformacao
                                            detalhes="Informe um regime tributário para ver os tipos de ISSQN."
                                            styleClassBotao="vinteLarguraVinteAltura botao_azul icone_branco"
                                            id="info"/>
                                    </h:panelGroup>

                                    <h:outputText value="Tipo ISSQN Estimado:" rendered="false"/>
                                    <h:selectOneMenu
                                        rendered="false"
                                        value="#{cadastroEconomicoControlador.enquadramentoFiscal.tipoPeriodoValorEstimado}"
                                        id="tipoPeriodoiss" styleClass="width200"
                                        disabled="#{!cadastroEconomicoControlador.tipoEstimado}">
                                        <f:selectItems value="#{cadastroEconomicoControlador.tipoPeriodosIss}"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="Valor ISSQN Estimado:" rendered="false"/>
                                    <p:inputText id="issestimado"
                                                 rendered="false"
                                                 value="#{cadastroEconomicoControlador.enquadramentoFiscal.issEstimado}"
                                                 disabled="#{!cadastroEconomicoControlador.tipoEstimado}">
                                        <f:convertNumber pattern="#,##0.0000"/>
                                    </p:inputText>

                                    <h:outputText value="Substituto Tributário:"/>
                                    <h:selectOneMenu title="Substituto Tributário"
                                                     value="#{cadastroEconomicoControlador.enquadramentoFiscal.substitutoTributario}">
                                        <f:selectItem itemLabel="Sim" itemValue="true"/>
                                        <f:selectItem itemLabel="Não" itemValue="false"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="Emitente de NFS-e:"/>
                                    <h:selectOneMenu
                                        value="#{cadastroEconomicoControlador.enquadramentoFiscal.tipoNotaFiscalServico}"
                                        styleClass="width200" id="notaFiscal">
                                        <p:ajax process="@form" update="@form" event="change"/>
                                        <f:selectItems value="#{cadastroEconomicoControlador.tipoNotaFiscal}"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="Escritório de Contabilidade:"/>
                                    <p:autoComplete queryDelay="1000" id="escritorio"
                                                    title="Digite o Escritório de Contabilidade"
                                                    value="#{cadastroEconomicoControlador.enquadramentoFiscal.escritorioContabil}"
                                                    completeMethod="#{cadastroEconomicoControlador.completarEscritoriosContabeis}"
                                                    var="escritorio" size="70"
                                                    itemLabel="#{escritorio}"
                                                    itemValue="#{escritorio}"
                                                    forceSelection="true"
                                                    converter="#{cadastroEconomicoControlador.converterEscritorioContabil}"
                                                    maxResults="10"/>
                                </h:panelGrid>

                                <p:commandButton id="btNovoEnquadramento" value="Adicionar"
                                                 icon="ui-icon-circle-arrow-s"
                                                 rendered="#{!cadastroEconomicoControlador.editandoEnquadramento and
                                                 cadastroEconomicoControlador.hasPermissaoAlterar() and cadastroEconomicoControlador.podeEditarOuExcluirEnquadramento()}"
                                                 actionListener="#{cadastroEconomicoControlador.adicionarEnquadramento}"
                                                 onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                 styleClass="operacao" update="panelEnquadramento tabDadosCadastro"
                                                 process="panelEnquadramento tabDadosCadastro"/>

                                <p:commandButton id="btSalvarEnquadramento" value="Confirmar" icon="ui-icon-check"
                                                 rendered="#{cadastroEconomicoControlador.editandoEnquadramento and cadastroEconomicoControlador.hasPermissaoAlterar()}"
                                                 actionListener="#{cadastroEconomicoControlador.salvarEdicaoEnquadramento}"
                                                 onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                 styleClass="operacao" update="panelEnquadramento tabDadosCadastro"
                                                 process="panelEnquadramento tabDadosCadastro"/>

                                <p:commandButton id="btCancelarEnquadramento" value="Cancelar" icon="ui-icon-cancel"
                                                 rendered="#{cadastroEconomicoControlador.editandoEnquadramento and cadastroEconomicoControlador.hasPermissaoAlterar()}"
                                                 actionListener="#{cadastroEconomicoControlador.cancelarEdicaoEnquadramento}"
                                                 onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                 styleClass="operacao" update="panelEnquadramento tabDadosCadastro"
                                                 process="panelEnquadramento tabDadosCadastro"/>

                                <p:dataTable var="enquadramento" id="tabelaEnquadramentos" styleClass="mtop05"
                                             widgetVar="tableEnquadramentos"
                                             rowIndexVar="idx"
                                             value="#{cadastroEconomicoControlador.selecionado.enquadramentos}"
                                             emptyMessage="Nenhum enquandramento fiscal informado.">
                                    <f:facet name="header">
                                        <h:outputText value="Enquadramentos Fiscais"/>
                                    </f:facet>
                                    <p:column style="width:4%" styleClass="togglerClass">
                                        <p:rowToggler/>
                                    </p:column>
                                    <p:column headerText="Início de Vigência" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{enquadramento.inicioVigencia}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Final de Vigência" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{enquadramento.fimVigencia}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Emitente de NFS-e"
                                              rendered="#{cadastroEconomicoControlador.pessoaFisica}"
                                              styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{enquadramento.tipoNotaFiscalServico.descricao}"
                                                      rendered="#{cadastroEconomicoControlador.pessoaFisica and enquadramento.fimVigencia ne null}"
                                                      styleClass="negrito"/>
                                        <h:selectOneMenu
                                            value="#{enquadramento.tipoNotaFiscalServico}"
                                            rendered="#{cadastroEconomicoControlador.pessoaFisica and enquadramento.fimVigencia eq null}"
                                            styleClass="width200" id="notaFiscalLista">
                                            <f:selectItems
                                                value="#{cadastroEconomicoControlador.tipoNotaFiscal}"/>
                                        </h:selectOneMenu>
                                    </p:column>
                                    <p:column headerText="Ações" style="width: 10%; text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         rendered="#{enquadramento.fimVigencia eq null and cadastroEconomicoControlador.hasPermissaoAlterar()}"
                                                         title="Pressione este botão para editar o registro"
                                                         disabled="#{!cadastroEconomicoControlador.podeEditarOuExcluirEnquadramento()}"
                                                         actionListener="#{cadastroEconomicoControlador.editarEnquadramento(enquadramento)}"
                                                         onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                         update=":Formulario:tabDadosCadastro:panelEnquadramento"
                                                         process=":Formulario:tabDadosCadastro:panelEnquadramento"/>

                                        <p:commandButton icon="ui-icon-trash"
                                                         title="Pressione este botão para remover o registro"
                                                         disabled="#{!cadastroEconomicoControlador.podeEditarOuExcluirEnquadramento()}"
                                                         rendered="#{cadastroEconomicoControlador.hasPermissaoAlterar()}"
                                                         actionListener="#{cadastroEconomicoControlador.removerEnquadramento(enquadramento)}"
                                                         update="tabelaEnquadramentos" process="@this"/>
                                    </p:column>
                                    <p:rowExpansion>
                                        <p:panel style="margin-left: 4%">
                                            <h:panelGrid columns="2" style="width: 35%">
                                                <h:outputText value="Porte:"/>
                                                <h:outputText value="#{enquadramento.porte.descricao}"
                                                              styleClass="negrito"/>

                                                <h:outputText value="Tipo de Contribuinte:"/>
                                                <h:outputText value="#{enquadramento.tipoContribuinte.descricao}"
                                                              styleClass="negrito"/>

                                                <h:outputText value="Regime Tributário:"/>
                                                <h:outputText value="#{enquadramento.regimeTributario.descricao}"
                                                              styleClass="negrito"/>

                                                <h:outputText value="Regime Especial Tributação:"/>
                                                <h:outputText
                                                    value="#{enquadramento.regimeEspecialTributacao.descricao}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Banco:"
                                                              rendered="#{enquadramento.instituicaoFinanceira}"/>
                                                <h:outputText
                                                    value="#{enquadramento.banco}"
                                                    rendered="#{enquadramento.instituicaoFinanceira}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Versão DES-IF:"
                                                              rendered="#{enquadramento.instituicaoFinanceira}"/>
                                                <h:outputText
                                                    value="#{enquadramento.versaoDesif.descricao}"
                                                    rendered="#{enquadramento.instituicaoFinanceira}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Tipo de ISSQN:"/>
                                                <h:outputText value="#{enquadramento.tipoIssqn.descricao}"
                                                              styleClass="negrito"/>

                                                <h:outputText value="Tipo ISSQN Estimado:"/>
                                                <h:outputText
                                                    value="#{enquadramento.tipoPeriodoValorEstimado.descricao}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Valor ISSQN Estimado"/>
                                                <h:outputText value="#{enquadramento.issEstimado}" styleClass="negrito">
                                                    <f:convertNumber pattern="###,##0.00"/>
                                                </h:outputText>

                                                <h:outputText value="Substituto Tributário:"/>
                                                <h:outputText
                                                    value="#{enquadramento.substitutoTributario ? 'Sim' : 'Não'}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Emitente de NFS-e:"/>
                                                <h:outputText value="#{enquadramento.tipoNotaFiscalServico.descricao}"
                                                              styleClass="negrito"/>

                                                <h:outputText value="Escritório de Contabilidade:"/>
                                                <h:outputText value="#{enquadramento.escritorioContabil}"
                                                              styleClass="negrito"/>
                                            </h:panelGrid>
                                        </p:panel>
                                    </p:rowExpansion>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>


                        <p:tab title="Enquadramento Ambiental">
                            <p:panel header="Enquadramento Ambiental" id="panelEnquadramentoAmb">
                                <h:panelGrid columns="2" id="camposEnquadramentoAmb">

                                    <h:outputText value="Área construída (m²): "/>
                                    <p:inputText id="areaConstruida"
                                                 value="#{cadastroEconomicoControlador.enquadramentoAmbiental.areaConstruida}"
                                                 onkeypress="mascaraPonto(this);"
                                                 converter="converterBigDecimal"
                                                 size="10">
                                        <f:convertNumber pattern="#,##0.00"/>
                                    </p:inputText>

                                    <h:outputText value="Capacidade Instalada (litros): "/>
                                    <p:inputText id="capacidadeInstalada"
                                                 value="#{cadastroEconomicoControlador.enquadramentoAmbiental.capacidadeInstalada}"
                                                 onkeypress="mascaraPonto(this);"
                                                 converter="converterBigDecimal"
                                                 size="15">
                                        <f:convertNumber pattern="#,##0.00"/>
                                    </p:inputText>

                                    <h:outputText value="Matéria prima: "/>
                                    <h:selectOneMenu id="materiaPrimaAmb"
                                                     value="#{cadastroEconomicoControlador.enquadramentoAmbiental.tipoMateriaPrima}"
                                                     style="min-width: 150px !important;">
                                        <f:selectItems value="#{cadastroEconomicoControlador.tiposMateriaPrima}"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="Localização: "/>
                                    <h:selectOneMenu id="localizacaoAmb"
                                                     value="#{cadastroEconomicoControlador.enquadramentoAmbiental.tipoLocalizacao}"
                                                     style="min-width: 150px !important;">
                                        <f:selectItems value="#{cadastroEconomicoControlador.tiposLocalizacao}"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="Geração de Ruídos e Vibração: "/>
                                    <h:selectOneMenu id="geraRuidos"
                                                     value="#{cadastroEconomicoControlador.enquadramentoAmbiental.geracaoRuidosEVibracao}">
                                        <f:selectItems value="#{cadastroEconomicoControlador.buscarTiposSimNao()}"/>
                                    </h:selectOneMenu>

                                    <h:outputText
                                        value="Área destinada para guardar as caçambas é coberta e impermeável: "/>
                                    <h:selectOneMenu id="cobertaImpermeavel"
                                                     value="#{cadastroEconomicoControlador.enquadramentoAmbiental.cobertaImpermeavel}">
                                        <f:selectItems value="#{cadastroEconomicoControlador.buscarTiposSimNao()}"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="Espécies protegidas por lei: "/>
                                    <h:selectOneMenu id="especProtegidas"
                                                     value="#{cadastroEconomicoControlador.enquadramentoAmbiental.especiesProtegidaPorLei}">
                                        <f:selectItems value="#{cadastroEconomicoControlador.buscarTiposSimNao()}"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="Quantidade de espécies suprimidas: "/>
                                    <p:inputText id="quantidadeEspeciesSup"
                                                 maxlength="20"
                                                 size="10"
                                                 onkeypress="somenteNumeros(event, this, false, false, true)"
                                                 value="#{cadastroEconomicoControlador.enquadramentoAmbiental.quantidadeEspeciesSuprimidas}">
                                    </p:inputText>

                                    <h:outputText value="Terreno particular: "/>
                                    <h:selectOneMenu id="terrParticular"
                                                     value="#{cadastroEconomicoControlador.enquadramentoAmbiental.terrenoParticular}">
                                        <f:selectItems value="#{cadastroEconomicoControlador.buscarTiposSimNao()}"/>
                                        <p:ajax event="valueChange"
                                                update=":Formulario:tabDadosCadastro:panelTerrenoValue :Formulario:tabDadosCadastro:panelTerrenoLabel"
                                                process="@this"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"/>
                                    </h:selectOneMenu>

                                    <p:outputPanel id="panelTerrenoLabel">
                                        <h:outputText value="Área Terreno (hm²): "
                                                      rendered="#{cadastroEconomicoControlador.areaTerrenoParticular}"/>
                                    </p:outputPanel>
                                    <p:outputPanel id="panelTerrenoValue">
                                        <p:inputText id="areaTerrenoParticular"
                                                     rendered="#{cadastroEconomicoControlador.areaTerrenoParticular}"
                                                     value="#{cadastroEconomicoControlador.enquadramentoAmbiental.areaTerreno}"
                                                     onkeypress="mascaraPonto(this);"
                                                     converter="converterBigDecimal"
                                                     size="10">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </p:inputText>
                                    </p:outputPanel>
                                </h:panelGrid>

                                <p:commandButton id="botaoAddEnqAmbiental" value="Adicionar"
                                                 icon="ui-icon-circle-arrow-s"
                                                 actionListener="#{cadastroEconomicoControlador.adicionarEnquadramentoAmbiental}"
                                                 onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                 styleClass="operacao" update="panelEnquadramentoAmb tabelaEnqAmbiental"
                                                 process="panelEnquadramentoAmb tabelaEnqAmbiental"/>

                                <p:dataTable var="enquadramentoAmbiental" id="tabelaEnqAmbiental"
                                             styleClass="mtop05 alinhamentoCentralizado"
                                             value="#{cadastroEconomicoControlador.selecionado.enquadramentosAmbientais}"
                                             emptyMessage="Nenhum enquandramento ambiental informado.">
                                    <f:facet name="header">
                                        <h:outputText value="Enquadramentos Ambientais"/>
                                    </f:facet>
                                    <p:column style="width:4%">
                                        <p:rowToggler/>
                                    </p:column>
                                    <p:column headerText="Início de Vigência">
                                        <h:outputText value="#{enquadramentoAmbiental.inicioVigencia}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Final de Vigência">
                                        <h:outputText value="#{enquadramentoAmbiental.finalVigencia}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Ações" style="width: 10%; text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         title="Pressione este botão para editar o registro"
                                                         rendered="#{enquadramentoAmbiental.vigente}"
                                                         actionListener="#{cadastroEconomicoControlador.editarEnquadramentoAmbiental(enquadramentoAmbiental)}"
                                                         onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                         update=":Formulario:tabDadosCadastro:panelEnquadramentoAmb"
                                                         process="@this"/>

                                        <p:commandButton icon="ui-icon-trash"
                                                         title="Pressione este botão para remover o registro"
                                                         actionListener="#{cadastroEconomicoControlador.removerEnquadramentoAmbiental(enquadramentoAmbiental)}"
                                                         update=":Formulario:tabDadosCadastro:panelEnquadramentoAmb"
                                                         process="@this"/>
                                    </p:column>
                                    <p:rowExpansion>
                                        <p:panel styleClass="alinhamentoEsquerda" style="margin-left: 4%; border: none">
                                            <h:panelGrid columns="2" style="width: 65%">
                                                <h:outputText value="Área construída (m²): "/>
                                                <h:outputText value="#{enquadramentoAmbiental.areaConstruida}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="###,##0.00"/>
                                                </h:outputText>

                                                <h:outputText value="Capacidade Instalada (litros): "/>
                                                <h:outputText value="#{enquadramentoAmbiental.capacidadeInstalada}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="###,##0.00"/>
                                                </h:outputText>

                                                <h:outputText value="Matéria prima: "/>
                                                <h:outputText
                                                    value="#{enquadramentoAmbiental.tipoMateriaPrima.descricao}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Localização: "/>
                                                <h:outputText
                                                    value="#{enquadramentoAmbiental.tipoLocalizacao.descricao}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Geração de Ruídos e Vibração: "/>
                                                <h:outputText
                                                    value="#{enquadramentoAmbiental.geracaoRuidosEVibracao.descricao}"
                                                    styleClass="negrito"/>

                                                <h:outputText
                                                    value="Área destinada para guardar as caçambas é coberta e impermeável: "/>
                                                <h:outputText
                                                    value="#{enquadramentoAmbiental.cobertaImpermeavel.descricao}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Espécies protegidas por lei: "/>
                                                <h:outputText
                                                    value="#{enquadramentoAmbiental.especiesProtegidaPorLei.descricao}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Quantidade de espécies suprimidas: "/>
                                                <h:outputText styleClass="negrito"
                                                              value="#{enquadramentoAmbiental.quantidadeEspeciesSuprimidas}"/>

                                                <h:outputText value="Terreno particular: "/>
                                                <h:outputText
                                                    value="#{enquadramentoAmbiental.terrenoParticular.descricao}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Área Terreno (hm²): "
                                                              rendered="#{enquadramentoAmbiental.terrenoParticular eq 'SIM'}"/>
                                                <h:outputText
                                                    rendered="#{enquadramentoAmbiental.terrenoParticular eq 'SIM'}"
                                                    value="#{enquadramentoAmbiental.areaTerreno}" styleClass="negrito">
                                                    <f:convertNumber pattern="###,##0.00"/>
                                                </h:outputText>
                                            </h:panelGrid>
                                        </p:panel>
                                    </p:rowExpansion>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>


                        <p:tab title="Representante Legal" id="pRepresentanteLegal">
                            <p:dataTable value="#{cadastroEconomicoControlador.representantesPessoaJuridica}"
                                         var="rl" emptyMessage="Nenhum registro cadastrado.">
                                <p:column headerText="Representante">
                                    <h:outputText value="#{rl.representante}"/>
                                </p:column>
                                <p:column headerText="Início de Vigência">
                                    <h:outputText value="#{rl.dataInicio}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Final de Vigência">
                                    <h:outputText value="#{rl.dataFim}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Junta Comercial">
                            <p:panel id="paneljunta" header="Junta Comercial">
                                <p:dataTable var="junta" styleClass="mtop05"
                                             emptyMessage="Nenhum registro encontrado"
                                             id="tabelajuntas"
                                             value="#{cadastroEconomicoControlador.juntasComercialPessoaJuridica}">
                                    <f:facet name="header">
                                        <h:outputText value="Junta Comercial"/>
                                    </f:facet>
                                    <p:column>
                                        <p:rowToggler/>
                                    </p:column>
                                    <p:column headerText="Número do Protocolo Junta">
                                        <h:outputText value="#{junta.numeroProtocoloJuntaComercial}"/>
                                    </p:column>
                                    <p:column headerText="Número do Protocolo Viabilidade">
                                        <h:outputText value="#{junta.numeroProtocoloViabilidade}"/>
                                    </p:column>
                                    <p:column headerText="Nire">
                                        <h:outputText value="#{junta.nire}"/>
                                    </p:column>
                                    <p:column headerText="Data da Nire">
                                        <h:outputText value="#{junta.dataNire}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número do Processo">
                                        <h:outputText value="#{junta.numeroProcesso}"/>
                                    </p:column>
                                    <p:column headerText="Requerente">
                                        <h:outputText value="#{junta.requerente}"/>
                                    </p:column>
                                    <p:column headerText="Ato">
                                        <h:outputText value="#{junta.ato}"/>
                                    </p:column>
                                    <p:column headerText="Natureza Jurídica">
                                        <h:outputText value="#{junta.naturezaJuridica}"/>
                                    </p:column>
                                    <p:column headerText="Assinado em">
                                        <h:outputText value="#{junta.assinadoEm}"/>
                                    </p:column>
                                    <p:rowExpansion>
                                        <p:dataTable value="#{junta.eventosRedeSim}"
                                                     emptyMessage="Nenhum evento encontrado."
                                                     var="evento">
                                            <f:facet name="header">
                                                <h:outputText value="Eventos Informados pela Rede SIM"/>
                                            </f:facet>
                                            <p:column headerText=" Código">
                                                <h:outputText value="#{evento.codigo}"/>
                                            </p:column>
                                            <p:column headerText="Tipo">
                                                <h:outputText value="#{evento.tipo}"/>
                                            </p:column>
                                            <p:column headerText="Descrição">
                                                <h:outputText value="#{evento.descricao}"/>
                                            </p:column>
                                        </p:dataTable>
                                    </p:rowExpansion>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>

                        <p:tab title="Filiais" id="pFilial">
                            <p:dataTable value="#{cadastroEconomicoControlador.filiaisPessoaJuridica}"
                                         var="filial" emptyMessage="Nenhum registro cadastrado.">
                                <p:column headerText="Filial">
                                    <h:outputText value="#{filial.filial}"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Processo" rendered="false">
                            <p:panel id="panelprocesso" header="Processo">
                                <h:panelGrid columns="2">
                                    <h:outputText value="Número do Processo: "/>
                                    <p:inputText
                                        value="#{cadastroEconomicoControlador.tipoProcessoEconomico.numeroProcesso}"
                                        id="numprocesso"/>
                                    <h:outputText value="Data do Processo: "/>
                                    <p:calendar pattern="dd/MM/yyyy" navigator="true"
                                                value="#{cadastroEconomicoControlador.tipoProcessoEconomico.dataProcesso}"
                                                id="dataprocesso"/>

                                </h:panelGrid>
                                <p:commandButton value="Adicionar" id="btNovoProcesso" icon="ui-icon-circle-arrow-s"
                                                 actionListener="#{cadastroEconomicoControlador.adicionarTipoProcesso}"
                                                 update="panelprocesso" styleClass="operacao"/>

                                <p:dataTable var="tipoprocesso" emptyMessage="Nenhum registro encontrado"
                                             id="tabelaprocesso" styleClass="mtop05"
                                             value="#{cadastroEconomicoControlador.selecionado.tipoProcessoEconomico}">
                                    <f:facet name="header">
                                        <h:outputText value="Processos"/>
                                    </f:facet>
                                    <p:column headerText="Número do Processo">
                                        <h:outputText value="#{tipoprocesso.numeroProcesso}"/>
                                    </p:column>
                                    <p:column headerText="Data do Processo">
                                        <h:outputText value="#{tipoprocesso.dataProcesso}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Ações">
                                        <p:commandButton icon="ui-icon-trash"
                                                         title="Pressione este botão para remover o registro"
                                                         actionListener="#{cadastroEconomicoControlador.removerTipoProcesso(tipoprocesso)}"
                                                         update="tabelaprocesso">
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>
                        <p:tab title="CNAE" id="tabCANE">
                            <p:panel id="painelCnae" header="CNAE">
                                <h:panelGroup rendered="#{cadastroEconomicoControlador.isPessoaFisica()}">
                                    <h:panelGrid columns="2">
                                        <fc:outputLabelObrigatorio value="CNAE: "/>
                                        <p:autoComplete queryDelay="1000" id="CNAE" title="Digite o CNAE"
                                                        value="#{cadastroEconomicoControlador.cnae.cnae}"
                                                        completeMethod="#{cadastroEconomicoControlador.completaCNAE}"
                                                        var="cnae" size="100"
                                                        itemLabel="#{cnae.codigoCnae} - #{cnae.descricaoReduzida} "
                                                        itemValue="#{cnae.id}"
                                                        forceSelection="true"
                                                        dropdown="true"
                                                        converter="#{cadastroEconomicoControlador.converterCNAE}"
                                                        maxResults="10"/>

                                        <fc:outputLabelObrigatorio value="Data Inicial: "/>
                                        <p:calendar id="inicio"
                                                    title="Digite a data inicial."
                                                    value="#{cadastroEconomicoControlador.cnae.inicio}"
                                                    onkeypress="mascara(this, mdata)"
                                                    pattern="dd/MM/yyyy"
                                                    navigator="true"
                                                    size="20"
                                                    autocomplete="off"/>

                                        <h:outputLabel value="Data Final: "/>
                                        <p:calendar id="fim"
                                                    title="Digite a data final."
                                                    value="#{cadastroEconomicoControlador.cnae.fim}"
                                                    onkeypress="mascara(this, mdata)"
                                                    pattern="dd/MM/yyyy"
                                                    navigator="true"
                                                    size="20"
                                                    autocomplete="off"/>

                                        <fc:outputLabelObrigatorio value="Tipo: "/>
                                        <h:panelGroup>
                                            <h:selectOneMenu value="#{cadastroEconomicoControlador.cnae.tipo}"
                                                             id="tipo">
                                                <f:selectItem value="#{null}" itemValue=""/>
                                                <f:selectItems value="#{cadastroEconomicoControlador.tipoCnae}"/>
                                            </h:selectOneMenu>
                                        </h:panelGroup>

                                        <h:outputText value="Exercida no Local: "/>
                                        <p:selectBooleanCheckbox
                                            value="#{cadastroEconomicoControlador.cnae.exercidaNoLocal}"/>
                                    </h:panelGrid>

                                    <p:commandButton value="Adicionar" update="painelCnae cnaeTabelaVigente"
                                                     styleClass="operacao mtop05"
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     icon="ui-icon-circle-arrow-s" id="btNovoCnae"
                                                     action="#{cadastroEconomicoControlador.adicionarCnae}"/>
                                    <p:commandButton value="Cancelar" icon="ui-icon-circle-close" id="btCancelar"
                                                     update="painelCnae cnaeTabelaVigente" styleClass="operacao mtop05"
                                                     action="#{cadastroEconomicoControlador.cancelarCnae()}"
                                                     disabled="#{!cadastroEconomicoControlador.alterandoCNAE}"/>
                                </h:panelGroup>

                                <p:dataTable emptyMessage="Nenhum registro encontrado" id="cnaeTabelaVigente"
                                             styleClass="mtop05"
                                             value="#{cadastroEconomicoControlador.isPessoaFisica() ? cadastroEconomicoControlador.cnaes : cadastroEconomicoControlador.cnaesPessoa}"
                                             var="c">
                                    <f:facet name="header">
                                        <h:outputText value="CNAEs"/>
                                    </f:facet>
                                    <p:column style="width: 20px; text-align: center"
                                              rendered="#{!cadastroEconomicoControlador.isPessoaFisica()}">
                                        <f:facet name="header">
                                            <p:commandButton icon="ui-icon-check"
                                                             styleClass="vinteLarguraVinteAltura"
                                                             rendered="#{cadastroEconomicoControlador.contemTodosCnaePessoa()}"
                                                             actionListener="#{cadastroEconomicoControlador.removerTodosCnaePessoa()}"
                                                             update="cnaeTabelaVigente"
                                                             onstart="aguarde.show()"
                                                             oncomplete="aguarde.hide()"/>
                                            <p:commandButton value=" "
                                                             styleClass="vinteLarguraVinteAltura"
                                                             rendered="#{!cadastroEconomicoControlador.contemTodosCnaePessoa()}"
                                                             actionListener="#{cadastroEconomicoControlador.adicionarTodosCnaePessoa()}"
                                                             update="cnaeTabelaVigente"
                                                             onstart="aguarde.show()"
                                                             oncomplete="aguarde.hide()"/>
                                        </f:facet>

                                        <p:commandButton icon="ui-icon-check"
                                                         styleClass="vinteLarguraVinteAltura"
                                                         rendered="#{cadastroEconomicoControlador.contemCnaePessoa(c)}"
                                                         actionListener="#{cadastroEconomicoControlador.removerCnaePessoa(c)}"
                                                         update="cnaeTabelaVigente"
                                                         onstart="aguarde.show()"
                                                         oncomplete="aguarde.hide()"/>
                                        <p:commandButton value=" "
                                                         styleClass="vinteLarguraVinteAltura"
                                                         rendered="#{!cadastroEconomicoControlador.contemCnaePessoa(c)}"
                                                         actionListener="#{cadastroEconomicoControlador.adicionarCnaePessoa(c)}"
                                                         update="cnaeTabelaVigente"
                                                         onstart="aguarde.show()"
                                                         oncomplete="aguarde.hide()"/>
                                    </p:column>
                                    <p:column headerText="CNAE">
                                        <h:outputText value="#{c.cnae.codigoCnae} "/>
                                    </p:column>
                                    <p:column headerText="Descrição Detalhada">
                                        <h:outputText value="#{c.cnae.descricaoDetalhada} "/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Data Inicial">
                                        <h:outputText value="#{c.inicio}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Data Final">
                                        <h:outputText value="#{c.fim}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Tipo">
                                        <h:outputText value="#{c.tipo.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Grau de Risco" style="text-align: center">
                                        <h:outputText value="#{c.cnae.grauDeRisco.descricao} "/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Dispensado">
                                        <h:outputText value="#{c.cnae.dispensado ? 'Sim' : 'Não'}"/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Infraestrutura">
                                        <h:outputText value="#{c.cnae.seinfra ? 'Sim' : 'Não'}"/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Sanitário">
                                        <h:outputText value="#{c.cnae.fiscalizacaoSanitaria ? 'Sim' : 'Não'}"/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Ambiental">
                                        <h:outputText value="#{c.cnae.meioAmbiente ? 'Sim' : 'Não'}"/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Exercida no Local">
                                        <h:outputText
                                            value="#{c.exercidaNoLocal eq null ? '' : c.exercidaNoLocal ? 'Sim' : 'Não'}"/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Situação">
                                        <h:outputText value="#{c.cnae.situacao.descricao}"/>
                                    </p:column>
                                    <p:column style="text-align: center; width: 100px" headerText="Operação"
                                              rendered="#{cadastroEconomicoControlador.isPessoaFisica()}">
                                        <p:commandButton
                                            icon="ui-icon-trash"
                                            title="Pressione este botão para remover o registro"
                                            onclick="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            update="cnaeTabelaVigente"
                                            actionListener="#{cadastroEconomicoControlador.removerCnae(c)}">
                                        </p:commandButton>
                                        <p:commandButton
                                            icon="ui-icon-pencil"
                                            title="Pressione este botão para editar o registro"
                                            onclick="aguarde.show()"
                                            styleClass="mlef05"
                                            oncomplete="aguarde.hide()"
                                            update=":Formulario:tabDadosCadastro:painelCnae"
                                            actionListener="#{cadastroEconomicoControlador.alterarCnae(c)}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Horários de Funcionamento" id="tabHorario"
                               rendered="#{!cadastroEconomicoControlador.isAutonomoMotorista()}">
                            <p:commandButton
                                value="Novo Horário de Funcionamento"
                                icon="ui-icon-search"
                                update=":formHorarioFuncionamento"
                                process="@this"
                                styleClass="operacao"
                                rendered="#{cadastroEconomicoControlador.isPessoaFisica()}"
                                onclick="dialogoHorarioFuncionamento.show()"/>

                            <p:dataTable id="horarios"
                                         value="#{cadastroEconomicoControlador.selecionado.pessoa.horariosFuncionamentoAtivos}"
                                         var="horario"
                                         editable="true"
                                         paginator="true"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop05"
                                         emptyMessage="Nenhum horário de funcionamento informado"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Horários de Funcionamento&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100">
                                <p:column style="width: 5px">
                                    <p:rowToggler/>
                                </p:column>
                                <p:column headerText="Código">
                                    <h:outputText value="#{horario.horarioFuncionamento.codigo}"/>
                                </p:column>
                                <p:column headerText="Descrição">
                                    <h:outputText value="#{horario.horarioFuncionamento.descricao}"/>
                                </p:column>
                                <p:column style="text-align: center; width: 75px;" headerText="Operação"
                                          rendered="#{cadastroEconomicoControlador.isPessoaFisica()}">
                                    <p:commandButton icon="ui-icon-trash"
                                                     title="Pressione este botão para remover o registro"
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     rendered="#{cadastroEconomicoControlador.isPessoaFisica()}"
                                                     update="horarios"
                                                     actionListener="#{cadastroEconomicoControlador.removerHorarioFuncionamento(horario)}"/>
                                </p:column>
                                <p:rowExpansion>
                                    <p:dataTable value="#{horario.horarioFuncionamento.itens}"
                                                 var="item">
                                        <p:column headerText="Dia (Entrada)">
                                            <h:outputText value="#{item.diaEntrada.descricao}"/>
                                        </p:column>
                                        <p:column headerText="Entrada">
                                            <h:outputText value="#{item.horarioEntrada}">
                                                <f:convertDateTime pattern="HH:mm"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Dia (Saída)">
                                            <h:outputText value="#{item.diaSaida.descricao}"/>
                                        </p:column>
                                        <p:column headerText="Saída">
                                            <h:outputText value="#{item.horarioSaida}">
                                                <f:convertDateTime pattern="HH:mm"/>
                                            </h:outputText>
                                        </p:column>
                                    </p:dataTable>
                                </p:rowExpansion>
                            </p:dataTable>
                        </p:tab>
                        <p:tab id="tabSocios" title="Sócios">
                            <p:panel id="panelsocios" header="Sócios">
                                <h:panelGroup rendered="#{cadastroEconomicoControlador.isPessoaFisica()}">
                                    <h:panelGrid columns="2">
                                        <h:outputText value="Sócio: "/>
                                        <h:panelGrid columns="3" styleClass="verticalAlignTop" cellpadding="0"
                                                     cellspacing="0">
                                            <p:autoComplete queryDelay="1000"
                                                            id="autoCompleteSocio"
                                                            style="margin: 0 !important"
                                                            title="Selecione o registro desejado"
                                                            value="#{cadastroEconomicoControlador.socio.socio}"
                                                            completeMethod="#{cadastroEconomicoControlador.completaPessoa}"
                                                            var="p" size="70"
                                                            itemLabel="#{p}"
                                                            itemValue="#{p.id}"
                                                            converter="#{novoComponentePesquisaPessoaControlador.converterPessoa}"
                                                            forceSelection="true"
                                                            maxResults="10">
                                                <p:ajax event="itemSelect" onstart="aguarde.show()"
                                                        oncomplete="aguarde.hide()" process="@this"
                                                        update="botoesSocios"/>
                                            </p:autoComplete>
                                            <p:outputPanel id="botoesSocios">
                                                <p:commandButton icon="ui-icon-pencil"
                                                                 process="@form"
                                                                 disabled="#{cadastroEconomicoControlador.socio.socio eq null}"
                                                                 onclick="aguarde.show();" oncomplete="aguarde.hide();"
                                                                 actionListener="#{cadastroEconomicoControlador.editaPessoa(cadastroEconomicoControlador.socio.socio, cadastroEconomicoControlador.tipoSocioCadastro)}"/>

                                                <p:commandButton icon="ui-icon-plus" id="novoSocioJuridica"/>
                                                <p:overlayPanel id="novoSocioPanel" for="novoSocioJuridica"
                                                                hideEffect="fade">
                                                    <h:panelGrid>
                                                        <p:commandButton icon="ui-icon-plus"
                                                                         process="@form"
                                                                         value="PF"
                                                                         onclick="aguarde.show();"
                                                                         oncomplete="aguarde.hide();"
                                                                         actionListener="#{cadastroEconomicoControlador.novoPessoaFisica(cadastroEconomicoControlador.tipoSocioCadastro)}"/>
                                                        <p:commandButton icon="ui-icon-plus"
                                                                         process="@form"
                                                                         value="PJ"
                                                                         onclick="aguarde.show();"
                                                                         oncomplete="aguarde.hide();"
                                                                         actionListener="#{cadastroEconomicoControlador.novoPessoaJuridica(cadastroEconomicoControlador.tipoSocioCadastro)}"/>
                                                    </h:panelGrid>
                                                </p:overlayPanel>

                                                <deb:botao-consulta-debitos
                                                    idObjeto="#{cadastroEconomicoControlador.socio.socio.id}"
                                                    rendered="#{cadastroEconomicoControlador.socio.socio.id ne null}"
                                                    tipoCadastro="#{cadastroEconomicoControlador.tipoCadastroContribuinte}"/>
                                            </p:outputPanel>
                                        </h:panelGrid>
                                        <h:outputLabel for="proporcao" value="Proporção (%): "/>
                                        <p:inputText id="proporcao" size="10" maxlength="5"
                                                     value="#{cadastroEconomicoControlador.socio.proporcao}">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </p:inputText>

                                        <h:outputLabel for="iniciosocio" value="Data Inicial: "/>
                                        <p:calendar pattern="dd/MM/yyyy" id="iniciosocio" navigator="true"
                                                    onkeyup="mascara(this, mdata)"
                                                    value="#{cadastroEconomicoControlador.socio.dataInicio}"/>

                                        <h:outputLabel rendered="#{cadastroEconomicoControlador.socio.id ne null}"
                                                       for="fimsocio" value="Data Final: "/>
                                        <p:calendar pattern="dd/MM/yyyy" id="fimsocio" navigator="true"
                                                    rendered="#{cadastroEconomicoControlador.socio.id ne null}"
                                                    value="#{cadastroEconomicoControlador.socio.dataFim}">
                                        </p:calendar>
                                    </h:panelGrid>
                                    <p:commandButton id="btNovoSocio"
                                                     value="Adicionar" styleClass="operacao"
                                                     icon="ui-icon-circle-arrow-s"
                                                     rendered="#{cadastroEconomicoControlador.socio.id eq null}"
                                                     actionListener="#{cadastroEconomicoControlador.adicionarSocios}"
                                                     process="panelsocios"
                                                     update="panelsocios"/>
                                    <p:commandButton id="btnGravarEdicao" styleClass="operacao"
                                                     value="Confirmar"
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{cadastroEconomicoControlador.confirmarEdicaoSocio}"
                                                     rendered="#{cadastroEconomicoControlador.socio.id ne null}"
                                                     update="panelsocios"
                                                     icon="ui-icon-check"/>
                                    <p:commandButton id="btnCancelarEdicao" styleClass="operacao"
                                                     value="Cancelar"
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{cadastroEconomicoControlador.cancelarEdicaoSocio}"
                                                     rendered="#{cadastroEconomicoControlador.socio.id ne null}"
                                                     update="panelsocios"
                                                     icon="ui-icon-cancel"/>
                                </h:panelGroup>

                                <p:dataTable var="socio" id="tabelasocios" emptyMessage="Nenhum registro encontrado"
                                             editable="true" styleClass="mtop05"
                                             value="#{cadastroEconomicoControlador.selecionado.sociedadeCadastroEconomico}">

                                    <p:column headerText="Consultar Débito"
                                              styleClass="alinhamentoCentralizado" style="width: 50px">
                                        <deb:botao-consulta-debitos
                                            idObjeto="#{socio.socio.id}"
                                            tipoCadastro="#{cadastroEconomicoControlador.tipoCadastroContribuinte}"/>
                                    </p:column>
                                    <p:column headerText="Sócio">
                                        <h:outputText value="#{socio.socio}"/>
                                    </p:column>
                                    <p:column headerText="Proporção (%)" style="text-align: center">
                                        <h:outputText value="#{socio.proporcao}">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Data Inicial" style="text-align: center">
                                        <h:outputText value="#{socio.dataInicio}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Data Final" style="text-align: center">
                                        <h:outputText value="#{socio.dataFim}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Ações" style="width:100px; text-align: center"
                                              rendered="#{cadastroEconomicoControlador.isPessoaFisica()}">
                                        <p:commandButton id="btnEditarSocio"
                                                         disabled="#{cadastroEconomicoControlador.socio.id eq socio.id}"
                                                         icon="ui-icon-pencil"
                                                         actionListener="#{cadastroEconomicoControlador.editarSocio(socio)}"
                                                         update=":Formulario:tabDadosCadastro:panelsocios"/>
                                        <p:commandButton icon="ui-icon-trash"
                                                         title="Pressione este botão para remover o registro"
                                                         actionListener="#{cadastroEconomicoControlador.removerSocios(socio)}"
                                                         update="tabelasocios"/>
                                    </p:column>
                                    <f:facet id="rodaPeSocios" name="footer">
                                        <h:outputText value="Proporção Total:"/>
                                        <h:outputText value="#{cadastroEconomicoControlador.totalSocios}"
                                                      id="totalSocios">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </h:outputText>%
                                    </f:facet>
                                </p:dataTable>

                            </p:panel>
                        </p:tab>
                        <p:tab title="Serviços">
                            <p:panel id="panelServicos" header="Serviços">
                                <p:panel style="width: 100%; border: 0; text-align: center;">
                                    <p:commandButton value="Escolher Serviços"
                                                     styleClass="operacao prioritario width200"
                                                     icon="ui-icon-search"
                                                     oncomplete="dialogServico.show()"
                                                     update=":formularioDialogServico"
                                                     actionListener="#{cadastroEconomicoControlador.instanciaFiltroServico}"/>
                                </p:panel>
                                <p:dataTable id="tabelaServicos"
                                             value="#{cadastroEconomicoControlador.selecionado.servico}" var="servico"
                                             emptyMessage="Nenhum registro encontrado">
                                    <p:column headerText="Código" style="width: 10%;">
                                        <h:outputText value="#{servico.codigo}"/>
                                    </p:column>
                                    <p:column headerText="Descrição">
                                        <h:outputText value="#{servico.nome}" style="width: 55%;"/>
                                    </p:column>
                                    <p:column headerText="Alíquota do ISS (%)" style="text-align: right;">
                                        <h:outputText value="#{servico.aliquotaISSHomologado}">
                                            <f:convertNumber pattern="##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Permite Dedução" style="text-align: center;">
                                        <h:outputText value="#{servico.permiteDeducao ? 'Sim' : 'Não'}"/>
                                    </p:column>
                                    <p:column headerText="Percentual de Dedução" style="text-align: right;">
                                        <h:outputText value="#{servico.percentualDeducao}">
                                            <f:convertNumber pattern="##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column style="width: 5%;text-align: center">
                                        <p:commandButton icon="ui-icon-trash"
                                                         title="Pressione este botão para remover o registro"
                                                         update="tabelaServicos"
                                                         actionListener="#{cadastroEconomicoControlador.removerServico(servico)}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Livros Fiscais" rendered="false">
                            <p:panel id="panelLivrosFiscais" header="Livros Fiscais">

                                <p:dataTable id="tabelaLivrosFiscais"
                                             value="#{cadastroEconomicoControlador.livrosFiscais}"
                                             var="livroFiscal" styleClass="mtop05"
                                             editable="true"
                                             emptyMessage="Nenhum registro encontrado">
                                    <p:column headerText="Abertura">
                                        <h:outputText value="#{livroFiscal.abertura}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Encerramento">
                                        <h:outputText value="#{livroFiscal.encerramento}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número">
                                        <h:outputText value="#{livroFiscal.numero}"/>
                                    </p:column>
                                    <p:column headerText="Tipo do Movimento">
                                        <h:outputText value="#{livroFiscal.tipoMovimento}"/>
                                    </p:column>
                                    <p:column headerText="Exercício">
                                        <h:outputText value="#{livroFiscal.exercicio.ano}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Anexos">
                            <p:panel id="panelUpload" header="Anexar Arquivos">
                                <p:fileUpload multiple="true"
                                              cancelLabel="Cancelar"
                                              label="Selecione..."
                                              uploadLabel="Anexar"
                                              update="listaArquivos"
                                              sizeLimit="15728640"
                                              fileUploadListener="#{cadastroEconomicoControlador.uploadArquivos}">
                                </p:fileUpload>
                                <br/>
                                <p:dataTable id="listaArquivos" value="#{cadastroEconomicoControlador.fileUploadEvents}"
                                             var="arquivos"
                                             emptyMessage="Nenhum novo arquivo anexado.">
                                    <f:facet name="header">
                                        <h:outputText value="Novos Arquivos Anexados"/>
                                    </f:facet>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Nome"/>
                                        </f:facet>
                                        <h:outputText value="#{arquivos.file.fileName}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Operação"/>
                                        </f:facet>
                                        <p:commandButton icon="ui-icon-trash"
                                                         title="Pressione este botão para remover o registro"
                                                         update="listaArquivos"
                                                         actionListener="#{cadastroEconomicoControlador.removerArquivo}">
                                            <f:attribute name="arquivos" id="remove" value="#{arquivos}"/>
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                                <br/>
                                <p:dataTable id="fileUpload2"
                                             value="#{cadastroEconomicoControlador.selecionado.arquivos}" var="arquivos"
                                             emptyMessage="Nenhum arquivo salvo anexado.">
                                    <f:facet name="header">
                                        <h:outputText value="Arquivos Salvos"/>
                                    </f:facet>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Nome"/>
                                        </f:facet>
                                        <a target="_blank"
                                           href='${facesContext.externalContext.requestContextPath}/arquivos/#{arquivos.nome}?id=#{arquivos.id}'><h:outputText
                                            value="#{arquivos.nome}"/></a>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Operação"/>
                                        </f:facet>
                                        <p:commandButton icon="ui-icon-trash" title="clique para remover o registro"
                                                         update="fileUpload2"
                                                         actionListener="#{cadastroEconomicoControlador.removeFileUpload}">
                                            <f:attribute name="remove" id="remove" value="#{arquivos}"/>
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>
                        <p:tab id="tabCaracFunc" title="Características de Funcionamento">
                            <p:panel id="caracFunc" header="Características de Funcionamento">
                                <h:panelGrid columns="2">
                                    <h:outputLabel for="areaPublicidade" value="Área de Publicidade (m²): "/>
                                    <p:inputText id="areaPublicidade"
                                                 disabled="#{cadastroEconomicoControlador.hasCaracteristicaSemPublicidade()}"
                                                 value="#{cadastroEconomicoControlador.selecionado.areaPublicidade}">
                                        <f:convertNumber pattern="#,##0.00"/>
                                    </p:inputText>
                                </h:panelGrid>
                                <p:panel styleClass="mtop05">
                                    <h:panelGrid columns="2">
                                        <h:outputText value="Característica de Funcionamento: "/>
                                        <h:selectOneMenu id="caracFunci"
                                                         value="#{cadastroEconomicoControlador.bcecf.caracFuncionamento}"
                                                         title="Informe a característica de funcionamento"
                                                         converter="#{cadastroEconomicoControlador.converterCaracteristica}">
                                            <f:selectItems value="#{cadastroEconomicoControlador.caracteristicas}"/>
                                            <p:ajax event="change" update="caracFunc"
                                                    onstart="aguarde.show()" oncomplete="aguarde.hide()"
                                                    listener="#{cadastroEconomicoControlador.selecaoCaracteristica()}"/>
                                        </h:selectOneMenu>

                                        <h:outputText value="Quantidade: "/>
                                        <p:inputText id="quantidade"
                                                     value="#{cadastroEconomicoControlador.bcecf.quantidade}"
                                                     style="text-align: right" size="8"/>

                                        <h:outputText value="Forma de Pagamento"/>
                                        <h:selectOneMenu value="#{cadastroEconomicoControlador.bcecf.formaPagamento}">
                                            <f:selectItems value="#{cadastroEconomicoControlador.tipoPagamento}"/>
                                        </h:selectOneMenu>
                                    </h:panelGrid>
                                    <p:commandButton icon="ui-icon-circle-arrow-s" value="Adicionar"
                                                     styleClass="operacao"
                                                     title="clique para adicionar o registro"
                                                     update="caracFunc"
                                                     actionListener="#{cadastroEconomicoControlador.adiconaCarcteristica}"/>
                                </p:panel>
                                <p:dataTable id="caracFunciTabela"
                                             value="#{cadastroEconomicoControlador.selecionado.listaBCECaracFuncionamento}"
                                             var="car"
                                             emptyMessage="Nenhuma característica de funcionamento adicionada.">
                                    <f:facet name="header">
                                        <h:outputText value="Características de Funcionamento"/>
                                    </f:facet>
                                    <p:column headerText="Código">
                                        <h:outputText value="#{car.caracFuncionamento.codigo}"/>
                                    </p:column>
                                    <p:column headerText="Descrição">
                                        <h:outputText value="#{car.caracFuncionamento.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Descrição Curta">
                                        <h:outputText value="#{car.caracFuncionamento.descricaoCurta}"/>
                                    </p:column>
                                    <p:column headerText="Tipo">
                                        <h:outputText value="#{car.caracFuncionamento.tipo.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Quantidade" style="text-align: right">
                                        <h:outputText value="#{car.quantidade}"/>
                                    </p:column>
                                    <p:column headerText="Forma de Pagamento" style="text-align: right">
                                        <h:outputText value="#{car.formaPagamento.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Operação" style="text-align: center">
                                        <p:commandButton icon="ui-icon-trash"
                                                         title="Pressione este botão para remover o registro"
                                                         update="caracFunciTabela :Formulario:tabDadosCadastro:areaPublicidade"
                                                         actionListener="#{cadastroEconomicoControlador.removeCaracteristica(car)}"/>
                                    </p:column>
                                </p:dataTable>

                            </p:panel>
                        </p:tab>
                        <p:tab id="tabImovel" title="Localização">
                            <table style="width: 100%">
                                <tr>
                                    <td valign="top">
                                        <p:panel header="Endereço Principal" styleClass="mrig03">
                                            <h:panelGrid id="enderecoPessoa" columns="2">
                                                <h:outputText value="Bairro: "/>
                                                <h:outputText
                                                    value="#{cadastroEconomicoControlador.selecionado.localizacao.bairro}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Logradouro: "/>
                                                <h:outputText
                                                    value="#{cadastroEconomicoControlador.selecionado.localizacao.logradouro}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="CEP: "/>
                                                <h:outputText
                                                    value="#{cadastroEconomicoControlador.selecionado.localizacao.cep}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Número: "/>
                                                <h:outputText
                                                    value="#{cadastroEconomicoControlador.selecionado.localizacao.numero}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Complemento: "/>
                                                <h:outputText
                                                    value="#{cadastroEconomicoControlador.selecionado.localizacao.complemento}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Cidade: "/>
                                                <h:outputText
                                                    value="#{cadastroEconomicoControlador.selecionado.localizacao.localidade}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="UF: "/>
                                                <h:outputText
                                                    value="#{cadastroEconomicoControlador.selecionado.localizacao.uf}"
                                                    styleClass="negrito"/>

                                                <h:outputText value="Área de Utilização (m²): "/>
                                                <p:inputText
                                                    value="#{cadastroEconomicoControlador.selecionado.localizacao.areaUtilizacao}">
                                                    <f:convertNumber pattern="###,##0.00"/>
                                                </p:inputText>
                                            </h:panelGrid>
                                        </p:panel>
                                    </td>
                                    <td valign="top">
                                        <p:panel id="panelEnderecoCorrespondecia" header="Endereço de Correspondência"
                                                 styleClass="mlef03">
                                            <h:panelGrid columns="2" id="gridEndereco2">
                                                <fc:outputLabelObrigatorio value="CEP: "/>
                                                <h:panelGroup>
                                                    <p:autoComplete queryDelay="1000"
                                                                    value="#{cadastroEconomicoControlador.endereco.cep}"
                                                                    completeMethod="#{cadastroEconomicoControlador.completaCEP}"
                                                                    var="ce"
                                                                    id="cepNumero"
                                                                    itemLabel="#{ce}"
                                                                    itemValue="#{ce}"
                                                                    size="25">
                                                    </p:autoComplete> &nbsp;
                                                    <p:commandButton title="clique para pesquisar"
                                                                     styleClass="botao_azul icone_branco"
                                                                     icon="ui-icon-search"
                                                                     actionListener="#{cadastroEconomicoControlador.atualizaLogradouro()}"
                                                                     update="gridEndereco2"/>
                                                </h:panelGroup>

                                                <h:outputText id="oEstado" value="UF: "/>
                                                <h:selectOneMenu value="#{cadastroEconomicoControlador.endereco.uf}">
                                                    <f:selectItems value="#{cadastroEconomicoControlador.listaUF}"
                                                                   var="uf" itemLabel="#{uf.nome}"
                                                                   itemValue="#{uf.sigla}"/>
                                                    <p:ajax update="iCidade" event="change" process="@this"/>
                                                </h:selectOneMenu>

                                                <fc:outputLabelObrigatorio id="oCidade" value="Cidade: "/>
                                                <p:autoComplete queryDelay="1000"
                                                                value="#{cadastroEconomicoControlador.endereco.localidade}"
                                                                completeMethod="#{cadastroEconomicoControlador.completaCidade}"
                                                                var="loc"
                                                                id="iCidade"
                                                                itemLabel="#{loc}"
                                                                itemValue="#{loc}"
                                                                size="70">
                                                    <p:ajax update="iLogradouro" event="blur" process="@this"/>
                                                </p:autoComplete>

                                                <fc:outputLabelObrigatorio value="Bairro: "/>
                                                <p:autoComplete queryDelay="1000" id="iBairro"
                                                                value="#{cadastroEconomicoControlador.endereco.bairro}"
                                                                var="bairro"
                                                                completeMethod="#{cadastroEconomicoControlador.completaBairro}"
                                                                itemLabel="#{bairro}" itemValue="#{bairro}"
                                                                size="50"
                                                                forceSelection="false"
                                                                maxResults="10"/>
                                                <fc:outputLabelObrigatorio value="Logradouro: "/>
                                                <p:autoComplete queryDelay="1000" id="iLogradouro"
                                                                value="#{cadastroEconomicoControlador.endereco.logradouro}"
                                                                var="logradouro"
                                                                completeMethod="#{cadastroEconomicoControlador.completaLogradouro}"
                                                                itemLabel="#{logradouro}"
                                                                itemValue="#{logradouro}"
                                                                size="70"
                                                                maxResults="10"/>

                                                <h:outputText value="Número: "/>
                                                <p:inputText maxlength="20" size="20"
                                                             value="#{cadastroEconomicoControlador.endereco.numero}"/>

                                                <h:outputText value="Complemento: "/>
                                                <p:inputText
                                                    maxlength="70"
                                                    value="#{cadastroEconomicoControlador.endereco.complemento}"
                                                    size="70"/>

                                                <h:outputText value="Área de Utilização (m²): "/>
                                                <p:inputText id="areaUtilizacao"
                                                             value="#{cadastroEconomicoControlador.endereco.areaUtilizacao}">
                                                    <f:convertNumber pattern="###,##0.00"/>
                                                </p:inputText>
                                            </h:panelGrid>
                                            <h:panelGrid columns="2">
                                                <p:commandButton value="Adicionar"
                                                                 update=":Formulario:tabDadosCadastro:panelEnderecoCorrespondecia"
                                                                 onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                                 actionListener="#{cadastroEconomicoControlador.adicionarEndereco}"
                                                                 styleClass="operacao"
                                                                 process="@form"
                                                                 icon="ui-icon-circle-plus"/>
                                                <p:commandButton value="Limpar Campos"
                                                                 update=":Formulario:tabDadosCadastro:panelEnderecoCorrespondecia"
                                                                 actionListener="#{cadastroEconomicoControlador.limparEndereco()}"
                                                                 styleClass="operacao" icon="ui-icon-clear"/>
                                            </h:panelGrid>
                                            <p:dataTable id="enderecosSecundarios"
                                                         value="#{cadastroEconomicoControlador.selecionado.enderecosSecundarios}"
                                                         var="ender"
                                                         editable="true"
                                                         paginator="true"
                                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                                         rowIndexVar="rowIx"
                                                         styleClass="mtop05"
                                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                                         rows="10"
                                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Endereços Secundário&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                                         rowsPerPageTemplate="10,25,50,100">
                                                <p:column headerText="Sequencial" style="text-align: center">
                                                    <h:outputText value="#{ender.sequencial}"/>
                                                </p:column>
                                                <p:column headerText="Endereço" style="text-align: left">
                                                    <h:outputText value="#{ender.toString()}"/>
                                                </p:column>
                                                <p:column headerText="Área de Utilização (m²)"
                                                          style="text-align: center">
                                                    <h:outputText value="#{ender.areaUtilizacao}">
                                                        <f:convertNumber pattern="###,##0.00"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column style="text-align: center; width: 75px" headerText="Ações">
                                                    <p:commandButton icon="ui-icon-pencil"
                                                                     title="Clique para alterar esse endereco."
                                                                     update=":Formulario:tabDadosCadastro:panelEnderecoCorrespondecia"
                                                                     process="@this"
                                                                     actionListener="#{cadastroEconomicoControlador.alterarEndereco(ender)}"/>
                                                    <p:commandButton icon="ui-icon-trash" title="Clique para remover."
                                                                     update=":Formulario:tabDadosCadastro:panelEnderecoCorrespondecia"
                                                                     process="@this"
                                                                     actionListener="#{cadastroEconomicoControlador.removeEndereco}">
                                                        <f:attribute name="vendereco" id="vendereco" value="#{ender}"/>
                                                    </p:commandButton>
                                                </p:column>
                                            </p:dataTable>
                                        </p:panel>
                                    </td>
                                </tr>
                            </table>
                        </p:tab>
                        <p:tab title="Características Adicionais">
                            <h:outputText for="descricao" value="Características Adicionais: "/>
                            <h:panelGrid columns="2" style="margin-left: -3px;">
                                <p:inputTextarea title="Digite as Características Adicionais."
                                                 value="#{cadastroEconomicoControlador.selecionado.caracteristicasAdicionais}"
                                                 id="descricao" cols="100" maxlength="3000"
                                                 autoResize="true" counterTemplate="{0} Caracteres Restantes."
                                                 counter="counterObservacao"/>
                                <h:outputText id="counterObservacao"
                                              style="color: #497692"
                                              styleClass="mlef05"/>
                            </h:panelGrid>
                        </p:tab>
                        <p:tab title="Isenções" id="tabIsencao" rendered="false">
                            <p:panel id="painelIsencao" header="Isenções">
                                <h:panelGrid columns="2">
                                    <h:outputText value="Início da Vigência:"/>
                                    <p:calendar value="#{cadastroEconomicoControlador.isencao.inicioVigencia}"
                                                pattern="dd/MM/yyyy"
                                                maxlength="10"/>
                                    <h:outputText value="Final da Vigência:"/>
                                    <p:calendar value="#{cadastroEconomicoControlador.isencao.finalVigencia}"
                                                pattern="dd/MM/yyyy"
                                                maxlength="10"/>
                                    <h:outputText value="Tributo: "/>
                                    <p:autoComplete queryDelay="1000"
                                                    value="#{cadastroEconomicoControlador.isencao.tributo}"
                                                    completeMethod="#{cadastroEconomicoControlador.completaTributo}"
                                                    converter="#{cadastroEconomicoControlador.converterTributo}"
                                                    forceSelection="true"
                                                    var="tributo"
                                                    size="70"
                                                    itemLabel="#{tributo.descricao}"
                                                    itemValue="#{tributo.id}"/>
                                    <h:outputText value="Percentual (%): "/>
                                    <p:inputText value="#{cadastroEconomicoControlador.isencao.percentual}">
                                        <f:convertNumber pattern="#,##0.00"/>
                                    </p:inputText>
                                    <h:outputText value="Número do Processo:"/>
                                    <p:inputText value="#{cadastroEconomicoControlador.isencao.numeroProcesso}"/>
                                    <h:outputText value="Data do Processo:"/>
                                    <p:calendar value="#{cadastroEconomicoControlador.isencao.dataProcesso}"
                                                pattern="dd/MM/yyyy"
                                                maxlength="10"/>
                                    <h:outputText value="Ato Legal: "/>
                                    <p:autoComplete queryDelay="1000"
                                                    value="#{cadastroEconomicoControlador.isencao.atoLegal}"
                                                    completeMethod="#{cadastroEconomicoControlador.completaAtoLegal}"
                                                    converter="#{cadastroEconomicoControlador.converterAtoLegal}"
                                                    forceSelection="true"
                                                    var="ato"
                                                    size="70"
                                                    itemLabel="#{ato}"
                                                    itemValue="#{ato.id}"/>
                                </h:panelGrid>

                                <p:commandButton icon="ui-icon-circle-arrow-s" value="Adicionar" styleClass="operacao"
                                                 title="clique para adicionar o registro" update="painelIsencao"
                                                 actionListener="#{cadastroEconomicoControlador.addIsencao()}"/>

                                <p:dataTable id="isencoes" styleClass="mtop05"
                                             emptyMessage="Nenhuma Isenção encontrada"
                                             value="#{cadastroEconomicoControlador.selecionado.isencoes}"
                                             var="isencao">
                                    <f:facet name="header">
                                        <h:outputText value="Isenções do C.M.C."/>
                                    </f:facet>
                                    <p:column headerText="Código">
                                        <h:outputText value="#{isencao.sequencia}"/>
                                    </p:column>
                                    <p:column headerText="Início da vigência">
                                        <h:outputText value="#{isencao.inicioVigencia}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Final da vigência">
                                        <h:outputText value="#{isencao.finalVigencia}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Tributo">
                                        <h:outputText value="#{isencao.tributo}"/>
                                    </p:column>
                                    <p:column headerText="Percentual (%)">
                                        <h:outputText value="#{isencao.percentual}">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número do Processo">
                                        <h:outputText value="#{isencao.numeroProcesso}"/>
                                    </p:column>
                                    <p:column headerText="Data do Processo">
                                        <h:outputText value="#{isencao.dataProcesso}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Ato Legal">
                                        <h:outputText value="#{isencao.atoLegal}"/>
                                    </p:column>
                                    <p:column headerText="Usuário">
                                        <h:outputText value="#{isencao.usuario.login}"/>
                                    </p:column>
                                    <p:column headerText="Operações">
                                        <p:commandButton icon="ui-icon-trash" styleClass="botao-transparente"
                                                         actionListener="#{cadastroEconomicoControlador.removeIsencao(isencao)}"
                                                         update="isencoes"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Licenciamento de ETR"
                               rendered="#{cadastroEconomicoControlador.requerimentoLicenciamentoETRList ne null}">
                            <p:dataTable
                                id="tableLicenciamentoETR"
                                rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                rowIndexVar="rowIx"
                                styleClass="mtop05"
                                emptyMessage="Não foram localizados registros para serem apresentados"
                                value="#{cadastroEconomicoControlador.requerimentoLicenciamentoETRList}"
                                rows="10"
                                paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>LICENCIAMENTO DE ETR&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                rowsPerPageTemplate="10,25,50,100"
                                var="requerimentoLicenciamentoETR">
                                <p:column headerText="Exercício" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{requerimentoLicenciamentoETR.exercicio.ano}"/>
                                </p:column>
                                <p:column headerText="Código" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{requerimentoLicenciamentoETR.codigo}"/>
                                </p:column>
                                <p:column headerText="Data Requerimento" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{requerimentoLicenciamentoETR.dataRequerimento}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Endereço Instalação" styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{requerimentoLicenciamentoETR.enderecoInstalacao.toString()}"/>
                                </p:column>
                                <p:column headerText="Situação" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{requerimentoLicenciamentoETR.situacao.descricao}"/>
                                </p:column>
                                <p:column headerText="Visualizar"
                                          style="text-align: center; width: 90px;">
                                    <p:commandButton onclick="console.log(form.target); form.target='_blank';"
                                                     ajax="false"
                                                     icon="ui-icon-eye"
                                                     actionListener="#{cadastroEconomicoControlador.visualizarRequerimentoLicenciamentoETR(requerimentoLicenciamentoETR)}"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                    </p:tabView>
                    <br/>
                    <p:panel header="Observações">
                        <p:inputTextarea title="Digite as observações"
                                         value="#{cadastroEconomicoControlador.selecionado.observacoes}"
                                         id="observacoes"
                                         style="width: 100%" rows="4" autoResize="false"
                                         onblur="document.getElementById('Formulario:avancar').focus()"
                                         maxlength="500"/>
                    </p:panel>
                    <br/>
                    <p:panel header="Cadastro por Ofício" id="cadastroOficio" rendered="false">
                        <h:panelGrid columns="2">
                            <h:outputLabel for="cadporoficio" value="Cadastro por Ofício: "/>
                            <h:selectBooleanCheckbox id="cadporoficio"
                                                     value="#{cadastroEconomicoControlador.selecionado.cadastroPorOficio}">
                                <p:ajax event="change" update="cadastroOficio panelsituacao"/>
                            </h:selectBooleanCheckbox>

                            <h:outputText value="Nº do Protocolo: "/>
                            <p:inputText id="protocoloOficio"
                                         value="#{cadastroEconomicoControlador.selecionado.protocoloOficio}"
                                         title="Informe o Número do Protocolo do Ofício"
                                         disabled="#{!cadastroEconomicoControlador.cadastroDeOficio}" size="20"/>

                            <h:outputText value="Ato Legal do Ofício: "/>
                            <p:autoComplete queryDelay="1000"
                                            converter="#{cadastroEconomicoControlador.converterOficio}"
                                            completeMethod="#{cadastroEconomicoControlador.completaOficios}"
                                            value="#{cadastroEconomicoControlador.selecionado.oficio}"
                                            itemValue="#{ato}"
                                            itemLabel="#{ato}"
                                            var="ato"/>
                        </h:panelGrid>
                    </p:panel>
                    <br/>
                    <p:panel header="Situação Cadastral" id="panelsituacao">
                        <h:panelGrid columns="2" id="gridsituacao">
                            <h:outputText value="Situação Cadastral: "/>
                            <h:selectOneMenu title="Digite a Situação Cadastral do C.M.C."
                                             disabled="#{!cadastroEconomicoControlador.cadastroDeOficio}"
                                             value="#{cadastroEconomicoControlador.situacaoCadastroEconomico.situacaoCadastral}"
                                             id="situacaoCadastral">
                                <f:selectItems value="#{cadastroEconomicoControlador.situacaoCadastral}"/>
                            </h:selectOneMenu>
                            <h:outputText value="Data: "/>
                            <p:calendar pattern="dd/MM/yyyy" navigator="true"
                                        disabled="#{!cadastroEconomicoControlador.cadastroDeOficio}"
                                        title="Digite a data da alteraçao"
                                        id="datasituacao"
                                        value="#{cadastroEconomicoControlador.situacaoCadastroEconomico.dataAlteracao}"/>
                        </h:panelGrid>
                        <p:commandButton id="botaoGravarOficio" value="Adicionar" icon="ui-icon-circle-arrow-s"
                                         update=":Formulario:panelsituacao" styleClass="operacao mbot05"
                                         disabled="#{!cadastroEconomicoControlador.cadastroDeOficio}"
                                         action="#{cadastroEconomicoControlador.adicionarSituacaoCadastroEconomico}"/>

                        <p:tabView>
                            <p:tab title="Situação Atual">
                                <p:dataTable var="sit"
                                             id="tabelasituacaoAtual"
                                             value="#{cadastroEconomicoControlador.ultimaSiuacao}"
                                             emptyMessage="Nenhum registro encontrado">
                                    <p:column headerText="Situação Cadastral">
                                        <h:outputText value="#{sit.situacaoCadastral.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Data da Última Situação">
                                        <h:outputText value="#{sit.dataAlteracao}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Ações" style="width: 50px; text-align: center">
                                        <p:commandButton id="botaoRemoverSituacao" icon="ui-icon-trash"
                                                         title="Pressione este botão para remover o registro"
                                                         actionListener="#{cadastroEconomicoControlador.removerSituacaoCadastroEconomico(sit)}"
                                                         update="tabelasituacaoAtual"
                                                         disabled="#{!cadastroEconomicoControlador.cadastroDeOficio}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="Histórico de Alteração(ões) de Situação(ões)">
                                <p:dataTable var="certidao" id="tabelasituacoes"
                                             emptyMessage="Nenhum registro encontrado"
                                             value="#{cadastroEconomicoControlador.certidaoAtividadeBCE}">
                                    <p:column headerText="Situação Cadastral">
                                        <h:outputText value="#{certidao.situacao}"/>
                                    </p:column>
                                    <p:column headerText="Data">
                                        <h:outputText value="#{certidao.dataCadastro}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Usuário">
                                        <h:outputText value="#{certidao.operador.login}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                        </p:tabView>
                    </p:panel>
                    <br/>
                </p:outputPanel>
            </p:panel>
            <br/>
            <p:commandButton title="Clique para Salvar" id="salvar"
                             value="#{cadastroEconomicoControlador.nomeBotaoSalvar}"
                             actionListener="#{cadastroEconomicoControlador.salvar()}"
                             onclick="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             styleClass="operacao prioritario" icon="ui-icon-disk"/>
            <p:commandButton title="Clique para Cancelar" id="cancelar"
                             actionListener="#{cadastroEconomicoControlador.cancelar}" value="Cancelar" ajax="false"
                             immediate="true"
                             styleClass="operacao" icon="ui-icon-cancel"/>
            <p:dialog modal="true" widgetVar="statusDialog" header="Carregando ...."
                      draggable="false" closable="false" resizable="true">
                <p:graphicImage value="/img/ajaxloadingbar.gif"/>
            </p:dialog>
        </h:form>
        <p:dialog widgetVar="dialogServico" modal="true" id="dialogServicoDlg" width="1000"
                  header="Pesquisa de Seviços">
            <h:form id="formularioDialogServico">
                <p:panel header="Filtros">
                    <h:panelGrid columns="5">
                        <h:outputLabel value="Código" for="servico_codigo"/>
                        <p:inputText id="servico_codigo"
                                     value="#{cadastroEconomicoControlador.servicoFiltro.codigo}"/>
                        <h:outputLabel value="Nome" for="servico_nome"/>
                        <p:inputText id="servico_nome" value="#{cadastroEconomicoControlador.servicoFiltro.nome}"
                                     size="70"/>
                        <p:commandButton value="Filtrar" styleClass="operacao" icon="ui-icon-search"
                                         actionListener="#{cadastroEconomicoControlador.filtrarServicos}"
                                         update="tabelaID"/>
                    </h:panelGrid>
                </p:panel>

                <p:dataTable id="tabelaID" var="objeto" styleClass="mtop05"
                             value="#{cadastroEconomicoControlador.listaServicos}"
                             paginator="true" rows="10"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="10,50,100"
                             widgetVar="tabela">


                    <p:column headerText="Adicionar" style="width: 10%; text-align: center;">
                        <p:commandButton icon="ui-icon-circle-plus" title="Clique para adicionar"
                                         update="@form, :Formulario"
                                         oncomplete="dialogServico.hide()"
                                         actionListener="#{cadastroEconomicoControlador.adicionarServico(objeto)}"/>
                    </p:column>
                    <p:column headerText="Código" style="width: 10%">
                        <h:outputText value="#{objeto.codigo}"/>
                    </p:column>
                    <p:column headerText="Descrição">
                        <h:outputText value="#{objeto.nome}"/>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dialogoHorarioFuncionamento"
                  header="Horários de Funcionamento"
                  modal="true"
                  id="dialogoHorarioFuncionamentoDlg"
                  width="1000"
                  height="600"
                  resizable="false">
            <h:form id="formHorarioFuncionamento">
                <p:dataTable id="tabela"
                             var="objeto"
                             value="#{cadastroEconomicoControlador.horarios}">
                    <p:column style="width: 5%">
                        <p:rowToggler/>
                    </p:column>
                    <p:column headerText="Visualizar" style="text-align: center;">
                        <p:commandButton icon="ui-icon-circle-plus"
                                         styleClass="botao-transparente"
                                         onclick="dialogoHorarioFuncionamento.hide(); aguarde.show()"
                                         value="Adicionar"
                                         oncomplete="aguarde.hide()" update=":Formulario"
                                         actionListener="#{cadastroEconomicoControlador.selecionarHorario(objeto)}"/>
                    </p:column>
                    <p:column headerText="Código"
                              style="width: 5%">
                        <h:outputText value="#{objeto.codigo}"/>
                    </p:column>
                    <p:column headerText="Descrição">
                        <h:outputText value="#{objeto.descricao}"/>
                    </p:column>
                    <p:rowExpansion>
                        <p:dataTable id="tabelaexp"
                                     value="#{objeto.itens}"
                                     var="item"
                                     style="width: 100%"
                                     emptyMessage="Nenhum item adicionado">
                            <p:column headerText="Dia (Entrada)">
                                <h:outputText value="#{item.diaEntrada.descricao}"/>
                            </p:column>
                            <p:column headerText="Entrada">
                                <h:outputText value="#{item.horarioEntrada}">
                                    <f:convertDateTime pattern="HH:mm"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Dia (Saída)">
                                <h:outputText value="#{item.diaSaida.descricao}"/>
                            </p:column>
                            <p:column headerText="Saída">
                                <h:outputText value="#{item.horarioSaida}">
                                    <f:convertDateTime pattern="HH:mm"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </p:rowExpansion>
                </p:dataTable>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
