<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form>
            <fc:cabecalhoPretty auditavel="#{true}" id="cabecalhoVer"
                                origem="#{contaBancariaEntidadeControlador}listar/"
                                controlador="#{contaBancariaEntidadeControlador}"/>

            <p:panel header="Detalhes da Conta Bancária">
                <p:tabView styleClass="mtop05">
                    <p:tab title="Conta Bancária">
                        <h:panelGrid columns="2" cellpadding="2">

                            <h:outputText value="Banco: "/>
                            <h:outputText value="#{contaBancariaEntidadeControlador.banco}"
                                          styleClass="negrito"/>

                            <h:outputText value="Agência: "/>
                            <h:outputText value="#{contaBancariaEntidadeControlador.selecionado.agencia}"
                                          styleClass="negrito"/>

                            <h:outputText value="Operação: "/>
                            <h:outputText id="operacao"
                                          converterMessage="Campo operação deve ser numérico."
                                          styleClass="negrito"
                                          value="#{contaBancariaEntidadeControlador.selecionado.contaBancaria}"/>

                            <h:outputText value="Tipo de Conta: "/>
                            <h:outputText
                                value="#{contaBancariaEntidadeControlador.selecionado.modalidadeConta.descricao}"
                                styleClass="negrito"/>

                            <h:outputText value="Número da Conta: "/>
                            <h:outputText
                                value="#{contaBancariaEntidadeControlador.selecionado.numeroContaComDigitoVerificador}"
                                styleClass="negrito"/>

                            <h:outputText value="Descrição da Conta: "/>
                            <h:outputText value="#{contaBancariaEntidadeControlador.selecionado.nomeConta}"
                                          styleClass="negrito"/>

                            <h:outputText value="Tipo de Conta Bancária: "/>
                            <h:outputText
                                value="#{contaBancariaEntidadeControlador.selecionado.tipoContaBancaria.descricao}"
                                styleClass="negrito"/>

                            <h:outputText value="Data de Abertura: "/>
                            <h:outputText value="#{contaBancariaEntidadeControlador.selecionado.dataAbertura}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputText value="Data de Encerramento: "/>
                            <h:outputText value="#{contaBancariaEntidadeControlador.selecionado.dataEncerramento}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputText value="Entidade: "/>
                            <h:outputText value="#{contaBancariaEntidadeControlador.selecionado.entidade.nome}"
                                          styleClass="negrito"/>

                            <h:outputText value="Número do Convênio: "/>
                            <h:outputText value="#{contaBancariaEntidadeControlador.selecionado.codigoDoConvenio}"
                                          styleClass="negrito"/>

                            <h:outputText value="Carteira Cedente: "/>
                            <h:panelGroup>
                                <h:outputText value="#{contaBancariaEntidadeControlador.selecionado.carteiraCedente}"
                                              styleClass="negrito"
                                              disabled="#{!contaBancariaEntidadeControlador.bancoDoBrasil}"/>
                                <fc:botaoInformacao id="carteiracedenteinfo"
                                                    detalhes="Campo exclusivo para Banco do Brasil"
                                                    title="Campo exclusivo para Banco do Brasil"/>
                            </h:panelGroup>

                            <h:outputText value="Numero Carterira Cobrança: "/>
                            <h:panelGroup>
                                <h:outputText styleClass="negrito"
                                              value="#{contaBancariaEntidadeControlador.selecionado.numeroCarteiraCobranca}"
                                              disabled="#{!contaBancariaEntidadeControlador.bancoDoBrasil}"/>
                                <fc:botaoInformacao id="numerocarteiracobrancainfo"
                                                    detalhes="Campo exclusivo para Banco do Brasil"
                                                    title="Campo exclusivo para Banco do Brasil"/>
                            </h:panelGroup>

                            <h:outputText value="Variação Carteira Cobrança: "/>
                            <h:panelGroup>
                                <h:outputText styleClass="negrito"
                                              value="#{contaBancariaEntidadeControlador.selecionado.variacaoCarteiraCobranca}"
                                              disabled="#{!contaBancariaEntidadeControlador.bancoDoBrasil}"/>
                                <fc:botaoInformacao id="variacaocarteiracobrancainfo"
                                                    detalhes="Campo exclusivo para Banco do Brasil"
                                                    title="Campo exclusivo para Banco do Brasil"/>
                            </h:panelGroup>

                            <h:outputText value="Parâmetro de Transmissão: "/>
                            <h:panelGroup>
                                <h:outputText maxlength="2" styleClass="negrito"
                                              disabled="#{!contaBancariaEntidadeControlador.caixaEconomica}"
                                              value="#{contaBancariaEntidadeControlador.selecionado.parametroTransmissao}"/>
                                <fc:botaoInformacao id="info-param-transmissao"
                                                    detalhes="Campo exclusivo para Caixa Econômica, quando não preenchido o valor default será: 02"
                                                    title="Campo exclusivo para Caixa Econômica, quando não preenchido o valor default será: 02"/>
                            </h:panelGroup>

                            <h:outputText value="Densidade: "/>
                            <h:panelGroup>
                                <h:outputText maxlength="5" styleClass="negrito"
                                              disabled="#{!contaBancariaEntidadeControlador.caixaEconomica and !contaBancariaEntidadeControlador.bradesco}"
                                              value="#{contaBancariaEntidadeControlador.selecionado.densidade}"/>
                                <fc:botaoInformacao id="info-densidade"
                                                    detalhes="Campo exclusivo para Caixa Econômica e para o Bradesco, quando não preenchido o valor default será: 00000"
                                                    title="Campo exclusivo para Caixa Econômica e para o Bradesco, quando não preenchido o valor default será: 00000"/>
                            </h:panelGroup>

                            <h:outputText value="Câmara de Compensação: "/>
                            <h:panelGroup>
                                <h:outputText maxlength="3" styleClass="negrito"
                                              disabled="#{!contaBancariaEntidadeControlador.caixaEconomica}"
                                              value="#{contaBancariaEntidadeControlador.selecionado.camaraCompensacao}"/>
                                <fc:botaoInformacao id="info-camara-compesasao"
                                                    detalhes="Campo exclusivo para Caixa Econômica, quando não preenchido o valor default será: 000"
                                                    title="Campo exclusivo para Caixa Econômica, quando não preenchido o valor default será: 000"/>
                            </h:panelGroup>

                            <h:outputText value="Tipo de Compromisso: "/>
                            <h:panelGroup>
                                <h:outputText maxlength="2" styleClass="negrito"
                                              disabled="#{!contaBancariaEntidadeControlador.caixaEconomica}"
                                              value="#{contaBancariaEntidadeControlador.selecionado.tipoDeCompromisso}"/>
                                <fc:botaoInformacao id="info-tipo-compromisso"
                                                    detalhes="Campo exclusivo para a Caixa Econômica, quando não preenchido o valor default será: 02"
                                                    title="Campo exclusivo para a Caixa Econômica, quando não preenchido o valor default será: 02"/>
                            </h:panelGroup>

                            <h:outputText value="Código do Compromisso: "/>
                            <h:panelGroup>
                                <h:outputText maxlength="4" styleClass="negrito"
                                              disabled="#{!contaBancariaEntidadeControlador.caixaEconomica}"
                                              value="#{contaBancariaEntidadeControlador.selecionado.codigoDoCompromisso}"/>
                                <fc:botaoInformacao id="info-codigo-compromisso"
                                                    detalhes="Campo exclusivo para a Caixa Econômica, quando não preenchido o valor default será: 0001"
                                                    title="Campo exclusivo para a Caixa Econômica, quando não preenchido o valor default será: 0001"/>
                            </h:panelGroup>

                            <h:outputText value="Número da Versão do Layout do Lote: "/>
                            <h:panelGroup>
                                <h:outputText maxlength="3" styleClass="negrito"
                                              disabled="#{!contaBancariaEntidadeControlador.bradesco}"
                                              value="#{contaBancariaEntidadeControlador.selecionado.versaoLayoutLoteCreditoSalario}"/>
                                <fc:botaoInformacao id="info-versaoLayoutLoteCreditoSalario"
                                                    detalhes="Campo exclusivo para o Bradesco, é utilizado para preencher
                                                    o campo  versão do layout do arquivo de crédito salário"
                                                    title="Campo exclusivo para o Bradesco, é utilizado para preencher
                                                    o campo  versão do layout do arquivo de crédito salário"/>
                            </h:panelGroup>

                            <h:outputText value="Indicativo de Forma de Pagamento do Serviço: "/>
                            <h:panelGroup>
                                <h:outputText maxlength="2" styleClass="negrito"
                                              disabled="#{!contaBancariaEntidadeControlador.bradesco}"
                                              value="#{contaBancariaEntidadeControlador.selecionado.indicativoFormaPagamentoServ}"/>
                                <fc:botaoInformacao id="info-indicativoFormaPagamentoServ"
                                                    detalhes="Campo exclusivo para o Bradesco, é utilizado para preencher
                                                    o campo Indicativo de Forma de Pagamento do Serviço do arquivo de crédito salário"
                                                    title="Campo exclusivo para o Bradesco, é utilizado para preencher
                                                    o campo Indicativo de Forma de Pagamento do Serviço do arquivo de crédito salário"/>
                            </h:panelGroup>


                            <h:outputText value="Situação: "/>
                            <h:outputText value="#{contaBancariaEntidadeControlador.selecionado.situacao.descricao}"
                                          styleClass="negrito"/>

                            <h:outputText value="Observação: "/>
                            <h:outputText value="#{contaBancariaEntidadeControlador.selecionado.observacao}"
                                          styleClass="negrito"/>

                            <h:outputText value="Conta Principal Folha de Pagamentos "/>
                            <h:outputText
                                value="#{contaBancariaEntidadeControlador.selecionado.contaPrincipalFP ? 'Sim' : 'Não'}"
                                styleClass="negrito"/>
                        </h:panelGrid>
                    </p:tab>

                    <p:tab title="Conta Financeira"
                           rendered="#{contaBancariaEntidadeControlador.liberaTabContaFinanceira()}">
                        <p:dataTable id="tableSubcontas"
                                     value="#{contaBancariaEntidadeControlador.selecionado.subContas}"
                                     var="sub"
                                     styleClass="mtop02"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>Contas Financeiras&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Detalhes" style="width: 70px; text-align: center">
                                <p:rowToggler/>
                            </p:column>
                            <p:column headerText="Conta Financeira">
                                <h:outputText value="#{sub}"/>
                            </p:column>
                            <p:column headerText="Tipo de Conta Financeira" style="text-align: center">
                                <h:outputText value="#{sub.tipoContaFinanceira.descricao}"/>
                            </p:column>
                            <p:column headerText="Tipo de Recurso" style="text-align: center">
                                <h:outputText value="#{sub.tipoRecursoSubConta.descricao}"/>
                            </p:column>
                            <p:column headerText="Conta Vinculada" style="text-align: center">
                                <h:outputText value="#{sub.contaVinculada}"/>
                            </p:column>

                            <p:rowExpansion>
                                <br/>
                                <h:outputText value="Conta Bancária: "/>
                                <h:outputText value="#{sub.contaBancariaEntidade}"
                                              styleClass="negrito"
                                              style="font-size: 12px"/>


                                <p:scrollPanel mode="native" style="min-height: 10px; border: 0px" styleClass="mtop05">
                                    <table class="table table-hover table-condensed">
                                        <tr>
                                            <th class="alinhamentoEsquerda">
                                                <h:outputLabel value="Unidade Organizacional"/>
                                            </th>
                                            <th class="alinhamentoDireita">
                                                <h:outputLabel value="Exercício"/>
                                            </th>
                                        </tr>

                                        <ui:repeat
                                            value="#{contaBancariaEntidadeControlador.unidadesOrganizacionais(sub)}"
                                            var="unid">
                                            <tr>
                                                <td>
                                                    <h:outputText value="#{unid.unidadeOrganizacional}"/>
                                                </td>
                                                <td class="alinhamentoDireita">
                                                    <h:outputText value="#{unid.exercicio.ano}"/>
                                                </td>
                                            </tr>
                                        </ui:repeat>
                                    </table>

                                    <br/>
                                    <table class="table table-hover table-condensed">
                                        <tr>
                                            <th class="alinhamentoEsquerda">
                                                <h:outputLabel value="Conta de Destinação de Recurso"/>
                                            </th>
                                            <th class="alinhamentoDireita">
                                                <h:outputLabel value="Exercício"/>
                                            </th>
                                        </tr>

                                        <ui:repeat
                                            var="fonte"
                                            value="#{contaBancariaEntidadeControlador.fontesRecurso(sub)}">
                                            <tr>
                                                <td>
                                                    <h:outputText value="#{fonte.contaDeDestinacao}"/>
                                                </td>
                                                <td class="alinhamentoDireita">
                                                    <h:outputText value="#{fonte.contaDeDestinacao.exercicio.ano}"/>
                                                </td>
                                            </tr>
                                        </ui:repeat>
                                    </table>
                                </p:scrollPanel>
                                <br/>
                            </p:rowExpansion>
                        </p:dataTable>
                    </p:tab>
                </p:tabView>
            </p:panel>

            <fc:rodapeVisualizarPretty id="rodapeVisualizar"
                                       controlador="#{contaBancariaEntidadeControlador}"/>
        </h:form>
    </ui:define>
</ui:composition>
</html>
