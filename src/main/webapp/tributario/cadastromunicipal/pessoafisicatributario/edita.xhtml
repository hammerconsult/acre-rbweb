<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui">
<ui:composition id="compositon" template="/corpo.xhtml">
    <ui:define id="define" name="body">

        <h:form id="Formulario">
            <p:panel id="painelPrincipal" header="Cadastro de Pessoa Física">
                <table style="width: 100%">
                    <tr>
                        <td>
                            <h:panelGrid id="painelGrid" columns="2">
                                <fc:outputLabelObrigatorio value="Nome: " id="oNome"/>
                                <p:inputText title="Digite o nome da Pessoa"
                                             value="#{pessoaTributarioControlador.selecionado.nome}"
                                             styleClass="maiusculo"
                                             id="iNome" maxlength="70" size="70"/>

                                <h:outputText value="Nome Tratamento/Social:" id="oNomeTratamento"/>
                                <p:inputText title="Digite o nome de tratamento da Pessoa"
                                             value="#{pessoaTributarioControlador.selecionado.nomeTratamento}"
                                             id="iNomeTratamento" maxlength="70" size="70"
                                             onkeypress="mascara(this, soNomes)"/>

                                <fc:outputLabelObrigatorio value="Data de Nascimento: " id="oDataNascimento"/>
                                <p:calendar onkeypress="mascara(this, Data)" maxlength="10"
                                            value="#{pessoaTributarioControlador.selecionado.dataNascimento}"
                                            id="iDataNascimento" maxdate="new Date()"
                                            title="Selecione a data de Nascimento"
                                            pattern="dd/MM/yyyy" navigator="true" yearRange="1900"/>

                                <h:outputText value="Sexo: " id="oSexo"/>
                                <h:selectOneMenu title="Selecione o sexo"
                                                 value="#{pessoaTributarioControlador.selecionado.sexo}"
                                                 id="iSexo">
                                    <f:selectItems id="selectIte" value="#{pessoaTributarioControlador.sexo}"/>
                                </h:selectOneMenu>

                                <fc:outputLabelObrigatorio value="CPF: " id="oCPF"/>
                                <p:inputMask mask="999.999.999-99" title="Digite o CPF"
                                             readonly="#{!pessoaTributarioControlador.isOperacaoNovo()}"
                                             value="#{pessoaTributarioControlador.selecionado.cpf}"
                                             id="iCPF" maxlength="20" size="20">
                                    <p:ajax event="blur" process="@this"
                                            listener="#{pessoaTributarioControlador.validarCpf()}"/>
                                </p:inputMask>

                                <fc:outputLabelObrigatorio value="Email: " id="oEmail"/>
                                <p:inputText title="Digite o email da Pessoa" style="text-transform: lowercase"
                                             onkeyup="minuscula(this)"
                                             value="#{pessoaTributarioControlador.selecionado.email}"
                                             id="iEmail" maxlength="70" size="70"/>

                                <h:outputText value="Home Page: " id="oHomePage"/>
                                <p:inputText title="Digite a home page da Pessoa"
                                             style="text-transform: lowercase"
                                             onkeyup="minuscula(this)"
                                             value="#{pessoaTributarioControlador.selecionado.homePage}"
                                             id="iHomePage" maxlength="70" size="70"/>

                                <h:outputText value="Nível de Escolaridade: " id="oNivelEscolaridade"/>
                                <h:selectOneMenu title="Selecione um nivelEscolaridade"
                                                 value="#{pessoaTributarioControlador.selecionado.nivelEscolaridade}"
                                                 id="iNivelEscolaridade"
                                                 converter="#{pessoaTributarioControlador.converterNivelEscolaridade}">
                                    <f:selectItems value="#{pessoaTributarioControlador.nivelEscolaridade}"/>
                                </h:selectOneMenu>

                                <h:outputText value="Situação Cadastral: " id="oSituacaoCadastral"/>
                                <h:selectOneMenu title="Selecione uma situação cadastral"
                                                 value="#{pessoaTributarioControlador.selecionado.situacaoCadastralPessoa}"
                                                 id="iSituacaoCadastral"
                                                 disabled="true">
                                    <f:selectItems value="#{pessoaTributarioControlador.situacaoCadastral}"/>
                                </h:selectOneMenu>

                                <h:outputText value="Profissão: "/>
                                <h:selectOneMenu title="Selecione a Profissão da Pessoa"
                                                 converter="#{pessoaTributarioControlador.converterProfissao}"
                                                 value="#{pessoaTributarioControlador.selecionado.profissao}">
                                    <f:selectItems value="#{pessoaTributarioControlador.listaServico()}"/>
                                </h:selectOneMenu>
                                <fc:outputLabelObrigatorio value="Nome da Mãe: " id="oNomeMae"/>
                                <p:inputText title="Digite o nome da Mãe"
                                             value="#{pessoaTributarioControlador.selecionado.mae}"
                                             styleClass="maiusculo"
                                             maxlength="45" size="70"/>
                                <h:outputText value="Nome do Pai: " id="nomePai"/>
                                <p:inputText title="Digite o nome da Mãe"
                                             value="#{pessoaTributarioControlador.selecionado.pai}"
                                             styleClass="maiusculo"
                                             maxlength="45" size="70"/>
                            </h:panelGrid>
                        </td>
                        <td>
                            <div style="text-align: center">
                                <h:panelGrid id="pFoto"
                                             style="float : right; text-align: center;"
                                             columns="1">
                                    <p:graphicImage value="/css/images/semfoto.jpg"
                                                    id="oSemFoto"
                                                    width="110"
                                                    rendered="#{pessoaTributarioControlador.mostraImagem()}"
                                                    height="150"
                                                    style="height: 150px; text-align: center; border : solid #666 1px;"/>

                                    <p:graphicImage
                                        value="#{facesContext.externalContext.sessionMap.get('imagem-foto')}"
                                        id="oFotoUpload"
                                        rendered="#{!pessoaTributarioControlador.mostraImagem()}"
                                        width="110"
                                        height="150"
                                        style="height: 150px; text-align: center; border : solid #666 1px;"/>


                                    <p:fileUpload fileUploadListener="#{pessoaTributarioControlador.uploadArquivo}"
                                                  update=":Formulario:pFoto"
                                                  process=":Formulario:pFoto"
                                                  cancelLabel="Cancelar"
                                                  auto="true"
                                                  uploadLabel="Enviar"
                                                  label="Selecionar"
                                                  sizeLimit="15728640"
                                                  id="iBotaoUpload"
                                                  invalidFileMessage="O tipo de arquivo inválido">
                                    </p:fileUpload>
                                </h:panelGrid>

                            </div>
                        </td>
                    </tr>
                </table>
                <br/>
                <p:tabView id="tvCadPFTributario" orientation="top">
                    <p:tab title="RG" id="pRg">
                        <h:panelGrid columns="2">
                            <h:outputText id="oNumeroRG" value="Número: "/>
                            <p:inputText value="#{pessoaTributarioControlador.rg.numero}" id="iNumeroRg"
                                         label="numerorg" onkeypress="mascara(this, soNumeros)"/>

                            <h:outputText id="oDataEmissaoRg" value="Data de Emissão: "/>
                            <p:calendar onkeypress="mascara(this, Data)" maxlength="10" id="iDataEmissaoRg"
                                        pattern="dd/MM/yyyy"
                                        value="#{pessoaTributarioControlador.rg.dataemissao}"
                                        navigator="true" yearRange="1900" maxdate="new Date()"/>

                            <h:outputText id="oOrgaoEmissorRg"
                                                       value="Órgão Emissor: "/>
                            <p:inputText id="iOrgaoEmissorRg"
                                         value="#{pessoaTributarioControlador.rg.orgaoEmissao}"/>

                            <h:outputText id="oEstadoRg" value="UF: "/>
                            <h:selectOneMenu id="iEstadoRg" value="#{pessoaTributarioControlador.rg.uf}"
                                             converter="#{pessoaTributarioControlador.converterUf}">
                                <f:selectItems value="#{pessoaTributarioControlador.estados}" id="estados"/>
                            </h:selectOneMenu>
                        </h:panelGrid>
                    </p:tab>
                    <p:tab id="pHabilitacao" title="CNH">
                        <h:panelGrid columns="2" id="gridHabi">
                            <fc:outputLabelObrigatorio value="Número: "/>
                            <p:inputText id="numeroHabilitacao"
                                         value="#{pessoaTributarioControlador.habilitacao.numero}"/>
                            <fc:outputLabelObrigatorio value="Categoria: "/>
                            <h:selectOneMenu id="categoria"
                                             value="#{pessoaTributarioControlador.habilitacao.categoria}">
                                <f:selectItems value="#{pessoaTributarioControlador.categoriasHabilitacao}"
                                               id="categorias"/>
                            </h:selectOneMenu>
                            <fc:outputLabelObrigatorio value="Validade: "/>
                            <p:calendar onkeypress="mascara(this, Data)" maxlength="10" id="validade"
                                        pattern="dd/MM/yyyy"
                                        value="#{pessoaTributarioControlador.habilitacao.validade}"
                                        navigator="true"/>
                        </h:panelGrid>
                        <p:commandButton value="Adicionar"
                                         update="gridHabi tableHabi"
                                         title="Clique para adicionar a habilitação"
                                         actionListener="#{pessoaTributarioControlador.adicionarHabilitacao}"
                                         styleClass="operacao mrig05"
                                         icon="ui-icon-circle-plus"/>

                        <p:commandButton value="Cancelar"
                                         update="gridHabi"
                                         title="Clique para cancelar a habilitação"
                                         actionListener="#{pessoaTributarioControlador.limparHabilitacao}"
                                         styleClass="operacao mrig05" icon="ui-icon-cancel"/>

                        <p:dataTable value="#{pessoaTributarioControlador.habilitacoes}"
                                     id="tableHabi"
                                     var="h"
                                     widgetVar="tabelaHabilitacao"
                                     styleClass="mtop03"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>CNHS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Ações" style="width: 8%; text-align: center">
                                <p:commandButton icon="ui-icon-pencil"
                                                 title="Clique para alterar este registro."
                                                 update="tableHabi :Formulario:tvCadPFTributario:gridHabi"
                                                 process="@this"
                                                 styleClass="mrig05"
                                                 actionListener="#{pessoaTributarioControlador.alterarHabilitacao(h)}"/>

                                <p:commandButton icon="ui-icon-trash"
                                                 styleClass="botao_vermelho icone_branco"
                                                 process="@this"
                                                 title="Clique para remover este registro."
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                 update="tableHabi"
                                                 actionListener="#{pessoaTributarioControlador.removerHabilitacao(h)}">
                                </p:commandButton>
                            </p:column>
                            <p:column headerText="Número">
                                <h:outputText value="#{h.numero}"/>
                            </p:column>
                            <p:column headerText="Categoria">
                                <h:outputText value="#{h.categoria.descricao}"/>
                            </p:column>
                            <p:column headerText="Validade">
                                <h:outputText value="#{h.validade}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Telefones" id="pTelefones">
                        <script type="text/javascript">
                            function validarTelefone(elem) {
                                if (elem.value.toString().length &lt; 14) {
                                    elem.value = '';
                                }
                            }
                        </script>
                        <h:panelGrid columns="2" id="gridFone">
                            <fc:outputLabelObrigatorio value="Telefone: "/>
                            <p:inputText id="inputFone"
                                         onkeydown="mascara(this, mtel)"
                                         title="Informe o número do telefone"
                                         onblur="validarTelefone(this)"
                                         maxlength="15"
                                         value="#{pessoaTributarioControlador.telefone.telefone}"/>

                            <fc:outputLabelObrigatorio value="Tipo: "/>
                            <h:selectOneMenu value="#{pessoaTributarioControlador.telefone.tipoFone}" id="tipoFone">
                                <f:selectItems value="#{pessoaTributarioControlador.tiposFone}"/>
                            </h:selectOneMenu>

                            <h:outputText id="oPessoaContato"
                                          value="Pessoa para Contato: "/>
                            <p:inputText id="iPessoaContato"
                                         value="#{pessoaTributarioControlador.telefone.pessoaContato}"/>

                            <h:outputText value="Telefone Principal: "
                                          rendered="#{pessoaTributarioControlador.habilitarTelefonePrincipal()}"/>
                            <p:selectBooleanCheckbox id="fonePrincipal"
                                                     rendered="#{pessoaTributarioControlador.habilitarTelefonePrincipal()}"
                                                     value="#{pessoaTributarioControlador.telefone.principal}"/>
                        </h:panelGrid>
                        <p:commandButton value="Adicionar" icon="ui-icon-circle-plus"
                                         styleClass="operacao mrig05"
                                         update="fones gridFone"
                                         title="Clique para adicionar o telefone"
                                         process="pTelefones"
                                         actionListener="#{pessoaTributarioControlador.adicionarFone}"/>
                        <p:commandButton value="Cancelar" icon="ui-icon-cancel" styleClass="operacao mrig05"
                                         update="gridFone"
                                         title="Clique para cancelar o telefone"
                                         actionListener="#{pessoaTributarioControlador.limparTelefone}"/>

                        <p:dataTable value="#{pessoaTributarioControlador.selecionado.telefones}"
                                     id="fones"
                                     var="fone"
                                     widgetVar="tabelaFones"
                                     styleClass="mtop03"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>TELEFONES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Ações" style="width: 8%; text-align: center">
                                <p:commandButton icon="ui-icon-pencil"
                                                 title="Clique para alterar este registro."
                                                 update="fones :Formulario:tvCadPFTributario:gridFone"
                                                 process="@this"
                                                 styleClass="mrig05"
                                                 actionListener="#{pessoaTributarioControlador.alterarTelefone(fone)}"/>

                                <p:commandButton icon="ui-icon-trash"
                                                 title="Remover"
                                                 styleClass="botao_vermelho icone_branco"
                                                 update="fones :Formulario:tvCadPFTributario:gridFone"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                 action="Clique para remover este registro."
                                                 process="@this"
                                                 actionListener="#{pessoaTributarioControlador.removeFone}">
                                    <f:attribute name="vfone" id="vfone" value="#{fone}"/>
                                </p:commandButton>
                            </p:column>
                            <p:column headerText="Telefone">
                                <h:outputText value="#{fone.telefone}"/>
                            </p:column>
                            <p:column headerText="Tipo">
                                <h:outputText value="#{fone.tipoFone.tipoFone}"/>
                            </p:column>
                            <p:column headerText="Principal">
                                <h:outputText value="#{fone.principal ? 'Principal' : ''}"/>
                            </p:column>

                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Endereços" id="pEnderecos">
                        <h:outputText
                            value="* Ao informar os campos do endereço o sistema sujere os valores para CEP, Cidade, Bairro e Logradouro. Isso não obriga a seleciona-los."
                            styleClass="textopequeno azul"/>
                        <h:panelGrid columns="2" id="gridEndereco">
                            <fc:outputLabelObrigatorio value="CEP: "/>
                            <h:panelGroup>
                                <p:autoComplete queryDelay="1000" value="#{pessoaTributarioControlador.endereco.cep}"
                                                completeMethod="#{pessoaTributarioControlador.completaCEP}"
                                                var="ce"
                                                id="cepNumero"
                                                itemLabel="#{ce}"
                                                itemValue="#{ce}"
                                                size="25">
                                </p:autoComplete>
                                <p:commandButton title="clique para pesquisar" styleClass="botao_azul icone_branco"
                                                 icon="ui-icon-check"
                                                 actionListener="#{pessoaTributarioControlador.atualizaLogradouros}"
                                                 update="gridEndereco"/>
                            </h:panelGroup>
                            <h:outputText id="oEstado" value="UF: "/>
                            <h:selectOneMenu value="#{pessoaTributarioControlador.endereco.uf}">
                                <f:selectItems value="#{pessoaTributarioControlador.listaUF}"
                                               var="uf" itemLabel="#{uf.nome}" itemValue="#{uf.sigla}"/>
                                <p:ajax update="iCidade" event="change" process="@this"/>
                            </h:selectOneMenu>
                            <fc:outputLabelObrigatorio id="oCidade" value="Cidade: "/>
                            <p:autoComplete queryDelay="1000" value="#{pessoaTributarioControlador.endereco.localidade}"
                                            completeMethod="#{pessoaTributarioControlador.completaCidade}"
                                            var="loc"
                                            id="iCidade"
                                            itemLabel="#{loc}"
                                            itemValue="#{loc}"
                                            size="70">
                                <p:ajax update="iLogradouro" event="blur" process="@this"/>
                            </p:autoComplete>
                            <fc:outputLabelObrigatorio id="oBairro" value="Bairro: "/>
                            <p:autoComplete queryDelay="1000" value="#{pessoaTributarioControlador.endereco.bairro}"
                                            completeMethod="#{pessoaTributarioControlador.completaBairro}"
                                            var="bairro"
                                            id="iBairro"
                                            size="50"
                                            itemLabel="#{bairro}"
                                            itemValue="#{bairro}"/>

                            <fc:outputLabelObrigatorio id="oLogradouro" value="Logradouro: "/>
                            <p:autoComplete queryDelay="1000" value="#{pessoaTributarioControlador.endereco.logradouro}"
                                            completeMethod="#{pessoaTributarioControlador.completaLogradouro}"
                                            var="log"
                                            id="iLogradouro"
                                            itemLabel="#{log}"
                                            itemValue="#{log}"
                                            size="100"/>

                            <h:outputText value="Complemento: "/>
                            <p:inputText value="#{pessoaTributarioControlador.endereco.complemento}"/>

                            <fc:outputLabelObrigatorio value="Número: "/>
                            <p:inputText value="#{pessoaTributarioControlador.endereco.numero}"/>

                            <h:outputText value="Tipo de Endereço: " id="oTipoEndereco"/>
                            <h:selectOneMenu id="iTipoEndereco"
                                             value="#{pessoaTributarioControlador.endereco.tipoEndereco}">
                                <f:selectItems value="#{pessoaTributarioControlador.tiposEnderecos}"/>
                            </h:selectOneMenu>

                            <h:outputText value="Endereço Principal: "
                                          rendered="#{pessoaTributarioControlador.habilitarEnderecoPrincipal()}"/>
                            <p:selectBooleanCheckbox id="endPrincipal"
                                                     rendered="#{pessoaTributarioControlador.habilitarEnderecoPrincipal()}"
                                                     value="#{pessoaTributarioControlador.endereco.principal}"/>
                        </h:panelGrid>

                        <p:commandButton value="Adicionar"
                                         update="gridEndereco enderecos"
                                         process="pEnderecos"
                                         title="Clique para adicionar o endereço"
                                         actionListener="#{pessoaTributarioControlador.adicionarEndereco}"
                                         styleClass="operacao mrig05"
                                         icon="ui-icon-circle-plus"/>
                        <p:commandButton value="Cancelar"
                                         update="gridEndereco"
                                         title="Clique para cancelar o endereço"
                                         actionListener="#{pessoaTributarioControlador.limparEndereco}"
                                         styleClass="operacao mrig05"
                                         icon="ui-icon-cancel"/>

                        <p:dataTable value="#{pessoaTributarioControlador.selecionado.enderecos}"
                                     id="enderecos"
                                     var="ender"
                                     widgetVar="tabelaEnderecos"
                                     styleClass="mtop03"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ENDEREÇOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Ações" style="width: 8%; text-align: center">
                                <p:commandButton icon="ui-icon-pencil"
                                                 title="Clique para alterar este registro."
                                                 update="enderecos :Formulario:tvCadPFTributario:gridEndereco"
                                                 process="@this"
                                                 styleClass="mrig05"
                                                 actionListener="#{pessoaTributarioControlador.alterarEndereco(ender)}"/>

                                <p:commandButton icon="ui-icon-trash"
                                                 title="Clique para remover este registro."
                                                 update="enderecos :Formulario:tvCadPFTributario:gridEndereco"
                                                 process="@this"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                 styleClass="mrig05"
                                                 actionListener="#{pessoaTributarioControlador.removeEndereco}">
                                    <f:attribute name="vendereco" id="vendereco" value="#{ender}"/>
                                </p:commandButton>
                            </p:column>

                            <p:column headerText="Endereço">
                                <h:outputText value="#{ender.enderecoCompleto}"/>
                            </p:column>
                        </p:dataTable>

                    </p:tab>
                    <p:tab title="Dependentes" id="tabDependentes">
                        <h:panelGrid columns="2" id="gridDependentes">
                            <fc:outputLabelObrigatorio value="Grau de Parentesco:"/>
                            <h:selectOneMenu title="Selecione o Grau de Parentesco"
                                             value="#{pessoaTributarioControlador.dependente.grauDeParentesco}"
                                             id="grauDeParentesco"
                                             converter="#{dependenteControlador.converterGrauDeParentesco}"
                                             styleClass="mrig05">
                                <f:selectItems value="#{pessoaTributarioControlador.grausDeParentesco}"/>
                            </h:selectOneMenu>

                            <fc:outputLabelObrigatorio value="Dependente:"/>
                            <p:autoComplete queryDelay="1000" widgetVar="dependente" id="dependente"
                                            title="Digite o nome do Dependente"
                                            value="#{pessoaTributarioControlador.dependente.dependente}"
                                            completeMethod="#{pessoaTributarioControlador.completarDependentes}"
                                            var="dep"
                                            size="70"
                                            itemLabel="#{dep.nome}"
                                            itemValue="#{dep.id}"
                                            forceSelection="true"
                                            converter="#{dependenteControlador.converterDependente}"
                                            styleClass="mrig05">
                            </p:autoComplete>
                        </h:panelGrid>

                        <p:commandButton value="Adicionar" icon="ui-icon-circle-plus"
                                         styleClass="operacao mrig05"
                                         update="dependetes gridDependentes"
                                         title="Clique para adicionar o dependente"
                                         process="tabDependentes"
                                         actionListener="#{pessoaTributarioControlador.adicionarDependente}"/>
                        <p:commandButton value="Cancelar"
                                         icon="ui-icon-cancel"
                                         styleClass="operacao mrig05"
                                         title="Clique para cancelar o dependente"
                                         update="gridDependentes"
                                         actionListener="#{pessoaTributarioControlador.limparDependente}"/>

                        <p:dataTable value="#{pessoaTributarioControlador.selecionado.dependentes}"
                                     id="dependetes"
                                     var="dependente"
                                     widgetVar="tabelaDependentes"
                                     styleClass="mtop03"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>DEPENDENTES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Ações" style="width: 8%; text-align: center">
                                <p:commandButton icon="ui-icon-pencil"
                                                 title="Clique para alterar este registro."
                                                 update="dependetes :Formulario:tvCadPFTributario:gridDependentes"
                                                 process="@this"
                                                 styleClass="mrig05"
                                                 actionListener="#{pessoaTributarioControlador.alterarDependente(dependente)}"/>

                                <p:commandButton icon="ui-icon-trash"
                                                 title="Clique para remover este registro."
                                                 styleClass="botao_vermelho icone_branco"
                                                 update="dependetes"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                 process="@this"
                                                 actionListener="#{pessoaTributarioControlador.removerDependente(dependente)}"/>
                            </p:column>
                            <p:column headerText="Grau de Parentesco">
                                <h:outputText value="#{dependente.grauDeParentesco}"/>
                            </p:column>
                            <p:column headerText="Dependente">
                                <h:outputText value="#{dependente.dependente}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>


                    <p:tab title="Cadastro Econômico">
                        <p:dataTable id="panelcadastroeco"
                                     var="ce"
                                     value="#{pessoaTributarioControlador.cadastroEconomicos}"
                                     emptyMessage="Nenhum registro encontrado.">
                            <p:column headerText="Código">
                                <h:outputText value="#{ce.inscricaoCadastral}"/>
                            </p:column>
                            <p:column headerText="Data Cadastro" style="text-align: center">
                                <h:outputText value="#{ce.dataCadastro}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Situação">
                                <h:outputText
                                    value="#{ce.situacaoAtual.situacaoCadastral.descricao}"/>
                            </p:column>
                            <p:column headerText="Ação" styleClass="centralizado">
                                <p:commandButton value="" id="verCadastro"
                                                 actionListener="#{pessoaTributarioControlador.verCadastroEconomico(ce)}"
                                                 styleClass="mrig05 wp-botao-tabela"
                                                 title="Carrega a página de cadastro econômico"
                                                 icon="ui-icon-person"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Portal do Contribuinte">
                        <p:outputPanel id="portalEmail">
                            <h:panelGrid columns="2" id="gridPortal">
                                <h:outputLabel value="Email para Login:"
                                               rendered="#{pessoaTributarioControlador.desabilitarBotaoAdicionarEmail or pessoaTributarioControlador.desabilitarBotaoAlterarEmail}"/>
                                <p:inputText value="#{pessoaTributarioControlador.usuarioWeb.email}"
                                             rendered="#{pessoaTributarioControlador.desabilitarBotaoAdicionarEmail or pessoaTributarioControlador.desabilitarBotaoAlterarEmail}"
                                             maxlength="200" size="70"/>
                            </h:panelGrid>
                            <p:commandButton value="Criar Usuário Portal"
                                             update=":Formulario :Formulario:tvCadPFTributario:portalEmail"
                                             process=":Formulario :Formulario:tvCadPFTributario:portalEmail"
                                             styleClass="operacao"
                                             icon="ui-icon-plus"
                                             rendered="#{pessoaTributarioControlador.desabilitarBotaoAdicionarEmail}"
                                             disabled="#{!pessoaTributarioControlador.selecionado.isSituacaoCadastralAtivo()}"
                                             actionListener="#{pessoaTributarioControlador.criarUsuarioWeb()}"/>

                            <p:commandButton value="Alterar Usuário Portal"
                                             update=":Formulario :Formulario:tvCadPFTributario:portalEmail"
                                             process=":Formulario :Formulario:tvCadPFTributario:portalEmail"
                                             styleClass="operacao"
                                             icon="ui-icon-check"
                                             rendered="#{pessoaTributarioControlador.desabilitarBotaoAlterarEmail}"
                                             disabled="#{!pessoaTributarioControlador.selecionado.isSituacaoCadastralAtivo()}"
                                             actionListener="#{pessoaTributarioControlador.alterarUsuarioWeb()}"/>

                            <p:dataTable value="#{pessoaTributarioControlador.selecionado.usuariosWeb}"
                                         styleClass="mtop03" id="tablePortal"
                                         var="usuario" emptyMessage="Nenhum usuário cadastrado.">
                                <p:column headerText="Remover Usuário Portal" style="width: 8%; text-align: center"
                                          rendered="false">
                                    <p:commandButton icon="ui-icon-trash"
                                                     styleClass="botao_vermelho icone_branco"
                                                     process=":Formulario:tvCadPFTributario:portalEmail"
                                                     title="Clique para remover este registro."
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     update=":Formulario:tvCadPFTributario:portalEmail"
                                                     actionListener="#{pessoaTributarioControlador.removerEmailPortal(usuario)}">
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Alterar Usuário Portal" style="width: 8%; text-align: center">
                                    <p:commandButton icon="ui-icon-pencil"
                                                     styleClass="botao_vermelho icone_branco"
                                                     process=":Formulario:tvCadPFTributario:portalEmail"
                                                     title="Clique para alterar este registro."
                                                     update=":Formulario:tvCadPFTributario:portalEmail"
                                                     actionListener="#{pessoaTributarioControlador.alterarEmailUsuarioPortalWeb(usuario)}">
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Email" style="text-align: center">
                                    <h:outputText value="#{usuario.email}"/>
                                </p:column>
                                <p:column headerText="Último Acesso" style="text-align: center">
                                    <h:outputText value="#{usuario.ultimoAcesso}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Status" style="text-align: center">
                                    <h:outputText value="#{usuario.activated ? 'Ativo' : 'Inativo'}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Documentos Anexos" id="pDocumentosAnexos">
                        <p:tab title="Anexos">
                            <p:outputPanel id="panel-anexos">
                                <fc:filesUploadWP selecionado="#{pessoaTributarioControlador.selecionado}"/>
                            </p:outputPanel>
                        </p:tab>
                    </p:tab>
                </p:tabView>
            </p:panel>
            <br/>

            <p:commandButton value="Confirmar cadastro e ativar pessoa"
                             id="cbSalvar"
                             styleClass="mtop10 mrig05 prioritario"
                             style="height: 30px"
                             icon="ui-icon-disk"
                             title="Clique para confirmar o cadastro e ativar a pessoa."
                             actionListener="#{pessoaTributarioControlador.salvar()}"
                             rendered="#{pessoaTributarioControlador.selecionado.isSituacaoCadastralAguardandoConfirmacaoCadastro()}"
                             onclick="aguarde.show()"
                             oncomplete="aguarde.hide()"
            />
            <fc:rodapePretty id="rpRodapePretty"
                             controlador="#{pessoaTributarioControlador}"
                             ocultarSalvar="#{pessoaTributarioControlador.selecionado.isSituacaoCadastralAguardandoConfirmacaoCadastro()}"
            />

        </h:form>
        <p:dialog header="Alterando Endereços" widgetVar="dlg" id="janelaEndereco" width="700">
            <h:form id="formEndereco">
                <table>
                    <fc:editaEndereco endereco="#{pessoaTributarioControlador.enderecoAux}"/>
                </table>
                <p:commandButton value="Alterar" update=":Formulario" oncomplete="dlg.hide();"/>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
