<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:tr="http://java.sun.com/jsf/composite/components/tributario"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:h="http://java.sun.com/jsf/html"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <script type="application/javascript">
            function mostrarDialogRedeSim() {
                $('#modalredesim').modal('show');
                let wTotal = window.innerWidth;
                var diferencaW = wTotal * 0.2;
                var aplicarW = ((diferencaW / 2) * 100) / wTotal;
                $("#modalredesim").css("width", (wTotal - diferencaW) + "px");
                $("#modalredesim").css("right", aplicarW + "%");
                $("#modalredesim").css("left", "inherit");
            }


            function mostrarDialogHistoricoRedeSim() {
                $('#modalHistoricoRedeSim').modal('show');
                let wTotal = window.innerWidth;
                var diferencaW = wTotal * 0.2;
                var aplicarW = ((diferencaW / 2) * 100) / wTotal;
                $("#modalHistoricoRedeSim").css("width", (wTotal - diferencaW) + "px");
                $("#modalHistoricoRedeSim").css("right", aplicarW + "%");
                $("#modalHistoricoRedeSim").css("left", "inherit");
            }

            function redimensionarAlturaDialogCnae(id) {
                let info = document.getElementById(id);
                let style = info.style;
                style.overflow = 'auto';
            }
        </script>
        <h:form id="fomularioVisualizar">
            <c:if test="#{pessoaTributarioControlador.isRetroativo()}">
                <div class="alert alert-success centralizado">
                    Você está visualizando os dados retroativos da Pessoa.
                    Esses dados refletem as informações na data de
                    <h:outputLabel value="#{pessoaTributarioControlador.dataRetroativa}" styleClass="negrito">
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </h:outputLabel> e revisão <b>#{pessoaTributarioControlador.idRevisao}</b>.
                </div>
                <br/>
            </c:if>
            <p:panel header="Detalhes da Pessoa Jurídica">
                <br/>
                <c:if test="#{!pessoaTributarioControlador.isRetroativo()}">
                    <div
                        class="alert #{pessoaTributarioControlador.selecionado.ultimaIntegracaoRedeSim ne null ? 'alert-info':''} ">
                        <table style="width: 100%">
                            <tr>
                                <td style="width: 50%">
                                    <h:outputText styleClass="negrito"
                                                  rendered="#{pessoaTributarioControlador.selecionado.ultimaIntegracaoRedeSim eq null}"
                                                  value="Cadastro não sincronizado com a RedeSIM, para sincroniza-lo pressione o botão ao lado."/>
                                    <h:outputText styleClass="negrito"
                                                  rendered="#{pessoaTributarioControlador.selecionado.ultimaIntegracaoRedeSim ne null}"
                                                  value="Sincronizado pela última vez com a RedeSIM em "/>
                                    <h:outputText styleClass="negrito"
                                                  rendered="#{pessoaTributarioControlador.selecionado.ultimaIntegracaoRedeSim ne null}"
                                                  value="#{pessoaTributarioControlador.selecionado.ultimaIntegracaoRedeSim}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                    <h:outputText styleClass="negrito"
                                                  rendered="#{pessoaTributarioControlador.selecionado.ultimaIntegracaoRedeSim ne null}"
                                                  value=", para atualizá-lo pressione o botão ao lado."/>
                                </td>
                                <td style="width: 50%; text-align: right">
                                    <p:commandButton value="Sincronizar com a RedeSim"
                                                     icon="ui-icon-refresh"
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{pessoaTributarioControlador.sincronizarComRedeSim()}"
                                                     styleClass="operacao mbot05"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </c:if>

                <table style="width: 100%">
                    <tr>
                        <td>
                            <h:panelGrid columns="2">
                                <h:outputText id="oRazaoSocial" value="Razão Social:"/>
                                <h:outputText id="iRazaoSocial"
                                              value="#{pessoaTributarioControlador.selecionado.razaoSocial}"
                                              styleClass="negrito"/>

                                <h:outputText id="oNomeFantasia" value="Nome Fantasia:"/>
                                <h:outputText id="iNomeFantasia"
                                              value="#{pessoaTributarioControlador.selecionado.nomeFantasia}"
                                              styleClass="negrito"/>

                                <h:outputText id="oTipoInscricao" value="Tipo de Inscrição"/>
                                <h:outputText id="iTipoInscricao"
                                              value="#{pessoaTributarioControlador.selecionado.tipoInscricao}"
                                              styleClass="negrito"/>

                                <h:outputText id="iCNPJ" value="CNPJ:"/>
                                <h:outputText id="oCNPJ" value="#{pessoaTributarioControlador.selecionado.cnpj}"
                                              styleClass="negrito"/>

                                <h:outputText id="iNatureza" value="Natureza Juridica:"/>
                                <h:outputText id="oNatureza"
                                              value="#{pessoaTributarioControlador.selecionado.naturezaJuridica}"
                                              styleClass="negrito"/>

                                <h:outputText id="oInscricao" value="Inscrição Estadual:"/>
                                <h:outputText id="iIncricao"
                                              value="#{pessoaTributarioControlador.selecionado.inscricaoEstadual}"
                                              styleClass="negrito"/>

                                <h:outputText id="oEmail" value="Email:"/>
                                <h:outputText id="iEmail" value="#{pessoaTributarioControlador.selecionado.email}"
                                              styleClass="negrito"/>

                                <h:outputText id="oSituacaoCadastral" value="Situação Cadastral:"/>
                                <h:outputText id="iSituacaoCadastral"
                                              value="#{pessoaTributarioControlador.selecionado.situacaoCadastralPessoa.descricao}"
                                              styleClass="negrito"/>

                                <h:outputText id="oSimplesNacional" value="Optante Pelo Simples Nacional:"/>
                                <h:outputText id="iSimplesNacional"
                                              value="#{pessoaTributarioControlador.cadastroEconomico.enquadramentoVigente.regimeTributario eq 'SIMPLES_NACIONAL' ? 'Sim':'Não'}"
                                              styleClass="negrito"/>

                                <h:outputText id="oClassePessoa" value="Classe da Pessoa: "/>
                                <h:outputText id="iClassePessoa"
                                              value="#{pessoaTributarioControlador.selecionado.classePessoa.descricao}"
                                              styleClass="negrito"/>

                                <h:outputText value="Profissão: "/>
                                <h:outputText value="#{pessoaTributarioControlador.selecionado.profissao.descricao}"
                                              styleClass="negrito"/>

                                <h:outputText value="Capital Social: "/>
                                <h:outputText value="#{pessoaTributarioControlador.selecionado.capitalSocial}"
                                              styleClass="negrito">
                                    <f:convertNumber pattern="###,###,##0.00"/>
                                </h:outputText>

                                <h:outputText value="Início da Atividade: "/>
                                <h:outputText value="#{pessoaTributarioControlador.selecionado.inicioAtividade}"
                                              styleClass="negrito">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>

                                <h:outputText value="Porte: "/>
                                <h:outputText value="#{pessoaTributarioControlador.selecionado.porte.descricao}"
                                              styleClass="negrito"/>

                                <h:outputText value="Inscrição Municipal: "/>
                                <h:outputText value="#{pessoaTributarioControlador.selecionado.inscricaoMunicipal}"
                                              rendered="#{pessoaTributarioControlador.selecionado.inscricaoMunicipal ne null}"
                                              styleClass="negrito"/>
                            </h:panelGrid>
                        </td>
                        <td>
                            <c:if test="#{!pessoaTributarioControlador.isRetroativo()}">
                                <div style="text-align: center">
                                    <h:panelGrid id="pFoto" rendered="#{!pessoaTributarioControlador.isRetroativo()}"
                                                 style="float : right; text-align: center;"
                                                 columns="1">
                                        <p:graphicImage value="/css/images/semfoto.jpg"
                                                        id="oSemFoto"
                                                        width="110"
                                                        rendered="#{pessoaTributarioControlador.mostraImagem()}"
                                                        height="150"
                                                        style="height: 150px; text-align: center; border : solid #666 1px;"/>

                                        <p:graphicImage
                                            value="#{facesContext.externalContext.sessionMap.get('imagem-foto')}"
                                            id="oFotoUpload"
                                            rendered="#{!pessoaTributarioControlador.mostraImagem()}"
                                            width="110"
                                            height="150"
                                            style="height: 150px; text-align: center; border : solid #666 1px;"/>
                                    </h:panelGrid>
                                </div>
                            </c:if>
                        </td>
                    </tr>
                </table>
                <fc:buscarDadosPessoaReceita value="#{pessoaTributarioControlador.selecionado.cnpj}"
                                             rendered="#{!pessoaTributarioControlador.isRetroativo()}"
                                             id="buscar-receita"/>
                <p:tabView styleClass="mtop05">
                    <p:tab title="Telefones" id="pTelefones">
                        <p:dataTable value="#{pessoaTributarioControlador.selecionado.telefones}"
                                     var="fone" emptyMessage="Nenhum registro cadastrado.">
                            <p:column headerText="Telefone">
                                <h:outputText value="#{fone.telefone}"/>
                            </p:column>
                            <p:column headerText="Tipo de Telefone">
                                <h:outputText value="#{fone.tipoFone.tipoFone}"/>
                            </p:column>
                            <p:column headerText="Principal">
                                <h:outputText value="#{fone.principal ? 'Principal' : ''}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Endereços" id="pEnderecos">
                        <p:dataTable value="#{pessoaTributarioControlador.selecionado.enderecos}"
                                     var="ender" emptyMessage="Nenhum registro cadastrado.">
                            <p:column headerText="Endereço">
                                <h:outputText styleClass="maiusculo" value="#{ender.enderecoCompleto}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Representante Legal" id="pRepresentanteLegal">
                        <p:dataTable value="#{pessoaTributarioControlador.selecionado.representantesLegal}"
                                     var="rl" emptyMessage="Nenhum registro cadastrado.">
                            <p:column headerText="Representante">
                                <h:outputText value="#{rl.representante}"/>
                            </p:column>
                            <p:column headerText="Tipo do Representante">
                                <h:outputText value="#{rl.tipoRepresentanteLegal.descricao}"/>
                            </p:column>
                            <p:column headerText="Início de Vigência">
                                <h:outputText value="#{rl.dataInicio}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Final de Vigência">
                                <h:outputText value="#{rl.dataFim}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Junta Comercial" id="pJuntaComercial">
                        <p:dataTable value="#{pessoaTributarioControlador.selecionado.juntaComercial}"
                                     var="junta" emptyMessage="Nenhum registro cadastrado.">
                            <p:column rendered="#{!pessoaTributarioControlador.isRetroativo()}">
                                <p:rowToggler/>
                            </p:column>
                            <p:column headerText="Número do Protocolo Junta">
                                <h:outputText value="#{junta.numeroProtocoloJuntaComercial}"/>
                            </p:column>
                            <p:column headerText="Número do Protocolo Viabilidade">
                                <h:outputText value="#{junta.numeroProtocoloViabilidade}"/>
                            </p:column>
                            <p:column headerText="Nire">
                                <h:outputText value="#{junta.nire}"/>
                            </p:column>
                            <p:column headerText="Data da Nire">
                                <h:outputText value="#{junta.dataNire}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Número do Processo">
                                <h:outputText value="#{junta.numeroProcesso}"/>
                            </p:column>
                            <p:column headerText="Requerente">
                                <h:outputText value="#{junta.requerente}"/>
                            </p:column>
                            <p:column headerText="Ato">
                                <h:outputText value="#{junta.ato}"/>
                            </p:column>
                            <p:column headerText="Natureza Jurídica">
                                <h:outputText value="#{junta.naturezaJuridica}"/>
                            </p:column>
                            <p:column headerText="Assinado em">
                                <h:outputText value="#{junta.assinadoEm}"/>
                            </p:column>
                            <p:rowExpansion rendered="#{!pessoaTributarioControlador.isRetroativo()}">
                                <p:dataTable value="#{junta.eventosRedeSim}"
                                             emptyMessage="Nenhum evento encontrado."
                                             var="evento">
                                    <f:facet name="header">
                                        <h:outputText value="Eventos Informados pela Rede SIM"/>
                                    </f:facet>
                                    <p:column headerText=" Código">
                                        <h:outputText value="#{evento.codigo}"/>
                                    </p:column>
                                    <p:column headerText="Tipo">
                                        <h:outputText value="#{evento.tipo}"/>
                                    </p:column>
                                    <p:column headerText="Descrição">
                                        <h:outputText value="#{evento.descricao}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:rowExpansion>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Filiais" id="pFilial">
                        <p:dataTable value="#{pessoaTributarioControlador.selecionado.filiais}"
                                     var="filial" emptyMessage="Nenhum registro cadastrado.">
                            <p:column headerText="Filial">
                                <h:outputText value="#{filial.filial}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="CNAE" id="tabCANE">
                        <p:tabView>
                            <p:tab title="Ativos">
                                <p:dataTable emptyMessage="Nenhum registro encontrado"
                                             id="cnaeTabelaVigente"
                                             value="#{pessoaTributarioControlador.cnaesAtivos}"
                                             var="c">
                                    <p:column headerText="CNAE">
                                        <h:outputText value="#{c.cnae.codigoCnae} "/>
                                    </p:column>
                                    <p:column headerText="Descrição Detalhada">
                                        <h:outputText value="#{c.cnae.descricaoDetalhada} "/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Data Inicial">
                                        <h:outputText value="#{c.inicio}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Data Final">
                                        <h:outputText value="#{c.fim}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Tipo">
                                        <h:outputText value="#{c.tipo.descricao}"/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Grau de Risco">
                                        <h:outputText value="#{c.cnae.grauDeRisco.descricao}"/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Situação">
                                        <h:outputText value="#{c.cnae.situacao.descricao}"/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Sanitário">
                                        <h:outputText value="#{c.cnae.fiscalizacaoSanitaria ? 'Sim' : 'Não'}"/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Exercida no Local">
                                        <h:outputText
                                            value="#{c.exercidaNoLocal eq null ? '' : c.exercidaNoLocal ? 'Sim' : 'Não'}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="Inativos">
                                <p:dataTable emptyMessage="Nenhum registro encontrado"
                                             id="cnaeTabelaInativo"
                                             value="#{pessoaTributarioControlador.cnaesInativos}"
                                             var="c">
                                    <p:column headerText="CNAE">
                                        <h:outputText value="#{c.cnae.codigoCnae} "/>
                                    </p:column>
                                    <p:column headerText="Descrição Detalhada">
                                        <h:outputText value="#{c.cnae.descricaoDetalhada} "/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Data Inicial">
                                        <h:outputText value="#{c.inicio}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Data Final">
                                        <h:outputText value="#{c.fim}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Tipo">
                                        <h:outputText value="#{c.tipo.descricao}"/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Situação">
                                        <h:outputText value="#{c.cnae.situacao.descricao}"/>
                                    </p:column>
                                    <p:column style="text-align: center" headerText="Sanitário">
                                        <h:outputText value="#{c.cnae.fiscalizacaoSanitaria ? 'Sim' : 'Não'}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                        </p:tabView>
                    </p:tab>

                    <p:tab title="Horário de Funcionamento">
                        <p:dataTable id="horarios"
                                     value="#{pessoaTributarioControlador.selecionado.horariosFuncionamentoAtivos}"
                                     var="horario"
                                     editable="true"
                                     paginator="true"
                                     rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     rowIndexVar="rowIx"
                                     styleClass="mtop05"
                                     emptyMessage="Nenhum horário de funcionamento informado"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Horários de Funcionamento&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                     rowsPerPageTemplate="10,25,50,100">
                            <p:column style="width: 5px">
                                <p:rowToggler/>
                            </p:column>
                            <p:column headerText="Código">
                                <h:outputText value="#{horario.horarioFuncionamento.codigo}"/>
                            </p:column>
                            <p:column headerText="Descrição">
                                <h:outputText value="#{horario.horarioFuncionamento.descricao}"/>
                            </p:column>
                            <p:column headerText="Ativo">
                                <h:outputText value="#{horario.ativo ? 'Sim' : 'Não'}"/>
                            </p:column>
                            <p:rowExpansion>
                                <p:dataTable value="#{horario.horarioFuncionamento.itens}"
                                             var="item">
                                    <p:column headerText="Dia (Entrada)">
                                        <h:outputText value="#{item.diaEntrada.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Entrada">
                                        <h:outputText value="#{item.horarioEntrada}">
                                            <f:convertDateTime pattern="HH:mm"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Dia (Saída)">
                                        <h:outputText value="#{item.diaSaida.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Saída">
                                        <h:outputText value="#{item.horarioSaida}">
                                            <f:convertDateTime pattern="HH:mm"/>
                                        </h:outputText>
                                    </p:column>
                                </p:dataTable>
                            </p:rowExpansion>
                        </p:dataTable>
                    </p:tab>

                    <p:tab id="tabSocios" title="Sócios">
                        <p:dataTable var="socio" id="tabelasocios" emptyMessage="Nenhum registro encontrado"
                                     value="#{pessoaTributarioControlador.sociedadePessoaJuridica}">
                            <p:column>
                                <p:rowToggler/>
                            </p:column>
                            <p:column headerText="Sócio">
                                <h:outputText value="#{socio.socio}"/>
                            </p:column>
                            <p:column headerText="Proporção (%)" style="text-align: center; width: 10%">
                                <h:outputText value="#{socio.proporcao}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Data Inicial" style="text-align: center">
                                <h:outputText value="#{socio.dataInicio}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Data Final" style="text-align: center">
                                <h:outputText value="#{socio.dataFim}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:rowExpansion>
                                <p:panel header="Informações do Sócio">
                                    <h:panelGrid columns="2" style="width: 20%;">
                                        <h:outputText value="Nire:"/>
                                        <h:outputText value="#{socio.nire}" styleClass="negrito"/>

                                        <h:outputText value="Condição do Sócio:"/>
                                        <h:outputText value="#{socio.condicao}" styleClass="negrito"/>

                                        <h:outputText value="Cargo:"/>
                                        <h:outputText value="#{socio.cargo}" styleClass="negrito"/>

                                        <h:outputText value="Administrador:"/>
                                        <h:outputText value="#{socio.administrador ? 'Sim' : 'Não'}"
                                                      styleClass="negrito"/>
                                    </h:panelGrid>
                                </p:panel>
                            </p:rowExpansion>
                            <f:facet id="rodaPeSocios" name="footer">
                                <h:outputText value="Proporção Total:"/>
                                <h:outputText value="#{pessoaTributarioControlador.totalSocios}"
                                              id="totalSocios"
                                              style="color:#{pessoaTributarioControlador.totalSocios eq 100 ? 'seagreen':'tomato'}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>%
                            </f:facet>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Cadastro Econômico">
                        <p:dataTable id="panelcadastroeco"
                                     var="ce"
                                     value="#{pessoaTributarioControlador.cadastroEconomicos}"
                                     emptyMessage="Nenhum registro encontrado.">
                            <p:column headerText="Código">
                                <h:outputText value="#{ce.inscricaoCadastral}"/>
                            </p:column>
                            <p:column headerText="Data Cadastro" style="text-align: center">
                                <h:outputText value="#{ce.dataCadastro}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Situação">
                                <h:outputText
                                    value="#{ce.situacaoAtual.situacaoCadastral.descricao}"/>
                            </p:column>
                            <p:column headerText="Ação" styleClass="centralizado">
                                <p:commandButton value="" id="verCadastro"
                                                 actionListener="#{pessoaTributarioControlador.verCadastroEconomico(ce)}"
                                                 styleClass="mrig05 wp-botao-tabela"
                                                 title="Carrega a página de cadastro econômico"
                                                 icon="ui-icon-person"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Histórico" id="pHistorico">
                        <p:dataTable value="#{pessoaTributarioControlador.selecionado.historicosIntegracaoRedeSim}"
                                     var="historico"
                                     emptyMessage="Nenhum registro cadastrado.">
                            <p:column headerText="Conteúdo" style="text-align: center; width: 5%">
                                <p:commandButton icon="ui-icon-search"
                                                 styleClass="wp-botao-tabela"
                                                 onclick="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="@this"
                                                 actionListener="#{pessoaTributarioControlador.carregarDadosHistoricoRedeSim(historico)}"/>
                            </p:column>
                            <p:column headerText="Revisão" style="width: 5%; text-align: center">
                                <p:commandButton icon="ui-icon-clock"
                                                 styleClass="botao_azul icone_branco mlef05"
                                                 actionListener="#{pessoaTributarioControlador.exibirRevisaoAuditoria(historico)}"
                                                 ajax="false"
                                                 title="Clique para auditoria desse registro."/>
                            </p:column>
                            <p:column headerText="Data da Alteração" styleClass="alinhamentoCentralizado"
                                      style="width: 12%">
                                <h:outputText value="#{historico.dataAlteracao}">
                                    <f:convertDateTime type="both"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Descrição" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{historico.descricao}"/>
                            </p:column>
                            <p:column headerText="Usuário" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{historico.usuarioSistema.login}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Situações" id="pSituacoes" rendered="#{!pessoaTributarioControlador.isRetroativo()}">
                        <p:dataTable value="#{pessoaTributarioControlador.selecionado.historicoSituacoesPessoa}"
                                     var="situacao" emptyMessage="Nenhum registro cadastrado.">
                            <p:column headerText="Data da Situação">
                                <h:outputText value="#{situacao.dataSituacao}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Situação">
                                <h:outputText value="#{situacao.situacaoCadastralPessoa.descricao}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Portal do Contribuinte" id="pPortal"
                           rendered="#{!pessoaTributarioControlador.isRetroativo()}">
                        <p:dataTable value="#{pessoaTributarioControlador.selecionado.usuariosWeb}"
                                     styleClass="mtop03" id="tablePortal"
                                     var="usuario" emptyMessage="Nenhum usuário cadastrado.">
                            <p:column headerText="Email" style="text-align: center">
                                <h:outputText value="#{usuario.email}"/>
                            </p:column>
                            <p:column headerText="Último Acesso" style="text-align: center">
                                <h:outputText value="#{usuario.ultimoAcesso}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Status" style="text-align: center">
                                <h:outputText value="#{usuario.activated ? 'Ativo' : 'Inativo'}"/>
                            </p:column>
                            <p:column headerText="Enviar Nova Senha do Portal" style="text-align: center">
                                <p:commandButton icon="ui-icon-mail-closed"
                                                 styleClass="wp-botao-tabela"
                                                 onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                                 update="@form" process="@form"
                                                 actionListener="#{pessoaTributarioControlador.enviarNovaSenhaPortal(usuario)}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Documentos Anexos" id="pDocumentosAnexos"
                           rendered="#{!pessoaTributarioControlador.isRetroativo()}">
                        <p:dataTable paginator="true"
                                     id="tabelaItem"
                                     value="#{pessoaTributarioControlador.selecionado.detentorArquivoComposicao.arquivosComposicao}"
                                     rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     rowIndexVar="rowIx"
                                     styleClass="mtop10"
                                     emptyMessage="Não foram localizados registros para serem apresentados"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>ANEXOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                     rowsPerPageTemplate="10,25,50,100"
                                     var="arquivoComposicao">
                            <p:column rendered="#{arquivoComposicao.arquivo.id eq null}"
                                      headerText="Download"
                                      style="width: 5%"
                                      styleClass="alinhamentoCentralizado">
                                <p:commandButton id="downloadLink"
                                                 ajax="false"
                                                 icon="ui-icon-circle-arrow-s"
                                                 process="@form"
                                                 update="@this"
                                                 onstart="aguarde.show();"
                                                 oncomplete="aguarde.hide();">
                                    <p:fileDownload
                                        value="#{assistenteDetentorArquivoControlador.getStream(arquivoComposicao)}"/>
                                </p:commandButton>
                            </p:column>
                            <p:column rendered="#{arquivoComposicao.arquivo.id ne null}" headerText="Download"
                                      styleClass="alinhamentoCentralizado">
                                <a title="Download" target="_blank"
                                   href="${facesContext.externalContext.requestContextPath}/arquivos/#{arquivoComposicao.arquivo.nome}?id=#{arquivoComposicao.arquivo.id}">#{arquivoComposicao.arquivo.nome}</a>
                            </p:column>
                            <p:column headerText="Remover" style="width: 5%; text-align: center"
                                      rendered="#{cc.attrs.isTelaEditar}">
                                <p:commandButton icon="ui-icon-trash"
                                                 update="tabelaItem"
                                                 process="@this"
                                                 actionListener="#{assistenteDetentorArquivoControlador.removerArquivo(arquivoComposicao)}"
                                                 onclick="if(!confirm('Tem certeza que deseja remover este arquivo')) {return false;} else {aguarde.show();}"
                                                 oncomplete="aguarde.hide()"/>
                            </p:column>
                            <p:column headerText="Data do Upload" styleClass="alinhamentoCentralizado"
                                      style="width: 10%">
                                <h:outputText value="#{arquivoComposicao.dataUpload}">
                                    <f:convertDateTime pattern="dd/MM/yy 'às' HH:mm"/>
                                </h:outputText>
                            </p:column>
                            <p:column rendered="#{cc.attrs.isTelaEditar}" headerText="Arquivo"
                                      styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{arquivoComposicao.arquivo.nome}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                </p:tabView>
            </p:panel>
            <fc:rodapeVisualizarPretty id="rvpRodapeVisualizarPretty"
                                       mostrarEditar="#{!pessoaTributarioControlador.isRetroativo()}"
                                       mostrarExcluir="#{!pessoaTributarioControlador.isRetroativo()}"
                                       hrefEditar="../../editarpessoajuridica/#{pessoaTributarioControlador.urlKeyValue}/"
                                       controlador="#{pessoaTributarioControlador}"/>

        </h:form>

        <c:if test="#{!pessoaTributarioControlador.isRetroativo()}">
            <h:form id="FormularioRedeSim">
                <div id="modalredesim"
                     class="modal hide fade" tabindex="-1" role="dialog"
                     aria-hidden="true">
                    <div class="modal-header" style="text-align: center">
                        <div class="centralizado">
                            <h3>Integração com a REDESIM</h3>
                        </div>
                    </div>
                    <div class="modal-body">
                        <p:outputPanel id="areaConteudoRedeSim">
                            <div>
                                <table style="border : solid #d3d3d3 1px; width: 100%;" class="table table-hover">
                                    <tr style="text-align: left; height: 20px; background: #d3d3d3">
                                        <th>Campo</th>
                                        <th>RedeSIM</th>
                                        <th>WebPúblico</th>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Razão Social:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.nome}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.razaoSocial}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Nome Fantasia:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.nomeFantasia}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.nomeFantasia}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>CNPJ:</td>
                                        <td>#{cadastroEconomicoControlador.tratarCnpj(pessoaTributarioControlador.pessoaRedeSim.cnpj)}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.cnpj}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Inscrição Municipal:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.numeroInscricaoMunicipal}</td>
                                        <td>#{pessoaTributarioControlador.cadastroEconomico.inscricaoCadastral}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Inscrição Estadual:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.numeroInscricaoEstadual}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.inscricaoEstadual}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Situação Cadastral:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.descricaoSituacaoRFB}(#{pessoaTributarioControlador.pessoaRedeSim.codigoSituacaoRFB})</td>
                                        <td>#{pessoaTributarioControlador.selecionado.situacaoCadastralPessoa.descricao}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Abertura:</td>
                                        <td>
                                            <h:outputText value="#{pessoaTributarioControlador.pessoaRedeSim.abertura}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText>
                                        </td>
                                        <td>
                                            <h:outputText
                                                value="#{pessoaTributarioControlador.cadastroEconomico ne null
                                                ? pessoaTributarioControlador.cadastroEconomico.abertura
                                                : pessoaTributarioControlador.selecionado.inicioAtividade}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText>
                                        </td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Optante Simples Nacional:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.opcaoSimplesNacional? 'Sim':'Não'}</td>
                                        <td>#{pessoaTributarioControlador.cadastroEconomico.enquadramentoVigente.regimeTributario eq 'SIMPLES_NACIONAL' ? 'Sim':'Não'}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Porte:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.porte.descricao}</td>
                                        <td>#{pessoaTributarioControlador.cadastroEconomico ne null
                                            ? pessoaTributarioControlador.cadastroEconomico.enquadramentoVigente.porte.descricao
                                            : pessoaTributarioControlador.selecionado.porte.descricao}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Natureza Jurídica:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.naturezaJuridica}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.naturezaJuridica}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>MEI:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.mei ? 'Sim': 'Não'}</td>
                                        <td>#{pessoaTributarioControlador.cadastroEconomico.enquadramentoVigente.tipoIssqn eq 'MEI' ? 'Sim': 'Não'}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Capital Social:</td>
                                        <td>
                                            <h:outputText
                                                value="#{pessoaTributarioControlador.pessoaRedeSim.capitalSocial}">
                                                <f:convertNumber pattern="###,###,##0.00"/>
                                            </h:outputText>
                                        </td>
                                        <td>
                                            <h:outputText
                                                value="#{pessoaTributarioControlador.selecionado.capitalSocial}"
                                                converter="converterBigDecimal2Casas"/>
                                        </td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Capital Integralizado:</td>
                                        <td>
                                            <h:outputText
                                                value="#{pessoaTributarioControlador.pessoaRedeSim.capitalIntegralizado}">
                                                <f:convertNumber pattern="###,###,##0.00"/>
                                            </h:outputText>
                                        </td>
                                        <td>
                                            <h:outputText
                                                value="#{pessoaTributarioControlador.selecionado.capitalIntegralizado}">
                                                <f:convertNumber pattern="###,###,##0.00"/>
                                            </h:outputText>
                                        </td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Valor Quota:</td>
                                        <td>
                                            <h:outputText
                                                value="#{pessoaTributarioControlador.pessoaRedeSim.valorQuota}">
                                                <f:convertNumber pattern="###,###,##0.00"/>
                                            </h:outputText>
                                        </td>
                                        <td>
                                            <h:outputText
                                                value="#{pessoaTributarioControlador.selecionado.valorCota}">
                                                <f:convertNumber pattern="###,###,##0.00"/>
                                            </h:outputText>
                                        </td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Área Utilizada:</td>
                                        <td>
                                            <h:outputText
                                                value="#{pessoaTributarioControlador.pessoaRedeSim.areaTotalUtilizada}">
                                                <f:convertNumber pattern="###,##0.00"/>
                                            </h:outputText>
                                        </td>
                                        <td>
                                            <h:outputText
                                                value="#{pessoaTributarioControlador.cadastroEconomico.areaUtilizacao}">
                                                <f:convertNumber pattern="###,##0.00"/>
                                            </h:outputText>
                                        </td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Última Viabilidade Vinculada:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.ultimaViabilidadeVinculada}</td>
                                        <td>#{pessoaTributarioControlador.cadastroEconomico.ultimaViabilidadeVinculada}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Última Viabilidade de Analise de Endereço:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.ultimaViabilidadeAnaliseEndereco}</td>
                                        <td>#{pessoaTributarioControlador.cadastroEconomico.ultimaViabilidadeEndereco}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Última Viabilidade de Analise de Endereço:</td>
                                        <td>
                                            <h:outputText
                                                value="#{pessoaTributarioControlador.pessoaRedeSim.dataUltimaAnaliseEndereco}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText>
                                        </td>
                                        <td>
                                            <h:outputText
                                                value="#{pessoaTributarioControlador.cadastroEconomico.ultimaAnaliseEndereco}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText>
                                        </td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Inscrição Imobiliária:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.inscricaoImobiliaria}</td>
                                        <td>#{pessoaTributarioControlador.cadastroEconomico.cadastroImobiliario}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Email:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.email}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.email}</td>
                                    </tr>
                                    <tr class="centralizado negrito">
                                        <td colspan="3" class="centralizado">Endereço:</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>CEP:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.enderecoCorreio.cep}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.enderecoPrincipal.cep}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>UF:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.enderecoCorreio.uf}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.enderecoPrincipal.uf}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Cidade:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.enderecoCorreio.localidade}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.enderecoPrincipal.localidade}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Bairro:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.enderecoCorreio.bairro}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.enderecoPrincipal.bairro}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Logradouro:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.enderecoCorreio.tipoLogradouro} #{pessoaTributarioControlador.pessoaRedeSim.enderecoCorreio.logradouro}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.enderecoPrincipal.tipoLogradouro.descricao.toUpperCase()} #{pessoaTributarioControlador.selecionado.enderecoPrincipal.logradouro}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Complemento:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.enderecoCorreio.complemento}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.enderecoPrincipal.complemento}</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Numero:</td>
                                        <td>#{pessoaTributarioControlador.pessoaRedeSim.enderecoCorreio.numero}</td>
                                        <td>#{pessoaTributarioControlador.selecionado.enderecoPrincipal.numero}</td>
                                    </tr>
                                    <tr class="centralizado negrito">
                                        <td colspan="3">Telefones:</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td>Número:</td>
                                        <td>
                                            <ui:repeat value="#{pessoaTributarioControlador.pessoaRedeSim.telefones}"
                                                       var="telefone" varStatus="index">
                                                #{index.index > 0? ' / ': ''} #{telefone.telefone}
                                            </ui:repeat>
                                        </td>
                                        <td>
                                            <ui:repeat value="#{pessoaTributarioControlador.selecionado.telefones}"
                                                       var="telefone" varStatus="index">
                                                #{index.index > 0? ' / ': ''} #{telefone}
                                            </ui:repeat>
                                        </td>
                                    </tr>
                                    <tr class="centralizado negrito">
                                        <td colspan="3" class="centralizado">CNAEs:</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td colspan="3">
                                            <table style="width: 100%">
                                                <tr>
                                                    <td class="centralizado">RedeSIM</td>

                                                </tr>
                                                <tr>
                                                    <td valign="top" style="width: 50%">
                                                        <table class="table">
                                                            <ui:repeat
                                                                value="#{pessoaTributarioControlador.pessoaRedeSim.cnaes}"
                                                                var="cnae" varStatus="index">
                                                                <tr>
                                                                    <td>
                                                                        #{cnae.cnae.codigo}
                                                                    </td>
                                                                    <td>
                                                                        #{cnae.cnae.nome}
                                                                    </td>
                                                                    <td>
                                                                        #{cnae.tipoCnae.descricao}
                                                                    </td>
                                                                    <td>
                                                                        Exercida no local:
                                                                        #{cnae.exercidaNoLocal eq null ? '' : cnae.exercidaNoLocal ? 'Sim' : 'Não'}
                                                                    </td>
                                                                </tr>
                                                            </ui:repeat>
                                                        </table>
                                                    </td>

                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td colspan="3">
                                            <table style="width: 100%">
                                                <tr>
                                                    <td class="centralizado">WebPúblico</td>
                                                </tr>
                                                <tr>
                                                    <td valign="top" style="width: 50%">
                                                        <table class="table">
                                                            <ui:repeat
                                                                value="#{pessoaTributarioControlador.cnaesAtivos}"
                                                                var="cnae" varStatus="index">
                                                                <tr>
                                                                    <td>
                                                                        #{cnae.cnae.codigoCnae}
                                                                    </td>
                                                                    <td>
                                                                        #{cnae.cnae.descricaoDetalhada}
                                                                    </td>
                                                                    <td>
                                                                        #{cnae.tipo.descricao}
                                                                    </td>
                                                                    <td>
                                                                        Exercida no local:
                                                                        #{cnae.exercidaNoLocal eq null ? '' : cnae.exercidaNoLocal ? 'Sim' : 'Não'}
                                                                    </td>
                                                                </tr>
                                                            </ui:repeat>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>

                                    <tr class="centralizado negrito">
                                        <td colspan="3" class="centralizado">Horário de Funcionamento:</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td colspan="3">
                                            <table style="width: 100%">
                                                <tr>
                                                    <td class="centralizado">RedeSIM</td>

                                                </tr>
                                                <tr>
                                                    <td valign="top" style="width: 50%">
                                                        <table class="table">
                                                            <tr>
                                                                <td>
                                                                    #{pessoaTributarioControlador.horarioFuncionamentoPessoaDTO.codigo}
                                                                </td>
                                                                <td>
                                                                    #{pessoaTributarioControlador.horarioFuncionamentoPessoaDTO.descricao}
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>

                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td colspan="3">
                                            <table style="width: 100%">
                                                <tr>
                                                    <td class="centralizado">WebPúblico</td>
                                                </tr>
                                                <tr>
                                                    <td valign="top" style="width: 50%">
                                                        <table class="table">
                                                            <ui:repeat
                                                                value="#{pessoaTributarioControlador.horariosFuncionamentoAtivos}"
                                                                var="hfp" varStatus="index">
                                                                <tr>
                                                                    <td>
                                                                        #{hfp.horarioFuncionamento.codigo}
                                                                    </td>
                                                                    <td>
                                                                        #{hfp.horarioFuncionamento.descricao}
                                                                    </td>
                                                                </tr>
                                                            </ui:repeat>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>

                                    <tr class="centralizado negrito">
                                        <td colspan="3" class="centralizado">Sócios:</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td colspan="3">
                                            <table style="width: 100%">
                                                <tr>
                                                    <td class="centralizado">RedeSIM</td>
                                                </tr>
                                                <tr>
                                                    <td valign="top" style="width: 50%">
                                                        <table class="table">
                                                            <ui:repeat
                                                                value="#{pessoaTributarioControlador.pessoaRedeSim.socios}"
                                                                var="socio" varStatus="index">
                                                                <tr>
                                                                    <td>
                                                                        <h:outputText value="#{socio.inicioVigencia}">
                                                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                                        </h:outputText>
                                                                    </td>
                                                                    <td>
                                                                        #{cadastroEconomicoControlador.tratarNomeSocio(socio)}
                                                                    </td>
                                                                </tr>
                                                            </ui:repeat>
                                                        </table>
                                                    </td>

                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td colspan="3">
                                            <table style="width: 100%">
                                                <tr>
                                                    <td class="centralizado">WebPúblico</td>
                                                </tr>
                                                <tr>

                                                    <td valign="top" style="width: 50%">
                                                        <table class="table">
                                                            <ui:repeat
                                                                value="#{pessoaTributarioControlador.sociedadePessoaJuridica}"
                                                                var="socio" varStatus="index">
                                                                <tr>
                                                                    <td>
                                                                        <h:outputText value="#{socio.dataInicio}">
                                                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                                        </h:outputText>

                                                                    </td>
                                                                    <td>
                                                                        #{socio.socio.nome}
                                                                    </td>
                                                                </tr>
                                                            </ui:repeat>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr class="centralizado negrito">
                                        <td colspan="3" class="centralizado">Representantes Legais:</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td colspan="3">
                                            <table style="width: 100%">
                                                <tr>
                                                    <td class="centralizado">RedeSIM</td>
                                                </tr>
                                                <tr>
                                                    <td valign="top" style="width: 50%">
                                                        <table class="table">
                                                            <ui:repeat
                                                                value="#{pessoaTributarioControlador.pessoaRedeSim.representantesLegais}"
                                                                var="representante" varStatus="index">
                                                                <tr>
                                                                    <td>
                                                                        #{representante.nome}
                                                                    </td>
                                                                    <td>
                                                                        #{cadastroEconomicoControlador.tratarCpf(representante.cpf)}
                                                                    </td>

                                                                </tr>
                                                            </ui:repeat>
                                                        </table>
                                                    </td>

                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td colspan="3">
                                            <table style="width: 100%">
                                                <tr>
                                                    <td class="centralizado">WebPúblico</td>
                                                </tr>
                                                <tr>

                                                    <td valign="top" style="width: 50%">
                                                        <table class="table">
                                                            <ui:repeat
                                                                value="#{pessoaTributarioControlador.selecionado.representantesLegal}"
                                                                var="representante" varStatus="index">
                                                                <tr>
                                                                    <td>
                                                                        #{representante.representante.nome}
                                                                    </td>
                                                                    <td>
                                                                        #{representante.representante.cpf_Cnpj}
                                                                    </td>
                                                                </tr>
                                                            </ui:repeat>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr class="centralizado negrito">
                                        <td colspan="3" class="centralizado">Filiais:</td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td colspan="3">
                                            <table style="width: 100%">
                                                <tr>
                                                    <td class="centralizado">RedeSIM</td>
                                                </tr>
                                                <tr>
                                                    <td valign="top" style="width: 50%">
                                                        <table class="table">
                                                            <ui:repeat
                                                                value="#{pessoaTributarioControlador.pessoaRedeSim.filiais}"
                                                                var="filial" varStatus="index">
                                                                <tr>
                                                                    <td>
                                                                        #{cadastroEconomicoControlador.tratarCnpj(filial.cnpj)}
                                                                    </td>
                                                                    <td>
                                                                        #{filial.enderecoCorreio.uf}
                                                                    </td>

                                                                </tr>
                                                            </ui:repeat>
                                                        </table>
                                                    </td>

                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr class="alinhamentoEsquerda">
                                        <td colspan="3">
                                            <table style="width: 100%">
                                                <tr>
                                                    <td class="centralizado">WebPúblico</td>
                                                </tr>
                                                <tr>

                                                    <td valign="top" style="width: 50%">
                                                        <table class="table">
                                                            <ui:repeat
                                                                value="#{pessoaTributarioControlador.selecionado.filiais}"
                                                                var="filial" varStatus="index">
                                                                <tr>
                                                                    <td>
                                                                        #{filial.filial}
                                                                    </td>
                                                                </tr>
                                                            </ui:repeat>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </p:outputPanel>
                    </div>

                    <div class="modal-footer">
                        <p:commandButton value="Atualizar Dados"
                                         id="atualizarDados"
                                         onclick="$('#modalredesim').modal('hide'); aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         icon="ui-icon-check"
                                         styleClass="operacao prioritario"
                                         actionListener="#{pessoaTributarioControlador.confirmarIntegracaoRedeSim()}"/>

                        <p:commandButton icon="ui-icon-cancel" styleClass="operacao" value="Cancelar"
                                         onclick="$('#modalredesim').modal('hide');"/>

                        <p:commandButton value="Imprimir" type="button" id="imprimeRedeSim"
                                         icon="ui-icon-print" styleClass="operacao prioritario">
                            <p:printer target="areaConteudoRedeSim"/>
                        </p:commandButton>
                    </div>
                </div>
            </h:form>
        </c:if>
        <h:form>
            <div id="modalconfirmacaoinsersaocadastro"
                 class="modal hide fade" tabindex="-1" role="dialog"
                 aria-hidden="true">
                <div class="modal-header" style="text-align: center">
                    <div class="centralizado">
                        <h3>Sincronização realizada, Ainda não existe um cadastro econômico vinculado a essa pessoa, deseja criar o cadastro?</h3>
                    </div>
                </div>
                <div class="modal-body centralizado">
                    <p:commandButton value="Sim"
                                     icon="ui-icon-check"
                                     onclick="$('#modalconfirmacaoinsersaocadastro').modal('hide'); aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     styleClass="operacao prioritario"
                                     actionListener="#{pessoaTributarioControlador.integrarRedeSim(true, true)}"/>

                    <p:commandButton icon="ui-icon-cancel" styleClass="operacao" value="Não"
                                     onclick="$('#modalconfirmacaoinsersaocadastro').modal('hide');"
                                     actionListener="#{pessoaTributarioControlador.integrarRedeSim(false, false)}"/>
                </div>
            </div>
        </h:form>

        <p:dialog styleClass="semBorda" position="center"
                  style="max-width: 50%" modal="true"
                  draggable="false" resizable="false" widgetVar="selecionaCnaes"
                  onShow="redimensionarAlturaDialogCnae(this.id)"
                  closable="false">

            <div class="modal-header" style="text-align: center">
                <div class="centralizado">
                    <h:outputText styleClass="negrito" rendered="#{pessoaTributarioControlador.mei}"
                                  value="Selecione os CNAEs para o Cadastro Econômico!"/>
                    <h:outputText styleClass="negrito" rendered="#{!pessoaTributarioControlador.mei}"
                                  value="CNAES do Cadastro Econômico."/>
                </div>
            </div>

            <div class="modal-body centralizado">
                <h:form id="FormularioCnaes">

                    <p:dataTable var="c"
                                 emptyMessage="Nenhum registro encontrado"
                                 id="tabela-cnaes" value="#{pessoaTributarioControlador.cnaesAtivos}">
                        <p:column headerText="Ações" width="30">
                            <p:commandButton icon="ui-icon-check"
                                             styleClass="vinteLarguraVinteAltura"
                                             rendered="#{pessoaTributarioControlador.contemCnaePessoaJuridica(c)}"
                                             actionListener="#{pessoaTributarioControlador.removerCnaePessoaJuridica(c)}"
                                             update="tabela-cnaes"
                                             disabled="#{!pessoaTributarioControlador.mei}"
                                             process="@this"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"/>
                            <p:commandButton value=" "
                                             styleClass="vinteLarguraVinteAltura"
                                             rendered="#{!pessoaTributarioControlador.contemCnaePessoaJuridica(c)}"
                                             actionListener="#{pessoaTributarioControlador.adicionarCnaePessoaJuridica(c)}"
                                             update="tabela-cnaes"
                                             disabled="#{!pessoaTributarioControlador.mei}"
                                             process="@this"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"/>
                        </p:column>
                        <p:column headerText="CNAE" style="width: 10%">
                            <h:outputText value="#{c.cnae.codigoCnae}"/>
                        </p:column>
                        <p:column headerText="Descrição Detalhada" style="width: 50%">
                            <h:outputText value="#{c.cnae.descricaoDetalhada}"/>
                        </p:column>
                        <p:column headerText="Grau de Risco" style="width: 20%">
                            <h:outputText value="#{c.cnae.grauDeRisco.descricao}"/>
                        </p:column>
                        <p:column headerText="Tipo" style="width: 20%">
                            <h:outputText value="#{c.tipo.descricao}"/>
                        </p:column>
                        <p:column headerText="Sanitário">
                            <h:outputText value="#{c.cnae.fiscalizacaoSanitaria ? 'Sim': 'Não'}"/>
                        </p:column>
                        <p:column headerText="Exercida no Local">
                            <h:outputText
                                value="#{c.exercidaNoLocal eq null ? '' : c.exercidaNoLocal ? 'Sim': 'Não'}"/>
                        </p:column>
                    </p:dataTable>


                </h:form>
            </div>
            <div class="modal-footer mtop10 alinhamentoDireita">
                <p:commandButton value="#{pessoaTributarioControlador.mei ? 'Sim' : 'OK'}"
                                 icon="ui-icon-check"
                                 onclick="selecionaCnaes.hide(); aguarde.show()"
                                 oncomplete="aguarde.hide()"
                                 styleClass="operacao prioritario"
                                 actionListener="#{pessoaTributarioControlador.salvarCadastroEconomico()}"/>

                <p:commandButton icon="ui-icon-cancel" styleClass="operacao mlef03" value="Não"
                                 onclick="selecionaCnaes.hide();" rendered="#{pessoaTributarioControlador.mei}"
                                 actionListener="#{pessoaTributarioControlador.recarregarPagina()}"/>
            </div>
        </p:dialog>

        <h:form>
            <div id="modalconfirmacaoredesim"
                 class="modal hide fade" tabindex="-1" role="dialog"
                 aria-hidden="true">
                <div class="modal-header" style="text-align: center">
                    <div class="centralizado">
                        <h3>Integração realizada, deseja visualizar o cadastro econômico?</h3>
                    </div>
                </div>
                <div class="modal-body centralizado">

                    <p:commandButton value="Sim"
                                     icon="ui-icon-check"
                                     onclick="$('#modalconfirmacaoredesim').modal('hide'); aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     styleClass="operacao prioritario"
                                     actionListener="#{pessoaTributarioControlador.navegarParaCadastro()}"/>


                    <p:commandButton icon="ui-icon-cancel" styleClass="operacao" value="Não"
                                     onclick="$('#modalconfirmacaoredesim').modal('hide');"
                                     actionListener="#{pessoaTributarioControlador.recarregarPagina()}"
                    />
                </div>
            </div>
        </h:form>


        <h:form id="formHistoricoRedeSim">
            <div id="modalHistoricoRedeSim"
                 class="modal hide fade" tabindex="-1" role="dialog"
                 aria-hidden="true">
                <div class="modal-header" style="text-align: center">
                    <div class="centralizado">
                        <h3>Histórico Integração da RedeSIM</h3>
                    </div>
                </div>
                <div class="modal-body">
                    <tr:detalhes-rede-sim pessoaRedeSim="#{pessoaTributarioControlador.pessoaJuridicaDTO}"/>
                </div>

                <div class="modal-footer alinhamentoDireita">
                    <p:commandButton icon="ui-icon-close"
                                     styleClass="padrao"
                                     value="Fechar"
                                     onclick="$('#modalHistoricoRedeSim').modal('hide');"
                    />
                </div>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
</html>
