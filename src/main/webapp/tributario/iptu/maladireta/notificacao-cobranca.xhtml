<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <script type="text/javascript">
            var timerConsulta;
            var timerGeracaoParcela;
            var timerGeracaoRelatorio;

            function acompanhaConsulta() {
                timerConsulta = setInterval(function () {
                    atualizaConsulta();
                }, 1000);
            }

            function acompanhaGeracaoParcela() {
                clearInterval(timerConsulta);
                timerGeracaoParcela = setInterval(function () {
                    atualizaGeracaoParcela();
                }, 1000);
            }

            function acompanhaGeracaoRelatorio() {
                clearInterval(timerGeracaoParcela);
                timerGeracaoRelatorio = setInterval(function () {
                    atualizaGeracaoRelatorio();
                }, 1000);
            }

            function terminaRelatorio() {
                clearInterval(timerGeracaoRelatorio);
                finalizarRelatorio();
                $('#modalDownload').modal('show')
                myArguarde.hide();
            }

        </script>
        <table>
            <tr style="width: 100;">
                <td style="width: 2%" valign="top">
                    <img src="#{facesContext.externalContext.requestContextPath}/img/pesquisa.png" height="40"
                         width="40"/>
                </td>
                <td style="width: 100%">
                    <h:outputText value="Relatório de Notificação e Cobrança"
                                  style="font-size: 20px;font-style: italic "
                                  styleClass="azulnegrito"/>
                    <p:separator styleClass="mtop05 mbot03"/>
                    <table style="width: 100%">
                        <tr>
                            <td style="vertical-align: top">
                                <h:outputText value="Informe os filtros para efetuar uma pesquisa."
                                              style="font-size: 7pt"/>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>

        <h:form id="Formulario">
            <p:remoteCommand
                process="@this"
                update=":myAguardeForm"
                actionListener="#{relatorioNotificacaoCobrancaControlador.consultarAndamentoQuery()}"
                name="atualizaConsulta"/>
            <p:remoteCommand
                process="@this"
                update=":myAguardeForm"
                actionListener="#{relatorioNotificacaoCobrancaControlador.consultarAndamentoGeracaoParcela()}"
                name="atualizaGeracaoParcela"/>
            <p:remoteCommand
                process="@this"
                update=":myAguardeForm"
                actionListener="#{relatorioNotificacaoCobrancaControlador.consultarAndamentoGeracaoRelatorio()}"
                name="atualizaGeracaoRelatorio"/>
            <p:remoteCommand
                process="@this"
                actionListener="#{relatorioNotificacaoCobrancaControlador.limparTexto()}"
                name="finalizarRelatorio"/>

            <table width="100%">
                <tr>
                    <td style="width: 50%">
                        <h:panelGrid columns="2">
                            <fc:outputLabelObrigatorio value="Tipo de Cadastro: "/>
                            <h:selectOneMenu
                                value="#{relatorioNotificacaoCobrancaControlador.filtro.tipoCadastroTributario}"
                                id="tipoCadastro">
                                <f:selectItems value="#{relatorioNotificacaoCobrancaControlador.tiposCadastro}"/>
                                <p:ajax event="change"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        process="@this"
                                        update=":Formulario:panelContribuinte :Formulario:panelEconomico
                                                :Formulario:panelRural :Formulario:panelImobiliario :Formulario:gridDividas"/>
                            </h:selectOneMenu>

                            <fc:outputLabelObrigatorio value="Tipo de Relatório: "/>
                            <h:selectOneMenu
                                value="#{relatorioNotificacaoCobrancaControlador.filtro.tipoRelatorio}"
                                id="tipoRelatorio">
                                <f:selectItems value="#{relatorioNotificacaoCobrancaControlador.tiposRelatorio}"/>
                                <p:ajax event="change"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        process="@this"
                                        update=":Formulario:panelContribuinte :Formulario:panelEconomico
                                                :Formulario:panelRural :Formulario:panelImobiliario :Formulario:gridDividas"/>
                            </h:selectOneMenu>

                            <h:outputLabel value="Exercício do Débito:"/>
                            <h:panelGroup>
                                <p:inputText
                                    value="#{relatorioNotificacaoCobrancaControlador.filtro.exercicioInicial}"
                                    converter="#{exercicioControlador.converterExercicio}"
                                    onkeypress="somenteNumeros(event, false, false, true)"
                                    id="exDebitoInicial"
                                    maxlength="4"
                                    size="10">
                                    <p:ajax process="@this" update="@none"/>
                                </p:inputText>

                                <h:outputText value="Até" styleClass="cinzaEscuro" style="margin-left: 16%"/>

                                <p:inputText
                                    value="#{relatorioNotificacaoCobrancaControlador.filtro.exercicioFinal}"
                                    converter="#{exercicioControlador.converterExercicio}"
                                    onkeypress="somenteNumeros(event, false, false, true)"
                                    id="exDebitoFinal"
                                    styleClass="mlef10"
                                    maxlength="4"
                                    size="10">
                                    <p:ajax process="@this" update="@none"/>
                                </p:inputText>
                            </h:panelGroup>

                            <h:outputLabel value="Data de Lançamento:"/>
                            <h:panelGroup>
                                <p:calendar id="dInicioLanc"
                                            pattern="dd/MM/yyyy"
                                            onkeypress="mascara(this,mdata)"
                                            autocomplete="off"
                                            navigator="true"
                                            size="10"
                                            maxlength="10"
                                            showOn="button"
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.lancamentoInicial}"/>

                                <h:outputText value="Até" styleClass="cinzaEscuro mlef10"/>

                                <p:calendar id="dFinalLanc"
                                            pattern="dd/MM/yyyy"
                                            onkeypress="mascara(this,mdata)"
                                            autocomplete="off"
                                            navigator="true"
                                            styleClass="mlef10"
                                            size="10"
                                            maxlength="10"
                                            showOn="button"
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.lancamentoFinal}"/>
                            </h:panelGroup>

                            <fc:outputLabelObrigatorio value="Data de Vencimento:"/>
                            <h:panelGroup>
                                <p:calendar id="dInicio"
                                            pattern="dd/MM/yyyy"
                                            onkeypress="mascara(this,mdata)"
                                            autocomplete="off"
                                            navigator="true"
                                            size="10"
                                            maxlength="10"
                                            showOn="button"
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.vencimentoInicial}"/>

                                <h:outputText value="Até" styleClass="cinzaEscuro mlef10"/>

                                <p:calendar id="dFinal"
                                            pattern="dd/MM/yyyy"
                                            onkeypress="mascara(this,mdata)"
                                            autocomplete="off"
                                            navigator="true"
                                            styleClass="mlef10"
                                            size="10"
                                            maxlength="10"
                                            showOn="button"
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.vencimentoFinal}"/>
                            </h:panelGroup>

                            <h:outputLabel value="Data de Pagamento:"/>
                            <h:panelGroup>
                                <p:calendar id="dInicioPag"
                                            pattern="dd/MM/yyyy"
                                            onkeypress="mascara(this,mdata)"
                                            autocomplete="off"
                                            navigator="true"
                                            size="10"
                                            maxlength="10"
                                            showOn="button"
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.pagamentoInicial}"/>

                                <h:outputText value="Até" styleClass="cinzaEscuro mlef10"/>

                                <p:calendar id="dFinalPag"
                                            pattern="dd/MM/yyyy"
                                            onkeypress="mascara(this,mdata)"
                                            autocomplete="off"
                                            navigator="true"
                                            styleClass="mlef10"
                                            size="10"
                                            maxlength="10"
                                            showOn="button"
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.pagamentoFinal}"/>
                            </h:panelGroup>

                            <h:outputLabel value="Data de Movimento:"/>
                            <h:panelGroup>
                                <p:calendar id="dInicioMov"
                                            pattern="dd/MM/yyyy"
                                            onkeypress="mascara(this,mdata)"
                                            autocomplete="off"
                                            navigator="true"
                                            size="10"
                                            maxlength="10"
                                            showOn="button"
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.movimentoInicial}"/>

                                <h:outputText value="Até" styleClass="cinzaEscuro mlef10"/>

                                <p:calendar id="dFinalMov"
                                            pattern="dd/MM/yyyy"
                                            onkeypress="mascara(this,mdata)"
                                            autocomplete="off"
                                            navigator="true"
                                            styleClass="mlef10"
                                            size="10"
                                            maxlength="10"
                                            showOn="button"
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.movimentoFinal}"/>
                            </h:panelGroup>

                            <h:outputLabel value="Data de Notificação:"/>
                            <h:panelGroup>
                                <p:calendar id="dInicioNotificao"
                                            pattern="dd/MM/yyyy"
                                            onkeypress="mascara(this,mdata)"
                                            autocomplete="off"
                                            navigator="true"
                                            size="10"
                                            maxlength="10"
                                            showOn="button"
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.notificacaoInicial}"/>

                                <h:outputText value="Até" styleClass="cinzaEscuro mlef10"/>

                                <p:calendar id="dFinalNotificacao"
                                            pattern="dd/MM/yyyy"
                                            onkeypress="mascara(this,mdata)"
                                            autocomplete="off"
                                            navigator="true"
                                            styleClass="mlef10"
                                            size="10"
                                            maxlength="10"
                                            showOn="button"
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.notificacaoFinal}"/>
                            </h:panelGroup>
                        </h:panelGrid>

                        <h:panelGrid columns="1" id="gridDividas">
                            <h:outputText value="Dívidas: "/>
                            <p:outputPanel id="panelDivida">
                                <h:panelGroup>
                                    <table class="table" style="max-width: 400px">
                                        <ui:repeat
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.dividas}"
                                            var="divida">
                                            <tr>
                                                <td><h:outputText value="#{divida.descricao}"
                                                                  styleClass="negrito"/></td>
                                                <td>
                                                    <p:commandButton icon="ui-icon-trash"
                                                                     actionListener="#{relatorioNotificacaoCobrancaControlador.filtro.removerDivida(divida)}"
                                                                     title="Clique para remover a dívida."
                                                                     onstart="aguarde.show()"
                                                                     oncomplete="aguarde.hide()"
                                                                     process="@this"
                                                                     update=":Formulario:gridDividas"/>
                                                </td>
                                            </tr>
                                        </ui:repeat>
                                        <tr>
                                            <td>
                                                <h:selectOneMenu
                                                    value="#{relatorioNotificacaoCobrancaControlador.filtro.divida}"
                                                    id="divida"
                                                    style="max-width: 400px"
                                                    converter="#{dividaControlador.converterGenerico}">
                                                    <f:selectItems
                                                        value="#{relatorioNotificacaoCobrancaControlador.dividas}"/>
                                                    <p:ajax event="change"
                                                            process="@this"
                                                            update="@this"/>
                                                </h:selectOneMenu>
                                            </td>
                                            <td>
                                                <p:commandButton icon="ui-icon-arrowthickstop-1-s"
                                                                 styleClass="prioritario mlef03"
                                                                 title="Clique para adicionar dívida."
                                                                 onstart="aguarde.show()"
                                                                 oncomplete="aguarde.hide()"
                                                                 process="@this :Formulario:gridDividas"
                                                                 update=":Formulario:gridDividas"
                                                                 actionListener="#{relatorioNotificacaoCobrancaControlador.filtro.adicionarDivida()}"
                                                />
                                            </td>
                                        </tr>
                                    </table>
                                </h:panelGroup>
                            </p:outputPanel>
                        </h:panelGrid>

                        <p:outputPanel id="panelContribuinte">
                            <p:fieldset legend="Filtros Cadastro Contribuinte"
                                        rendered="#{relatorioNotificacaoCobrancaControlador.isPessoa()}">
                                <h:panelGrid columns="2">
                                    <h:outputText value="Pessoa: "/>
                                    <h:panelGroup id="pessoasContribuinte">
                                        <table class="table table-striped">
                                            <ui:repeat
                                                value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroPessoa.pessoas}"
                                                var="pessoa">
                                                <tr>
                                                    <td>
                                                        <h:outputText value="#{pessoa}" styleClass="negrito"/>
                                                    </td>
                                                    <td style="text-align: right">
                                                        <p:commandButton icon="ui-icon-trash"
                                                                         onstart="aguarde.show()"
                                                                         oncomplete="aguarde.hide()"
                                                                         process="@form"
                                                                         actionListener="#{relatorioNotificacaoCobrancaControlador.filtro.filtroPessoa.removerDaLista(relatorioNotificacaoCobrancaControlador.filtro.filtroPessoa.pessoas, pessoa)}"
                                                                         update="@form"/>
                                                    </td>
                                                </tr>
                                            </ui:repeat>
                                            <tr>
                                                <td colspan="2">
                                                    <fc:autocompletePessoa caminhoAtual=""
                                                                           value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroPessoa.pessoa}"
                                                                           id="ac-pessoa-contribuinte"
                                                                           labelObrigatorio="false"
                                                                           updateGeral="pessoasContribuinte"
                                                                           habilitaBotaoNovaPF="false"
                                                                           watermark="Selecione uma Pessoa..."
                                                                           habilitaBotaoNovaPJ="false"
                                                                           habilitaBotaoLupa="false"
                                                                           dropdown="true"
                                                                           tamanhoAutoComplete="70"
                                                                           executaAoAtualizar="#{relatorioNotificacaoCobrancaControlador.filtro.filtroPessoa.addPessoa()}"
                                                                           cellspacing="0"/>
                                                </td>
                                            </tr>
                                        </table>
                                    </h:panelGroup>
                                </h:panelGrid>

                            </p:fieldset>
                        </p:outputPanel>


                        <p:outputPanel id="panelImobiliario">
                            <p:fieldset legend="Filtros Cadastro Imobiliário"
                                        rendered="#{relatorioNotificacaoCobrancaControlador.isImobiliario()}">

                                <h:panelGrid columns="2">
                                    <h:outputText value="Inscrição: "/>
                                    <h:panelGroup>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroImovel.inscricaoIncial}"
                                            id="inscBciInicial"
                                            maxlength="15"
                                            title="Informe a inscrição inicial."/>
                                        <h:outputText value="Até" styleClass="cinzaEscuro mlef10"/>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroImovel.inscricaoFinal}"
                                            id="inscBciFinal"
                                            maxlength="15"
                                            styleClass="mlef10"
                                            title="Informe a inscrição final."/>
                                    </h:panelGroup>

                                    <h:outputLabel value="Tipo de Imóvel: " for="tipoImovel"/>
                                    <h:selectOneMenu id="tipoImovel"
                                                     value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroImovel.tipoImovel}"
                                                     title="Selecione um tipo de imóvel.">
                                        <f:selectItems
                                            value="#{relatorioNotificacaoCobrancaControlador.tiposImoveis}"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="Bairro: "/>
                                    <p:autoComplete queryDelay="1000"
                                                    id="bairroBci"
                                                    size="70"
                                                    title="Informe um bairro."
                                                    dropdown="true"
                                                    panelStyle="height: 250px"
                                                    maxResults="50"
                                                    value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroImovel.bairro}"
                                                    completeMethod="#{relatorioNotificacaoCobrancaControlador.completarBairro}"
                                                    converter="#{bairroControlador.converterGenerico}"
                                                    var="bairroBci"
                                                    itemValue="#{bairroBci.id}"
                                                    itemLabel="#{bairroBci}">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                update="@none"/>
                                    </p:autoComplete>

                                    <h:outputText value="Logradouro: "/>
                                    <p:autoComplete queryDelay="1000"
                                                    id="logradouroBci"
                                                    size="70"
                                                    title="Informe um logradouro."
                                                    value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroImovel.logradouro}"
                                                    completeMethod="#{relatorioNotificacaoCobrancaControlador.completarLogradouro}"
                                                    converter="#{logradouroControlador.converterGenerico}"
                                                    dropdown="true"
                                                    panelStyle="height: 250px"
                                                    maxResults="50"
                                                    var="logBci"
                                                    itemValue="#{logBci.id}"
                                                    itemLabel="#{logBci}"/>

                                    <h:outputText value="Setor: "/>
                                    <h:panelGroup>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroImovel.setorInicial}"
                                            id="setorBciInicial"
                                            maxlength="3"
                                            title="Informe um setor inicial."/>
                                        <h:outputText value="Até" styleClass="cinzaEscuro mlef10"/>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroImovel.setorFinal}"
                                            id="setorBciFinal"
                                            maxlength="3"
                                            styleClass="mlef10"
                                            title="Informe um setor final."/>
                                    </h:panelGroup>

                                    <h:outputText value="Quadra: "/>
                                    <h:panelGroup>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroImovel.quadraInicial}"
                                            id="quadraBciInicial"
                                            maxlength="4"
                                            title="Informe uma quadra inicial."/>
                                        <h:outputText value="Até" styleClass="cinzaEscuro mlef10"/>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroImovel.quadraFinal}"
                                            id="quadraBciFinal"
                                            maxlength="4"
                                            styleClass="mlef10"
                                            title="Informe uma quadra final."/>
                                    </h:panelGroup>

                                    <h:outputText value="Lote: "/>
                                    <h:panelGroup>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroImovel.loteInicial}"
                                            id="loteBciInicial"
                                            maxlength="4"
                                            title="Informe um lote inicial."/>
                                        <h:outputText value="Até" styleClass="cinzaEscuro mlef10"/>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroImovel.loteFinal}"
                                            id="loteBciFinal"
                                            maxlength="4"
                                            styleClass="mlef10"
                                            title="Informe uma quadra final."/>
                                    </h:panelGroup>
                                </h:panelGrid>
                            </p:fieldset>
                        </p:outputPanel>


                        <p:outputPanel id="panelEconomico">
                            <p:fieldset legend="Filtros Cadastro Econômico"
                                        rendered="#{relatorioNotificacaoCobrancaControlador.isEconomico()}">

                                <h:panelGrid columns="2">
                                    <h:outputText value="C.M.C.: "/>
                                    <h:panelGroup>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroEconomico.inscricaoIncial}"
                                            id="cmcInicial"
                                            maxlength="20"
                                            title="Informe o cmc inicial."/>
                                        <h:outputText value="Até" styleClass="cinzaEscuro mlef10"/>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroEconomico.inscricaoFinal}"
                                            id="cmcFinal"
                                            maxlength="20"
                                            styleClass="mlef10"
                                            title="Informe o cmc final."/>
                                    </h:panelGroup>

                                    <h:outputText value="Bairro: "/>
                                    <p:autoComplete queryDelay="1000"
                                                    id="bairroCmc"
                                                    size="70"
                                                    title="Informe um bairro."
                                                    value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroEconomico.bairro}"
                                                    completeMethod="#{relatorioNotificacaoCobrancaControlador.completarBairro}"
                                                    converter="#{bairroControlador.converterGenerico}"
                                                    dropdown="true"
                                                    panelStyle="height: 250px"
                                                    maxResults="50"
                                                    var="bairroCmc"
                                                    itemValue="#{bairroCmc.id}"
                                                    itemLabel="#{bairroCmc}">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                update="@none"/>
                                    </p:autoComplete>

                                    <h:outputText value="Logradouro: "/>
                                    <p:autoComplete queryDelay="1000"
                                                    id="logradouroCmc"
                                                    size="70"
                                                    title="Informe um logradouro."
                                                    value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroEconomico.logradouro}"
                                                    completeMethod="#{relatorioNotificacaoCobrancaControlador.completarLogradouro}"
                                                    converter="#{logradouroControlador.converterGenerico}"
                                                    dropdown="true"
                                                    panelStyle="height: 250px"
                                                    maxResults="50"
                                                    var="logCmc"
                                                    itemValue="#{logCmc.id}"
                                                    itemLabel="#{logCmc}"/>

                                    <h:outputLabel value="Classificação Atividade: " for="classificacao"/>
                                    <h:selectOneMenu id="classificacao"
                                                     value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroEconomico.classificacao}"
                                                     title="Selecione uma classificação da atividade.">
                                        <f:selectItems
                                            value="#{relatorioNotificacaoCobrancaControlador.classificacoesAtividades}"/>
                                    </h:selectOneMenu>

                                    <h:outputLabel value="Grau de Risco: " for="grauDeRisco"/>
                                    <h:selectOneMenu id="grauDeRisco"
                                                     value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroEconomico.grauDeRisco}"
                                                     title="Selecione um grau de risco da atividade.">
                                        <f:selectItems
                                            value="#{relatorioNotificacaoCobrancaControlador.grausDeRisco}"/>
                                    </h:selectOneMenu>

                                    <h:outputLabel value="Natureza Jurídica: " for="grauDeRisco"/>
                                    <h:selectOneMenu id="naturezaJuridica"
                                                     value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroEconomico.naturezaJuridica}"
                                                     converter="#{naturezaJuridicaControlador.converterGenerico}"
                                                     title="Selecione uma natureza jurídica.">
                                        <f:selectItems
                                            value="#{relatorioNotificacaoCobrancaControlador.naturezasJuridica}"/>
                                    </h:selectOneMenu>

                                    <h:outputLabel value="Tipo de Autônomo: " for="tipoAutonomo"/>
                                    <p:autoComplete id="tipoAutonomo"
                                                    value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroEconomico.tipoAutonomo}"
                                                    completeMethod="#{relatorioNotificacaoCobrancaControlador.completarTipoAutonomo}"
                                                    converter="#{tipoAutonomoControlador.converterGenerico}"
                                                    var="ta"
                                                    itemLabel="#{ta}"
                                                    itemValue="#{ta.id}"
                                                    size="70"
                                                    dropdown="true"
                                                    panelStyle="height: 250px"
                                                    maxResults="50"
                                                    title="Selecione um tipo autônomo."/>
                                </h:panelGrid>
                            </p:fieldset>
                        </p:outputPanel>


                        <p:outputPanel id="panelRural">
                            <p:fieldset legend="Filtros Cadastro Rural"
                                        rendered="#{relatorioNotificacaoCobrancaControlador.isRural()}">

                                <h:panelGrid columns="2">
                                    <h:outputText value="Inscrição: "/>
                                    <h:panelGroup>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroRural.inscricaoIncial}"
                                            id="inscRuralInicial"
                                            maxlength="15"
                                            title="Informe a inscrição inicial."/>
                                        <h:outputText value="Até" styleClass="cinzaEscuro mlef10"/>
                                        <p:inputText
                                            value="#{relatorioNotificacaoCobrancaControlador.filtro.filtroRural.inscricaoFinal}"
                                            id="inscRuralFinal"
                                            maxlength="15"
                                            styleClass="mlef10"
                                            title="Informe a inscrição final."/>
                                    </h:panelGroup>
                                </h:panelGrid>
                            </p:fieldset>
                        </p:outputPanel>
                    </td>

                    <td class="verticalAlignTop">
                        <p:panel id="situacoes" style="width: 100%; max-height: 200px; overflow-y: scroll">
                            <p:dataTable
                                value="#{relatorioNotificacaoCobrancaControlador.filtro.todasAsSituacoesParcela}"
                                var="situacao"
                                selection="#{relatorioNotificacaoCobrancaControlador.filtro.situacoes}"
                                rowKey="#{situacao}"
                                style="width: 100%">
                                <p:column selectionMode="multiple" style="width:2%;"/>
                                <p:column headerText="Situações">
                                    <h:outputText value="#{situacao.descricao}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </td>
                </tr>
            </table>

            <div style="text-align: left; width: 100%">
                <hr/>
                <p:commandButton actionListener="#{relatorioNotificacaoCobrancaControlador.iniciarConsulta()}"
                                 icon="ui-icon-print"
                                 styleClass="operacao prioritario"
                                 onstart="myArguarde.show()"
                                 update="@form :myAguardeForm"
                                 process="@form :myAguardeForm"
                                 value="Gerar Relatório"/>

                <p:commandButton value="Limpar Dados"
                                 actionListener="#{relatorioNotificacaoCobrancaControlador.novo}"
                                 update="@form"
                                 process="@this"
                                 icon="ui-icon-document"
                                 styleClass="operacao mlef03"
                                 onstart="aguarde.show()"
                                 oncomplete="aguarde.hide()"/>
            </div>
        </h:form>

        <br/>

        <p:dialog modal="true"
                  widgetVar="myArguarde"
                  style="position: fixed !important; z-index: 99999999 !important;"
                  position="center"
                  width="200"
                  styleClass="semBorda"
                  showHeader="false"
                  draggable="false"
                  closable="false"
                  resizable="false">
            <h:form id="myAguardeForm">
                <div align="center">

                    <h:outputText
                        value="#{relatorioNotificacaoCobrancaControlador.filtro.texto}" escape="false"
                        style="color: darkgray"/>

                    <br/>
                    <h:graphicImage value="/img/ajaxloading.gif" styleClass="mtop20"/>

                    <br/>
                    <p:outputPanel style="color: darkgray"
                                   rendered="#{relatorioNotificacaoCobrancaControlador.assistenteBarraProgresso.calculados > 0}">

                        <br/>
                        <h:outputText
                            value="#{relatorioNotificacaoCobrancaControlador.assistenteBarraProgresso.calculados}
                            de #{relatorioNotificacaoCobrancaControlador.assistenteBarraProgresso.total} - "
                            escape="true"
                        />
                        <h:outputText
                            value="#{relatorioNotificacaoCobrancaControlador.assistenteBarraProgresso.porcentagemDoCalculo}"
                            escape="true"
                            converter="converterDouble"/>%
                    </p:outputPanel>
                </div>
            </h:form>
        </p:dialog>

        <div id="modalDownload"
             class="modal hide fade"
             role="dialog"
             aria-labelledby="modalDownload">
            <h:form id="form-download">

                <div class="modal-header alert alert-info" align="center">
                    Impressão de Relatório
                </div>
                <div class="modal-body" align="center">
                    <h4>
                        Relatório gerado com sucesso!
                    </h4>
                    <fc:botaoTargetBlank
                        actionListener="#{relatorioNotificacaoCobrancaControlador.baixarPDF()}"
                        style="height: 30px"
                        styleClass="mtop10 mrig05"
                        label="Emitir Relatório"
                        process="@this"
                        update="@none"
                        title="Clique para emitir o relatório gerado."/>
                </div>

                <div class="modal-footer" align="left">
                    <p:commandButton
                        icon="ui-icon-close"
                        style="width: 20px !important;"
                        styleClass="botao-transparente"
                        process="@none"
                        update="@none"
                        onstart="aguarde.show()"
                        actionListener="#{relatorioNotificacaoCobrancaControlador.novo}"
                        oncomplete="aguarde.hide();$('#modalDownload').modal('hide')"/>
                </div>
            </h:form>
        </div>

    </ui:define>
</ui:composition>
</html>
