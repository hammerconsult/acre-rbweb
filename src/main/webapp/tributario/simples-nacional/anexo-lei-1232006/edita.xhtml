<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">

            <fc:cabecalhoPretty id="cpCabecalhoPretty" origem="#{anexoLei1232006Controlador.caminhoPadrao}/listar/"
                                controlador="#{anexoLei1232006Controlador}"/>

            <p:panel header="Cadastro de Anexo Lei Complementar 123/2006">
                <h:panelGrid columns="2">
                    <fc:outputLabelObrigatorio value="Descrição: "/>
                    <p:inputText value="#{anexoLei1232006Controlador.selecionado.descricao}" size="70" maxlength="255"/>

                    <fc:outputLabelObrigatorio value="Vigente Até: "/>
                    <fc:calendar value="#{anexoLei1232006Controlador.selecionado.vigenteAte}"/>

                    <h:outputLabel value="Exibir Alteração Anexo (Nfs-e): "/>
                    <p:selectBooleanCheckbox value="#{anexoLei1232006Controlador.selecionado.exibirAlteracaoAnexo}"/>
                </h:panelGrid>

                <h:panelGrid columns="7">
                    <h:outputLabel value="IRPJ (%) Exce. "/>
                    <h:outputLabel value="CSLL (%) Exce."/>
                    <h:outputLabel value="Cofins (%) Exce."/>
                    <h:outputLabel value="PIS/Pasep (%) Exce."/>
                    <h:outputLabel value="CPP (%) Exce."/>
                    <h:outputLabel value="ICMS (%) Exce."/>
                    <h:outputLabel value="IPI (%) Exce."/>

                    <fc:inputPorcentagem value="#{anexoLei1232006Controlador.selecionado.irpjExcedente}" stylePanel="" mostrarLabel="false"/>
                    <fc:inputPorcentagem value="#{anexoLei1232006Controlador.selecionado.csllExcedente}" stylePanel="" mostrarLabel="false"/>
                    <fc:inputPorcentagem value="#{anexoLei1232006Controlador.selecionado.cofinsExcedente}" stylePanel="" mostrarLabel="false"/>
                    <fc:inputPorcentagem value="#{anexoLei1232006Controlador.selecionado.pisPasepExcedente}" stylePanel="" mostrarLabel="false"/>
                    <fc:inputPorcentagem value="#{anexoLei1232006Controlador.selecionado.cppExcedente}" stylePanel="" mostrarLabel="false"/>
                    <fc:inputPorcentagem value="#{anexoLei1232006Controlador.selecionado.icmsExcedente}" stylePanel="" mostrarLabel="false"/>
                    <fc:inputPorcentagem value="#{anexoLei1232006Controlador.selecionado.ipiExcedente}" stylePanel="" mostrarLabel="false"/>
                </h:panelGrid>

                <h:outputText value="Faixas" style="font-size: 20px;font-style: italic "
                              styleClass="azulnegrito"/>

                <p:separator/>

                <p:outputPanel id="pnFaixas">

                    <p:outputPanel id="pnFaixaManutencao" rendered="#{anexoLei1232006Controlador.faixa ne null}">
                        <h:panelGrid columns="2">
                            <fc:outputLabelObrigatorio value="Faixa: "/>
                            <p:inputText value="#{anexoLei1232006Controlador.faixa.faixa}" size="70" maxlength="70"/>
                        </h:panelGrid>

                        <h:panelGrid columns="3">
                            <fc:outputLabelObrigatorio value="Até (R$) "/>
                            <h:outputLabel value="Alíquota (%)"/>
                            <h:outputLabel value="Valor a Deduzir (R$)"/>

                            <fc:inputValorMonetario value="#{anexoLei1232006Controlador.faixa.valorMaximo}"/>
                            <fc:inputPorcentagem value="#{anexoLei1232006Controlador.faixa.aliquota}"  stylePanel="" mostrarLabel="false"/>
                            <fc:inputValorMonetario value="#{anexoLei1232006Controlador.faixa.valorDeduzir}"/>
                        </h:panelGrid>

                        <h:outputLabel styleClass="negrito mtop05"
                                       value="Percentual de Repartição dos Tributos"/>

                        <p:separator/>

                        <h:panelGrid columns="8">
                            <h:outputLabel value="IRPJ (%) "/>
                            <h:outputLabel value="CSLL (%) "/>
                            <h:outputLabel value="Cofins (%) "/>
                            <h:outputLabel value="PIS/Pasep (%) "/>
                            <h:outputLabel value="CPP (%) "/>
                            <h:outputLabel value="ICMS (%) "/>
                            <h:outputLabel value="IPI (%) "/>
                            <h:outputLabel value="ISS (%) "/>

                            <fc:inputPorcentagem value="#{anexoLei1232006Controlador.faixa.irpj}" stylePanel="" mostrarLabel="false"/>
                            <fc:inputPorcentagem value="#{anexoLei1232006Controlador.faixa.csll}" stylePanel="" mostrarLabel="false"/>
                            <fc:inputPorcentagem value="#{anexoLei1232006Controlador.faixa.cofins}" stylePanel="" mostrarLabel="false"/>
                            <fc:inputPorcentagem value="#{anexoLei1232006Controlador.faixa.pisPasep}" stylePanel="" mostrarLabel="false"/>
                            <fc:inputPorcentagem value="#{anexoLei1232006Controlador.faixa.cpp}" stylePanel="" mostrarLabel="false"/>
                            <fc:inputPorcentagem value="#{anexoLei1232006Controlador.faixa.icms}" stylePanel="" mostrarLabel="false"/>
                            <fc:inputPorcentagem value="#{anexoLei1232006Controlador.faixa.ipi}" stylePanel="" mostrarLabel="false"/>
                            <fc:inputPorcentagem value="#{anexoLei1232006Controlador.faixa.iss}" stylePanel="" mostrarLabel="false"/>
                        </h:panelGrid>


                        <p:commandButton value="Confirmar"
                                         icon="ui-icon-check"
                                         process=":Formulario:pnFaixas"
                                         update="@this :Formulario:pnFaixas"
                                         title="Clique para inserir uma nova faixa"
                                         styleClass="mtop10 mrig05 padrao"
                                         onclick="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         actionListener="#{anexoLei1232006Controlador.adicionarFaixa()}"/>

                        <p:commandButton value="Cancelar"
                                         icon="ui-icon-cancel"
                                         process="@this"
                                         update=":Formulario:pnFaixas"
                                         title="Clique para cancelar a faixa"
                                         styleClass="mtop10 mrig05 padrao"
                                         onclick="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         actionListener="#{anexoLei1232006Controlador.cancelarFaixa()}"/>
                    </p:outputPanel>

                    <p:commandButton value="Novo"
                                     update=":Formulario:pnFaixas"
                                     title="Clique para inserir uma nova faixa"
                                     styleClass="mtop05 mbot05 mrig05 padrao"
                                     process="@this"
                                     onclick="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     rendered="#{anexoLei1232006Controlador.faixa eq null}"
                                     icon="ui-icon-plus"
                                     actionListener="#{anexoLei1232006Controlador.inserirFaixa()}"/>

                    <p:dataTable id="tableFaixas"
                                 value="#{anexoLei1232006Controlador.selecionado.faixas}" var="faixa"
                                 emptyMessage="Nenhum registro adicionado.">
                        <p:column style="width: 2%">
                            <p:rowToggler/>
                        </p:column>
                        <p:column headerText="Opções" styleClass="centralizado width100">
                            <p:commandButton styleClass="botao-transparente"
                                             title="Clique para excluir"
                                             icon="ui-icon-trash"
                                             onclick="aguarde.show()" oncomplete="aguarde.hide()"
                                             actionListener="#{anexoLei1232006Controlador.removerFaixa(faixa)}"
                                             process="@this"
                                             update="tableFaixas"/>
                            <p:commandButton styleClass="botao-transparente"
                                             title="Clique para alterar" icon="ui-icon-pencil"
                                             actionListener="#{anexoLei1232006Controlador.editarFaixa(faixa)}"
                                             process="@this"
                                             update=":Formulario:pnFaixas"/>
                        </p:column>
                        <p:column headerText="Faixa" styleClass="alinhamentoEsquerda">
                            <h:outputLabel value="#{faixa.faixa}"/>
                        </p:column>
                        <p:column headerText="Até (R$)" styleClass="alinhamentoDireita" width="80">
                            <h:outputLabel value="#{faixa.valorMaximo}">
                                <f:convertNumber pattern="#,##0.00"/>
                            </h:outputLabel>
                        </p:column>
                        <p:column headerText="Alíquota (%)" styleClass="alinhamentoDireita" width="50">
                            <h:outputLabel value="#{faixa.aliquota}">
                                <f:convertNumber pattern="#,###"/>
                            </h:outputLabel>
                        </p:column>
                        <p:column headerText="Valor a Deduzir (R$)" styleClass="alinhamentoDireita" width="80">
                            <h:outputLabel value="#{faixa.valorDeduzir}">
                                <f:convertNumber pattern="#,##0.00"/>
                            </h:outputLabel>
                        </p:column>
                        <p:rowExpansion>
                            <h:outputLabel styleClass="negrito mtop02 mbot02"
                                           value="Percentual de Repartição dos Tributos"/>

                            <p:separator/>

                            <h:panelGrid columns="8">
                                <h:outputLabel value="IRPJ (%) "/>
                                <h:outputLabel value="CSLL (%) "/>
                                <h:outputLabel value="Cofins (%) "/>
                                <h:outputLabel value="PIS/Pasep (%): "/>
                                <h:outputLabel value="CPP (%): "/>
                                <h:outputLabel value="ICMS (%): "/>
                                <h:outputLabel value="IPI (%): "/>
                                <h:outputLabel value="ISS (%): "/>

                                <h:outputText value="#{faixa.irpj}">
                                    <f:convertNumber pattern="#,###"/>
                                </h:outputText>

                                <h:outputText value="#{faixa.csll}">
                                    <f:convertNumber pattern="#,###"/>
                                </h:outputText>

                                <h:outputText value="#{faixa.cofins}">
                                    <f:convertNumber pattern="#,###"/>
                                </h:outputText>

                                <h:outputText value="#{faixa.pisPasep}">
                                    <f:convertNumber pattern="#,###"/>
                                </h:outputText>

                                <h:outputText value="#{faixa.cpp}">
                                    <f:convertNumber pattern="#,###"/>
                                </h:outputText>

                                <h:outputText value="#{faixa.icms}">
                                    <f:convertNumber pattern="#,###"/>
                                </h:outputText>

                                <h:outputText value="#{faixa.ipi}">
                                    <f:convertNumber pattern="#,###"/>
                                </h:outputText>

                                <h:outputText value="#{faixa.iss}">
                                    <f:convertNumber pattern="#,###"/>
                                </h:outputText>
                            </h:panelGrid>
                        </p:rowExpansion>
                    </p:dataTable>
                </p:outputPanel>
            </p:panel>

            <fc:rodapePretty id="rpRodapePretty" controlador="#{anexoLei1232006Controlador}"/>
        </h:form>
    </ui:define>
</ui:composition>
</html>
