<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fc="http://java.sun.com/jsf/composite/components">
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <fc:cabecalhoPretty origem="#{autoInfracaoFiscalControlador.caminhoPadrao}listar/"
                                mostrarBotaoNovo="${false}"
                                auditavel="${true}"
                                controlador="#{autoInfracaoFiscalControlador}"/>
            <p:panel header="Detalhes do Auto de Infração">
                <table style="width: 100%">
                    <c:if test="#{!autoInfracaoFiscalControlador.autoInfracaoManual}">
                        <tr>
                            <td>
                                <h:panelGrid columns="2">
                                    <h:outputText value="Programação: "/>
                                    <h:outputText
                                        value="#{autoInfracaoFiscalControlador.selecionado.registro.acaoFiscal.programacaoFiscal.numero}"
                                        styleClass="negrito"/>

                                    <h:outputText value="C.M.C: "/>
                                    <h:outputText
                                        value="#{autoInfracaoFiscalControlador.selecionado.registro.acaoFiscal.cadastroEconomico.inscricaoCadastral}"
                                        styleClass="negrito"/>

                                    <h:outputText value="Termo de Fiscalização: "/>
                                    <h:outputText
                                        value="#{autoInfracaoFiscalControlador.selecionado.registro.acaoFiscal.numeroTermoFiscalizacao}"
                                        styleClass="negrito"/>

                                    <h:outputText value="Ordem de Serviço: "/>
                                    <h:outputText
                                        value="#{autoInfracaoFiscalControlador.selecionado.registro.acaoFiscal.ordemServico}"
                                        styleClass="negrito"/>

                                    <h:outputText value="Registro: "/>
                                    <h:outputText
                                        value="#{autoInfracaoFiscalControlador.selecionado.registro.numeroAno}"
                                        styleClass="negrito"/>
                                </h:panelGrid>
                            </td>
                            <td align="right" valign="top">
                                <h:panelGrid columns="2">
                                    <h:outputText value="Número: "/>
                                    <h:outputText value="#{autoInfracaoFiscalControlador.selecionado.numero}"
                                                  styleClass="negrito"/>

                                    <h:outputText value="Ano: "/>
                                    <h:outputText value="#{autoInfracaoFiscalControlador.selecionado.ano}"
                                                  styleClass="negrito"/>

                                    <h:outputText value="Situação: "/>
                                    <h:outputText
                                        value="#{autoInfracaoFiscalControlador.selecionado.situacaoAutoInfracao.descricao}"
                                        styleClass="negrito"/>

                                    <h:outputText value="Vencimento: "/>
                                    <h:outputText value="#{autoInfracaoFiscalControlador.selecionado.vencimento}"
                                                  styleClass="negrito">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>

                                    <h:outputText value="Data Ciência/Revelia: "/>
                                    <p:calendar value="#{autoInfracaoFiscalControlador.selecionado.dataCienciaRevelia}"
                                                pattern="dd/MM/yyyy"
                                                disabled="#{autoInfracaoFiscalControlador.selecionado.isSituacaoCienciaRevelia()
                                                or autoInfracaoFiscalControlador.desabilitaCiencia()
                                                or autoInfracaoFiscalControlador.desabilitaRevelia()}"/>


                                </h:panelGrid>
                            </td>
                        </tr>
                    </c:if>
                    <c:if test="#{autoInfracaoFiscalControlador.autoInfracaoManual}">
                        <tr>
                            <td>
                                <h:panelGrid columns="2">
                                    <h:outputText value="Número: "/>
                                    <h:outputText value="#{autoInfracaoFiscalControlador.selecionado.numero}"
                                                  styleClass="negrito"/>

                                    <h:outputText value="Ano: "/>
                                    <h:outputText value="#{autoInfracaoFiscalControlador.selecionado.ano}"
                                                  styleClass="negrito"/>

                                    <h:outputText value="Situação: "/>
                                    <h:outputText
                                        value="#{autoInfracaoFiscalControlador.selecionado.situacaoAutoInfracao.descricao}"
                                        styleClass="negrito"/>

                                    <h:outputText value="Registro: "/>
                                    <h:outputText
                                        value="#{autoInfracaoFiscalControlador.selecionado.registro.numeroAno}"
                                        styleClass="negrito"/>

                                    <h:outputText value="C.M.C: "/>
                                    <h:outputText
                                        value="#{autoInfracaoFiscalControlador.selecionado.cadastroEconomico.inscricaoCadastral}"
                                        styleClass="negrito"/>

                                    <h:outputText value="Vencimento: "/>
                                    <h:outputText value="#{autoInfracaoFiscalControlador.selecionado.vencimento}"
                                                  styleClass="negrito">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>

                                    <h:outputText value="Data Ciência/Revelia: "/>
                                    <p:calendar value="#{autoInfracaoFiscalControlador.selecionado.dataCienciaRevelia}"
                                                pattern="dd/MM/yyyy"
                                                disabled="#{autoInfracaoFiscalControlador.selecionado.isSituacaoCienciaRevelia()
                                                or autoInfracaoFiscalControlador.desabilitaCiencia()
                                                or autoInfracaoFiscalControlador.desabilitaRevelia()}"/>
                                </h:panelGrid>
                            </td>
                        </tr>
                    </c:if>
                    <tr>
                        <td colspan="2">
                            <h:outputText value="Observação da Revelia: "
                                          rendered="#{autoInfracaoFiscalControlador.selecionado.isSituacaoRevelia()}"/>
                            <h:outputText value="#{autoInfracaoFiscalControlador.selecionado.observacaoRevelia}"
                                          rendered="#{autoInfracaoFiscalControlador.selecionado.isSituacaoRevelia()}"
                                          styleClass="negrito"/>
                        </td>
                    </tr>
                </table>
                <br/>

                <p:outputPanel id="panel-totais">
                    <div style="text-align: center!important; width: 100%;">
                        <h:panelGrid columns="6" style="margin: 0 auto;">
                            <p:panel header="Saldo ISS" id="saldo-iss" styleClass="width150"
                                     rendered="#{!autoInfracaoFiscalControlador.autoInfracaoManual}">
                                <h:outputText value="${autoInfracaoFiscalControlador.valorTotalIss}"
                                              styleClass="negrito">
                                    <f:convertNumber pattern="###,###,##0.00"/>
                                </h:outputText>
                            </p:panel>
                            <p:panel header="Correção Mon." styleClass="width150"
                                     rendered="#{!autoInfracaoFiscalControlador.autoInfracaoManual}">
                                <h:outputText value="#{autoInfracaoFiscalControlador.selecionado.correcao}"
                                              styleClass="negrito">
                                    <f:convertNumber pattern="###,###,##0.00"/>
                                </h:outputText>
                            </p:panel>
                            <p:panel header="Valor Corrigido" styleClass="width150"
                                     rendered="#{!autoInfracaoFiscalControlador.autoInfracaoManual}">
                                <h:outputText
                                    value="#{autoInfracaoFiscalControlador.selecionado.valorAutoInfracaoCorrigido}"
                                    styleClass="negrito">
                                    <f:convertNumber pattern="###,###,##0.00"/>
                                </h:outputText>
                            </p:panel>
                            <p:panel header="Juros Mora" styleClass="width150"
                                     rendered="#{!autoInfracaoFiscalControlador.autoInfracaoManual}">
                                <h:outputText value="#{autoInfracaoFiscalControlador.selecionado.juros}"
                                              styleClass="negrito">
                                    <f:convertNumber pattern="###,###,##0.00"/>
                                </h:outputText>
                            </p:panel>
                            <p:panel header="Multa Mora" styleClass="width150"
                                     rendered="#{!autoInfracaoFiscalControlador.autoInfracaoManual}">
                                <h:outputText value="#{autoInfracaoFiscalControlador.selecionado.multa}"
                                              styleClass="negrito">
                                    <f:convertNumber pattern="###,###,##0.00"/>
                                </h:outputText>
                            </p:panel>
                            <p:panel header="Penalidades" styleClass="width150">
                                <h:outputText
                                    value="#{autoInfracaoFiscalControlador.retornaValorTotalMulta()}"
                                    styleClass="negrito">
                                    <f:convertNumber pattern="###,###,##0.00"/>
                                </h:outputText>
                            </p:panel>
                        </h:panelGrid>
                    </div>
                </p:outputPanel>
                <p:spacer width="10"/>
                <p:outputPanel>
                    <p:tabView>
                        <p:tab title="Lançamento Contábil"
                               rendered="#{!autoInfracaoFiscalControlador.autoInfracaoManual}">
                            <p:panel
                                header="Registro #{autoInfracaoFiscalControlador.registroLancamentoContabil.numeroRegistro}/#{autoInfracaoFiscalControlador.registroLancamentoContabil.ano}">
                                <table style="width: 100%">
                                    <tr>
                                        <td>
                                            <h:panelGrid columns="2">
                                                <h:outputText value="Processo Adm: "/>
                                                <h:outputText
                                                    value="#{autoInfracaoFiscalControlador.registroLancamentoContabil.numeroProcessoAdministrativo}"
                                                    styleClass="azulnegrito"/>
                                                <h:outputText value="Situação: "/>
                                                <h:outputText
                                                    value="#{autoInfracaoFiscalControlador.registroLancamentoContabil.situacao.descricao}"
                                                    styleClass="azulnegrito"/>
                                                <h:outputText value="Autos: "/>
                                                <p:commandButton
                                                    icon="ui-icon-print"
                                                    title="Imprimir Auto de Infração nº. #{autoInfracaoFiscalControlador.selecionado.numero}/#{autoInfracaoFiscalControlador.selecionado.ano}"
                                                    styleClass="botao-transparente"
                                                    update=":formAutoInfracao"
                                                    onclick="imprimeAutoInfracao.show();"
                                                    rendered="#{!autoInfracaoFiscalControlador.selecionado.isSituacaoCancelado()
                                                                and !autoInfracaoFiscalControlador.selecionado.isSituacaoEstornado()}">
                                                </p:commandButton>
                                            </h:panelGrid>
                                        </td>
                                    </tr>
                                </table>
                                <br/>
                                <c:forEach
                                    items="#{autoInfracaoFiscalControlador.registroLancamentoContabil.lancamentosPorAno.keySet()}"
                                    var="lancamento"
                                    varStatus="var2">
                                    <p:dataTable style="font-size: x-small !important;"
                                                 value="#{autoInfracaoFiscalControlador.registroLancamentoContabil.lancamentosPorAno.get(lancamento)}"
                                                 var="lancamentoContabil"
                                                 widgetVar="tabela"
                                                 emptyMessage="Nenhum registro encontrado.">
                                        <f:facet name="header">
                                            <h:outputText
                                                value="Lançamentos contábeis do exercício de ${lancamento}"/>
                                        </f:facet>
                                        <f:facet name="footer">
                                            <h:outputText
                                                value="Lançamentos contábeis do exercício de ${lancamento}"/>
                                        </f:facet>
                                        <p:column headerText="Seq." style="width: 30px">
                                            <h:outputText value="#{lancamentoContabil.sequencia}"/>
                                        </p:column>
                                        <p:column headerText="Mês" style="width: 50px">
                                            <h:outputText value="#{lancamentoContabil.mes.descricao}"/>
                                        </p:column>
                                        <p:column headerText="Ano" style="width: 40px">
                                            <h:outputText value="#{lancamentoContabil.ano}"/>
                                            <f:facet name="footer">
                                                <h:outputText value="TOTAL:" styleClass="negrito"/>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="Vlr Declarado" style="text-align: right">
                                            <h:outputText value="#{lancamentoContabil.valorDeclarado}" size="9"
                                                          id="colValorDeclarado"
                                                          label="Valor Declarado"
                                                          disabled="#{autoInfracaoFiscalControlador.registroLancamentoContabil.isCancelado()}">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <h:outputText value="Vlr Declarado"/><br/>
                                                <h:outputText id="valorTatolDeclarado"
                                                              value="#{autoInfracaoFiscalControlador.retornaValorTotalDeclaradoLancamento(lancamento, autoInfracaoFiscalControlador.registroLancamentoContabil)}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="Vlr Apurado" style="text-align: right">
                                            <h:outputText value="#{lancamentoContabil.valorApurado}" size="9"
                                                          id="colValorApurado" label="Valor Apurado"
                                                          disabled="#{autoInfracaoFiscalControlador.registroLancamentoContabil.isCancelado()}">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <h:outputText value="Vlr Apurado"/><br/>
                                                <h:outputText id="valorTotalApurado"
                                                              value="#{autoInfracaoFiscalControlador.retornaValorTotalApuradoLancamento(lancamento, autoInfracaoFiscalControlador.registroLancamentoContabil)}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="Base Cálculo" style="text-align: right">
                                            <h:outputText value="#{lancamentoContabil.baseCalculo}"
                                                          id="colBaseCalculo">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <h:outputText value="Base Cálculo"/><br/>
                                                <h:outputText id="valorTotalBase"
                                                              value="#{autoInfracaoFiscalControlador.retornaValorTotalBaseCalculoLancamento(lancamento, autoInfracaoFiscalControlador.registroLancamentoContabil)}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="% ISS" style="text-align: right">
                                            <h:outputText value="#{lancamentoContabil.aliquotaISS}" size="9"
                                                          id="colAliquotaISS" label="% ISS">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="ISS Lançado" style="text-align: right">
                                            <h:outputText value="#{lancamentoContabil.issPago}" id="colIssPago">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <h:outputText value="ISS Lançado"/><br/>
                                                <h:outputText id="valorTotalIssPago"
                                                              value="#{autoInfracaoFiscalControlador.retornaValorTotalIssPagoLancamento(lancamento, autoInfracaoFiscalControlador.registroLancamentoContabil)}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="ISS Apurado" style="text-align: right">
                                            <h:outputText value="#{lancamentoContabil.issApurado}"
                                                          id="colIssApurado">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <h:outputText value="ISS Apurado"/><br/>
                                                <h:outputText id="valorTotalIssApurado"
                                                              value="#{autoInfracaoFiscalControlador.retornaValorTotalIssApuradoLancamento(lancamento, autoInfracaoFiscalControlador.registroLancamentoContabil)}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="Saldo do ISS" style="text-align: right">
                                            <h:outputText value="#{lancamentoContabil.issDevido}" id="colIssDevido">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <h:outputText value="Saldo ISS"/><br/>
                                                <h:outputText id="valorTotalSaldo"
                                                              value="#{autoInfracaoFiscalControlador.retornaValorTotalIssDevidoLancamento(lancamento, autoInfracaoFiscalControlador.registroLancamentoContabil)}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="Correção Mon." style="text-align: right">
                                            <h:outputText
                                                value="#{lancamentoContabil.correcao}"
                                                id="correcao">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <h:outputText value="Correção Mon."/><br/>
                                                <h:outputText id="valorTotalCorrecao"
                                                              value="#{autoInfracaoFiscalControlador.retornaValorTotalCorrecaoMonetariaLancamento(lancamento, autoInfracaoFiscalControlador.registroLancamentoContabil)}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="Valor Corrigido" style="text-align: right">
                                            <h:outputText
                                                value="#{autoInfracaoFiscalControlador.calculaValorCorrigido(lancamentoContabil)}"
                                                id="corrigido">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <h:outputText value="Valor Corrigido"/><br/>
                                                <h:outputText id="valorTotalCorrigido"
                                                              value="#{autoInfracaoFiscalControlador.retornaValorTotalCorrigidoLancamento(lancamento, autoInfracaoFiscalControlador.registroLancamentoContabil)}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="Juros Mora" style="text-align: right">
                                            <h:outputText
                                                value="#{lancamentoContabil.juros}"
                                                id="juros">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <h:outputText value="Juros Mora"/><br/>
                                                <h:outputText id="valorTotalJuros"
                                                              value="#{autoInfracaoFiscalControlador.retornaValorTotalJurosMoraLancamento(lancamento, autoInfracaoFiscalControlador.registroLancamentoContabil)}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="Multa Mora" style="text-align: right">
                                            <h:outputText
                                                value="#{lancamentoContabil.multa}"
                                                id="multa">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <h:outputText value="Multa Mora"/><br/>
                                                <h:outputText id="valorTotalMulta"
                                                              value="#{autoInfracaoFiscalControlador.retornaValorTotalMultaMoraLancamento(lancamento, autoInfracaoFiscalControlador.registroLancamentoContabil)}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column headerText="Valor Total" style="text-align: right">
                                            <h:outputText
                                                value="#{autoInfracaoFiscalControlador.calculaTotalLancamento(lancamentoContabil)}"
                                                id="total">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <h:outputText value="Valor Total"/><br/>
                                                <h:outputText id="valorTotal"
                                                              value="#{autoInfracaoFiscalControlador.retornaValorTotalTotalLancamento(lancamento, autoInfracaoFiscalControlador.registroLancamentoContabil)}"
                                                              styleClass="negrito">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                    </p:dataTable>
                                    <p:spacer width="10"/>
                                </c:forEach>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Multas">
                            <p:panel
                                header="Registro #{autoInfracaoFiscalControlador.registroLancamentoContabil.numeroRegistro}/#{autoInfracaoFiscalControlador.registroLancamentoContabil.ano}"
                                rendered="#{autoInfracaoFiscalControlador.registroLancamentoContabil.multas.size() >0}">
                                <h:panelGrid columns="2">
                                    <h:outputText value="Processo Adm: " rendered="#{!autoInfracaoFiscalControlador.autoInfracaoManual}"/>
                                    <h:outputText
                                        value="#{autoInfracaoFiscalControlador.registroLancamentoContabil.numeroProcessoAdministrativo}"
                                        styleClass="azulnegrito"
                                        rendered="#{!autoInfracaoFiscalControlador.autoInfracaoManual}"/>
                                    <h:outputText value="Situação: "/>
                                    <h:outputText
                                        value="#{autoInfracaoFiscalControlador.registroLancamentoContabil.situacao.descricao}"
                                        styleClass="azulnegrito"/>
                                </h:panelGrid>
                                <p:dataTable id="tableMultas${var.index}"
                                             value="#{autoInfracaoFiscalControlador.registroLancamentoContabil.multas}"
                                             var="multas"
                                             widgetVar="tabelaMulta"
                                             emptyMessage="Nenhum registro encontrado.">
                                    <f:facet name="header">
                                        <h:outputText
                                            value="Multas do Registro #{autoInfracaoFiscalControlador.registroLancamentoContabil.numeroRegistro}/#{autoInfracaoFiscalControlador.registroLancamentoContabil.ano}"/>
                                    </f:facet>
                                    <f:facet name="footer">
                                        <h:outputText
                                            value="Multas do Registro #{autoInfracaoFiscalControlador.registroLancamentoContabil.numeroRegistro}/#{autoInfracaoFiscalControlador.registroLancamentoContabil.ano}"/>
                                    </f:facet>
                                    <p:column headerText="Registro">
                                        <h:outputText value="#{multas.registroLancamentoContabil}"/>
                                    </p:column>
                                    <p:column headerText="Referência" style="text-align: left">
                                        <h:outputText
                                            value="#{autoInfracaoFiscalControlador.montarReferenciaMulta(multas)}"/>
                                    </p:column>
                                    <p:column headerText="Multa" style="text-align: left">
                                        <h:outputText value="#{multas.multaFiscalizacao.artigo}"/>
                                        <f:facet name="footer">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                        </f:facet>
                                    </p:column>
                                    <p:column headerText="Valor (R$)" style="text-align: right">
                                        <h:outputText value="#{multas.valorMulta}">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </h:outputText>
                                        <f:facet name="footer">
                                            <h:outputText
                                                value="#{autoInfracaoFiscalControlador.retornaValorTotalMulta()}"
                                                styleClass="negrito">
                                                <f:convertNumber pattern="#,##0.00"/>
                                            </h:outputText>
                                        </f:facet>
                                    </p:column>
                                    <p:column headerText="Valor (UFM)" style="text-align: right">
                                        <h:outputText value="#{multas.valorMultaIndice}">
                                            <f:convertNumber pattern="#,##0.0000"/>
                                        </h:outputText>
                                        <f:facet name="footer">
                                            <h:outputText
                                                value="#{autoInfracaoFiscalControlador.retornaValorTotalMultaIndice()}"
                                                styleClass="negrito">
                                                <f:convertNumber pattern="#,##0.0000"/>
                                            </h:outputText>
                                        </f:facet>
                                    </p:column>
                                    <p:column headerText="Alíquota (%)" style="text-align: right">
                                        <h:outputText value="#{multas.aliquota}">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Base de Cálculo" style="text-align: right">
                                        <h:outputText value="#{multas.baseCalculo}">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>
                    </p:tabView>
                </p:outputPanel>
            </p:panel>
            <br/>
            <p:commandButton id="botaoCiência" value="Ciência"
                             icon="ui-icon-check"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             styleClass="operacao #{autoInfracaoFiscalControlador.desabilitaCiencia() eq true? '': 'prioritario'} ; mrig05"
                             actionListener="#{autoInfracaoFiscalControlador.ciencia}" update="@form"
                             onclick="if(!confirm('Confirma a CIÊNCIA desse Auto de Infração?')) return false;"
                             disabled="#{autoInfracaoFiscalControlador.desabilitaCiencia()}"/>

            <p:commandButton id="botaoRevelia" value="Revelia"
                             icon="ui-icon-close"
                             styleClass="operacao ; mrig05"
                             onclick="dialogRevelia.show()"
                             disabled="#{autoInfracaoFiscalControlador.desabilitaRevelia()}"/>

            <h:commandLink actionListener="#{autoInfracaoFiscalControlador.imprimeDam()}"
                           disabled="#{autoInfracaoFiscalControlador.desabilitaImpressaoDamAcaoFiscal()}"
                           target="_blank">
                <p:commandButton id="botaoDam" value="Imprimir DAM da Ação Fiscal"
                                 icon="ui-icon-print"
                                 styleClass="operacao ; mrig05"
                                 disabled="#{autoInfracaoFiscalControlador.desabilitaImpressaoDamAcaoFiscal()}"
                                 ajax="false"/>
            </h:commandLink>

            <h:commandLink actionListener="#{autoInfracaoFiscalControlador.imprimeDamMulta()}"
                           disabled="#{autoInfracaoFiscalControlador.desabilitaImpressaoDamMulta()}"
                           target="_blank">
                <p:commandButton id="botaoDamMulta" value="Imprimir DAM das Multas"
                                 icon="ui-icon-print"
                                 disabled="#{autoInfracaoFiscalControlador.desabilitaImpressaoDamMulta()}"
                                 styleClass="operacao ; mrig05"
                                 ajax="false"/>
            </h:commandLink>

            <p:commandButton
                value="Auto de Infração"
                icon="ui-icon-print"
                styleClass="operacao mrig05"
                update=":formAutoInfracao"
                onclick="imprimeAutoInfracao.show();"
                rendered="#{!autoInfracaoFiscalControlador.selecionado.isSituacaoCancelado()
                                                                and !autoInfracaoFiscalControlador.selecionado.isSituacaoEstornado()
                                                                and autoInfracaoFiscalControlador.autoInfracaoManual}">
            </p:commandButton>

            <p:commandButton styleClass="operacao" ajax="false" value="Voltar"
                             icon="ui-icon-cancel"
                             actionListener="#{autoInfracaoFiscalControlador.cancelar()}"/>
        </h:form>

        <p:dialog id="dgRevelia" widgetVar="dialogRevelia" width="640" modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  header="Revelia" resizable="false">
            <h:form id="FormularioRevelia">
                <h:panelGrid columns="2">
                    <fc:outputLabelObrigatorio value="Observação: "/>
                    <p:inputTextarea value="#{autoInfracaoFiscalControlador.selecionado.observacaoRevelia}"
                                     rows="3" cols="65"/>
                </h:panelGrid>

                <div style="width: 100%; text-align: center">
                    <p:commandButton id="botaoConfirmRevelia" value="Confirmar Revelia"
                                     icon="ui-icon-check"
                                     styleClass="operacao prioritario mrig05"
                                     onclick="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     update=":Formulario"
                                     actionListener="#{autoInfracaoFiscalControlador.revelia}"/>
                    <p:commandButton id="botaoCancelaRevelia" value="Cancelar"
                                     icon="ui-icon-cancel"
                                     styleClass="operacao"
                                     onclick="dialogRevelia.hide()"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog modal="true" widgetVar="imprimeAutoInfracao" width="700" closable="false"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  header="Gerar Auto de Infração">
            <h:form id="formAutoInfracao">
                <center>
                    <h:outputText value="Fundamentação Legal:"/>
                    <br/>
                    <p:inputTextarea style="margin-top: 5px" cols="80" rows="10" disabled="true"
                                     value="#{autoInfracaoFiscalControlador.selecionado.registro.autoInfracaoValido.fundamentacao}"/>
                    <br/>
                    <br/>

                    <fc:botaoTargetBlank actionListener="#{autoInfracaoFiscalControlador.gerarAutoInfracao()}"
                                         icon="ui-icon-print"
                                         label="Imprimir"
                                         styleClass="operacao prioritario"
                                         imprimeNoDialog="true"/>
                    <p:commandButton value="Cancelar"
                                     styleClass="operacao"
                                     onclick="imprimeAutoInfracao.hide()"
                                     icon="ui-icon-cancel"/>
                </center>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
