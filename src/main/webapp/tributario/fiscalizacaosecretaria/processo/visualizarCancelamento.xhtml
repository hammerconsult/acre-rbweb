<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
        >

<ui:composition template="/corpo.xhtml">
<ui:define name="body">
<h:form id="Formulario">
    <fc:cabecalhoPretty origem="#{processoFiscalizacaoControlador.caminhoPadrao}listar/"
                        mostrarBotaoNovo="${false}"
                        auditavel="${true}"
                        controlador="#{processoFiscalizacaoControlador}"/>

    <p:panel header="Cancelamento de Processo de Fiscalização">
<div style="text-align: right;">
    <h:outputText id="situacaoprincipal"
                  value="Situação: #{processoFiscalizacaoControlador.ultimaSituacao(processoFiscalizacaoControlador.selecionado)}"
                  style="font-size: 14px;font-style: italic " styleClass="negrito"/>
</div>
<h:panelGrid columns="2" id="gridPrincipal">
<fc:outputLabelObrigatorio value="Código: "/>
<h:outputText styleClass="negrito"
              value="#{processoFiscalizacaoControlador.selecionado.codigo}"/>
<fc:outputLabelObrigatorio value="Secretaria: "/>
<h:panelGrid columns="3" cellpadding="0" cellspacing="0">
    <h:panelGroup>
        <h:outputText styleClass="negrito"
                      value="#{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.codigo} - #{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.unidadeOrganizacional.descricao}"/>
        &nbsp;
        <button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only vinteLarguraVinteAltura"
                title="Informações da Secretaria" type="submit" role="button" aria-disabled="true"
                data-toggle="collapse" href="#collapseSecretaria">
            <span class="ui-button-icon-left ui-icon ui-icon-info"/>
        </button>

        <div id="collapseSecretaria" class="accordion-body collapse">
            <div class="accordion-inner">
                <p:panel id="detalhesSecretaria">
                    <h:panelGrid columns="2">
                        <h:outputText value="Código: "/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.codigo}"
                                styleClass="negrito"/>

                        <h:outputText value="Descrição: "/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.unidadeOrganizacional.descricao}"
                                styleClass="negrito"/>

                        <h:outputText value="Departamento: "/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.departamento.descricao}"
                                styleClass="negrito"/>

                        <h:outputText value="Responsável: "/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.pessoaFisica.nome}"
                                styleClass="negrito"/>

                        <h:outputText value="Dívida Imobiliario: "/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.dividaImobiliario.descricao}"
                                styleClass="negrito"/>

                        <h:outputText value="Dívida Econômico: "/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.dividaEconomico.descricao}"
                                styleClass="negrito"/>

                        <h:outputText value="Dívida Rural: "/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.dividaRural.descricao}"
                                styleClass="negrito"/>

                        <h:outputText value="Dívida Pessoa Física/Jurídica: "/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.dividaPessoa.descricao}"
                                styleClass="negrito"/>
                    </h:panelGrid>
                    <br/>
                    <p:panel header="Prazo para Recursos">
                        <h:outputText value="#{secretariaFiscalizacaoControlador.selecionado.prazoRecurso}"/>
                        <h:panelGrid columns="2" style="width: 100%">
                            <h:outputText
                                    value="Notificação (Dias): #{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.prazoRecurso}"/>
                            <h:outputText
                                    value="Vencto do DAM após a Geração (Dias): #{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.vencimentoDam}"/>
                            <h:outputText
                                    value="Auto de Infração (Dias): #{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.prazoAutoInfracao}"/>
                            <h:outputText
                                    value="Prazo de Reincidência Genérica (Anos): #{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.prazoReincidenciaGenerica}"/>
                            <h:outputText
                                    value="1ª Instância (Dias): #{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.prazoPrimeiraInstancia}"/>
                            <h:outputText
                                    value="Prazo de Reincidência Específica (Anos): #{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.prazoReincidenciaEspecifica}"/>
                            <h:outputText
                                    value="2ª Instância (Dias): #{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.prazoSegundaInstancia}"/>
                            <h:outputText
                                    value="Prazo da Secretaria (Dias): #{processoFiscalizacaoControlador.selecionado.secretariaFiscalizacao.prazoPrefeitura}"/>
                        </h:panelGrid>
                    </p:panel>
                </p:panel>
            </div>
        </div>
    </h:panelGroup>
</h:panelGrid>

<fc:outputLabelObrigatorio value="Data da Fiscalização: "/>
<h:outputText value="#{processoFiscalizacaoControlador.selecionado.dataCadastro}" styleClass="negrito">
    <f:convertDateTime pattern="dd/MM/yyyy"/>
</h:outputText>

<fc:outputLabelObrigatorio value="Tipo do Levantamento: "/>
<h:outputText styleClass="negrito" title="Selecione o tipo do levantamento."
              value="#{processoFiscalizacaoControlador.selecionado.tipoLevantamentoFiscalizacao.descricao}"
              id="levantamento"/>

<fc:outputLabelObrigatorio value="Denúncia: " rendered="#{processoFiscalizacaoControlador.denuncia}"/>
<h:panelGroup rendered="#{processoFiscalizacaoControlador.denuncia}">

    <h:outputText styleClass="negrito" value="#{processoFiscalizacaoControlador.selecionado.denuncia}"
            />
    <button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only vinteLarguraVinteAltura"
            title="Informações da Secretaria" type="submit" role="button" aria-disabled="true"
            data-toggle="collapse" href="#collapseOne">
        <span class="ui-button-icon-left ui-icon ui-icon-info"/>
    </button>

    <div id="collapseOne" class="accordion-body collapse">
        <div class="accordion-inner">
            <p:panel id="detalhesDenuncia">
                <h:panelGrid columns="2">
                    <h:outputText value="Origem:"/>
                    <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.tipoOrigemDenuncia}"
                                  styleClass="negrito"/>
                    <h:outputText value="Referência da Origem:"/>
                    <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.referenciaOrigem}"
                                  styleClass="negrito"/>
                    <h:outputText value="Secretaria:"/>
                    <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.secretariaFiscalizacao}"
                                  styleClass="negrito"/>
                    <h:outputText value="Data:"/>
                    <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.dataDenuncia}"
                                  styleClass="negrito">
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </h:outputText>
                    <h:outputText value="Usuário:"/>
                    <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.usuarioSistema.nome}"
                                  styleClass="negrito"/>
                    <h:outputText value="Situação:"/>
                    <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.situacao}"
                                  styleClass="negrito"/>
                    <h:outputText value="Tipo de Denúncia:"/>
                    <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.tipoDenuncia}"
                                  styleClass="negrito"/>
                    <h:outputText value="Detalhes da Denúncia:"/>
                    <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.detalhamento}"
                                  styleClass="negrito"/>
                </h:panelGrid>
                <p:panel header="Dados do Denunciante" id="painelDenunciante">
                    <h:panelGrid columns="2">
                        <h:outputText value="Nome/Razão Social:"/>
                        <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciante.nome}"
                                      styleClass="negrito"/>

                        <h:outputText value="CPF/CNPJ:"/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciante.cpfCnpj}"
                                styleClass="negrito"/>

                        <h:outputText value="Endereço:"/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciante.endereco}"
                                styleClass="negrito"/>

                        <h:outputText value="Número:"/>
                        <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciante.numero}"
                                      styleClass="negrito"/>

                        <h:outputText value="Complemento:"/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciante.complemento}"
                                styleClass="negrito"/>

                        <h:outputText value="Bairro:"/>
                        <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciante.bairro}"
                                      styleClass="negrito"/>

                        <h:outputText value="Telefone Fixo:"/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciante.telefoneFixo}"
                                styleClass="negrito"/>

                        <h:outputText value="Telefone Celular:"/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciante.telefoneCelular}"
                                styleClass="negrito"/>
                    </h:panelGrid>
                </p:panel>
                <br/>
                <p:panel header="Dados do Denunciado" id="painelDenunciado">
                    <h:panelGrid columns="2">
                        <h:outputText value="Nome/Razão Social:"/>
                        <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciado.nome}"
                                      styleClass="negrito"/>

                        <h:outputText value="CPF/CNPJ:"/>
                        <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciado.cpfCnpj}"
                                      styleClass="negrito"/>

                        <h:outputText value="Endereço:"/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciado.endereco}"
                                styleClass="negrito"/>

                        <h:outputText value="Número:"/>
                        <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciado.numero}"
                                      styleClass="negrito"/>

                        <h:outputText value="Complemento:"/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciado.complemento}"
                                styleClass="negrito"/>

                        <h:outputText value="Bairro:"/>
                        <h:outputText value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciado.bairro}"
                                      styleClass="negrito"/>

                        <h:outputText value="Telefone Fixo:"/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciado.telefoneFixo}"
                                styleClass="negrito"/>

                        <h:outputText value="Telefone Celular:"/>
                        <h:outputText
                                value="#{processoFiscalizacaoControlador.selecionado.denuncia.denunciado.telefoneCelular}"
                                styleClass="negrito"/>
                    </h:panelGrid>
                </p:panel>
            </p:panel>
        </div>
    </div>

</h:panelGroup>

</h:panelGrid>
<br/>
<p:panel header="Dados do Fiscalizado" id="dadosFiscalizado">
    <h:panelGrid columns="2">
        <fc:outputLabelObrigatorio value="Tipo de Cadastro: "/>
        <h:outputText styleClass="negrito" title="Selecione o tipo de cadastro."
                      value="#{processoFiscalizacaoControlador.selecionado.tipoCadastroFiscalizacao.descricao}"
                      id="tipocadastro"/>
        <h:outputText value="Cadastro:"/>
        <h:outputText styleClass="negrito"
                      rendered="#{processoFiscalizacaoControlador.selecionado.tipoCadastroFiscalizacao ne 'PESSOA'}"
                      value="#{processoFiscalizacaoControlador.selecionado.cadastro}"
                />

        <h:outputText styleClass="negrito"
                      rendered="#{processoFiscalizacaoControlador.selecionado.tipoCadastroFiscalizacao eq 'PESSOA'}"
                      value="#{processoFiscalizacaoControlador.selecionado.pessoa.nomeAutoComplete}"
                />
    </h:panelGrid>
    <p:outputPanel rendered="#{processoFiscalizacaoControlador.selecionado.cadastro ne null}">
        <h:panelGrid
                columns="2"
                rendered="#{processoFiscalizacaoControlador.selecionado.tipoCadastroFiscalizacao eq 'IMOBILIARIO'}">
            <h:outputText value="Distrito: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.lote.setor.distrito}"/>
            <h:outputText value="Setor: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.lote.setor.codigo}"/>
            <h:outputText value="Quadra: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.lote.quadra.codigo}"/>
            <h:outputText value="Lote: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.lote.codigoLote}"/>
            <h:outputText value="Loteamento: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.lote.quadra.loteamento.nome}"/>
            <h:outputText value="Complemento do Lote: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.lote.complemento}"/>
            <h:outputText value="Lote do Loteamento: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.lote.descricaoLoteamento}"/>
            <h:outputText value="Endereço: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.lote.endereco}"/>
            <h:outputText value="Área do Terreno: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.lote.areaLote}">
                <f:convertNumber pattern="#,##0.00"/>
            </h:outputText>
            <h:outputText value="Área Total Construída: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.cadastro.areaTotalConstruida}">
                <f:convertNumber pattern="#,##0.00"/>
            </h:outputText>
            <h:outputText value="Situação: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.cadastro.ativo ? 'Ativo' : 'Inativo'}"/>
            <h:outputText value="Propritários: "/>
            <h:panelGroup>
                <ui:repeat value="#{processoFiscalizacaoControlador.propriedadesBCI}"
                           var="propriedade">
                    <h:outputText styleClass="negrito"
                                  value="#{propriedade.pessoa.nomeAutoComplete} - #{propriedade.proporcao}%"/><br/>
                </ui:repeat>
            </h:panelGroup>
        </h:panelGrid>
        <h:panelGrid
                columns="2"
                rendered="#{processoFiscalizacaoControlador.selecionado.tipoCadastroFiscalizacao eq 'ECONOMICO'}">
            <h:outputText value="Endereço de Localização: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.cadastro.localizacao}"/>
            <h:outputText value="Sócios: "/>
            <h:panelGroup>
                <ui:repeat
                        value="#{processoFiscalizacaoControlador.socios}"
                        var="socio">
                    <h:outputText styleClass="negrito"
                                  value="#{socio.socio.nomeAutoComplete} - #{socio.proporcao}%"/><br/>
                </ui:repeat>
            </h:panelGroup>
        </h:panelGrid>

        <h:panelGrid
                columns="2"
                rendered="#{processoFiscalizacaoControlador.selecionado.tipoCadastroFiscalizacao eq 'RURAL'}">
            <h:outputText value="Endereço Fiscal: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.cadastro.enderecoFiscal}"/>
            <h:outputText value="Via de Acesso: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.cadastro.viaAcesso}"/>
            <h:outputText value="Distância da Sede (Km): "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.cadastro.distanciaSede}"/>
            <h:outputText value="Área: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.cadastro.areaLote}">
                <f:convertNumber pattern="#,##0.00"/>
            </h:outputText>
            <h:outputText value="Tipo de Área: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.cadastro.tipoAreaRural.descricao}"/>
            <h:outputText value="Incra: "/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.cadastro.numeroIncra}"/>

            <h:outputText value="Proprietários: "/>
            <h:panelGroup>
                <ui:repeat
                        value="#{processoFiscalizacaoControlador.propriedadesBCR}"
                        var="propriedade">
                    <h:outputText styleClass="negrito"
                                  value="#{propriedade.pessoa.nomeAutoComplete} - #{propriedade.proporcao}%"/><br/>
                </ui:repeat>
            </h:panelGroup>
        </h:panelGrid>
    </p:outputPanel>
    <p:outputPanel rendered="#{processoFiscalizacaoControlador.selecionado.pessoa ne null}">
        <p:dataTable value="#{processoFiscalizacaoControlador.enderecos}"
                     emptyMessage="Nenhum endereço encontrado"
                     var="endereco">
            <f:facet name="header">
                Endereço(s) do Denunciante
            </f:facet>
            <p:column headerText="Tipo" styleClass="negrito">
                #{endereco.tipoEndereco.descricao}
            </p:column>
            <p:column headerText="Logradouro">
                #{endereco.logradouro}
            </p:column>
            <p:column headerText="Número">
                #{endereco.numero}
            </p:column>
            <p:column headerText="Complemento">
                #{endereco.complemento}
            </p:column>
            <p:column headerText="Bairro">
                #{endereco.bairro}
            </p:column>
            <p:column headerText="Cidade">
                #{endereco.localidade}
            </p:column>
            <p:column headerText="UF">
                #{endereco.uf}
            </p:column>
            <p:column headerText="CEP">
                #{endereco.cep}
            </p:column>
            <p:column headerText="Principal">
                #{endereco.principal? 'Sim' : 'Não'}
            </p:column>
        </p:dataTable>
        <br/>
        <p:dataTable value="#{processoFiscalizacaoControlador.telefones}"
                     emptyMessage="Nenhum telefone encontrado"
                     var="telefone">
            <f:facet name="header">
                Telefone(s) do Denunciante
            </f:facet>
            <p:column headerText="Tipo" styleClass="negrito">
                #{telefone.tipoFone.tipoFone}
            </p:column>
            <p:column headerText="Número">
                #{telefone.telefone}
            </p:column>
            <p:column headerText="Principal">
                #{telefone.principal? 'Sim' : 'Não'}
            </p:column>
        </p:dataTable>
    </p:outputPanel>
</p:panel>

<br/>
<p:panel header="Local da Ocorrência">
    <h:panelGrid columns="2">
        <h:outputText value="Bairro:"/>
        <h:outputText styleClass="negrito"
                      value="#{processoFiscalizacaoControlador.selecionado.localOcorrencia.logradouroBairro.bairro.descricao}"
                      size="120"/>

        <h:outputText value="Logradouro:"/>
        <h:outputText styleClass="negrito"
                      value="#{processoFiscalizacaoControlador.selecionado.localOcorrencia.logradouroBairro.logradouro.tipoLogradouro.descricao} -
                      #{processoFiscalizacaoControlador.selecionado.localOcorrencia.logradouroBairro.logradouro.nome}"
                      size="120"/>

        <h:outputText value="Número:"/>
        <h:outputText styleClass="negrito"
                      value="#{processoFiscalizacaoControlador.selecionado.localOcorrencia.numero}" size="30"/>

        <h:outputText value="Ponto de Referência:"/>
        <h:outputText styleClass="negrito"
                      value="#{processoFiscalizacaoControlador.selecionado.localOcorrencia.pontoReferencia}"
                      size="70"/>
    </h:panelGrid>
</p:panel>
<br/>

<p:tabView id="tabs" activeIndex="#{processoFiscalizacaoControlador.tabIndex}">
<p:tab title="Situações do Processo" id="tabssituacao">
    <p:outputPanel id="tab-situacoes">
        <p:dataTable value="#{processoFiscalizacaoControlador.selecionado.situacoesProcessoFiscalizacao}"
                     var="situacao" emptyMessage="Nenhuma situacao encontrada!"
                     sortBy="#{situacao.data}"
                     sortOrder="ascending">
            <p:column headerText="Data">
                <h:outputText value="#{situacao.data}">
                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                </h:outputText>
            </p:column>
            <p:column headerText="Situação">
                <h:outputText value="#{situacao.statusProcessoFiscalizacao.descricao}"/>
            </p:column>
        </p:dataTable>
    </p:outputPanel>
</p:tab>
<p:tab title="Infrações e Penalidades" id="tabInfracoes">
    <p:outputPanel id="tab-infracoes">
        <p:dataTable value="#{processoFiscalizacaoControlador.selecionado.itensProcessoFiscalizacao}"
                     emptyMessage="Nenhum infração/penalidade registrado"
                     var="item">
            <f:facet name="header">
                Infrações/Penalidades
            </f:facet>
            <p:column headerText="Tarefa" style="width: 20%; text-align: left;">
                <h:outputText
                    value="#{item.tarefaAuditorFiscal.codigo} - #{item.tarefaAuditorFiscal.descricaoReduzida} - #{item.tarefaAuditorFiscal.descricaoDetalhada}"/>
            </p:column>
            <p:column headerText="Infração" style="width: 20%; text-align: left;">
                <h:outputText
                    value="#{item.infracaoFiscalizacaoSecretaria.codigo} - #{item.infracaoFiscalizacaoSecretaria.descricaoReduzida} - #{item.infracaoFiscalizacaoSecretaria.descricaoDetalhada}"/>
            </p:column>
            <p:column headerText="Penalidade" style="width: 20%; text-align: left; ">
                <h:outputText
                    value="#{item.penalidadeFiscalizacaoSecretaria.codigo} - #{item.penalidadeFiscalizacaoSecretaria.descricaoReduzida} - #{item.penalidadeFiscalizacaoSecretaria.descricaoDetalhada}"/>
            </p:column>
            <p:column headerText="Valor Unitário (R$)" style="width: 10%; text-align: right; ">
                <h:outputText value="#{item.valorReais(processoFiscalizacaoControlador.valorUFMVigente())}">
                    <f:convertNumber pattern="#,##0.0000"/>
                </h:outputText>
            </p:column>
            <p:column headerText="Quantidade" style="width: 10%; text-align: right; ">
                <h:outputText value="#{item.quantidade}"/>
            </p:column>
            <p:column headerText="Valor Total (R$)" style="width: 10%; text-align: right; ">
                <h:outputText
                    value="#{item.valorTotalReais(processoFiscalizacaoControlador.valorUFMVigente())}">
                    <f:convertNumber pattern="#,##0.00"/>
                </h:outputText>
                <f:facet name="footer" styleClass="negrito">
                    Total (R$):
                    <h:outputText
                        value="#{processoFiscalizacaoControlador.selecionado.somaValorTotalReaisItemProcesso(processoFiscalizacaoControlador.valorUFMVigente())}">
                        <f:convertNumber pattern="#,##0.00"/>
                    </h:outputText>
                </f:facet>
            </p:column>
        </p:dataTable>
    </p:outputPanel>
</p:tab>

<p:tab title="Termo de Advertência/Notificação" id="tabAdv">
    <p:outputPanel id="tab-termo-advertencia">
        <h:panelGrid columns="2" id="gridTermoAdvertencia">
            <h:outputText value="Número do Termo:" style="margin-right: 49px!important"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.termoAdvertencia.numero}"
                          size="25"/>

            <h:outputText value="Nome Pessoa Ciência:"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.termoAdvertencia.nomePessoaCiencia}"
                          size="30"/>

            <h:outputText value="Auditor Fiscal:"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.termoAdvertencia.usuarioSistema.pessoaFisica.nome}"
                    />

            <h:outputText value="Encerramento do Termo:"/>
            <h:outputText styleClass="negrito" id="encerramentoTermo"
                          value="#{processoFiscalizacaoControlador.selecionado.termoAdvertencia.enceramentoTermoAdvertencia.descricao}"
                          title="Selecione um tipo de encerramento do termo de advertência"/>

            <h:outputText value="Data Ciência:"/>
            <h:outputText styleClass="negrito" id="dataCiencia"
                          size="25"
                          value="#{processoFiscalizacaoControlador.selecionado.termoAdvertencia.dataCiencia}"
                    >
                <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
            </h:outputText>

            <h:outputText value="Data Lavratura:"/>
            <h:outputText styleClass="negrito" id="dataLavratura"
                          size="25"
                          value="#{processoFiscalizacaoControlador.selecionado.termoAdvertencia.dataLavratura}"
                    >
                <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
            </h:outputText>

            <h:outputText value="Prazo para Cumprimento (em dias):"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.termoAdvertencia.prazoDiasCumprimento}"
                          size="25"/>

            <h:outputText value="Data Retorno:"/>
            <h:outputText id="dataRetorno"
                          value="#{processoFiscalizacaoControlador.selecionado.termoAdvertencia.dataRetorno}"
                          styleClass="negrito">
                <f:convertDateTime pattern="dd/MM/yyyy"/>
            </h:outputText>
        </h:panelGrid>

        <h:panelGrid columns="1">
            <h:outputText value="Descrição da  Infração/Notificação:"/>
            <h:outputText styleClass="negrito" id="descricaoDaInfracaoTermo"
                          value="#{processoFiscalizacaoControlador.selecionado.termoAdvertencia.descricaoDaInfracao}"
                    />
        </h:panelGrid>

        <p:commandButton value="Imprimir Termo de Advertência/Notificação" icon="ui-icon-print"
                         styleClass="operacao"
                         onclick="aguarde.show()"
                         oncomplete="aguarde.hide()"
                         actionListener="#{processoFiscalizacaoControlador.geraPDFTermoDeAdvertencia()}"
                         disabled="#{processoFiscalizacaoControlador.desabilitaImpressaoTermoInfracaoNotificacao()}"
                />
    </p:outputPanel>
</p:tab>

<p:tab title="Auto de Infração" id="tabInfracao">
    <p:outputPanel id="tab-auto-infracao">
        <h:panelGrid columns="2">
            <h:outputText value="Número:" style="margin-right: 110px!important"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.autoInfracaoFiscalizacao.numero}"
                          disabled="true" style="margin-right: 47px!important"/>

            <h:outputText value="Número do Formulário:"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.autoInfracaoFiscalizacao.numeroFormulario}"
                          label="Número do Formulário"
                          id="numeroFormulario"/>

            <h:outputText value="Auditor Fiscal:"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.autoInfracaoFiscalizacao.usuarioSistema.pessoaFisica.nome}"
                          title="Selecione o usuário"
                    />

            <h:outputText value="Data Infração:"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.autoInfracaoFiscalizacao.dataInfracao}"
                    >
                <f:convertDateTime pattern="dd/MM/yyyy"/>
            </h:outputText>

            <h:outputText value="Data Lavratura:"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.autoInfracaoFiscalizacao.dataLavratura}"
                    >
                <f:convertDateTime pattern="dd/MM/yyyy"/>
            </h:outputText>

            <h:outputText value="Nome Pessoa Ciência:"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.autoInfracaoFiscalizacao.pessoaCiencia}"
                          size="40"/>


            <h:outputText value="Data Ciência:"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.autoInfracaoFiscalizacao.dataCiencia}"
                    >
                <f:convertDateTime pattern="dd/MM/yyyy"/>
            </h:outputText>

            <h:outputText value="Prazo Recurso:"/>
            <h:outputText id="prazoRecurso"
                          value="#{processoFiscalizacaoControlador.selecionado.autoInfracaoFiscalizacao.prazoRecurso}"
                          styleClass="negrito">
                <f:convertDateTime pattern="dd/MM/yyyy"/>
            </h:outputText>
        </h:panelGrid>
        <br/>
        <h:panelGrid columns="1">
            <h:outputText value="Descrição:"/>
            <h:outputText styleClass="negrito"
                          value="#{processoFiscalizacaoControlador.selecionado.autoInfracaoFiscalizacao.descricaoInfracao}"
                          cols="100" rows="5"/>
        </h:panelGrid>

        <br/>

        <p:commandButton value="Imprimir Auto de Infração" icon="ui-icon-print"
                         styleClass="operacao"
                         onclick="aguarde.show()"
                         oncomplete="aguarde.hide()"
                         actionListener="#{processoFiscalizacaoControlador.geraPDFAutoInfracao()}"
                         disabled="#{processoFiscalizacaoControlador.desabilitaImpressaoAutoInfracao()}"
                />

    </p:outputPanel>
</p:tab>
<p:tab title="Recursos" id="tabviewrecursos">
    <p:outputPanel id="tab-recursos">
        <p:dataTable value="#{processoFiscalizacaoControlador.selecionado.recursoFiscalizacaos}"
                     var="recurso" emptyMessage="Nenhum recurso encontrado!">

            <p:column headerText="Data Entrada" style="text-align: center">
                <h:outputText value="#{recurso.dataEntrada}">
                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                </h:outputText>
            </p:column>

            <p:column headerText="Tipo" style="text-align: center">
                <h:outputText value="#{recurso.tipoRecursoFiscalizacao.descricao}"/>
            </p:column>

            <p:column headerText="Teor" style="text-align: center">
                <h:outputText value="[ Passe o mouse aqui ]" title="#{recurso.teorRecurso}"
                              style="font-size: xx-small"/>
            </p:column>

            <p:column headerText="Data do Parecer" style="text-align: center">
                <h:outputText value="#{recurso.dataParecer}" style="font-size: xx-small"
                              rendered="#{recurso.dataParecer != null}">
                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                </h:outputText>
                <h:outputText value=" - " style="font-size: xx-small" rendered="#{recurso.dataParecer == null}"/>
            </p:column>

            <p:column headerText="Data do Novo Prazo" style="text-align: center">
                <h:outputText value="#{recurso.dataNovoPrazo}" style="font-size: xx-small"
                              rendered="#{recurso.dataNovoPrazo != null}">
                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                </h:outputText>
                <h:outputText value=" - " style="font-size: xx-small" rendered="#{recurso.dataNovoPrazo == null}"/>
            </p:column>

            <p:column headerText="Emitir Parecer" style="text-align: center;">
                <p:commandButton icon="ui-icon-clipboard" title="Clique para emitir o parecer"
                                 styleClass="wp-botao-tabela"
                                 oncomplete="dialogParecerRecurso.show()"
                                 actionListener="#{processoFiscalizacaoControlador.emitirParecer(recurso)}"
                                 disabled="#{recurso.parecerRecurso != null}"/>
            </p:column>

            <p:column headerText="Imprimir Parecer" style="text-align: center;">
                <p:commandButton icon="ui-icon-print"
                                 styleClass="wp-botao-tabela"
                                 onclick="aguarde.show()"
                                 oncomplete="aguarde.hide()"
                                 actionListener="#{processoFiscalizacaoControlador.geraPDFRecurso(recurso)}"
                                 disabled="#{recurso.documentoOficial.id == null}"
                        />
            </p:column>
        </p:dataTable>

    </p:outputPanel>
</p:tab>
<p:tab title="Termos Gerais" id="termosgerais">
    <p:outputPanel id="tab-termos-gerais">

        <p:dataTable value="#{processoFiscalizacaoControlador.selecionado.termoGeralFiscalizacao}"
                     var="termoGeral" emptyMessage="Nenhum termo encontrado!">
            <p:column headerText="Descrição" style="text-align: center">
                <h:outputText value="#{termoGeral.documentoOficial.modeloDoctoOficial.tipoDoctoOficial.descricao}"/>
            </p:column>
            <p:column headerText="Data de Emissão" style="text-align: center">
                <h:outputText value="#{termoGeral.documentoOficial.dataEmissao}">
                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                </h:outputText>
            </p:column>
            <p:column headerText="Imprimir" style="text-align: center">
                <p:commandButton icon="ui-icon-print"
                                 styleClass="wb-botao-tabela"
                                 onclick="aguarde.show()"
                                 oncomplete="aguarde.hide()"
                                 actionListener="#{processoFiscalizacaoControlador.geraPDF(termoGeral.documentoOficial)}"
                        />
            </p:column>
        </p:dataTable>
    </p:outputPanel>
</p:tab>
<p:tab title="Anexar Arquivos">
    <p:panel id="panelUpload" header="Arquivos">


        <p:dataTable id="tabelaItem"
                     value="#{processoFiscalizacaoControlador.selecionado.detentorArquivoComposicao.arquivosComposicao}"
                     var="arquivoComposicao"
                     emptyMessage="Nenhum arquivo cadastrado.">
            <p:column headerText="Data do Upload">
                <h:outputText value="#{arquivoComposicao.dataUpload}">
                    <f:convertDateTime pattern="dd/MM/yyy"/>
                </h:outputText>
            </p:column>
            <p:column headerText="Descrição" style="text-align: center">
                <p:inputText value="#{arquivoComposicao.arquivo.descricao}" size="100" maxlength="100"
                             rendered="#{arquivoComposicao.arquivo.id eq null}"/>
                <h:outputText value="#{arquivoComposicao.arquivo.descricao}"
                              rendered="#{arquivoComposicao.arquivo.id ne null}"/>
            </p:column>
            <p:column rendered="#{arquivoComposicao.arquivo.id eq null}" headerText="Visualizar"
                      style="text-align: center">
                <p:commandButton id="downloadLink" value="Download" ajax="false" icon="ui-icon-circle-arrow-s"
                                 process="@form" update="@this"
                                 onstart="statusDialog.show();"
                                 oncomplete="statusDialog.hide();">
                    <p:fileDownload
                            value="#{processoFiscalizacaoControlador.assistenteDetentorArquivoComposicao.getStream(arquivoComposicao)}"/>
                </p:commandButton>
            </p:column>
            <p:column rendered="#{arquivoComposicao.arquivo.id ne null}" headerText="Download"
                      style="width: 10%; text-align: center">
                <a title="Download"
                   href="${facesContext.externalContext.requestContextPath}/arquivos/#{arquivoComposicao.arquivo.nome}?id=#{arquivoComposicao.arquivo.id}">#{arquivoComposicao.arquivo.nome}</a>
            </p:column>
            <p:column headerText="" style="width: 5%; text-align: center">
                <p:commandButton icon="ui-icon-close"
                                 update="tabelaItem"
                                 process="@this"
                                 actionListener="#{processoFiscalizacaoControlador.assistenteDetentorArquivoComposicao.removerArquivo(arquivoComposicao)}"
                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {statusDialog.show();}"
                                 oncomplete="statusDialog.hide()"/>
            </p:column>
        </p:dataTable>
    </p:panel>
</p:tab>
</p:tabView>
<br/>
<p:dataTable id="tabelaparcelas"
             paginator="true"
             rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
             rowIndexVar="rowIx"
             styleClass="mtop05"
             rows="10"
             value="#{processoFiscalizacaoControlador.recuperaParcelas}"
             var="parcela"
             emptyMessage="Não há parcelas geradas."
             style="margin-top: 5px"
             paginatorTemplate="{CurrentPageReport}  &lt;spanclass='titulo-tabela mrig10'>PARCELAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
             currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
             rowsPerPageTemplate="10,25,50,100">
    <p:column headerText="Cadastro" style="width: 8%;">
        <h:outputText value="#{parcela.cadastro}"/>
    </p:column>
    <p:column headerText="Dívida" style="width: 12%;">
        <h:outputText value="#{parcela.divida}"/>
    </p:column>
    <p:column headerText="Exercício" style="width: 5%; text-align: center;">
        <h:outputText value="#{parcela.exercicio}"/>
    </p:column>
    <p:column headerText="Tipo de Débito" style="width: 5%;">
        <h:outputText value="#{parcela.tipoDeDebito}"/>
    </p:column>
    <p:column headerText="Parcela" style="width: 2%; text-align: center;">
        <h:outputText value="#{parcela.parcela}"/>
    </p:column>
    <p:column headerText="SD" style="width: 2%; text-align: center;">
        <h:outputText value="#{parcela.sd}"/>
    </p:column>
    <p:column headerText="Vencimento" style="width: 5%; text-align: center;">
        <h:outputText value="#{parcela.vencimentoToString}"/>
    </p:column>
    <p:column headerText="Valor" style="text-align: right">
        <h:outputText value="#{parcela.valorOriginal}">
            <f:convertNumber pattern="###,##0.00"/>
        </h:outputText>
    </p:column>
    <p:column headerText="Imposto" style="text-align: right">
        <h:outputText value="#{parcela.valorImposto}">
            <f:convertNumber pattern="###,##0.00"/>
        </h:outputText>
    </p:column>
    <p:column headerText="Taxa" style="text-align: right">
        <h:outputText value="#{parcela.valorTaxa}">
            <f:convertNumber pattern="###,##0.00"/>
        </h:outputText>
    </p:column>
    <p:column headerText="Desconto" style="text-align: right">
        <h:outputText value="#{parcela.valorDesconto}">
            <f:convertNumber pattern="###,##0.00"/>
        </h:outputText>
    </p:column>
    <p:column headerText="Juros" style="text-align: right">
        <h:outputText value="#{parcela.valorJuros}">
            <f:convertNumber pattern="###,##0.00"/>
        </h:outputText>
    </p:column>
    <p:column headerText="Multa" style="text-align: right">
        <h:outputText value="#{parcela.valorMulta}">
            <f:convertNumber pattern="###,##0.00"/>
        </h:outputText>
    </p:column>
    <p:column headerText="Correcao" style="text-align: right">
        <h:outputText value="#{parcela.valorCorrecao}">
            <f:convertNumber pattern="###,##0.00"/>
        </h:outputText>
    </p:column>
    <p:column headerText="Honorários" style="text-align: right">
        <h:outputText value="#{parcela.valorHonorarios}">
            <f:convertNumber pattern="###,##0.00"/>
        </h:outputText>
    </p:column>
    <p:column headerText="Total" style="text-align: right">
        <h:outputText value="#{parcela.valorTotal}">
            <f:convertNumber pattern="###,##0.00"/>
        </h:outputText>
    </p:column>
    <p:column headerText="Situação">
        <h:outputText value="#{parcela.situacaoDescricaoEnum}" title="cod. ${parcela.idParcela}"/>
    </p:column>
</p:dataTable>
</p:panel>
<br/>

<div align="left">
    <p:commandButton id="cancelar"
                     actionListener="#{processoFiscalizacaoControlador.solicitaCancelarProcessoFiscalizacao()}"
                     value="Cancelar Processo" icon="ui-icon-closethick"
                     onstart="aguarde.show()"
                     oncomplete="aguarde.hide()"
                     styleClass="operacao prioritario"
                     update="Formulario"
                     title="Clique aqui para cancelar o processo de fiscalização."/>

    <p:commandButton id="fechar"
                     ajax="false"
                     icon="ui-icon-cancel"
                     styleClass="operacao  mlef05"
                     value="Fechar"
                     actionListener="#{processoFiscalizacaoControlador.fecharCancelamento}"/>
</div>
</h:form>
<p:dialog header="Cancelamento do Processo Fiscal"
          modal="true"
          dynamic="true"
          position="center"
          style="position: fixed !important;"
          resizable="false"
          widgetVar="dialogCancelamento"
          closable="false">
    <h:form>
        <h:panelGrid columns="2" cellpadding="5px; ">
            <h:outputText value="Data/Hora: " styleClass="negrito"/>
            <h:outputText value="#{processoFiscalizacaoControlador.cancelamentoProcessoFiscal.dataHora}">
                <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
            </h:outputText>
            <h:outputText value="Usuario: " styleClass="negrito"/>
            <h:outputText value="#{processoFiscalizacaoControlador.cancelamentoProcessoFiscal.usuarioSistema.nome}"/>
            <h:outputText value="Motivo: " styleClass="negrito"/>
            <p:inputTextarea value="#{processoFiscalizacaoControlador.cancelamentoProcessoFiscal.motivo}"
                             cols="100" rows="5" maxlength="1000"/>
        </h:panelGrid>

        <div align="center">
            <p:commandButton id="confirmar"
                             icon="ui-icon-check"
                             styleClass="operacao prioritario"
                             value="Confirmar"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             onclick="if (!confirm('Tem certeza que deseja cancelar este processo?'))
                                     return false;"
                             actionListener="#{processoFiscalizacaoControlador.cancelarProcessoFiscalizacao()}"/>
            <p:commandButton id="fechar"
                             icon="ui-icon-cancel"
                             styleClass="operacao mlef05"
                             value="Fechar"
                             onclick="dialogCancelamento.hide()"/>
        </div>
    </h:form>

</p:dialog>
</ui:define>
</ui:composition>
</html>
