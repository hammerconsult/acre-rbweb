<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <fc:cabecalhoPretty origem="#{calculoDividaDiversaControlador.caminhoPadrao}listar/"
                                mostrarBotaoNovo="${false}"
                                auditavel="${true}"
                                controlador="#{calculoDividaDiversaControlador}"/>
            <p:panel header="Detalhes do Lançamento da Dívida Diversa">
                <p:panel style="border: 0; text-align: right;">
                    <h:outputText value="Situação -> "/>
                    <h:outputText value="#{calculoDividaDiversaControlador.selecionado.situacao.descricao}"
                                  style="text-transform: uppercase" styleClass="azulnegrito"/>
                </p:panel>
                <h:panelGrid columns="2">
                    <h:outputText value="Exercício: "/>
                    <h:outputText value="#{calculoDividaDiversaControlador.selecionado.exercicio}"
                                  styleClass="negrito"/>
                    <h:outputText value="Exercício do Débito: "
                                  rendered="#{calculoDividaDiversaControlador.hasPermissaoParaLancarDividaDiversaExercicioAnterior()}"/>
                    <h:outputText value="#{calculoDividaDiversaControlador.selecionado.exercicioDoDebito}"
                                  rendered="#{calculoDividaDiversaControlador.hasPermissaoParaLancarDividaDiversaExercicioAnterior()}"
                                  styleClass="negrito"/>
                    <h:outputText value="Número:"/>
                    <h:outputText value="#{calculoDividaDiversaControlador.selecionado.numeroLancamento}"
                                  styleClass="negrito"/>
                    <h:outputText value="Data:"/>
                    <h:outputText value="#{calculoDividaDiversaControlador.selecionado.dataLancamento}"
                                  styleClass="negrito">
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </h:outputText>
                    <h:outputText value="Usuário:"/>
                    <h:outputText value="#{calculoDividaDiversaControlador.selecionado.usuarioLancamento}"
                                  styleClass="negrito"/>
                    <h:outputText value="Tipo Dívida Diversa: "/>
                    <h:outputText value="#{calculoDividaDiversaControlador.selecionado.tipoDividaDiversa}"
                                  styleClass="negrito"/>
                    <h:outputText value="Número Processo de Protocolo:"/>
                    <h:outputText value="#{calculoDividaDiversaControlador.selecionado.numeroProcessoProtocolo}"
                                  styleClass="negrito"/>
                    <h:outputText value="Ano Processo de Protocolo:"/>
                    <h:outputText value="#{calculoDividaDiversaControlador.selecionado.anoProcessoProtocolo}"
                                  styleClass="negrito"/>
                </h:panelGrid>
                <br/>
                <p:panel header="#{calculoDividaDiversaControlador.selecionado.tipoCadastroTributario.descricao}">
                    <c:if test="${calculoDividaDiversaControlador.selecionado.tipoCadastroTributario == 'IMOBILIARIO'}">
                        <h:panelGrid columns="2">
                            <h:outputText value="Inscrição Cadastral:"/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.inscricaoCadastral}"
                                styleClass="negrito"/>

                            <h:outputText value="Setor: "/>
                            <h:outputText value="#{calculoDividaDiversaControlador.selecionado.cadastro.lote.setor}"
                                          styleClass="negrito"/>

                            <h:outputText value="Quadra: "/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.lote.quadra.descricao}"
                                styleClass="negrito"/>

                            <h:outputText value="Lote (Município): "/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.lote.codigoLote}"
                                styleClass="negrito"/>

                            <h:outputText value="Loteamento: "/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.lote.quadra.loteamento}"
                                styleClass="negrito"/>

                            <h:outputText value="Lote (Loteamento): "/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.lote.descricaoLoteamento}"
                                styleClass="negrito"/>

                            <h:outputText value="Tipo de Logradouro: "/>
                            <h:outputText value="#{calculoDividaDiversaControlador.tipoLogradouroCadastroImobiliario}"
                                          styleClass="negrito"/>

                            <h:outputText value="Logradouro: "/>
                            <h:outputText value="#{calculoDividaDiversaControlador.logradouroCadastroImobiliario}"
                                          styleClass="negrito"/>

                            <h:outputText value="Número: "/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.lote.numeroCorreio}"
                                styleClass="negrito"/>

                            <h:outputText value="Complemento (Lote): "/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.lote.complemento}"
                                styleClass="negrito"/>

                            <h:outputText value="Complemento (BCI): "/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.complementoEndereco}"
                                styleClass="negrito"/>

                            <h:outputText value="Bairro: "/>
                            <h:outputText value="#{calculoDividaDiversaControlador.bairroCadastroImobiliario}"
                                          styleClass="negrito"/>

                            <h:outputText value="CEP: "/>
                            <h:outputText value="#{calculoDividaDiversaControlador.cepCadastroImobiliario}"
                                          styleClass="negrito"/>
                        </h:panelGrid>
                        <br/>
                    </c:if>
                    <c:if test="${calculoDividaDiversaControlador.selecionado.tipoCadastroTributario == 'ECONOMICO'}">
                        <h:panelGrid columns="2">
                            <h:outputText value="C.M.C.:"/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.inscricaoCadastral}"
                                styleClass="negrito"/>

                            <h:outputText value="Nome/Razão Social:"/>
                            <h:outputText value="#{calculoDividaDiversaControlador.selecionado.cadastro.pessoa.nome}"
                                          styleClass="negrito"/>

                            <h:outputText value="CPF/CNPJ:"/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.pessoa.cpf_Cnpj}"
                                styleClass="negrito"/>
                        </h:panelGrid>
                    </c:if>
                    <c:if test="${calculoDividaDiversaControlador.selecionado.tipoCadastroTributario == 'RURAL'}">
                        <h:panelGrid columns="2">
                            <h:outputText value="Código:"/>
                            <h:outputText value="#{calculoDividaDiversaControlador.selecionado.cadastro.codigo}"
                                          styleClass="negrito"/>

                            <h:outputText value="Nome da Propriedade:"/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.nomePropriedade}"
                                styleClass="negrito"/>

                            <h:outputText value="Endereço Fiscal:"/>
                            <h:outputText value="#{calculoDividaDiversaControlador.selecionado.cadastro.enderecoFiscal}"
                                          styleClass="negrito"/>

                            <h:outputText value="Localização:"/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.localizacaoLote}"
                                styleClass="negrito"/>

                            <h:outputText value="Localização:"/>
                            <h:outputText
                                value="#{calculoDividaDiversaControlador.selecionado.cadastro.localizacaoLote}"
                                styleClass="negrito"/>

                            <h:outputText value="Área:"/>
                            <h:outputText value="#{calculoDividaDiversaControlador.selecionado.cadastro.areaLote}"
                                          styleClass="negrito"/>

                            <h:outputText value="Tipo de Área:"/>
                            <h:outputText value="#{calculoDividaDiversaControlador.selecionado.cadastro.tipoAreaRural}"
                                          styleClass="negrito"/>
                        </h:panelGrid>
                        <br/>
                        <p:dataTable
                            value="#{componentePesquisaCadastroRuralControlador.recuperaPessoasCadastro(calculoDividaDiversaControlador.selecionado.cadastro)}"
                            var="pessoaCad"
                            emptyMessage="Nenhuma pessoa encontrada no cadastro selecionado!">
                            <f:facet name="header">
                                <h:outputText value="Proprietários"/>
                            </f:facet>
                            <p:column headerText="Nome">
                                <h:outputText value="#{pessoaCad.nome}"/>
                            </p:column>
                            <p:column headerText="CPF/CNPJ">
                                <h:outputText value="#{pessoaCad.cpf_Cnpj}"/>
                            </p:column>
                            <p:column headerText="Tipo de Pessoa">
                                <h:outputText value="#{pessoaCad.tipoPessoa}"/>
                            </p:column>
                        </p:dataTable>
                    </c:if>
                    <c:if test="${calculoDividaDiversaControlador.selecionado.tipoCadastroTributario == 'PESSOA'}">
                        <h:panelGroup>
                            <c:forEach items="${calculoDividaDiversaControlador.selecionado.pessoas}"
                                       var="calculoPessoa">
                                <table>
                                    <tbody>
                                    <tr>
                                        <td class="negrito">${calculoPessoa.pessoa.nomeCpfCnpj}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </c:forEach>
                        </h:panelGroup>
                    </c:if>
                </p:panel>
            </p:panel>
            <br/>
            <p:panel>
                <p:dataTable id="tabela" var="objeto"
                             value="#{calculoDividaDiversaControlador.selecionado.itens}"
                             emptyMessage="Nenhum Tributo adicionado"
                             widgetVar="tabela">
                    <f:facet name="header">
                        <h:outputText value="Tributos Adicionados"/>
                    </f:facet>
                    <f:facet name="footer">
                        <h:outputText
                            value="Quantidade de Tributos Adicionados: #{calculoDividaDiversaControlador.selecionado.itens.size()}"/>
                    </f:facet>
                    <p:column headerText="Tributo">
                        <h:outputText value="#{objeto.tributoTaxaDividasDiversas.tributo.descricao}"/>
                    </p:column>
                    <p:column headerText="Quantidade" style="text-align: right; width: 12%">
                        <h:outputText value="#{objeto.quantidade}">
                            <f:convertNumber pattern="###,##0.0000"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Valor Unitário (UFM)" style="text-align: right; width: 12%">
                        <h:outputText value="#{objeto.valorUFM}">
                            <f:convertNumber pattern="###,##0.0000"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Valor Total (UFM)" style="text-align: right; width: 12%">
                        <h:outputText value="#{objeto.valorUFMTotal}">
                            <f:convertNumber pattern="###,##0.0000"/>
                        </h:outputText>
                        <f:facet name="footer">
                            <h:outputText value="Total: "/>
                            <h:outputText styleClass="negrito" value="#{calculoDividaDiversaControlador.totalUFM}">
                                <f:convertNumber pattern="###,##0.0000"/>
                            </h:outputText>
                        </f:facet>
                    </p:column>
                    <p:column headerText="Valor Unitário (R$)" style="text-align: right; width: 12%">
                        <h:outputText value="#{objeto.valorReal}">
                            <f:convertNumber pattern="###,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Valor Total (R$)" style="text-align: right; width: 12%">
                        <h:outputText value="#{objeto.valorRealTotal}">
                            <f:convertNumber pattern="###,##0.00"/>
                        </h:outputText>
                        <f:facet name="footer">
                            <h:outputText value="Total: "/>
                            <h:outputText styleClass="negrito" value="#{calculoDividaDiversaControlador.totalReais}">
                                <f:convertNumber pattern="###,##0.00"/>
                            </h:outputText>
                        </f:facet>
                    </p:column>
                </p:dataTable>
            </p:panel>
            <br/>
            <p:panel header="Anexos">
                <p:dataTable id="tabelaAnexos" value="#{calculoDividaDiversaControlador.arquivos}" var="arq"
                             emptyMessage="Nenhum anexo adicionado.">
                    <p:column headerText="Data do Upload">
                        <h:outputText value="#{arq.dataUpload}">
                            <f:convertDateTime pattern="dd/MM/yyy"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Descrição">
                        <h:outputText value="#{arq.arquivo.descricao}" size="120"/>
                    </p:column>
                    <p:column headerText="Download">
                        <a title="Download" target="_blank"
                           href="${facesContext.externalContext.requestContextPath}/arquivos/#{arq.arquivo.nome}?id=#{arq.arquivo.id}">#{arq.arquivo.nome}</a>
                    </p:column>
                </p:dataTable>
            </p:panel>
            <br/>
            <p:panel header="Observação">
                <br/>
                <p:inputTextarea id="observacao" value="#{calculoDividaDiversaControlador.selecionado.observacao}"
                                 style="width: 99%; height: 80px" readonly="true"/>
            </p:panel>
            <br/>

            <div style="background: wheat; width: 100%;">
                <p:dataTable id="tabelaparcelas"
                             paginator="true"
                             rows="100"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="10,20,30"
                             var="parcela"
                             rowStyleClass="#{parcela.situacaoDescricaoEnum eq 'Em Aberto'? parcela.vencimento lt programacaoCobrancaControlador.dataOperacao? 'vermelho': 'verde': ''}"
                             emptyMessage="Nenhuma parcela encontrada"
                             value="#{calculoDividaDiversaControlador.recuperaParcelas}">
                    <f:facet name="header">
                        <p:outputPanel>
                            <h:outputText value="Parcelas"/>
                        </p:outputPanel>
                    </f:facet>
                    <p:column headerText="DAM" style="width: 8%;">
                        <h:outputText
                            value="#{calculoDividaDiversaControlador.recuperaDAM(parcela.idParcela).numeroDAM}"/>
                    </p:column>
                    <p:column headerText="Cadastro" style="width: 8%;">
                        <h:outputText value="#{parcela.cadastro}"/>
                    </p:column>
                    <p:column headerText="Dívida" style="width: 12%;">
                        <h:outputText value="#{parcela.divida}"/>
                    </p:column>
                    <p:column headerText="Exercício" style="width: 5%; text-align: center;">
                        <h:outputText value="#{parcela.exercicio}"/>
                    </p:column>
                    <p:column headerText="Tipo de Débito" style="width: 5%;">
                        <h:outputText value="#{parcela.tipoDeDebito}"/>
                    </p:column>
                    <p:column headerText="Parcela" style="width: 2%; text-align: center;">
                        <h:outputText value="#{parcela.parcela}"/>
                    </p:column>
                    <p:column headerText="SD" style="width: 2%; text-align: center;">
                        <h:outputText value="#{parcela.sd}"/>
                    </p:column>
                    <p:column headerText="Vencimento" style="width: 5%; text-align: center;">
                        <h:outputText value="#{parcela.vencimentoToString}"/>
                    </p:column>
                    <p:column headerText="Valor" style="text-align: right">
                        <h:outputText value="#{parcela.valorOriginal}">
                            <f:convertNumber pattern="###,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Imposto" style="text-align: right">
                        <h:outputText value="#{parcela.valorImposto}">
                            <f:convertNumber pattern="###,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Taxa" style="text-align: right">
                        <h:outputText value="#{parcela.valorTaxa}">
                            <f:convertNumber pattern="###,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Desconto" style="text-align: right">
                        <h:outputText value="#{parcela.valorDesconto}">
                            <f:convertNumber pattern="###,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Juros" style="text-align: right">
                        <h:outputText value="#{parcela.valorJuros}">
                            <f:convertNumber pattern="###,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Multa" style="text-align: right">
                        <h:outputText value="#{parcela.valorMulta}">
                            <f:convertNumber pattern="###,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Correcao" style="text-align: right">
                        <h:outputText value="#{parcela.valorCorrecao}">
                            <f:convertNumber pattern="###,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Honorários" style="text-align: right">
                        <h:outputText value="#{parcela.valorHonorarios}">
                            <f:convertNumber pattern="###,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Total" style="text-align: right">
                        <h:outputText value="#{parcela.valorTotal}">
                            <f:convertNumber pattern="###,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Situação">
                        <h:outputText value="#{parcela.situacaoDescricaoEnum}" title="cod. ${parcela.idParcela}"/>
                    </p:column>
                </p:dataTable>
            </div>
            <br/>
            <p:panel header="Dados do Cancelamento"
                     rendered="#{calculoDividaDiversaControlador.selecionado.situacao eq 'CANCELADO' and calculoDividaDiversaControlador.selecionado ne null}">
                <h:panelGrid columns="2">
                    <h:outputText value="Data: "/>
                    <h:outputText
                        value="#{calculoDividaDiversaControlador.selecionado.cancelamentoDividaDiversa.dataCancelamento}"
                        styleClass="negrito">
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </h:outputText>

                    <h:outputText value="Usuário: "/>
                    <h:outputText
                        value="#{calculoDividaDiversaControlador.selecionado.cancelamentoDividaDiversa.usuarioCancelamento.nome}"
                        styleClass="negrito"/>

                    <h:outputText value="Motivo: "/>
                    <h:outputText
                        value="#{calculoDividaDiversaControlador.selecionado.cancelamentoDividaDiversa.motivo}"
                        styleClass="negrito"/>
                </h:panelGrid>
            </p:panel>
            <h:panelGrid columns="4">
                <fc:rodapeVisualizarPretty controlador="#{calculoDividaDiversaControlador}" mostrarExcluir="false"
                                           labelCancelar="Fechar"/>

                <p:commandButton icon="ui-icon-refresh" styleClass="operacao prioritario mtop10 mrig05" value="Efetivar"
                                 update=":formDlgEfetivacao" oncomplete="widgetDlgEfetivacao.show()"
                                 actionListener="#{calculoDividaDiversaControlador.efetivar()}" process="@form"
                                 disabled="#{!calculoDividaDiversaControlador.podeEfetivar()}"/>

                <p:commandButton icon="ui-icon-print" styleClass="operacao mtop10 mrig05" value="Imprimir DAM"
                                 disabled="#{calculoDividaDiversaControlador.desabilitaImpressaoDAM()}"
                                 actionListener="#{calculoDividaDiversaControlador.selecionaDams}"
                                 update=":formSelecionaDams" oncomplete="selecionaDams.show()"/>

                <fc:botaoTargetBlank actionListener="#{calculoDividaDiversaControlador.imprimeDemonstrativo()}"
                                     styleClass="mtop10 mrig05"
                                     disabled="#{calculoDividaDiversaControlador.desabilitaImpressaoDemonstrativo()}"
                                     label="Imprimir Demonstrativo"/>

            </h:panelGrid>
        </h:form>
        <p:dialog modal="true" widgetVar="widgetDlgEfetivacao" header="Efetivação do Lançamento da Dívida Diversa"
                  closable="false" resizable="true" width="800">
            <h:form id="formDlgEfetivacao">
                <h:panelGrid columns="3">
                    <h:outputText value="Valor Total (R$): "/>
                    <p:inputText id="valorTotalVisualizar" value="#{calculoDividaDiversaControlador.totalReais}"
                                 readonly="true">
                        <f:convertNumber pattern="###,###,##0.00"/>
                    </p:inputText>
                    <p:message for="valorTotalVisualizar"/>

                    <h:outputText value="Quantidade Máxima de Parcelas: "/>
                    <h:outputText value="#{calculoDividaDiversaControlador.descricaoQuantidadeMaximaParcelas()}"
                                  styleClass="negrito"/>
                    <p:spacer/>
                    <h:outputText value="Vencimento da Primeira Parcela: "/>
                    <p:calendar pattern="dd/MM/yyyy" showOn="button" onkeyup="mascara(this, mdata);"
                                value="#{calculoDividaDiversaControlador.selecionado.dataVencimento}">
                        <p:ajax event="blur" process="@this" update="tabela"
                                listener="#{calculoDividaDiversaControlador.simularParcelamentoDividaAtiva()}"/>
                        <p:ajax event="dateSelect" process="@this" update="tabela"
                                listener="#{calculoDividaDiversaControlador.simularParcelamentoDividaAtiva()}"/>
                    </p:calendar>
                    <p:message for="quantParcelas"/>

                    <h:outputText value="Quantidade de Parcelas: "/>
                    <p:inputText id="quantParcelas"
                                 value="#{calculoDividaDiversaControlador.selecionado.numeroParcelas}">
                        <p:ajax event="keyup" process="@this" update="tabela"
                                listener="#{calculoDividaDiversaControlador.simularParcelamentoDividaAtiva()}"/>
                    </p:inputText>
                    <p:message for="quantParcelas"/>


                </h:panelGrid>
                <p:panel header="Simulação das parcelas a serem geradas">
                    <p:dataTable id="tabela" var="objeto"
                                 value="#{calculoDividaDiversaControlador.listaParcelas}"
                                 emptyMessage="Não é possível calcular as parcelas."
                                 style="font-size: smaller"
                                 widgetVar="tabela">
                        <p:column headerText="Parcela">
                            <h:outputText value="#{objeto.parcela}"/>
                        </p:column>
                        <p:column headerText="Valor (R$)">
                            <h:outputText value="#{objeto.valor}">
                                <f:convertNumber pattern="###,###,##0.00"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Vencimento">
                            <h:outputText value="#{objeto.vencimento}">
                                <f:convertDateTime parent="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                    </p:dataTable>
                </p:panel>
                <br/>
                <p:commandButton value="Confirmar" icon="ui-icon-circle-check" styleClass="operacao prioritario"
                                 onstart="aguarde.show();" oncomplete="aguarde.hide(); widgetDlgEfetivacao.hide()"
                                 disabled="#{calculoDividaDiversaControlador.listaParcelas.size() == 0}"
                                 process="formDlgEfetivacao"
                                 actionListener="#{calculoDividaDiversaControlador.efetivarCalculo()}"
                                 update=":Formulario"/>
                <p:commandButton value="Cancelar" icon="ui-icon-circle-close" styleClass="operacao"
                                 onclick="widgetDlgEfetivacao.hide()" update=":Formulario"/>
            </h:form>
        </p:dialog>
        <p:dialog widgetVar="selecionaDams" modal="true" header="Selecione os DAMs que serão impressos" width="800">
            <h:form id="formSelecionaDams">
                <h:panelGrid columns="2">
                    <h:outputLabel value="Contribuinte: "/>
                    <p:selectOneMenu value="#{calculoDividaDiversaControlador.pessoa}"
                                     converter="#{pessoaTributarioControlador.converterPessoa}">
                        <f:selectItems value="#{calculoDividaDiversaControlador.selecionado.pessoas}"
                                       var="calculoPessoa"
                                       itemValue="#{calculoPessoa.pessoa}" itemLabel="#{calculoPessoa.pessoa}"/>
                    </p:selectOneMenu>
                </h:panelGrid>
                <p:dataTable value="#{calculoDividaDiversaControlador.damsDisponiveis}"
                             selection="#{calculoDividaDiversaControlador.damsSelecionados}"
                             rowKey="#{dam}"
                             emptyMessage="Nenhum DAM encontrado."
                             var="dam">
                    <p:column selectionMode="multiple"/>
                    <p:column headerText="Dam">
                        <h:outputText value="${dam.numeroDAM}"/>
                    </p:column>
                    <p:column headerText="Vencimento">
                        <h:outputText value="${dam.vencimento}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Valor" styleClass="alinhamentoDireita">
                        <h:outputText value="${dam.valorOriginal}">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Multa" styleClass="alinhamentoDireita">
                        <h:outputText value="${dam.multa}">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Juros" styleClass="alinhamentoDireita">
                        <h:outputText value="${dam.juros}">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Correção" styleClass="alinhamentoDireita">
                        <h:outputText value="${dam.correcaoMonetaria}">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Total" styleClass="alinhamentoDireita">
                        <h:outputText value="${dam.valorTotal}">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>
                    </p:column>
                </p:dataTable>
                <br/>
                <h:commandLink actionListener="#{calculoDividaDiversaControlador.imprimeDam()}"
                               target="_blank" id="commandLinkImpDam" onclick="selecionaDams.hide()">
                    <p:commandButton value="Imprimir" icon="ui-icon-print"
                                     styleClass="operacao"
                                     ajax="false"
                                     id="commandButtonImpDam"/>
                </h:commandLink>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
