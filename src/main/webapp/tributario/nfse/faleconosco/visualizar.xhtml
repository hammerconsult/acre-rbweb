<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <fc:cabecalhoPretty origem="#{faleConoscoNfseControlador.caminhoPadrao}listar/"
                                mostrarBotaoNovo="${false}"
                                auditavel="${true}"
                                controlador="#{faleConoscoNfseControlador}"/>
            <p:panel header="Visualizar Fale Conosco" id="faleConoscoPanel">
                <p:panel header="Pergunta" id="panelMensagem" styleClass="mtop05">
                    <h:panelGrid columns="2">
                        <h:outputLabel value="Data de Envio: " for="enviadoEm"/>
                        <h:outputLabel id="enviadoEm"
                                       value="#{faleConoscoNfseControlador.selecionado.dataEnvio}"
                                       styleClass="negrito">
                            <f:convertDateTime type="date" pattern="dd/MM/yyyy hh:MM:ss"/>
                        </h:outputLabel>

                        <h:outputLabel value="Sistema: " for="sistema"/>
                        <h:outputText id="sistema" value="#{faleConoscoNfseControlador.selecionado.sistema.descricao}"
                                      styleClass="negrito"/>

                        <h:outputLabel value="Tipo: " for="tipo"/>
                        <h:outputText id="tipo" value="#{faleConoscoNfseControlador.selecionado.tipo.descricao}"
                                      styleClass="negrito"/>

                        <h:outputLabel value="Assunto: " for="assunto"/>
                        <h:outputText id="assunto" value="#{faleConoscoNfseControlador.selecionado.assunto}"
                                      styleClass="negrito"/>
                    </h:panelGrid>

                    <p:panel header="Dados do Reclamante/Tomador do Serviço" styleClass="mtop05">
                        <h:panelGrid columns="2">
                            <h:outputLabel value="CPF: " for="nome"/>
                            <h:outputText id="cpfCnpj"
                                          value="#{faleConoscoNfseControlador.selecionado.dadosReclamante.cpfCnpj}"
                                          styleClass="negrito"/>

                            <h:outputLabel value="Nome: " for="nome"/>
                            <h:outputText id="nome"
                                          value="#{faleConoscoNfseControlador.selecionado.dadosReclamante.nomeRazaoSocial}"
                                          styleClass="negrito"/>

                            <h:outputLabel value="Telefone: " for="telefone"/>
                            <h:outputText id="telefone"
                                          value="#{faleConoscoNfseControlador.selecionado.dadosReclamante.telefone}"
                                          styleClass="negrito"/>

                            <h:outputLabel value="E-mail: " for="email"/>
                            <h:outputText id="email"
                                          value="#{faleConoscoNfseControlador.selecionado.dadosReclamante.email}"
                                          styleClass="negrito"/>
                        </h:panelGrid>
                    </p:panel>

                    <p:panel header="Dados do Reclamado" styleClass="mtop05">
                        <h:panelGrid columns="2">
                            <h:outputLabel value="CPF/CNPJ: "/>
                            <h:outputText value="#{faleConoscoNfseControlador.selecionado.dadosReclamado.cpfCnpj}"
                                          styleClass="negrito"/>

                            <h:outputLabel value="Nome/Razão Social: "/>
                            <h:outputText
                                value="#{faleConoscoNfseControlador.selecionado.dadosReclamado.nomeRazaoSocial}"
                                styleClass="negrito"/>

                            <h:outputLabel value="Endereço: "/>
                            <h:outputText
                                value="#{faleConoscoNfseControlador.selecionado.dadosReclamado.enderecoCompleto}"
                                styleClass="negrito"/>

                            <h:outputLabel value="Telefone: "/>
                            <h:outputText value="#{faleConoscoNfseControlador.selecionado.dadosReclamado.telefone}"
                                          styleClass="negrito"/>

                            <h:outputLabel value="Contato: "/>
                            <h:outputText value="#{faleConoscoNfseControlador.selecionado.dadosReclamado.celular}"
                                          styleClass="negrito"/>
                        </h:panelGrid>
                    </p:panel>

                    <p:panel header="Dados do Serviço" styleClass="mtop05">
                        <h:panelGrid columns="2">
                            <h:outputLabel value="Data: "/>
                            <h:outputText value="#{faleConoscoNfseControlador.selecionado.dataServico}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                            <h:outputLabel value="Descrição: "/>
                            <h:outputText value="#{faleConoscoNfseControlador.selecionado.descricaoServico}"
                                          styleClass="negrito"/>
                            <h:outputLabel value="Número da Nota: "
                                           rendered="#{faleConoscoNfseControlador.selecionado.numeroNotaServico ne null}"/>
                            <h:outputText value="#{faleConoscoNfseControlador.selecionado.numeroNotaServico}"
                                          rendered="#{faleConoscoNfseControlador.selecionado.numeroNotaServico ne null}"
                                          styleClass="negrito"/>
                            <h:outputLabel value="Valor: "
                                           rendered="#{faleConoscoNfseControlador.selecionado.valorServico ne null}"/>
                            <h:outputText value="#{faleConoscoNfseControlador.selecionado.valorServico}"
                                          rendered="#{faleConoscoNfseControlador.selecionado.valorServico ne null}"
                                          styleClass="negrito">
                                <f:convertNumber pattern="###,#0.00"/>
                            </h:outputText>
                        </h:panelGrid>
                    </p:panel>

                    <p:panel header="Reclamação/Denúncia: " styleClass="mtop05">
                        <h:outputText value="#{faleConoscoNfseControlador.selecionado.mensagem}"
                                      escape="false"/>
                    </p:panel>
                </p:panel>

                <p:panel header="Resposta" styleClass="mtop20"
                         rendered="#{faleConoscoNfseControlador.selecionado.situacao.encerrado}">
                    <h:panelGrid columns="2">
                        <h:outputLabel value="Data: "/>
                        <h:outputLabel value="#{faleConoscoNfseControlador.selecionado.dataResposta}"
                                       styleClass="negrito">
                            <f:convertDateTime type="date" pattern="dd/MM/yyyy hh:MM:ss"/>
                        </h:outputLabel>

                        <h:outputLabel value="Usuário: "/>
                        <h:outputLabel
                            value="#{faleConoscoNfseControlador.selecionado.usuarioResposta.pessoaFisica.nome}"
                            styleClass="negrito"/>

                    </h:panelGrid>
                    <p:panel header="Mensagem" styleClass="mtop05">
                        <h:outputText value="#{faleConoscoNfseControlador.selecionado.resposta}" escape="false"/>
                    </p:panel>
                </p:panel>

            </p:panel>

            <p:commandButton
                value="Responder"
                rendered="#{faleConoscoNfseControlador.selecionado.situacao.aberto}"
                icon="ui-icon-mail-closed"
                process="@this :Formulario:faleConoscoPanel"
                update=":formEmails"
                oncomplete="responderFaleConosco.show()"
                styleClass="prioritario mrig05 mtop10"/>

            <p:commandButton
                value="Imprimir"
                actionListener="#{faleConoscoNfseControlador.imprimir()}"
                icon="ui-icon-print"
                onclick="aguarde.show()"
                oncomplete="aguarde.hide()"
                styleClass="mrig05 mtop10"/>

            <fc:rodapeVisualizarPretty id="rpRodapeVisualizarPretty"
                                       controlador="#{faleConoscoNfseControlador}"
                                       mostrarEditar="false" mostrarExcluir="false"/>
        </h:form>

        <p:dialog modal="true"
                  dynamic="true"
                  position="center"
                  showHeader="false"
                  style="position: fixed !important;"
                  resizable="false"
                  widgetVar="responderFaleConosco">
            <h:form id="formEmails">
                <p:panel header="Enviar Resposta" styleClass="mtop05 mbot05">
                    <h:panelGrid columns="2" styleClass="mtop10">
                        <fc:outputLabelObrigatorio value="E-mail: " for="emailResposta"/>
                        <p:inputText id="emailResposta"
                                     value="#{faleConoscoNfseControlador.selecionado.dadosReclamante.email}"
                                     maxlength="255"
                                     size="70"/>

                        <fc:outputLabelObrigatorio value="Resposta:"/>
                        <p:editor id="resposta"
                                  width="900"
                                  height="150"
                                  value="#{faleConoscoNfseControlador.selecionado.resposta}"/>

                    </h:panelGrid>


                    <hr class="mbot05"/>
                    <div align="center">
                        <p:commandButton
                            value="Enviar"
                            icon="ui-icon-arrowreturnthick-1-n"
                            title="Clique para responder este e-mail."
                            process="@this :formEmails"
                            update="@none"
                            onstart="aguarde.show()"
                            oncomplete="aguarde.hide()"
                            actionListener="#{faleConoscoNfseControlador.responder()}"
                            styleClass="operacao mrig10"/>

                        <p:commandButton
                            value="Fechar"
                            icon="ui-icon-close"
                            title="Clique para fechar esta janela."
                            process="@this"
                            update="@none"
                            onclick="aguarde.show()"
                            oncomplete="aguarde.hide();responderFaleConosco.hide()"
                            styleClass="operacao"/>
                    </div>

                </p:panel>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
