<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <link rel="stylesheet"
              href="#{facesContext.externalContext.requestContextPath}/resources/js/code_edit/lib/codemirror.css"/>
        <script src="#{facesContext.externalContext.requestContextPath}/resources/js/code_edit/lib/codemirror.js"/>
        <script src="#{facesContext.externalContext.requestContextPath}/resources/js/code_edit/mode/xml/xml.js"/>

        <fc:consultaEntidade id="xmlWsNfse" chave="XMLWSNFSE" outrosBotoesTabela="/tributario/nfse/rps/botoesColuna.xhtml"/>

        <p:dialog id="idDlgVerXml" widgetVar="dlgVerXml"
                  style="text-align: center"
                  header="Xml Enviado"
                  modal="true" width="800">
            <h:form id="formVerXml">
                <p:panel>

                    <h:inputHidden id="inputXml"
                                   value="#{rpsControlador.xmlSelecionado.xml}"/>
                    <textarea style="width: 100%; height: 300px;" readonly="true" id="codeXml"
                              name="code"/>

                </p:panel>

                <script>
                    var editorXml = CodeMirror.fromTextArea(document.getElementById("codeXml"), {
                        lineNumbers: true,
                        mode: "xml",
                        htmlMode: true,
                        readOnly: true
                    });
                    var conteudoXml = document.getElementById('formVerXml:inputXml').value;
                    editorXml.setValue(formatXml(conteudoXml));
                </script>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
</html>
