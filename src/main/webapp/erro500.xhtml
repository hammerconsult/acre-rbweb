<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transition
    al//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
>

<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="FormularioErro500">
            <p:panel header="Aconteceu algo inesperado e não foi possível concluir a operação." id="areaErro500">
                <div class="centralizado">
                    <img src="#{request.contextPath}/arquivologo"
                         class="img-thumbnail"
                         width="250"
                         alt="logo"/>
                    <br/>
                    <p class="text-raleway">
                        Você pode voltar para a página  <a id="url" href="#{request.contextPath}/">Anterior</a>
                        ou para a página ínicial
                    </p>
                    <br/>
                    <p:commandButton icon="ui-icon-home"
                                     ajax="false"
                                     value="Voltar para o Início"
                                     styleClass="operacao"
                                     actionListener="#{sistemaControlador.redirecionarParaHome()}"
                    />
                    <br/>
                    <p class="text-raleway">Code Error:
                        <a id="detalhesException"
                           href="#{request.contextPath}/exception-log/ver/${session.getAttribute('exceptionMessage').id}/">
                            ${session.getAttribute('exceptionMessage').id}
                        </a>
                        |
                        <p:commandLink
                            ajax="false"
                            value="LOG"
                            styleClass="padrao"
                            actionListener="#{sistemaControlador.baixarTxTExceptionLog(session.getAttribute('exceptionMessage'))}"
                        />
                    </p>

                </div>

                <script type="text/javascript">
                    var campo = document.getElementById('url');
                    var url = document.referrer;
                    if (!url) {
                        url = "/home";
                    }
                    campo.setAttribute('href', url);
                </script>


            </p:panel>
            <br/>
        </h:form>

    </ui:define>
</ui:composition>
</html>

