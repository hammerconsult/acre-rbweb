<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <fc:cabecalhoPretty auditavel="#{true}" controlador="#{tipoAfastamentoControlador}"
                                origem="#{tipoAfastamentoControlador.caminhoPadrao}listar/"/>

            <p:tabView id="tab-view-geral">
                <p:tab title="Detalhes do Tipo de Afastamento">

                    <h:panelGrid columns="2">
                        <h:outputText value="Código:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.codigo}" styleClass="negrito"/>

                        <h:outputText value="Descrição:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.descricao}" styleClass="negrito"/>

                        <h:outputText value="Classe do Afastamento:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.classeAfastamento.toString()}"
                                      styleClass="negrito"/>

                        <h:outputText value="Carência:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.carencia}" styleClass="negrito"/>

                        <h:outputText value="Número Máximo de Dias Permitidos:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.diasMaximoPermitido}"
                                      styleClass="negrito"/>

                        <h:outputText value="Tipo Afastamento E-Social:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.tipoAfastamentoESocial.toString()}"
                                      styleClass="negrito"/>

                        <h:outputText value="Tipo Acidente de Trânsito:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.tipoAcidenteTransito.toString()}" styleClass="negrito"/>

                        <h:outputText value="Motivo do Afastamento da RAIS:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.motivoAfastamentoRais.descricao}"
                                      styleClass="negrito"/>

                        <h:outputText value="Movimento SEFIP Afastamento:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.movimentoSEFIPAfastamento}"
                                      styleClass="negrito"/>

                        <h:outputText value="Movimento SEFIP Retorno:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.movimentoSEFIPRetorno}"
                                      styleClass="negrito"/>

                        <h:outputText value="Situação BBPrev:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.tipoSituacaoBBPrev.toString()}"
                                      styleClass="negrito"/>

                        <h:outputText value="Descontar Dias Trabalhados:"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.descontarDiasTrabalhados ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>

                        <h:outputText value="Descontar Tempo de Serviço Efetivo:"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.descontarTempoServicoEfetivo ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>

                        <h:outputText value="Descontar Descanso Semanal Remunerado:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.descontarDSR ? 'Sim' : 'Não'}"
                                      styleClass="negrito"/>

                        <h:outputText value="Descontar Tempo de Servico para Aposentadoria:"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.descTempoServicoAposentadoria ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>

                        <h:outputText value="Pago Pela Entidade Previdenciária:"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.pagoEntidadePrevidenciaria ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>

                        <h:outputText value="Calcular Vale Transporte:"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.calcularValeTransporte ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>

                        <h:outputText value="Processa Normal na Folha:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.processaNormal ? 'Sim' : 'Não'}"
                                      styleClass="negrito"/>

                        <h:outputText value="Permitida para Cargo em Comissão:"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.permiteAfastamentoCc ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>

                        <h:outputText value="Não Permitir Progressao:"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.naoPermitirProgressao ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>

                        <h:outputText value="Não Permitir Promoção:"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.naoPermitirPromocao ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>

                        <h:outputText value="Permitir Frequência no Período:"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.permitirFrequenciaPeriodo ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>

                        <h:outputText value="Perder Período Aquisitivo de Férias:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.perderPAFerias ? 'Sim' : 'Não'}"
                                      styleClass="negrito"/>

                        <h:outputText value="Permitida para Função Gratificada:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.permitidaParaFG ? 'Sim' : 'Não'}"
                                      styleClass="negrito"/>

                        <h:outputText value="Processa 13º Salário:"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.processar13Salario ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>

                        <h:outputText value="Não Gerar ficha sem Retorno Informado:"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.naoCalcularFichaSemRetorno ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>

                        <h:outputText value="Período Para um Novo Afastamento:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.periodoNovoAfastamento}"
                                      styleClass="negrito"/>

                        <h:outputText value="Máximo de Dias de Afastamento no Ano:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.maximoDiasAfastamentoAno}"
                                      styleClass="negrito"/>

                        <h:outputText value="Intervalo a Considerar como Prorrogação (em dias):"/>
                        <h:panelGroup>
                            <h:outputText value="#{tipoAfastamentoControlador.selecionado.intervaloProrrogacaoDias}"
                                          styleClass="negrito"/>
                            <p:commandButton icon="ui-icon-info"
                                             id="info-irrf"
                                             styleClass="mrig05"
                                             process="@none"
                                             update="@none"
                                             style="width: 20px; height: 20px; margin-left: 5px!important; "/>

                            <p:overlayPanel at="right"
                                            for="info-irrf"
                                            showEvent="mouseover"
                                            hideEvent="mouseout"
                                            dynamic="false"
                                            style="width: 250px;"
                                            hideDelay="200">
                                <h:outputText
                                    value="Afeta exclusivamente a função de cálculo diasDeAfastamentoAteCompAtual()."
                                    escape="false"/>
                            </p:overlayPanel>
                        </h:panelGroup>

                        <h:outputText value="Sexo:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.sexo}" styleClass="negrito"/>

                        <h:outputText value="Fundamentação Legal:"/>
                        <h:outputText value="#{tipoAfastamentoControlador.selecionado.fundamentacaoLegal}"
                                      styleClass="negrito"/>

                        <h:outputText value="Ativo"/>
                        <h:outputText
                            value="#{tipoAfastamentoControlador.selecionado.ativo ? 'Sim' : 'Não'}"
                            styleClass="negrito"/>
                    </h:panelGrid>

                </p:tab>

                <p:tab title="Remuneração no Cargo Efetivo">

                    <p:outputPanel id="panel-remuneracao-cargo-efetivo">

                        <h:panelGrid columns="2">

                            <h:outputLabel value="Referência Folha de Pagamento:"/>
                            <h:outputText value="#{tipoAfastamentoControlador.selecionado.referenciaFP}"
                                          styleClass="negrito"/>

                        </h:panelGrid>

                        <p:outputPanel id="dados-referencia-fp"
                                       rendered="#{tipoAfastamentoControlador.renderizaInfoReferenciaFp()}">

                            <p:dataTable id="tabela-faixa-referencia-fp"
                                         paginator="true"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         value="#{tipoAfastamentoControlador.selecionado.referenciaFP.faixasReferenciasFPs}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>FAIXAS DE REFERÊNCIA&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="faixa">

                                <p:column headerText="Itens" styleClass="alinhamentoCentralizado" style="width: 100px;">
                                    <p:commandButton icon="ui-icon-search"
                                                     title="Clique para visualizar o(s) item(ns) desta faixa."
                                                     styleClass="mlef05"
                                                     update=":form-item-faixa-referencia-fp"
                                                     process="@this"
                                                     onclick="aguarde.show();"
                                                     oncomplete="aguarde.hide(); dialogItensFaixaReferenciaFP.show();"
                                                     actionListener="#{tipoAfastamentoControlador.carregaFaixaReferencaFP(faixa)}">
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Início de Vigência" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{faixa.inicioVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Final de Vigência" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{faixa.finalVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>

                        </p:outputPanel>

                    </p:outputPanel>

                </p:tab>
                <p:tab title=" Período Aquisitivo ">
                    <p:outputPanel id="periodo-aquisitivo">
                        <h:panelGrid columns="2">
                            <h:outputText value="Não Gerar Período Aquisitivo:"/>
                            <h:outputText
                                value="#{tipoAfastamentoControlador.selecionado.naoGerarPeriodoAquisitivo ? 'Sim' : 'Não' }"
                                styleClass="negrito"/>

                            <h:outputText value="Reiniciar nova contagem de período aquisitivo:"/>
                            <h:outputText
                                value="#{tipoAfastamentoControlador.selecionado.reiniciarContagem ? 'Sim' : 'Não' }"
                                styleClass="negrito"/>

                            <h:outputText value="Alongar Período Aquisitivo:"/>
                            <h:outputText
                                value="#{tipoAfastamentoControlador.selecionado.isPeriodoAquisitivoAlongado() ? 'Sim' : 'Não' }"
                                styleClass="negrito"/>
                            <h:outputText value="Carência para Início do Alongamento:"/>
                            <h:outputText value="#{tipoAfastamentoControlador.selecionado.carenciaAlongamento}" size="4"
                                          maxlength="4"
                                          styleClass="negrito"
                                          onkeyup="mascara(this,soNumeros)"/>

                            <h:outputText value="Perder Período Aquisitivo de Férias:"/>
                            <h:outputText
                                value="#{tipoAfastamentoControlador.selecionado.perderPAFerias ? 'Sim' : 'Não' }"
                                styleClass="negrito"/>

                            <h:outputText value="Perde Período Aquisitivo após(em dias): "/>
                            <h:outputText value="#{tipoAfastamentoControlador.selecionado.maximoPerdaPeriodoAquisitivo}"
                                          size="4" maxlength="4"
                                          styleClass="negrito"
                                          onkeyup="mascara(this,soNumeros)"/>
                        </h:panelGrid>

                    </p:outputPanel>

                </p:tab>

                <p:tab title="Tipos de Previdência">
                        <p:dataTable paginator="true"
                                     id="tabela-tipoprevidencia"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     rowIndexVar="rowIx"
                                     styleClass="mtop05"
                                     emptyMessage="Não foram localizados registros para serem apresentados"
                                     value="#{tipoAfastamentoControlador.tipoAfastamentoTipoPrevidenciaFPList}"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Tipo de Previdências&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                     rowsPerPageTemplate="10,25,50,100"
                                     var="tipoprevidencia">
                            <p:column headerText="Código"
                                      style="width: 90px;"
                                      styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{tipoprevidencia.tipoPrevidenciaFP.codigo}"/>
                            </p:column>
                            <p:column headerText="Descrição"
                                      style="width: 90px;"
                                      styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{tipoprevidencia.tipoPrevidenciaFP.descricao}"/>
                            </p:column>
                            <p:column headerText="Tipo de Regime Previdenciário"
                                      style="width: 90px;"
                                      styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{tipoprevidencia.tipoPrevidenciaFP.tipoRegimePrevidenciario}"/>
                            </p:column>
                        </p:dataTable>
                </p:tab>

            </p:tabView>

            <fc:rodapeVisualizarPretty controlador="#{tipoAfastamentoControlador}"/>
        </h:form>

        <p:dialog header="Itens da Faixa Referência Folha de Pagamento"
                  modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  draggable="false"
                  resizable="false"
                  widgetVar="dialogItensFaixaReferenciaFP"
                  closable="false">
            <h:form id="form-item-faixa-referencia-fp">
                <h:outputText value="Referência Folha de Pagamento: " style="font-size: 13px;"/>
                <h:outputText value="#{tipoAfastamentoControlador.faixaReferenciaFPSelecionada}"
                              style="font-size: 13px;" styleClass="negrito"/>

                <div style="text-align: center" class="mtop05">
                    <p:dataTable paginator="true"
                                 id="tabela-itens-do-lote"
                                 rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                 rowIndexVar="rowIx"
                                 styleClass="mtop05 mbot05"
                                 emptyMessage="Não foram localizados registros para serem apresentados"
                                 value="#{tipoAfastamentoControlador.faixaReferenciaFPSelecionada.itensFaixaReferenciaFP}"
                                 rows="10"
                                 paginatorTemplate="{CurrentPageReport}  &lt;span class='ITENS mrig10'>&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                 rowsPerPageTemplate="10,25,50,100"
                                 var="item"
                                 rowKey="#{item.id}">

                        <p:column headerText="Referência Até" styleClass="alinhamentoDireita">
                            <h:outputText value="#{item.referenciaAte}"/>
                        </p:column>
                        <p:column headerText="Valor" styleClass="alinhamentoDireita">
                            <h:outputText value="#{item.valor}" converter="moneyConverter"/>
                        </p:column>
                        <p:column headerText="Percentual" styleClass="alinhamentoDireita">
                            <h:outputText value="#{item.percentual}" converter="percentualConverter">
                            </h:outputText>
                        </p:column>
                    </p:dataTable>

                    <p:commandButton icon="ui-icon-cancel"
                                     title="Clique para fechar."
                                     value="Fechar"
                                     process="@this"
                                     update="@this"
                                     actionListener="#{tipoAfastamentoControlador.cancelaFaixaReferenciaFP()}"
                                     onclick="aguarde.show(); dialogItensFaixaReferenciaFP.hide()"
                                     oncomplete="aguarde.hide();"
                                     styleClass="padrao mtop05"/>
                </div>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
</html>
