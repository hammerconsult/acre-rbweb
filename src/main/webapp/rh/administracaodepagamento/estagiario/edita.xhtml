<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <p:remoteCommand name="ativouAba"
                             global="false"
                             actionListener="#{estagiarioControlador.ativouAba}"
                             process="@this"
                             immediate="true">
            </p:remoteCommand>
            <fc:cabecalhoPretty origem="#{estagiarioControlador.caminhoPadrao}listar/"
                                controlador="#{estagiarioControlador}"/>
            <p:panel id="painelMaster" header="Cadastro de Estagiário">
                <h:panelGrid columns="2">
                    <fc:outputLabelObrigatorio value="MatriculaFP:"/>
                    <h:panelGroup>
                        <p:autoComplete queryDelay="1000" size="70"
                                        valueChangeListener="#{estagiarioControlador.numero}"
                                        id="matriculaFPs" title="Digite uma matrícula"
                                        value="#{estagiarioControlador.selecionado.matriculaFP}"
                                        completeMethod="#{estagiarioControlador.completaMatriculaFP}"
                                        var="matriculaFP"
                                        itemLabel="#{matriculaFP.matricula} - #{matriculaFP.pessoa.nome} - #{matriculaFP.pessoa.cpf}"
                                        itemValue="#{matriculaFP}"
                                        forceSelection="true"
                                        converter="#{estagiarioControlador.converterMatriculaFP}">
                            <p:ajax event="itemSelect" update=":Formulario:numero :Formulario:contaCorrente"/>
                        </p:autoComplete>
                        <p:commandButton style="margin-left: 2px"
                                         update="@this"
                                         id="btNovaMatricula"
                                         process="@this"
                                         styleClass="icone-20 mlef05"
                                         actionListener="#{estagiarioControlador.criarNovaMatricula}"
                                         icon="ui-icon-circle-plus"/>
                    </h:panelGroup>


                    <h:outputText value="Agente Pagador:"/>
                    <p:autoComplete queryDelay="1000" title="Selecione um agente pagador"
                                    value="#{estagiarioControlador.selecionado.pessoaJuridica}"
                                    id="pessoaJuridica"
                                    forceSelection="true"
                                    var="p"
                                    itemLabel="#{p}"
                                    itemValue="#{p.id}"
                                    size="70"
                                    completeMethod="#{estagiarioControlador.completaPFs}"
                                    converter="#{estagiarioControlador.converterPessoaJuridica}"
                                    maxResults="10">
                        <f:selectItems value="#{estagiarioControlador.pessoaJuridica}"/>
                    </p:autoComplete>

                    <h:outputLabel for="numero" value="Número:"/>
                    <p:inputText value="#{estagiarioControlador.selecionado.numero}"
                                 id="numero" readonly="true"/>


                    <h:outputText value="Início de Vigência"/>
                    <p:calendar onkeypress="mascara(this, Data)" maxlength="10" title="Informe a início de vigência."
                                value="#{estagiarioControlador.selecionado.inicioVigencia}"
                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                id="inicioVigencia" size="20"/>

                    <h:outputText value="Final da Vigência:"/>
                    <p:calendar onkeypress="mascara(this, Data)" maxlength="10" title="Digite o final da Vigência"
                                value="#{estagiarioControlador.selecionado.finalVigencia}"
                                id="finalVigencia" pattern="dd/MM/yyyy" navigator="true" locale="pt_BR"/>


                    <h:outputText value="Conta Corrente Bancária:"/>
                    <h:panelGroup>
                        <h:selectOneMenu value="#{estagiarioControlador.selecionado.contaCorrente}"
                                         title="Selecione a conta corrente" id="contaCorrente"
                                         converter="#{estagiarioControlador.converterConta}">
                            <f:selectItems value="#{estagiarioControlador.contasCorrentesBancarias}"/>
                        </h:selectOneMenu>
                        <p:commandButton icon="ui-icon-circle-plus"
                                         styleClass="icone-20 mlef05"
                                         onclick="window.open('#{request.contextPath}/faces/tributario/cadastromunicipal/contacorrentebancaria/editaRH.xhtml', '_blank')"
                                         update="@this"
                                         process="@this"
                                         actionListener="#{contaCorrenteBancariaControlador.novo}">
                        </p:commandButton>
                    </h:panelGroup>

                    <fc:outputLabelObrigatorio value="Jornada de Trabalho:"/>
                    <h:selectOneMenu title="Selecione uma jornada de trabalho"
                                     value="#{estagiarioControlador.selecionado.jornadaDeTrabalho}"
                                     id="jornadaDeTrabalho"
                                     converter="#{estagiarioControlador.converterJornadaDeTrabalho}">
                        <f:selectItems value="#{estagiarioControlador.jornadaDeTrabalho}"/>
                    </h:selectOneMenu>

                    <fc:outputLabelObrigatorio value="Ato Legal:"/>
                    <h:panelGroup>
                        <p:autoComplete queryDelay="1000" size="40"
                                        id="atoDePessoal" title="Digite um ato legal"
                                        value="#{estagiarioControlador.selecionado.atoLegal}"
                                        completeMethod="#{estagiarioControlador.completaAtoLegal}"
                                        var="atoLegal"
                                        itemLabel="#{atoLegal.numero} - #{atoLegal.nome}"
                                        itemValue="#{atoLegal.id}"
                                        forceSelection="true"
                                        maxResults="10"
                                        converter="#{estagiarioControlador.converterAtoLegal}"/>
                        <p:commandButton icon="ui-icon-circle-plus"
                                         styleClass="icone-20 mlef05"
                                         onclick="window.open('#{request.contextPath}/atolegal/novo/?sessao=true', '_blank')"
                                         update="@this"
                                         process="@this">
                        </p:commandButton>
                    </h:panelGroup>
                    <h:outputText value="Formação: "/>
                    <p:inputText value="#{estagiarioControlador.selecionado.formacao}" size="70" maxlength="70"/>
                </h:panelGrid>

                <p:tabView id="tabViewGeral" styleClass="mtop05">
                    <p:tab id="tabLotacaoFuncional" title="Lotação Funcional">
                        <p:outputPanel id="painelHorarioContrato">
                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Início da Vigência:"/>
                                <p:calendar onkeypress="mascara(this, Data)" maxlength="10" id="inicioVigenciaHorario"
                                            pattern="dd/MM/yyyy" navigator="true"
                                            value="#{estagiarioControlador.horarioContratoFP.inicioVigencia}"/>
                                <h:outputText value="Final da Vigência:"/>
                                <p:calendar onkeypress="mascara(this, Data)" maxlength="10" id="finalVigenciaHorario"
                                            pattern="dd/MM/yyyy" navigator="true"
                                            value="#{estagiarioControlador.horarioContratoFP.finalVigencia}"/>
                                <fc:outputLabelObrigatorio value="Horário de Trabalho:"/>
                                <h:selectOneMenu title="Selecione um horarioDeTrabalho"
                                                 value="#{estagiarioControlador.horarioContratoFP.horarioDeTrabalho}"
                                                 id="horarioDeTrabalho"
                                                 style="font: bolder"
                                                 converter="#{estagiarioControlador.converterHorarioDeTrabalho}">
                                    <f:selectItems value="#{estagiarioControlador.horarioDeTrabalho}"/>
                                </h:selectOneMenu>
                            </h:panelGrid>

                            <p:commandButton value="Adicionar Horário"
                                             id="adicionarHorarioContratoFP"
                                             icon="ui-icon-check"
                                             styleClass="mtop05"
                                             actionListener="#{estagiarioControlador.addHorarioContrato()}"
                                             update=":Formulario:tabViewGeral:painelHorarioContrato  :Formulario:tabViewGeral:tabelaHorarioContrato"/>

                            <p:dataTable id="tabelaHorarioContrato"
                                         styleClass="mtop05"
                                         value="#{estagiarioControlador.horarioContratoFPs}"
                                         var="ob"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>LOTAÇÕES FUNCIONAIS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Expandir" style="width: 8%">
                                    <p:rowToggler/>
                                </p:column>
                                <p:column headerText="Início da Vigencia" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{ob.inicioVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Final Vigência" styleClass="alinhamentoCentralizado">
                                    <p:calendar onkeypress="mascara(this, Data)" maxlength="10" size="10" id="fi"
                                                pattern="dd/MM/yyyy" navigator="true" value="#{ob.finalVigencia}"/>
                                </p:column>
                                <p:column headerText="Horário de Trabalho" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{ob.horarioDeTrabalho}"/>
                                </p:column>
                                <p:column headerText="Local de Trabalho"
                                          style="width: 200px; text-align: center;">
                                    <p:commandButton id="adicionarLotacao"
                                                     icon="ui-icon-circle-plus"
                                                     value="Adicionar Local de Trabalho"
                                                     actionListener="#{estagiarioControlador.associa(ob)}"
                                                     oncomplete="dialogo.show();">
                                        <f:attribute value="#{ob}" name="objeto"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Remover" styleClass="alinhamentoCentralizado">
                                    <p:commandButton icon="ui-icon-trash"
                                                     actionListener="#{estagiarioControlador.removeHorarioCotratoFP}"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?'))
                                                                  {return false; } else {aguarde.show();}"
                                                     oncomplete="aguarde.hide()"
                                                     update=":Formulario:tabViewGeral:painelHorarioContrato">
                                        <f:attribute value="#{ob}" name="objeto"/>
                                    </p:commandButton>
                                </p:column>
                                <p:rowExpansion>
                                    <p:panel id="painelLocalTrabalho">
                                        <p:dataTable id="tabelaLotacaoFuncional"
                                                     value="#{estagiarioControlador.lotacoesFuncionais(ob)}" var="l"
                                                     editable="true"
                                                     styleClass="mtop05"
                                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                                     paginator="true"
                                                     rows="10"
                                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>LOCAIS DE TRABALHO&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                                     rowIndexVar="rowlx">
                                            <p:column headerText="Incio da Vigencia" style="width:12%"
                                                      styleClass="alinhamentoCentralizado">
                                                <h:outputText value="#{l.inicioVigencia}">
                                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                </h:outputText>
                                            </p:column>
                                            <p:column headerText="Final Vigência" style="width:14%"
                                                      styleClass="alinhamentoCentralizado">
                                                <p:calendar onkeypress="mascara(this, Data)"
                                                            maxlength="10"
                                                            pattern="dd/MM/yyyy"
                                                            size="10"
                                                            value="#{l.finalVigencia}"/>
                                            </p:column>
                                            <p:column headerText="Horário de Estágio"
                                                      styleClass="alinhamentoCentralizado">
                                                <h:outputText value="#{l.horarioContratoFP}"/>
                                            </p:column>
                                            <p:column headerText="Unidade Organizacional">
                                                <h:outputText value="#{l.unidadeOrganizacional}"/>
                                            </p:column>
                                            <p:column headerText="Remover" styleClass="alinhamentoCentralizado">
                                                <p:commandButton icon="ui-icon-trash"
                                                                 actionListener="#{estagiarioControlador.removeLotacaoFuncionalFP}"
                                                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?'))
                                                                  {return false; } else {aguarde.show();}"
                                                                 oncomplete="aguarde.hide()"
                                                                 update=":Formulario:tabViewGeral:tabelaHorarioContrato">
                                                    <f:attribute value="#{l}" name="objeto"/>
                                                </p:commandButton>
                                            </p:column>
                                        </p:dataTable>
                                    </p:panel>
                                </p:rowExpansion>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab id="associacaoEstagiaraio" title="Associação do Estagiário">
                        <p:outputPanel id="panelAssociacaoVinculoFP">
                            <h:panelGrid columns="2">
                                <h:outputText value="Inicio da Vigência:"/>
                                <p:calendar onkeypress="mascara(this, Data)" maxlength="10"
                                            title="Digite o inicio da Vigência da Associação do Contrato"
                                            value="#{estagiarioControlador.associacaoVinculoFP.inicioVigencia}"
                                            id="inicioVigenciaAssociacaoVinculoFP" pattern="dd/MM/yyyy" navigator="true"
                                            locale="pt_BR"/>

                                <h:outputText value="Final da Vigência:"/>
                                <p:calendar onkeypress="mascara(this, Data)" maxlength="10"
                                            id="finalVigenciaAssociacaoVinculoFP"
                                            title="Digite o final da Vigência da Associação do Contrato"
                                            value="#{estagiarioControlador.associacaoVinculoFP.finalVigencia}"
                                            pattern="dd/MM/yyyy" navigator="true" locale="pt_BR"/>

                                <h:outputText value="Associacao:"/>
                                <h:selectOneMenu title="Selecione uma associação"
                                                 value="#{estagiarioControlador.associacaoVinculoFP.associacao}"
                                                 id="associacao"
                                                 converter="#{estagiarioControlador.converterAssociacao}">
                                    <f:selectItems value="#{estagiarioControlador.associacao}"/>
                                </h:selectOneMenu>
                            </h:panelGrid>

                            <p:commandButton id="adicionarAssociacaoVinculoFP"
                                             value="Adicionar Associação"
                                             styleClass="mtop05"
                                             icon="ui-icon-check"
                                             actionListener="#{estagiarioControlador.adicionarAssociacaoVinculoFP()}"
                                             update=":Formulario:tabViewGeral:panelAssociacaoVinculoFP"/>

                            <p:dataTable id="tabelaAssociacaoVinculoFP"
                                         var="obj"
                                         value="#{estagiarioControlador.selecionado.associacaosVinculosFPs}"
                                         styleClass="mtop05"
                                         editable="true"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>ASSOCIAÇÕES DO ESTAGIÁRIO&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Inicio da Vigência" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{obj.inicioVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Final da Vigência" styleClass="alinhamentoCentralizado">
                                    <p:cellEditor>
                                        <f:facet name="output">
                                            <h:outputText value="#{obj.finalVigencia}">
                                                <f:convertDateTime pattern="dd/MM/yyy"/>
                                            </h:outputText>
                                        </f:facet>
                                        <f:facet name="input">
                                            <p:calendar onkeypress="mascara(this, Data)" maxlength="10"
                                                        pattern="dd/MM/yyyy" value="#{obj.finalVigencia}"/>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column headerText="Associacao">
                                    <h:outputText value="#{obj.associacao}"/>
                                </p:column>
                                <p:column headerText="Remover" styleClass="alinhamentoCentralizado">
                                    <p:commandButton icon="ui-icon-trash"
                                                     actionListener="#{estagiarioControlador.removeAssociacaoVinculoFP}"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?'))
                                                                  {return false; } else {aguarde.show();}"
                                                     oncomplete="aguarde.hide()"
                                                     update=":Formulario:tabViewGeral:panelAssociacaoVinculoFP">
                                        <f:attribute value="#{obj}" name="objeto"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Edição" styleClass="alinhamentoCentralizado">
                                    <p:rowEditor/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <!--                        <p:tab id="tabSituacaoFuncional" title="Situação Funcional">
                                                <p:outputPanel id="panelSituacaoFuncional">
                                                    <h:panelGrid columns="3">
                                                        <h:outputText value="Situação Funcional:" />
                                                        <p:autoComplete queryDelay="1000" size="40"
                                                                        id="situacaoFuncional" title="Digite uma Situação Funcional"
                                                                        value="{estagiarioControlador.situacaoContratoFP.situacaoFuncional}"
                                                                        completeMethod="{estagiarioControlador.completaSituacoesFuncionais}"
                                                                        var="situacao"
                                                                        itemLabel="{situacao.codigo}  {situacao.descricao}"
                                                                        itemValue="{situacao.id}"
                                                                        forceSelection="true"
                                                                        converter="{estagiarioControlador.converterSituacaoFuncional}"
                                                                        maxResults="10"/>
                                                    </h:panelGrid>

                                                    <p:commandButton id="adicionarSituacaoFuncional"
                                                                     value="Adicionar Situação Funcional"
                                                                     styleClass="mtop05"
                                                                     icon="ui-icon-check"
                                                                     actionListener="{estagiarioControlador.addSituacaoFuncional}"
                                                                     update=":Formulario:tabViewGeral:panelSituacaoFuncional"/>

                                                    <p:dataTable id="tabelaSituacaoFuncional"
                                                                 var="situacaoFuncional"
                                                                 emptyMessage="Nenhuma situação funcional adicionada."
                                                                 styleClass="mtop05"
                                                                 value="{estagiarioControlador.selecionado.situacaoFuncionals}"
                                                                 editable="true">

                                                        <p:column headerText="Código">
                                                            <h:outputText value="{situacaoFuncional.situacaoFuncional.codigo}"/>
                                                        </p:column>

                                                        <p:column headerText="Descrição">
                                                            <h:outputText value="{situacaoFuncional.situacaoFuncional.descricao}"/>
                                                        </p:column>

                                                        <p:column headerText="Remover" style="width: 50px;">
                                                            <p:commandButton value="Remover"
                                                                             icon="ui-icon-circle-close"
                                                                             actionListener="{estagiarioControlador.removeSituacaoFuncional}"
                                                                             update=":Formulario:tabViewGeral:panelSituacaoFuncional">
                                                                <f:attribute value="{situacaoFuncional}" name="objeto"/>
                                                            </p:commandButton>
                                                        </p:column>
                                                    </p:dataTable>
                                                </p:outputPanel>
                                            </p:tab>-->

                    <p:tab id="dependentesServidor" title="Dependentes do Estagiário">
                        <p:outputPanel id="panelDependentesServidor">
                            <p:commandButton id="btNovoDependente"
                                             icon="ui-icon-circle-plus"
                                             disabled="#{estagiarioControlador.selecionado.pessoaFisica eq null}"
                                             actionListener="#{estagiarioControlador.criarNovoDependente}"
                                             update="@this"
                                             value="Adicionar Dependente"
                                             process="@this">
                            </p:commandButton>

                            <p:commandButton icon="ui-icon-info"
                                             rendered="#{estagiarioControlador.selecionado.pessoaFisica eq null}"
                                             styleClass="icone-20 mlef05"
                                             process="@none"
                                             update="@none"
                                             id="btInfoDependente"/>
                            <p:overlayPanel for="btInfoDependente">
                                <h:outputText value="Selecione um estagiário para poder adicionar dependentes."/>
                            </p:overlayPanel>

                            <p:dataTable id="tabelaDependetesServidor"
                                         var="dependeteServidor"
                                         styleClass="mtop05"
                                         value="#{estagiarioControlador.dependentes}"
                                         editable="true"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>DEPENDENTES DO ESTAGIÁRIO&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Nome">
                                    <h:outputText value="#{dependeteServidor.nome}"/>
                                </p:column>
                                <p:column headerText="Sexo" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{dependeteServidor.sexo.toString()}"/>
                                </p:column>
                                <p:column headerText="CPF" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{dependeteServidor.cpf}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>
                    <p:tab title="Cargos"
                           id="tab-cargos">
                        <p:outputPanel id="panel-cargos">
                            <p:commandButton value="Novo Cargo"
                                             icon="ui-icon-circle-plus"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             immediate="true"
                                             actionListener="#{estagiarioControlador.novoContratoFPCargo()}"
                                             process="@this"
                                             update=":Formulario:tabViewGeral:panel-cargos"/>

                            <p:panel header="Novo/Editar Cargos do Contrato"
                                     id="panel-novo-cargo"
                                     rendered="#{estagiarioControlador.contratoFPCargoSelecionado ne null}"
                                     styleClass="mtop05 mbot05">
                                <h:panelGrid columns="2"
                                             styleClass="mbot05">

                                    <fc:outputLabelObrigatorio value="Cargo:"/>
                                    <p:autoComplete queryDelay="1000" title="Digite o cargo que deseja pesquisar."
                                                    value="#{estagiarioControlador.contratoFPCargoSelecionado.cargo}"
                                                    completeMethod="#{contratoFPControlador.completaCargos}"
                                                    converter="#{contratoFPControlador.converterCargo}"
                                                    var="cargo"
                                                    forceSelection="true"
                                                    itemValue="#{cargo.id}"
                                                    itemLabel="#{cargo}"
                                                    maxResults="10"
                                                    size="70"
                                                    disabled="#{estagiarioControlador.existeFolhadePagamentoParaOCargo()}">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                update=":Formulario:tabViewGeral:cbo"
                                        />
                                    </p:autoComplete>

                                    <h:outputText value="Base Período Aquisitivo:"/>
                                    <h:selectOneMenu
                                        value="#{estagiarioControlador.contratoFPCargoSelecionado.basePeriodoAquisitivo}"
                                        converter="#{basePeriodoAquisitivoControlador.converterGenerico}">
                                        <f:selectItems
                                            value="#{contratoFPControlador.listarTodasBasesPeriodoAquisitivo}"/>
                                    </h:selectOneMenu>

                                    <fc:outputLabelObrigatorio value="CBO:"/>
                                    <h:panelGroup>
                                        <p:autoComplete queryDelay="1000" size="70"
                                                        id="cbo" title="Digite um CBO"
                                                        value="#{estagiarioControlador.contratoFPCargoSelecionado.cbo}"
                                                        completeMethod="#{estagiarioControlador.completaCbo}"
                                                        var="cbo"
                                                        maxResults="10"
                                                        itemLabel="#{cbo.descricao} #{cbo.codigo}"
                                                        itemValue="#{cbo.id}"
                                                        forceSelection="true"
                                                        styleClass="mrig05"
                                                        converter="#{contratoFPControlador.converterCbo}"
                                                        disabled="#{estagiarioControlador.existeFolhadePagamentoParaOCargo()}"/>

                                        <p:commandButton icon="ui-icon-info"
                                                         id="info-cbo"
                                                         styleClass="mrig05"
                                                         process="@none"
                                                         update="@none"
                                                         style="width: 20px; height: 20px; "/>

                                        <p:overlayPanel at="right"
                                                        for="info-cbo"
                                                        showEvent="mouseover"
                                                        dynamic="false"
                                                        style="width: 250px;">
                                            <h:outputText
                                                value="Apresentando somente os CBO's vinculados ao cargo informado."
                                                escape="false"/>
                                        </p:overlayPanel>
                                    </h:panelGroup>

                                    <fc:outputLabelObrigatorio value="Inicio de Vigência:"/>
                                    <h:panelGroup>
                                        <p:calendar title="Data de Início"
                                                    value="#{estagiarioControlador.contratoFPCargoSelecionado.inicioVigencia}"
                                                    id="inicioVigenciaCargo"
                                                    locale="pt_BR" pattern="dd/MM/yyyy"
                                                    navigator="true" immediate="true"
                                                    onkeyup="mascara(this, mdata)"
                                                    styleClass="mrig05"
                                                    size="10"
                                                    disabled="#{estagiarioControlador.existeFolhadePagamentoParaOCargo()}"/>

                                        <p:commandButton icon="ui-icon-info"
                                                         id="info-dataCargo"
                                                         styleClass="mrig05"
                                                         process="@none"
                                                         update="@none"
                                                         style="width: 20px; height: 20px; "/>

                                        <p:overlayPanel at="right"
                                                        for="info-dataCargo"
                                                        showEvent="mouseover"
                                                        dynamic="false"
                                                        style="width: 250px;">
                                            <h:outputText
                                                value="O Início de Vigência deve ser igual a 'Data de exercício."
                                                escape="false"/>
                                        </p:overlayPanel>
                                    </h:panelGroup>
                                </h:panelGrid>

                                <p:commandButton value="Confirmar"
                                                 styleClass="mrig05"
                                                 onclick="#{estagiarioControlador.selecionado.cargos eq null or contratoFPControlador.selecionado.cargos.isEmpty() ? 'aguarde.show();' : 'if (!confirm(\'Ao confirmar esta operação será efetuado as alterações. Deseja prosseguir?\')) {return false; } else {aguarde.show();}'}"
                                                 oncomplete="aguarde.hide()"
                                                 process="panel-novo-cargo"
                                                 update="@none"
                                                 actionListener="#{estagiarioControlador.confirmarContratoFPCargo()}"
                                                 icon="ui-icon-check"/>

                                <p:commandButton value="Cancelar"
                                                 process="@this"
                                                 onclick="aguarde.show(); "
                                                 oncomplete="aguarde.hide()"
                                                 actionListener="#{estagiarioControlador.cancelarContratoFPCargo()}"
                                                 update="@none"
                                                 icon="ui-icon-cancel"/>
                            </p:panel>


                            <p:dataTable paginator="true"
                                         id="tabela-cargos"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         value="#{estagiarioControlador.selecionado.cargos}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>CARGOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="cargo">

                                <p:column headerText="Ações"
                                          style="text-align: center; width: 90px;">
                                    <p:commandButton icon="ui-icon-pencil"
                                                     process="@this"
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{estagiarioControlador.editarContratoFPCargo(cargo)}"
                                                     title="Clique para editar este registro."
                                                     update=":Formulario:tabViewGeral:panel-cargos"
                                                     styleClass="mlef05"/>
                                    <p:commandButton icon="ui-icon-trash"
                                                     process="@this"
                                                     disabled="#{estagiarioControlador.isExcluirOrEditarCargo(cargo)}"
                                                     onclick=" if(!confirm('Tem certeza que deseja excluir o cargo?')) {return false}
                                                     else {aguarde.show()}"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{estagiarioControlador.removerCargo(cargo)}"
                                                     title="Clique para remover este registro."
                                                     update=":Formulario:tabViewGeral:panel-cargos"
                                                     styleClass="mlef05"/>
                                </p:column>

                                <p:column headerText="Cargo" style="text-align: left;">
                                    <h:outputText value="#{cargo.cargo}"/>
                                </p:column>
                                <p:column headerText="Base Período Aquisitivo" style="text-align: left;">
                                    <h:outputText value="#{cargo.basePeriodoAquisitivo}"/>
                                </p:column>
                                <p:column headerText="CBO" style="text-align: left;">
                                    <h:outputText value="#{cargo.cbo}"/>
                                </p:column>
                                <p:column headerText="Início Vigência" style="text-align: center;">
                                    <h:outputText value="#{cargo.inicioVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Fim Vigência" style="text-align: center;">
                                    <h:outputText value="#{cargo.fimVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                    <h:outputText value="(Vigente Atualmente)" styleClass="negrito"
                                                  style="font-size: 12px;"
                                                  rendered="#{cargo.fimVigencia eq null}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>
                    <p:tab id="esocial" title="Informações relativas ao estagiário (E-social)">
                        <p:outputPanel id="panelInformacoesEstagiario">
                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Natureza do Estágio:"/>
                                <h:selectOneMenu value="#{estagiarioControlador.selecionado.tipoNaturezaEstagio}">
                                    <f:selectItems value="#{estagiarioControlador.naturezaEstagio}"/>
                                </h:selectOneMenu>
                                <fc:outputLabelObrigatorio value="Nível do Estágio:"/>
                                <h:selectOneMenu value="#{estagiarioControlador.selecionado.tipoNivelEstagio}">
                                    <f:selectItems value="#{estagiarioControlador.nivelEstagio}"/>
                                </h:selectOneMenu>
                                <fc:outputLabelObrigatorio value="Instituição de Ensino:"/>
                                <fc:novoAutocompletePessoa
                                    value="#{estagiarioControlador.selecionado.instituicaoEnsino}"
                                    caminhoAtual="#{estagiarioControlador.caminhoOrigem}" id="id-instituicao-ensino"
                                    mostraBotaoNovo="false"
                                    mostraSituacoes="false"
                                    fisica="false"
                                    mostraBotaoEdita="false"/>
                                <fc:outputLabelObrigatorio value="Categoria do Trabalhador:"/>
                                <h:selectOneMenu value="#{estagiarioControlador.selecionado.categoriaTrabalhador}"
                                                 converter="#{categoriaTrabalhadorControlador.converterGenerico}">
                                    <f:selectItems value="#{estagiarioControlador.categoriaTrabalhador}"/>
                                </h:selectOneMenu>
                                <fc:outputLabelObrigatorio value="Data prevista de término:"/>
                                <p:calendar onkeypress="mascara(this, Data)"
                                            maxlength="10"
                                            value="#{estagiarioControlador.selecionado.dataPrevistaTermino}"
                                            navigator="true"
                                            showOn="button"
                                            pattern="dd/MM/yyyy"
                                            size="10"/>
                            </h:panelGrid>
                        </p:outputPanel>
                    </p:tab>
                    <p:tab id="informacoesDeclaracoes" title="Informações das Declarações">
                        <p:tabView styleClass="mtop05">
                            <p:tab title="Sicap">
                                <h:panelGrid columns="2">
                                    <fc:outputLabelObrigatorio value="Tipo de Vínculo SICAP:"/>
                                    <h:selectOneMenu value="#{estagiarioControlador.selecionado.tipoVinculoSicap}">
                                        <f:selectItems value="#{estagiarioControlador.tiposVinculoSicap()}"/>
                                    </h:selectOneMenu>
                                </h:panelGrid>
                            </p:tab>
                        </p:tabView>
                    </p:tab>
                </p:tabView>
            </p:panel>
            <fc:rodapePretty id="rpRodapePretty" controlador="#{estagiarioControlador}"/>
        </h:form>

        <p:dialog widgetVar="dialogo"
                  modal="true"
                  resizable="false"
                  draggable="false"
                  header="Lotação Funcional"
                  width="800"
                  height="300">
            <h:form id="formularioDialogo">
                <fc:autocompleteTipoHO id="unidadeOrganizacionalLotacao"
                                       tipoHO="ADMINISTRATIVA"
                                       controlador="#{estagiarioControlador}"
                                       hoSelecionada="#{estagiarioControlador.hierarquiaOrganizacionalEnquadramento}"
                                       isEntidade="false"/>

                <h:panelGrid columns="2" styleClass="mtop05">
                    <h:outputText value="Início da Vigência:"/>
                    <p:calendar onkeypress="mascara(this, Data)" maxlength="10" title="Informe o início da vigência"
                                value="#{estagiarioControlador.lotacaoFuncional.inicioVigencia}"
                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                id="inicioVigenciaLotacao" size="20"/>

                    <h:outputText value="Final da Vigência:"/>
                    <p:calendar onkeypress="mascara(this, Data)" maxlength="10" title="Informe o final da vigência"
                                value="#{estagiarioControlador.lotacaoFuncional.finalVigencia}"
                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                id="finalVigenciaLotacao" size="20"/>

                    <h:outputText rendered="false" value="Horário Contrato FP:"/>
                    <h:selectOneMenu title="Selecione um horarioContratoFP" rendered="false"
                                     value="#{estagiarioControlador.lotacaoFuncional.horarioContratoFP}"
                                     id="horarioContratoFP"
                                     converter="#{estagiarioControlador.converterHorarioContratoFP}">
                    </h:selectOneMenu>
                </h:panelGrid>

                <p:commandButton id="adicionarLotacaoFuncional"
                                 icon="ui-icon-check"
                                 value="Adicionar"
                                 actionListener="#{estagiarioControlador.addLotacaoFuncional()}"
                                 update=":Formulario:tabViewGeral:painelHorarioContrato :formularioDialogo"
                                 oncomplete="dialogo.hide();"/>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
