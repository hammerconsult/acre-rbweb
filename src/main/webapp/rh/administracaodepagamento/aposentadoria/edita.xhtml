<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:rh="http://java.sun.com/jsf/composite/components/rh"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <fc:cabecalhoPretty origem="#{aposentadoriaControlador.caminhoPadrao}listar/"
                                controlador="#{aposentadoriaControlador}"/>
            <p:panel id="painel" header="Cadastro de Aposentadoria">
                <p:panel id="painelDadosServidor"
                         style="float : right; width: 470px;"
                         header="Dados do Servidor">
                    <h:panelGrid columns="2"
                                 columnClasses="width200, none">
                        <h:outputText value="Matrícula/Contrato:"/>
                        <h:outputText
                            value="#{aposentadoriaControlador.selecionado.contratoFP.matriculaFP.matricula}/#{aposentadoriaControlador.selecionado.contratoFP.numero}"/>

                        <h:outputText value="Sexo:"/>
                        <h:outputText
                            value="#{aposentadoriaControlador.selecionado.contratoFP.matriculaFP.pessoa.sexo.descricao}"/>

                        <h:outputText value="Data da Posse:"/>
                        <h:outputText value="#{aposentadoriaControlador.selecionado.contratoFP.dataPosse}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>

                        <h:outputText value="Idade:"/>
                        <h:outputText
                            value="#{aposentadoriaControlador.selecionado.contratoFP.matriculaFP.pessoa.recuperaIdade(aposentadoriaControlador.selecionado.contratoFP.matriculaFP.pessoa.dataNascimento)} anos"/>

                        <h:outputText value="Lotação Funcional:"/>
                        <h:outputText value="#{aposentadoriaControlador.lotacaoFuncional()}"/>

                        <h:outputText value="Cargo:"/>
                        <h:outputText value="#{aposentadoriaControlador.selecionado.contratoFP.cargo.descricao}"/>

                        <h:outputText value="Data de Ingresso no Cargo:"/>
                        <h:outputText value="#{aposentadoriaControlador.selecionado.contratoFP.inicioVigencia}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>

                        <h:outputText value="Tempo no Cargo:"/>
                        <h:outputText
                            value="#{aposentadoriaControlador.selecionado.contratoFP.cargo.periodoNoCargo(aposentadoriaControlador.selecionado.contratoFP)}"/>

                        <h:outputText value="Tempo Efetivo em Serviço Público:"/>
                        <h:outputText
                            value="#{aposentadoriaControlador.tempoEfetivoServicoPublico(aposentadoriaControlador.selecionado.contratoFP)}"/>

                        <h:outputText value="Averbação de Tempo de Contribuição: "/>
                        <h:outputText value="#{aposentadoriaControlador.averbacaoTempoServico}"/>

                        <h:outputText value="Soma Total de Tempo de Contribuição:"/>
                        <h:outputText
                            value="#{aposentadoriaControlador.tempoContruicao(aposentadoriaControlador.selecionado.contratoFP)}"/>
                    </h:panelGrid>
                </p:panel>

                <h:panelGrid columns="2" id="panel-grid-geral">
                    <fc:outputLabelObrigatorio
                        value="#{aposentadoriaControlador.operacao eq 'EDITAR'? 'Aposentado(a):':'Servidor(a):'}"/>
                    <h:panelGroup>
                        <rh:auto-complete-vinculofp value="#{aposentadoriaControlador.selecionado.contratoFP}"
                                                    id="contratoFP"
                                                    size="65"
                                                    classe="ContratoFP"
                                                    update=":Formulario:painelDadosServidor :Formulario:tipoAposentadoria :Formulario:regraAposentadoria :Formulario:percentual :Formulario:tab:panelInvalidez :Formulario:contaCorrente :formDialog"
                                                    process=":Formulario:painel"
                                                    onstart="aguarde.show();"
                                                    oncomplete="aguarde.hide();"
                                                    actionListener="#{aposentadoriaControlador.verificarCargoConfiancaFuncaoGratificadaEProvimentoReversao()}"
                                                    completeMethod="#{aposentadoriaControlador.completaContratoFP}">

                        </rh:auto-complete-vinculofp>
                        <p:commandButton id="cbDadosServidor"
                                         title="Dados do Óbito"
                                         update=":formObito"
                                         value="Óbito"
                                         icon="ui-icon-info"
                                         oncomplete="dialogo.show()"/>
                    </h:panelGroup>

                    <fc:outputLabelObrigatorio rendered="#{aposentadoriaControlador.temProvimentoReversaoPorContrato()}"
                                     value="Contrato aposentadoria:"/>
                    <h:panelGroup rendered="#{aposentadoriaControlador.temProvimentoReversaoPorContrato()}">

                        <p:inputText
                            rendered="#{aposentadoriaControlador.temProvimentoReversaoPorContrato()}"
                            value="#{aposentadoriaControlador.selecionado.numero}"
                            style="width: 50px;"
                            title="Novo número de contrato"
                            styleClass="mrig03"
                            readonly="true"/>

                        <p:commandButton icon="ui-icon-info"
                                     id="info-contrato"
                                     styleClass="mrig05"
                                     process="@none"
                                     update="@none"
                                     style="width: 20px; height: 20px; margin-left: 5px!important; "/>

                    <p:overlayPanel at="right"
                                    for="info-contrato"
                                    showEvent="mouseover"
                                    dynamic="false"
                                    style="width: 250px;">
                        <h:outputText
                            value="Para contratos que tem ou tiveram reversão, é gerado uma nova aposentadoria, com um novo numero de contrato."
                            escape="false"/>
                    </p:overlayPanel>
                    </h:panelGroup>

                    <h:outputLabel value="Conta Corrente Bancária:"/>
                    <h:panelGroup>
                        <h:selectOneMenu value="#{aposentadoriaControlador.selecionado.contaCorrente}"
                                         title="Selecione a conta corrente, quando não selecionada, para a geração do crédito de salario, o sistema irá recuperar a conta principal da pessoa"
                                         id="contaCorrente"
                                         converter="#{contratoFPControlador.converterConta}"
                                         readonly="#{aposentadoriaControlador.selecionado.contratoFP eq null}">
                            <f:selectItems value="#{aposentadoriaControlador.contasCorrentesBancarias}"/>
                            <p:ajax process="@this"
                                    onstart="aguarde.show();"
                                    oncomplete="aguarde.hide();"/>
                        </h:selectOneMenu>
                        <p:commandButton id="addContaCorrente" style="margin-left: 2px"
                                         update="@this"
                                         disabled="#{aposentadoriaControlador.selecionado.contratoFP eq null}"
                                         process="@this"
                                         icon="ui-icon-circle-plus"
                                         actionListener="#{aposentadoriaControlador.novaContaCorrente()}"/>
                    </h:panelGroup>

                    <h:outputLabel value="Protocolo Eletrônico:"/>
                    <p:autoComplete queryDelay="1000" title="Selecione um Protocolo" size="70"
                                    value="#{aposentadoriaControlador.selecionado.processo}"
                                    id="protocolo"
                                    completeMethod="#{aposentadoriaControlador.completaProcesso}"
                                    var="processo"
                                    itemLabel="#{processo}"
                                    itemValue="#{processo.id}"
                                    forceSelection="true"
                                    process="@this"
                                    converter="#{aposentadoriaControlador.converterProcesso}">
                        <p:ajax process="@this" event="blur"/>
                    </p:autoComplete>

                    <fc:outputLabelObrigatorio value="Data de Aposentadoria:"/>
                    <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                title="Digite o início da Data de Aposentadoria"
                                value="#{aposentadoriaControlador.selecionado.inicioVigencia}" id="inicioVigenciaaa"
                                navigator="true"
                                pattern="dd/MM/yyyy" size="20">
                        <p:ajax process="@this" event="change" update=":Formulario:tab :Formulario:btAcoes"
                                onstart="aguarde.show()"
                                oncomplete="aguarde.hide()"
                                listener="#{aposentadoriaControlador.sugereDatasEValidarProvimentoReversaoEAposentadoria}"/>
                        <p:ajax process="@this"  event="dateSelect" update=":Formulario:tab :Formulario:btAcoes"
                                onstart="aguarde.show()"
                                oncomplete="aguarde.hide()"
                                listener="#{aposentadoriaControlador.sugereDatasEValidarProvimentoReversaoEAposentadoria}"/>

                    </p:calendar>

                    <h:outputText value="Data da Publicação:"/>
                    <p:calendar onkeypress="mascara(this, mdata)" maxlength="10" title="Digite data da publicação"
                                value="#{aposentadoriaControlador.selecionado.dataPublicacao}" id="dataPublicacao"
                                navigator="true"
                                pattern="dd/MM/yyyy" size="20">
                        <p:ajax event="dateSelect" process="@this"/>
                        <p:ajax event="blur" process="@this"/>
                    </p:calendar>

                    <h:outputText value="Data da Reversão da Aposentadoria:"
                                  id="dataReversaoAposentadoria"
                                  rendered="#{aposentadoriaControlador.provimentoReversao ne null}"
                                  style="color: red; font-weight: bold;"/>

                    <p:inputText readonly="true"
                                 disabled="true"
                                 rendered="#{aposentadoriaControlador.provimentoReversao ne null}"
                                 value="#{aposentadoriaControlador.provimentoReversao.inicioVigencia}">
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </p:inputText>

                    <h:outputText value="Ato Legal da Reversão da Aposentadoria:"
                                  id="atoLegalReversaoAposentadoria"
                                  rendered="#{aposentadoriaControlador.provimentoReversao ne null}"
                                  style="font-weight: bold;"/>

                    <p:outputPanel rendered="#{aposentadoriaControlador.provimentoReversao ne null}">
                    <p:inputText readonly="true"
                                 disabled="true"
                                 size="70"
                                 rendered="#{aposentadoriaControlador.provimentoReversao ne null}"
                                 value="#{aposentadoriaControlador.provimentoReversao.atoLegal.toString()}">
                    </p:inputText>


                    <p:commandButton style="margin-left: 2px" value="Ato Legal"
                                     rendered="#{aposentadoriaControlador.provimentoReversao ne null}"
                                     update="@this"
                                     process="@this"
                                     onclick="window.open('#{request.contextPath}/atolegal/novo/?sessao=true', '_blank');
                                                 ativarOuvidor(ativouAba)"
                                     icon="ui-icon-circle-plus"/>

                    <p:commandButton process="@none"
                                     rendered="#{aposentadoriaControlador.provimentoReversao ne null}"
                                     id="bt-ver-concurso"
                                     icon="ui-icon-lupa"
                                     style="margin-left: 2px"
                                     disabled="#{aposentadoriaControlador.provimentoReversao eq null}"
                                     update="@none"
                                     onclick="window.open('#{request.contextPath}/atolegal/ver/#{aposentadoriaControlador.provimentoReversao.atoLegal.id}','_blank')"/>

                    </p:outputPanel>

                    <h:outputText value="Final de Vigência:"/>
                    <p:calendar disabled="true"
                                onkeypress="mascara(this, mdata)" maxlength="10"
                                title="Digite o final de vigência"
                                value="#{aposentadoriaControlador.selecionado.finalVigencia}" id="finalVigencia"
                                navigator="true"
                                pattern="dd/MM/yyyy" size="20">
                        <p:ajax event="dateSelect" process="@this"/>
                        <p:ajax event="blur" process="@this"/>
                    </p:calendar>

                    <h:outputText value="IR sobre Múltiplos Vínculos:"/>
                    <h:panelGroup>
                        <h:selectBooleanCheckbox
                            title="Se marcado esta opção, o sistema irá acumular o valor do imposto de renda de outros vínculos para o vínculo atual(este)."
                            value="#{aposentadoriaControlador.selecionado.descontarIrMultiploVinculo}"
                            id="descontar-ir-multiplos-vinculos">
                        </h:selectBooleanCheckbox>

                        <p:commandButton icon="ui-icon-info"
                                         id="info-ir"
                                         styleClass="mrig05"
                                         process="@none"
                                         update="@none"
                                         style="width: 20px; height: 20px; margin-left: 5px!important; "/>

                        <p:overlayPanel at="right"
                                        for="info-ir"
                                        showEvent="mouseover"
                                        dynamic="false"
                                        style="width: 250px;">
                            <h:outputText
                                value="Se marcado esta opção, o sistema irá acumular o valor do imposto de renda de outros vínculos para o vínculo atual(este). Deve ser marcado somente um dos vínculos!"
                                escape="false"/>
                        </p:overlayPanel>
                    </h:panelGroup>

                    <h:outputText value="Não Acumular Multiplo Vínculo:"/>
                    <h:panelGroup>
                        <h:selectBooleanCheckbox
                            title="Se marcado esta opção, o sistema não irá acumular o valor do IRRF de outros vínculos"
                            value="#{aposentadoriaControlador.selecionado.descontarIRRFMultiploVinculo}"
                            id="descontar-irrf-multiplos-vinculos">
                        </h:selectBooleanCheckbox>

                        <p:commandButton icon="ui-icon-info"
                                         id="info-irrf"
                                         styleClass="mrig05"
                                         process="@none"
                                         update="@none"
                                         style="width: 20px; height: 20px; margin-left: 5px!important; "/>

                        <p:overlayPanel at="right"
                                        for="info-irrf"
                                        showEvent="mouseover"
                                        dynamic="false"
                                        style="width: 250px;">
                            <h:outputText
                                value="Se marcado esta opção, o sistema não irá acumular o valor do IRRF de outros vínculos."
                                escape="false"/>
                        </p:overlayPanel>
                    </h:panelGroup>

                    <fc:outputLabelObrigatorio value="Tipo Aposentadoria:"/>
                    <h:selectOneMenu
                        title="Selecione um Tipo Aposentadoria, para cadastrar um tipo aposentadoria vá em rotinas anuais e mensais >> Tipo Aposentadoria"
                        disabled="#{aposentadoriaControlador.selecionado.contratoFP eq null}"
                        value="#{aposentadoriaControlador.selecionado.tipoAposentadoria}"
                        id="tipoAposentadoria"
                        converter="#{aposentadoriaControlador.converterTipoAposentadoria}">
                        <f:selectItems value="#{aposentadoriaControlador.tipoAposentadoria}"/>
                        <p:ajax event="change"
                                onstart="aguarde.show();"
                                oncomplete="aguarde.hide();"
                                update="regraAposentadoria tipoReajusteAposentadoria tipoCalculoAposentadoria percentual"
                                listener="#{aposentadoriaControlador.limparTipoReajusteAposentadoria}"/>
                    </h:selectOneMenu>

                    <fc:outputLabelObrigatorio value="Regra de Aposentadoria:"/>
                    <h:selectOneMenu title="Selecione a Regra de Aposentadoria"
                                     value="#{aposentadoriaControlador.selecionado.regraAposentadoria}"
                                     disabled="#{aposentadoriaControlador.selecionado.contratoFP eq null}"
                                     converter="#{aposentadoriaControlador.converterRegraAposentadoria}"
                                     id="regraAposentadoria">
                        <f:selectItems value="#{aposentadoriaControlador.regraAposentadoria}"/>
                        <p:ajax event="change" update="@form"
                                onstart="aguarde.show();"
                                oncomplete="aguarde.hide();"
                                listener="#{aposentadoriaControlador.sugerirTipoReajusteAposentadoria}"/>
                    </h:selectOneMenu>

                    <fc:outputLabelObrigatorio value="Tipo de Reajuste da Aposentadoria:"/>
                    <h:selectOneMenu title="Selecione o Tipo de Reajuste da Aposentadoria"
                                     value="#{aposentadoriaControlador.selecionado.tipoReajusteAposentadoria}"
                                     id="tipoReajusteAposentadoria"
                                     disabled="true">
                        <f:selectItems value="#{aposentadoriaControlador.tipoReajusteAposentadoria}"/>
                        <p:ajax event="change" process="@this" update=":Formulario:tab"/>
                    </h:selectOneMenu>
                    <h:outputText value="Tipo Cálculo:"/>
                    <h:selectOneMenu title="Selecione o modo de cálculo dessa aposentadoria."
                                     value="#{aposentadoriaControlador.selecionado.tipoCalculoAposentadoria}"
                                     id="tipoCalculoAposentadoria">
                        <f:selectItems value="#{aposentadoriaControlador.tipoCalculoAposentadorias}"/>
                    </h:selectOneMenu>

                    <h:outputText value="Percentual:"/>
                    <p:inputText title="Digite o valor Percentual"
                                 onkeypress="mascara(this, porcentagem)"
                                 converter="#{aposentadoriaControlador.percentualConverter}"
                                 value="#{aposentadoriaControlador.selecionado.percentual}"
                                 id="percentual"
                                 disabled="#{aposentadoriaControlador.selecionado.tipoReajusteAposentadoria eq 'PARIDADE'
                                                 or aposentadoriaControlador.selecionado.tipoReajusteAposentadoria eq null
                                                 or aposentadoriaControlador.selecionado.contratoFP eq null}"/>

                    <fc:outputLabelObrigatorio value="Ato Legal: " for="atoLegal"/>
                    <h:panelGrid columns="3"
                                 cellpadding="0"
                                 cellspacing="0">
                        <h:panelGroup id="panel-grid-ato">
                            <p:autoComplete queryDelay="1000" id="completeAtoLegal"
                                            completeMethod="#{aposentadoriaControlador.completaAtoLegal}"
                                            value="#{aposentadoriaControlador.atoLegal}"
                                            dropdown="true"
                                            var="atoLegal"
                                            title="Filtrando somentes atos legais como ato de pessoal e benefício previdênciário."
                                            itemLabel="#{atoLegal}"
                                            itemValue="#{atoLegal.id}"
                                            styleClass="mrig05"
                                            converter="#{aposentadoriaControlador.converterAtoLegal}"
                                            forceSelection="true"
                                            size="70">
                                <p:ajax event="itemSelect" listener="#{aposentadoriaControlador.adicionarAtoLegal}"
                                        update="panel-grid-ato" process="@this" onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"/>
                            </p:autoComplete>
                            <p:commandButton icon="ui-icon-circle-plus" styleClass="mlef05"
                                             actionListener="#{aposentadoriaControlador.navegarAtoLegal()}"
                                             ajax="false"/>
                            <p:commandButton icon="ui-icon-search"
                                             title="Clique para Consultar Atos Legais"
                                             oncomplete="DialogPesquisarPessoa.show()"
                                             styleClass="mlef05"
                                             update=":FormularioPesquisarPessoa"
                                             process=":FormularioPesquisarPessoa"/>
                            <table style="width: 500px">
                                <ui:repeat
                                    value="#{aposentadoriaControlador.selecionado.atosLegais}"
                                    var="atoLegal">
                                    <tr>
                                        <td><h:outputText value="- #{atoLegal.atoLegal}" styleClass="negrito"/></td>
                                        <td><p:commandButton
                                            id="removerAto"
                                            icon="ui-icon-trash"
                                            update="@form"
                                            process="@this"
                                            onclick="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            actionListener="#{aposentadoriaControlador.removerAtoLegal(atoLegal)}"/>
                                        </td>
                                    </tr>
                                </ui:repeat>
                            </table>
                        </h:panelGroup>
                    </h:panelGrid>

                    <h:outputText value="Tipo de Aposentadoria Especial SIG:"/>
                    <h:selectOneMenu id="tipoAposentadoriaEspecialSIG"
                                     value="#{aposentadoriaControlador.selecionado.tipoAposentadoriaEspecialSIG}">
                        <f:selectItems value="#{aposentadoriaControlador.getTiposAposentadoriasEspeciaisSIG()}"/>
                    </h:selectOneMenu>

                </h:panelGrid>
                <p:outputPanel header="Dados do Servidor" id="panelPrevidenciaRPPS"
                               styleClass="mtop05">
                    <br/>
                    <p:panel header="Itens da Ficha Financeira"
                             styleClass="mtop05"
                             rendered="#{aposentadoriaControlador.selecionado.fichaFinanceiraFP ne null
                                         and aposentadoriaControlador.selecionado.tipoReajusteAposentadoria eq 'PARIDADE'}">
                        <p:dataTable id="itensFichaFinanceira"
                                     emptyMessage="Este Aposentado não possui Fichas Financeiras"
                                     value="#{aposentadoriaControlador.itensFichaFinanceira}" var="item">
                            <p:column headerText="Verba">
                                <h:outputText value="#{item.eventoFP.codigo} - #{item.eventoFP.descricao}"/>
                            </p:column>
                            <p:column headerText="Verba Fixa ?" style="text-align: center;">
                                <h:outputText value="#{item.eventoFP.verbaFixa eq true ? 'Sim' : 'Não'}"/>
                            </p:column>
                            <p:column style="text-align: center" headerText="Competência">
                                <h:outputText
                                    value="#{item.fichaFinanceiraFP.folhaDePagamento.mes}/#{item.fichaFinanceiraFP.folhaDePagamento.ano}"/>
                            </p:column>
                            <p:column style="text-align: center" headerText="Tipo Vantagem">
                                <h:outputText value="#{item.eventoFP.tipoEventoFP}"/>
                            </p:column>
                            <p:column style="text-align: right" headerText="Ref.">
                                <h:outputText value="#{item.valorReferencia}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column style="text-align: right" headerText="Valor Verba">
                                <h:outputText value="#{item.valor}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                    <p:panel styleClass="mtop05" rendered="false" header="Espelho Contracheque">
                        <p:dataTable id="itemEventos" emptyMessage="Este Aposentado não possui Fichas Financeiras"
                                     editable="true"
                                     value="#{aposentadoriaControlador.selecionado.itemAposentadorias}" var="item">
                            <p:column headerText="Evento">
                                <p:cellEditor>
                                    <f:facet name="input">
                                        <h:selectOneMenu value="#{item.eventoFP}"
                                                         converter="#{aposentadoriaControlador.converterEventoFP}">
                                            <f:selectItems value="#{aposentadoriaControlador.eventos}"/>
                                        </h:selectOneMenu>
                                    </f:facet>
                                    <f:facet name="output">
                                        <h:outputText value="#{item.eventoFP.codigo} - #{item.eventoFP.descricao}"/>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Valor">
                                <f:facet name="input">

                                </f:facet>
                                <!--<f:facet name="output">-->
                                <h:outputText
                                    style="#{item.eventoFP.formula.contains('salarioBase')? 'color: green':''}"
                                    title="#{item.eventoFP.formula.contains('salarioBase')? 'O valor sofre reajuste automaticamente através do PCCR':''}"
                                    value="#{item.valor}"/>
                                <!--</f:facet>-->
                            </p:column>
                            <p:column headerText="Operação">
                                <p:rowEditor/>
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                </p:outputPanel>
                <br/>
                <br/>
                <p:tabView id="tab" activeIndex="#{aposentadoriaControlador.indiceAba}">
                    <p:tab id="tabValor" title="Valor do Benefício">

                        <h:panelGrid columns="3">
                            <fc:outputLabelObrigatorio value="Inicio da Vigência:"/>
                            <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                        title="Digite o inicio da Vigência"
                                        value="#{aposentadoriaControlador.itemAposentadoria.inicioVigencia}"
                                        navigator="true"
                                        pattern="dd/MM/yyyy" size="10"
                                        id="inicioVigenciaValor"/>
                            <p:message for="inicioVigenciaValor" showDetail="true"/>

                            <h:outputText value="Final da Vigência:"/>
                            <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                        title="Digite o final da Vigência"
                                        value="#{aposentadoriaControlador.itemAposentadoria.finalVigencia}"
                                        navigator="true"
                                        pattern="dd/MM/yyyy" size="10"
                                        id="finalVigenciaValor"/>
                            <p:message for="finalVigenciaValor" showDetail="true"/>

                            <fc:outputLabelObrigatorio value="Verba: "/>
                            <h:selectOneMenu value="#{aposentadoriaControlador.itemAposentadoria.eventoFP}"
                                             converter="#{aposentadoriaControlador.converterEventoFP}">
                                <f:selectItems value="#{aposentadoriaControlador.eventos}"/>
                            </h:selectOneMenu>
                            <p:message for="finalVigenciaValor" showDetail="true"/>

                            <fc:outputLabelObrigatorio value="Valor:"/>
                            <p:inputText title="Digite valor"
                                         onkeydown="mascaraMonetaria(this)"
                                         converter="#{aposentadoriaControlador.moneyConverter}"
                                         value="#{aposentadoriaControlador.itemAposentadoria.valor}"
                                         id="valor"/>
                            <p:message for="valor" showDetail="true"/>
                        </h:panelGrid>

                        <p:commandButton value="Adicionar Valor do Benefício"
                                         styleClass="mtop05"
                                         onclick="statusDialog.show()"
                                         oncomplete="statusDialog.hide()"
                                         icon="ui-icon-plus"
                                         actionListener="#{aposentadoriaControlador.addValorBeneficio}"
                                         update=":Formulario:tab valor"/>

                        <div class="alert alert-info mtop03" align="center">
                            <Strong>Atenção!</Strong> As verbas listadas abaixo são da última folha
                            <Strong>NORMAL</Strong> calculada e o evento deve ser marcado como
                            <Strong>Verba Fixa!</Strong>
                        </div>

                        <p:dataTable id="tabelaValorBeneficio"
                                     var="obj"
                                     editable="true"
                                     styleClass="mtop05"
                                     value="#{aposentadoriaControlador.selecionado.itemAposentadorias}"
                                     paginator="true"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha->selecionada' : 'trintaAltura'}"
                                     rowIndexVar="rowlx"
                                     emptyMessage="Não foram localizados registros para serem apresentados"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo->tabela mrig10'>VALOR BENEFÍCIO&lt;/span>
                                 {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                     rowsPerPageTemplate="10,25,50,100">
                            <p:column headerText="Evento">
                                <p:cellEditor>
                                    <f:facet name="input">
                                        <h:selectOneMenu value="#{obj.eventoFP}"
                                                         converter="#{aposentadoriaControlador.converterEventoFP}">
                                            <f:selectItems value="#{aposentadoriaControlador.eventos}"/>
                                        </h:selectOneMenu>
                                    </f:facet>
                                    <f:facet name="output">
                                        <h:outputText value="#{obj.eventoFP.codigo} - #{obj.eventoFP.descricao}"/>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Inicio da Vigência">
                                <h:outputText value="#{obj.inicioVigencia}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Final da Vigência">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{obj.finalVigencia}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:calendar id="valorFinalVigencia" onkeypress="mascara(this, mdata)"
                                                    maxlength="10"
                                                    title="Digite o final da Vigência"
                                                    value="#{obj.finalVigencia}" navigator="true"
                                                    pattern="dd/MM/yyyy" size="10">
                                            <p:ajax
                                                event="change"
                                                process="@this"
                                                partialSubmit="true"
                                                onstart="aguarde.show();"
                                                oncomplete="aguarde.hide();"
                                                listener="#{aposentadoriaControlador.checarVigenciasDoRegistro(obj)}"
                                                update="@this"/>
                                            <p:ajax
                                                event="dateSelect"
                                                process="@this"
                                                partialSubmit="true"
                                                onstart="aguarde.show();"
                                                oncomplete="aguarde.hide();"
                                                listener="#{aposentadoriaControlador.checarVigenciasDoRegistro(obj)}"
                                                update="@this"/>

                                        </p:calendar>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Valor do Benefício">
                                <h:outputText
                                    style="#{obj.eventoFP.formula.contains('salarioBase')? 'color: green':''}"
                                    title="#{obj.eventoFP.formula.contains('salarioBase')? 'O valor sofre reajuste automaticamente através do PCCR':''}"
                                    value="#{obj.valor}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Remover">
                                <p:commandLink value="Remover"
                                               actionListener="#{aposentadoriaControlador.removeValorBeneficio}"
                                               oncomplete="statusDialog.hide();"
                                               onclick="if (!confirm('Tem certeza que deseja remover este item?')) {return false; } else {statusDialog.show();}"
                                               update="tabelaValorBeneficio">
                                    <f:attribute value="#{obj}" name="obj"/>
                                </p:commandLink>
                            </p:column>
                            <p:column headerText="Edição" style="width:50px">
                                <p:rowEditor/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Lotação Administrativa">
                        <h:panelGroup id="lotacaoAdministrativa">
                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Início da Vigência:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            title="Informe o início da vigência"
                                            value="#{aposentadoriaControlador.lotacaoFuncional.inicioVigencia}"
                                            navigator="true" pattern="dd/MM/yyyy"
                                            id="inicioVigenciaLotacao" size="20">
                                    <p:ajax process="@this" event="change"/>
                                    <p:ajax process="@this" event="dateSelect"/>
                                </p:calendar>

                                <h:outputText value="Final da Vigência:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            title="Informe o final da vigência"
                                            value="#{aposentadoriaControlador.lotacaoFuncional.finalVigencia}"
                                            navigator="true" pattern="dd/MM/yyyy"
                                            id="finalVigenciaLotacao" size="20"/>

                                <fc:outputLabelObrigatorio for="lotacaoExercicio"
                                                           value="Unidade Organizacional (Administrativa):"/>
                                <p:autoComplete queryDelay="1000" id="lotacaoExercicio"
                                                value="#{aposentadoriaControlador.hierarquiaOrganizacional}"
                                                completeMethod="#{aposentadoriaControlador.completaHierarquiaOrganizacionalAdministrativa}"
                                                converter="#{aposentadoriaControlador.converterHierarquiaOrganizacional}"
                                                var="ho"
                                                forceSelection="true"
                                                itemValue="#{ho.id}"
                                                itemLabel="#{ho}"
                                                maxResults="10"
                                                size="70">
                                    <p:ajax process="@this" event="blur"/>
                                </p:autoComplete>


                                <p:commandButton id="adicionarLotacaoFuncional" value="Adicionar"
                                                 styleClass="operacao prioritario mtop05" icon="ui-icon-circle-plus"
                                                 actionListener="#{aposentadoriaControlador.addLotacao}"
                                                 process="@this"
                                                 update=":Formulario:tab:lotacaoAdministrativa"/>
                            </h:panelGrid>

                            <p:dataTable id="tabelaLotacaoFuncional"
                                         value="#{aposentadoriaControlador.selecionado.lotacaoFuncionals}"
                                         var="l"
                                         paginator="true"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha->selecionada' : 'trintaAltura'}"
                                         rowIndexVar="rowlx"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo->tabela mrig10'>LOTAÇÃO ADMINISTRATIVA&lt;/span>
                                 {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100">

                                <p:column headerText="Unidade Organizacional">
                                    <h:outputText
                                        value="#{aposentadoriaControlador.hierarquiaPai(l.unidadeOrganizacional).codigo} - #{l.unidadeOrganizacional}"/>
                                </p:column>
                                <p:column style="width:12%; text-align: center" headerText="Início da Vigência">
                                    <h:outputText value="#{l.inicioVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Final Vigência" style="width:12%; text-align: center">
                                    <p:calendar onkeypress="mascara(this, mdata)" maxlength="10" pattern="dd/MM/yyyy"
                                                size="15" id="vfinal" value="#{l.finalVigencia}">
                                        <p:ajax event="blur" process="@this"/>
                                        <p:ajax event="dateSelect" process="@this"/>
                                    </p:calendar>
                                </p:column>
                                <p:column style="width:8%; text-align: center" headerText="Remover">
                                    <p:commandButton icon="ui-icon-trash"
                                                     actionListener="#{aposentadoriaControlador.removeLotacaoFuncional(l)}"
                                                     process="tabelaLotacaoFuncional"
                                                     update=":Formulario:tab:lotacaoAdministrativa">
                                        <f:attribute value="#{l}" name="objeto"/>
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable>
                        </h:panelGroup>

                    </p:tab>
                    <p:tab title="Lotação Orçamentária">
                        <h:panelGroup id="lotacaoOrcamentaria">
                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Início da Vigência:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            title="Informe o início da vigência"
                                            value="#{aposentadoriaControlador.recursoDoVinculoFP.inicioVigencia}"
                                            navigator="true" pattern="dd/MM/yyyy"
                                            id="inicioVigenciaRecursoDoVinculo" size="20"/>

                                <h:outputText value="Final da Vigência:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            title="Informe o final da vigência"
                                            value="#{aposentadoriaControlador.recursoDoVinculoFP.finalVigencia}"
                                            navigator="true" pattern="dd/MM/yyyy"
                                            id="finalVigenciaRecursoDoVinculo" size="20"/>

                                <fc:outputLabelObrigatorio value="Lotação Orçamentária(Recurso FP): "/>
                                <p:autoComplete queryDelay="1000" id="recursoFP" title="Digite o nome do recurso fp"
                                                value="#{aposentadoriaControlador.recursoDoVinculoFP.recursoFP}"
                                                completeMethod="#{recursoFPControlador.completaRecursoFP}"
                                                var="recurso"
                                                itemLabel="#{recurso}"
                                                itemValue="#{recurso.id}"
                                                forceSelection="true"
                                                size="70"
                                                converter="#{recursoFPControlador.converterRecursoFP}"/>

                                <p:commandButton id="adicionarRecursoDoVinculo" value="Adicionar"
                                                 styleClass="operacao prioritario mtop05" icon="ui-icon-circle-plus"
                                                 actionListener="#{aposentadoriaControlador.adicionarRecursoDoVinculoFP}"
                                                 update=":Formulario:tab:lotacaoOrcamentaria"/>
                            </h:panelGrid>

                            <p:dataTable id="tabelaRecursoDoVinculo"
                                         value="#{aposentadoriaControlador.selecionado.recursosDoVinculoFP}"
                                         var="l"
                                         paginator="true"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha->selecionada' : 'trintaAltura'}"
                                         rowIndexVar="rowlx"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo->tabela mrig10'>LOTAÇÃO ORÇAMENTÁRIA&lt;/span>
                                 {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100">

                                <p:column headerText="Recurso Folha de Pagamento">
                                    <h:outputText value="#{l.recursoFP}"/>
                                </p:column>
                                <p:column style="width:12%; text-align: center" headerText="Início da Vigência">
                                    <h:outputText value="#{l.inicioVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Final Vigência" style="width:12%; text-align: center">
                                    <p:calendar onkeypress="mascara(this, mdata)" maxlength="10" pattern="dd/MM/yyyy"
                                                rendered="#{l.finalVigencia eq null}"
                                                size="15" id="tableFinalRecursoFP" value="#{l.finalVigencia}">
                                        <p:ajax event="blur" process="@this"/>
                                        <p:ajax event="dateSelect" process="@this"/>
                                    </p:calendar>
                                    <h:outputText value="#{l.finalVigencia}"
                                                  rendered="#{l.finalVigencia ne null}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column style="width:8%; text-align: center" headerText="Remover">
                                    <p:commandButton icon="ui-icon-trash"
                                                     actionListener="#{aposentadoriaControlador.removerRecursoDoVinculoFP(l)}"
                                                     process="tabelaRecursoDoVinculo"
                                                     update=":Formulario:tab:lotacaoOrcamentaria">
                                        <f:attribute value="#{l}" name="objeto"/>
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable>
                        </h:panelGroup>

                    </p:tab>


                    <p:tab id="tabInvalidez" title="Invalidez do Aposentado">
                        <h:panelGrid columns="2" id="panelInvalidez">
                            <fc:outputLabelObrigatorio value="Início da Vigência: "/>
                            <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                        title="Digite o início da vigência da invalidez"
                                        value="#{aposentadoriaControlador.invalidezAposentado.inicioVigencia}"
                                        navigator="true"
                                        pattern="dd/MM/yyyy" size="10"
                                        id="inicioVigenciaInvalidez"/>

                            <h:outputText value="Final da Vigência:"/>
                            <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                        title="Digite o final da vigência da invalidez"
                                        value="#{aposentadoriaControlador.invalidezAposentado.finalVigencia}"
                                        navigator="true"
                                        pattern="dd/MM/yyyy" size="10"
                                        id="finalVigenciaInvalidez"/>

                            <fc:outputLabelObrigatorio value="CID: "/>
                            <p:autoComplete queryDelay="1000" converter="#{aposentadoriaControlador.converterCid}"
                                            value="#{aposentadoriaControlador.cids}"
                                            var="valor"
                                            itemValue="#{valor.id}"
                                            itemLabel="#{valor}"
                                            completeMethod="#{aposentadoriaControlador.completaCids}"
                                            multiple="true">
                                <p:ajax process="@this"/>
                            </p:autoComplete>

                            <fc:outputLabelObrigatorio value="Médico: "/>
                            <h:panelGrid columns="2"
                                         cellpadding="0"
                                         cellspacing="0"
                                         id="dataInvalidez">
                                <p:dataList
                                    rendered="#{aposentadoriaControlador.listInvalidezMedico.size() ne 0 }"
                                    value="#{aposentadoriaControlador.listInvalidezMedico}" var="invalidez"
                                    type="definition">
                                    #{invalidez.getMedicos()}
                                </p:dataList>
                                <p:commandButton icon="ui-icon-circle-plus"
                                                 title="Clique para adicionar Médicos"
                                                 oncomplete="DlgInvalidezMedico.show()"
                                                 styleClass="mlef05"
                                                 update=":Formulario-invalidez"
                                                 process=":Formulario-invalidez"/>
                            </h:panelGrid>
                            <h:outputText rendered="#{aposentadoriaControlador.possuiDeficiencia}" value="Deficência:"/>
                            <h:outputText rendered="#{aposentadoriaControlador.possuiDeficiencia}"
                                          style="color: blueviolet"
                                          value="#{aposentadoriaControlador.descricaoDeficiencia}"/>
                            <h:outputText value="Isento de IRRF:"/>
                            <h:selectBooleanCheckbox title="Isento de IRRF"
                                                     value="#{aposentadoriaControlador.invalidezAposentado.isentoIRRF}"
                                                     id="isentoIRRF"/>

                            <h:outputText value="Isento de Previdência:"/>
                            <h:panelGrid cellpadding="0"
                                         columns="2"
                                         cellspacing="0">
                                <h:selectBooleanCheckbox title="Limitado ao dobro do teto do RGPS."
                                                         value="#{aposentadoriaControlador.invalidezAposentado.isentoPrevidencia}"
                                                         id="isentoPrevidencia">
                                    <p:ajax process="@this" event="change" update="infoPrev"/>
                                </h:selectBooleanCheckbox>
                                <h:outputText id="infoPrev"

                                              style="#{aposentadoriaControlador.invalidezAposentado.isentoPrevidencia eq false ? 'display: none' : ''};color:dodgerblue; margin-left: 2px;"
                                              value="Limitado ao dobro do teto do RGPS."/>

                            </h:panelGrid>
                        </h:panelGrid>
                        <p:commandButton value="Adicionar"
                                         icon="ui-icon-plus"
                                         onclick="statusDialog.show()"
                                         oncomplete="statusDialog.hide()"
                                         styleClass="mtop05"
                                         actionListener="#{aposentadoriaControlador.adicionarInvalidezAposentado}"
                                         update=":Formulario:tab"/>

                        <p:dataTable id="tabelaInvalidezAposentado"
                                     var="obj"
                                     styleClass="mtop05"
                                     value="#{aposentadoriaControlador.selecionado.invalidezAposentados}"
                                     editable="true"
                                     paginator="true"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha->selecionada' : 'trintaAltura'}"
                                     rowIndexVar="rowlx"
                                     emptyMessage="Não foram localizados registros para serem apresentados"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo->tabela mrig10'>INVALIDEZ APOSENTADO&lt;/span>
                                 {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                     rowsPerPageTemplate="10,25,50,100">
                            <p:column headerText="Início da Vigência" style="width: 12%">
                                <h:outputText value="#{obj.inicioVigencia}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Final da Vigência" style="width: 12%">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{obj.finalVigencia}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                                    title="Digite o final da Vigência"
                                                    value="#{obj.finalVigencia}" navigator="true"
                                                    pattern="dd/MM/yyyy" size="10"/>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column style="width: 7%" headerText="CID">
                                <h:outputText value="#{obj.invalidezCids}"/>
                            </p:column>
                            <p:column headerText="Laudo Médico" style="width: 10%">
                                <h:outputText value="#{obj.numeroLaudo}"/>
                            </p:column>
                            <p:column headerText="Médico">
                                <h:outputText value="#{obj.invalidezMedicos}"/>
                            </p:column>
                            <p:column headerText="Is. IR" style="width: 8%; text-align: center;">
                                <h:outputText value="Sim" rendered="#{obj.isentoIRRF eq true}"/>
                                <h:outputText value="Não" rendered="#{obj.isentoIRRF eq false}"/>
                            </p:column>
                            <p:column headerText="Is. Prev" style="width: 8%; text-align: center;">
                                <h:outputText value="Sim" rendered="#{obj.isentoPrevidencia eq true}"/>
                                <h:outputText value="Não" rendered="#{obj.isentoPrevidencia eq false}"/>
                            </p:column>
                            <p:column headerText="Edição" style="width: 40px">
                                <p:rowEditor/>
                            </p:column>
                            <p:column headerText="Remover" style="width: 60px">
                                <p:commandLink value="Remover"
                                               actionListener="#{aposentadoriaControlador.removeInvalidezAposentado}"
                                               update="tabelaInvalidezAposentado">
                                    <f:attribute value="#{obj}" name="objeto"/>
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab id="tabEsocial" title="E-social">
                        <h:panelGrid columns="2">
                            <fc:outputLabelObrigatorio value="Tipo de plano de segregação da massa:"/>
                            <h:selectOneMenu value="#{aposentadoriaControlador.selecionado.tipoPlanoSegregacaoMassa}">
                                <f:selectItems value="#{aposentadoriaControlador.tipoPlanoSegregacaoMassa}"/>
                            </h:selectOneMenu>
                            <fc:outputLabelObrigatorio value="Número do benefício previdenciário:"/>
                            <p:inputText value="#{aposentadoriaControlador.selecionado.numeroBeneficioPrevidenciario}"
                                         size="70" maxlength="20"/>
                            <fc:outputLabelObrigatorio value="Tipo de Benefício Previdenciário:"/>
                            <h:selectOneMenu id="tipoBeneficioPrev" title="Selecione o Tipo de Benefício Previdenciário"
                                             value="#{aposentadoriaControlador.selecionado.tipoBenefPrevidenciario}"
                                             style="width: 470px"
                                             converter="#{aposentadoriaControlador.converterTipoBeneficioPrevidenciario}">
                                <f:selectItems value="#{aposentadoriaControlador.tiposBeneficioPrevidenciario}"/>
                                <p:ajax event="change" update="tipoBenef" onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"/>
                            </h:selectOneMenu>

                            <p:spacer/>
                            <p:inputTextarea
                                id="tipoBenef"
                                readonly="true"
                                cols="74"
                                rows="4"
                                value="#{aposentadoriaControlador.selecionado.tipoBenefPrevidenciario.descricao}"/>


                            <fc:outputLabelObrigatorio value="Tipo de Benefício(Tabela 25):"/>
                            <h:selectOneMenu id="tipoBeneficioEsocial" title="Selecione o Tipo de Benefício Esocial"
                                             value="#{aposentadoriaControlador.selecionado.tipoBeneficioEsocial}"
                                             style="width: 470px"
                                             converter="#{aposentadoriaControlador.converterTipoBeneficioEsocial}">
                                <f:selectItems value="#{aposentadoriaControlador.tiposBeneficioEsocial}"/>
                                <p:ajax event="change" update="tipoBeneficioEsocialDescricao" onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"/>
                            </h:selectOneMenu>
                            <p:spacer/>
                            <p:inputTextarea
                                id="tipoBeneficioEsocialDescricao"
                                readonly="true"
                                cols="74"
                                rows="4"
                                value="#{aposentadoriaControlador.selecionado.tipoBeneficioEsocial.descricao}"/>

                        </h:panelGrid>
                    </p:tab>
                    <p:tab id="tipoBeneficio" title="Tipo de Benefício Avaliação Atuarial">
                        <fc:outputLabelObrigatorio value="Tipo de Benefício Avaliação Atuarial:"/>
                        <h:selectOneMenu id="tipoBeneficioCaixaAtuarial"
                                         value="#{aposentadoriaControlador.selecionado.tipoBeneficioEstudoAtuarial}">
                            <f:selectItems value="#{aposentadoriaControlador.tiposBeneficiosEstudoAtuarial}"
                                           size="20"/>
                        </h:selectOneMenu>
                    </p:tab>

                </p:tabView>

            </p:panel>
            <h:panelGroup id="btAcoes">
                <p:commandButton id="Salvar"
                                 value="Salvar"
                                 rendered="#{aposentadoriaControlador.renderizarSalvar}"
                                 styleClass="mtop10 mrig05 prioritario"
                                 style="height: 30px;"
                                 icon="ui-icon-disk"
                                 title="Clique para salvar o registro"
                                 update=":formSalvar :FormularioExoneracaoRescisao"
                                 oncomplete="dialogSalvar.show()"/>

                <p:commandButton id="Salvar1"
                                 value="Salvar"
                                 rendered="#{!aposentadoriaControlador.renderizarSalvar}"
                                 actionListener="#{aposentadoriaControlador.salvar()}"
                                 styleClass="mtop10 mrig05 prioritario"
                                 style="height: 30px;"
                                 icon="ui-icon-disk"
                                 title="Clique para salvar o registro"
                                 update=":formSalvar :FormularioExoneracaoRescisao"
                                 onclick="aguarde.show()"
                                 oncomplete="aguarde.hide()"/>

                <fc:rodapePretty id="rpRodapePretty" ocultarSalvar="true"
                                 controlador="#{aposentadoriaControlador}"/>
            </h:panelGroup>
        </h:form>

        <p:dialog modal="true"
                  position="center"
                  resizable="false"
                  widgetVar="dialogSalvar">
            <h:form id="formSalvar">
                <h:outputText escape="false"
                              value="Os registros de Pensão Alimentícia vinculados ao Contrato (Nomeação) do servidor serão automaticamente migrados e vinculados ao registro de aposentadoria atual."/>
                <br/>
                <p:commandButton value="OK"
                                 id="btSalvar"
                                 styleClass="mtop10 mrig05 prioritario"
                                 style="float: right "
                                 title="Clique para salvar o registro"
                                 actionListener="#{aposentadoriaControlador.salvar()}"
                                 onclick="aguarde.show()"
                                 oncomplete="aguarde.hide()"/>
            </h:form>
        </p:dialog>

        <p:dialog modal="true"
                  position="center"
                  header="Dados do Óbito"
                  resizable="false"
                  widgetVar="dialogo">
            <h:form id="formObito">
                <h:outputText escape="false" value="#{aposentadoriaControlador.dadosObito()}"/>
            </h:form>
        </p:dialog>


        <p:dialog modal="true" closable="false" resizable="false" widgetVar="dlgCargoConfiancaFuncaoGratificada"
                  header="Atenção!" width="500">
            <h:form id="formDialog">
                <p:panel style="text-align: center">
                    <br/>
                    <h:outputText value="#{aposentadoriaControlador.mensagem}"/>
                    <br/><br/>
                    <p:commandButton value="OK" actionListener="#{aposentadoriaControlador.novo()}"
                                     onclick="dlgCargoConfiancaFuncaoGratificada.hide()"
                                     update=":Formulario"/>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="DialogPesquisarPessoa"
                  modal="true"
                  width="800"
                  height="500"
                  closable="true"
                  resizable="false"
                  position="center"
                  style="position: fixed !important;">
            <h:form id="FormularioPesquisarPessoa">
                <p:outputPanel rendered="#{aposentadoriaControlador.selecionado ne null}">
                    <fc:pesquisaGenerico
                        selecionar="#{aposentadoriaControlador.selecionarObjetoPesquisaGenerico}"
                        updateSelecionarTabela=":Formulario:atoLegal"
                        id="componentePesquisaGenerico"
                        nomeDaClasse="AtoLegal"
                        guardarNaSessao="false"
                        actionSelecionar="#{aposentadoriaControlador.caminhoVisualizar()}"
                        novo="#{atoLegalControlador.novo}"
                        caminhoAtual="listatributario"
                        caminhoControlador="#{atoLegalControlador.caminho}"
                        mostrarBotaoNovo="false"
                        mostrarBotaoImprimirRelatorioTabela="false"
                        mostrarHistorico="false"
                        mostrarOrdenacao="false"
                        iconmSelecionar="check-icon.png"
                        mostrarBotaoImprimirRelatorioUnicoRegistro="false"
                        pretty="true"
                        dialog="true"
                        mostrarBotaoEditarConfiguracaoRelatorio="false"
                        pesquisaNoEnter="false"/>
                </p:outputPanel>
            </h:form>
        </p:dialog>

        <p:dialog
            widgetVar="DlgInvalidezMedico"
            modal="true"
            resizable="false"
            position="center"
            closable="false"
            style="position: fixed !important;">
            <h:form id="Formulario-invalidez">
                <p:panel header="Cadastro de Médicos">
                    <p:outputPanel id="panel-invalidezmedico">
                        <h:selectOneRadio value="#{aposentadoriaControlador.selecionarMedico}">
                            <f:selectItem itemLabel="Carregar" itemValue="carregar"/>
                            <f:selectItem itemLabel="Novo" itemValue="novo"/>
                            <p:ajax
                                update="panelgrid-medico panel-invalidezmedico"/>
                        </h:selectOneRadio>
                        <h:panelGrid id="panelgrid-medico" columns="2"
                                     rendered="#{aposentadoriaControlador.selecionarMedico eq 'carregar'}">
                            <fc:outputLabelObrigatorio value="Médico: "/>
                            <p:autoComplete queryDelay="1000" id="completarMedico"
                                            value="#{aposentadoriaControlador.invalidezMedico.medico}"
                                            completeMethod="#{aposentadoriaControlador.completarMedico}"
                                            converter="#{aposentadoriaControlador.converterMedico}"
                                            size="45"
                                            forceSelection="true"
                                            maxResults="10"
                                            var="medico"
                                            itemValue="#{medico}"
                                            itemLabel="#{medico.medico}"/>
                        </h:panelGrid>
                        <h:panelGrid id="panelgrid-invalidezmedico" columns="2"
                                     rendered="#{aposentadoriaControlador.selecionarMedico eq 'novo'}">
                            <h:outputText value="Médico:"/>
                            <p:inputText title="Digite o nome do Médico"
                                         value="#{aposentadoriaControlador.invalidezMedico.nomeMedico}"/>
                            <h:outputText value="Registro CRM:"/>
                            <p:inputText title="Digite o registro CRM"
                                         value="#{aposentadoriaControlador.invalidezMedico.registroCRM}" maxlength="15"
                                         size="20"/>
                        </h:panelGrid>

                        <p:commandButton value="Adicionar"
                                         icon="ui-icon-plus"
                                         onclick="statusDialog.show()"
                                         oncomplete="statusDialog.hide()"
                                         styleClass="mtop05"
                                         actionListener="#{aposentadoriaControlador.adicionarInvalidezMedico}"
                                         update=":Formulario-invalidez tabelaInvalidezMedico"/>
                        <p:commandButton value="Limpar"
                                         icon="ui-icon-trash"
                                         styleClass="mtop05"
                                         actionListener="#{aposentadoriaControlador.limparInvalidesMedico}"
                                         update="panelgrid-medico panel-invalidezmedico"/>
                    </p:outputPanel>
                    <p:dataTable id="tabelaInvalidezMedico"
                                 var="invaMed"
                                 styleClass="mtop05"
                                 value="#{aposentadoriaControlador.listInvalidezMedico}"
                                 editable="true"
                                 paginator="true"
                                 rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha->selecionada' : 'trintaAltura'}"
                                 rowIndexVar="rowlx"
                                 emptyMessage="Não foram localizados registros para serem apresentados"
                                 rows="10"
                                 paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo->tabela mrig10'>INVALIDEZ MÉDICO&lt;/span>
                                 {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                 rowsPerPageTemplate="10,25,50,100">
                        <p:column headerText="Medico">
                            <h:outputText value="#{invaMed.getMedicos()}"/>
                        </p:column>
                        <p:column style="width:8%; text-align: center" headerText="Remover">
                            <p:commandButton icon="ui-icon-trash"
                                             actionListener="#{aposentadoriaControlador.removerInvalidezMedico}"
                                             process="tabelaInvalidezMedico"
                                             update="tabelaInvalidezMedico">
                                <f:attribute value="#{invaMed}" name="objeto"/>
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>
                    <p:commandButton value="Atualizar"
                                     icon="ui-icon-refresh"
                                     oncomplete="DlgInvalidezMedico.hide()"
                                     styleClass="mtop05"
                                     update=":Formulario:tab:dataInvalidez"/>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog
            widgetVar="dlgExoneracaoRescisao"
            modal="true"
            resizable="false"
            position="center"
            closable="false"
            style="position: fixed !important;">
            <h:form id="FormularioExoneracaoRescisao">
                <p:panel header="Cadastro de Exoneração/Rescisão">
                    <h:panelGrid columns="2" id="panel-grid">
                        <fc:outputLabelObrigatorio value="Servidor:"/>
                        <p:autoComplete queryDelay="1000"
                                        completeMethod="#{exoneracaoRescisaoControlador.completarContratoFP}"
                                        value="#{aposentadoriaControlador.exoneracaoRescisao.vinculoFP}"
                                        var="vinculo"
                                        maxResults="15"
                                        disabled="true"
                                        itemLabel="#{vinculo}"
                                        itemValue="#{vinculo.id}"
                                        converter="#{exoneracaoRescisaoControlador.converterContratoFP}"
                                        size="70">
                        </p:autoComplete>

                        <fc:outputLabelObrigatorio value="Data da Rescisão:" for="dataRescisao"/>
                        <p:calendar onkeypress="mascara(this, mdata)" maxlength="10" title="Digite a Data da Rescisão"
                                    value="#{aposentadoriaControlador.exoneracaoRescisao.dataRescisao}" id="dataRescisao"
                                    navigator="true"
                                    disabled="true"
                                    pattern="dd/MM/yyyy" size="20">
                            <p:ajax event="dateSelect" process="@this"/>
                            <p:ajax event="blur" process="@this"/>
                        </p:calendar>

                        <fc:outputLabelObrigatorio value="Motivo da Exoneração/Rescisão:" for="motivo"/>
                        <p:autoComplete queryDelay="1000" id="motivo"
                                        completeMethod="#{exoneracaoRescisaoControlador.completarMotivoExoneracaoRescisao}"
                                        value="#{aposentadoriaControlador.exoneracaoRescisao.motivoExoneracaoRescisao}"
                                        var="motivo"
                                        itemLabel="#{motivo}"
                                        itemValue="#{motivo.id}"
                                        converter="#{exoneracaoRescisaoControlador.converterMotivoExoneracaoRescisao}"
                                        forceSelection="true"
                                        size="70" styleClass="mrig05">
                            <p:ajax event="itemSelect" update="@form" process="@form"/>
                        </p:autoComplete>

                        <fc:outputLabelObrigatorio value="Número da Certidão de Óbito:"
                                                   rendered="#{aposentadoriaControlador.informarNumeroCertidaoObito}"/>
                        <p:inputText value="#{aposentadoriaControlador.exoneracaoRescisao.numeroCertidaoObito}"
                                     maxlength="30"
                                     rendered="#{aposentadoriaControlador.informarNumeroCertidaoObito}"
                                     size="30"/>
                        <fc:outputLabelObrigatorio value="Aviso Prévio:"
                                                   rendered="#{aposentadoriaControlador.avisoPrevioObrigatorio}"/>
                        <h:panelGroup rendered="#{aposentadoriaControlador.avisoPrevioObrigatorio}">
                            <h:panelGrid columns="1">
                                <h:selectOneMenu value="#{aposentadoriaControlador.exoneracaoRescisao.avisoPrevio}"
                                                 converter="#{avisoPrevioControlador.converterGenerico}">
                                    <f:selectItems value="#{aposentadoriaControlador.avisoPrevio}"/>
                                    <p:ajax update="tipoAvisoPrevio" onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            event="change"/>
                                </h:selectOneMenu>
                                <h:outputText
                                    value="#{aposentadoriaControlador.exoneracaoRescisao.avisoPrevio.tipoAvisoPrevio.descricao}"
                                    styleClass="negrito" id="tipoAvisoPrevio"/>
                            </h:panelGrid>
                        </h:panelGroup>

                        <h:outputText value="Data do Aviso Prévio:"/>
                        <p:calendar id="dataAvisoPrevio"
                                    title="Digite a data do aviso prévio"
                                    onkeypress="mascara(this, Data)"
                                    maxlength="10" size="10"
                                    navigator="true"
                                    value="#{aposentadoriaControlador.exoneracaoRescisao.dataAvisoPrevio}"
                                    pattern="dd/MM/yyyy" locale="pt_BR"/>

                        <fc:outputLabelObrigatorio value="Ato Legal:" for="atoLegal"/>
                        <p:autoComplete queryDelay="1000" id="atoLegal"
                                        disabled="true"
                                        completeMethod="#{exoneracaoRescisaoControlador.completarAtoLegal}"
                                        value="#{aposentadoriaControlador.exoneracaoRescisao.atoLegal}"
                                        var="atoLegal"
                                        itemLabel="#{atoLegal}"
                                        itemValue="#{atoLegal.id}"
                                        converter="#{exoneracaoRescisaoControlador.converterAtoLegal}"
                                        forceSelection="true"
                                        size="70" styleClass="mrig05">
                        </p:autoComplete>

                        <h:outputText value="Movimento SEFIP Afastamento"/>
                        <p:autoComplete queryDelay="1000"
                                        value="#{aposentadoriaControlador.exoneracaoRescisao.movimentoSEFIP}"
                                        var="movimento"
                                        itemLabel="#{movimento}"
                                        itemValue="#{movimento.id}"
                                        converter="#{exoneracaoRescisaoControlador.converterMovimentoSEFIP}"
                                        forceSelection="true"
                                        size="70" styleClass="mrig05"
                                        id="movimento"
                                        completeMethod="#{exoneracaoRescisaoControlador.completarMovimentosSEFIP}">
                        </p:autoComplete>

                        <h:outputText value="Recolher FGTS Em GRRF"/>
                        <h:selectBooleanCheckbox title="Recolher FGTS Em GRRF"
                                                 disabled="#{aposentadoriaControlador.desabilitarFGTS}"
                                                 value="#{aposentadoriaControlador.exoneracaoRescisao.recolherFGTSGRRF}"
                                                 id="recolherFGTS"/>

                        <h:outputText value="Observação:"/>
                        <fc:inputTextarea value="#{aposentadoriaControlador.exoneracaoRescisao.observacao}"/>
                    </h:panelGrid>
                    <p:commandButton value="Salvar"
                                     icon="ui-icon-disk"
                                     styleClass="mtop10 mrig05 prioritario"
                                     style="height: 30px;"
                                     onclick="#{aposentadoriaControlador.mensagemFichaFinanceiraAberta()}"
                                     onstart="aguarde.show();"
                                     oncomplete="aguarde.hide();"
                                     title="Clique para salvar o registro"
                                     actionListener="#{aposentadoriaControlador.salvarExoneracaoRescisao()}"/>

                    <p:commandButton value="Cancelar"
                                     id="cbCancelarExoneracao"
                                     icon="ui-icon-cancel"
                                     styleClass="mtop10"
                                     style="height: 30px;"
                                     onclick="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     title="Clique para cancelar e retornar a página anterior"
                                     actionListener="#{aposentadoriaControlador.cancelarExoneracaoRescisao()}"/>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog modal="true"
                  position="center"
                  resizable="false"
                  widgetVar="dlgExoneracaoExistente">
            <h:form id="formExoneracaoExistente">
                <div class="alert alert-warning" align="center">
                    <Strong>Atenção!</Strong> Já existe registro de exoneração para o vínculo de origem da aposentadoria. Consulte o registro no cadastro de EXONERAÇÃO/RESCISÃO.
                </div>
                <p:commandButton value="OK"
                                 onclick="dlgExoneracaoExistente.hide(); aguarde.show();"
                                 oncomplete="aguarde.hide()"
                                 actionListener="#{aposentadoriaControlador.salvarAposentadoriaNovo()}"
                                 styleClass="mtop10 mrig05 prioritario"
                                 style="height: 30px;"
                                 update=":Formulario"
                                 icon="ui-icon-check"/>
                <p:commandButton value="Cancelar"
                                 id="cbCancelarSalvar"
                                 icon="ui-icon-cancel"
                                 styleClass="mtop10 mrig05"
                                 style="height: 30px;"
                                 onclick="dlgExoneracaoExistente.hide()"
                                 title="Clique para cancelar"/>
            </h:form>
        </p:dialog>

        <fc:aguarde id="aguarde" texto="Pesquisando..."/>

    </ui:define>
</ui:composition>
</html>
