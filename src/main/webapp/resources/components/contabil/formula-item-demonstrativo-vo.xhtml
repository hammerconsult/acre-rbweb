<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
>

<!-- INTERFACE -->
<cc:interface>
    <cc:attribute name="formulaVO" required="true"/>
</cc:interface>
<cc:implementation>
    <p:tabView id="tabGeral" styleClass="mtop05">
        <p:tab title="Item Demonstrativo" id="tabItem">
            <h:panelGrid columns="2">
                <h:outputText value="Relatório:"/>
                <p:autoComplete queryDelay="1000" id="completaRel"
                                completeMethod="#{relatoriosItemDemonstControlador.completarRelatorios}"
                                value="#{cc.attrs.formulaVO.relatoriosItemDemonst}"
                                var="rel"
                                title="Informe o relatório."
                                maxResults="10"
                                itemLabel="#{rel}"
                                itemValue="#{rel.id}"
                                converter="#{relatoriosItemDemonstControlador.converterGenerico}"
                                size="70">
                    <p:ajax event="itemSelect"
                            update="completaGrupoAdicao completaGrupoSubtracao"
                            process="@this"
                            listener="#{relatoriosItemDemonstControlador.setaNullItem(cc.attrs.formulaVO)}"/>
                </p:autoComplete>

                <fc:outputLabelObrigatorio value="Item Demonstrativo: "/>
                <p:autoComplete queryDelay="1000" id="completaGrupoAdicao"
                                completeMethod="#{relatoriosItemDemonstControlador.completarItensAdicao}"
                                rendered="#{cc.attrs.formulaVO.operacaoFormula.name() eq 'ADICAO'}"
                                value="#{cc.attrs.formulaVO.itemDemonst}"
                                var="it"
                                title="Informe o Item Demonstrativo"
                                maxResults="10"
                                itemLabel="#{it.descricao}"
                                itemValue="#{it.id}"
                                converter="#{relatoriosItemDemonstControlador.converterItemDemonstrativo}"
                                size="70"/>

                <p:autoComplete queryDelay="1000" id="completaGrupoSubtracao"
                                completeMethod="#{relatoriosItemDemonstControlador.completarItensSubtracao}"
                                rendered="#{cc.attrs.formulaVO.operacaoFormula.name() ne 'ADICAO'}"
                                value="#{cc.attrs.formulaVO.itemDemonst}"
                                var="it"
                                title="Informe o Item Demonstrativo"
                                maxResults="10"
                                itemLabel="#{it.descricao}"
                                itemValue="#{it.id}"
                                converter="#{relatoriosItemDemonstControlador.converterItemDemonstrativo}"
                                size="70"/>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             title="Clique para adicionar este registro."
                             icon="ui-icon-circle-plus"
                             styleClass="padrao mtop10"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             update="itensD completaGrupoAdicao completaGrupoSubtracao"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarItem(cc.attrs.formulaVO)}"/>

            <p:dataTable id="itensD"
                         value="#{cc.attrs.formulaVO.componentesItemDemonstrativo}"
                         var="itemDemonst"
                         styleClass="mtop03"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ITENS DEMONSTRATIVOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx">
                <p:column headerText="Ação" style="width: 5%; text-align: center">
                    <p:commandButton icon="ui-icon-trash"
                                     update="itensD"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(itemDemonst, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column headerText="Descrição"
                          filterMatchMode="contains"
                          sortBy="#{itemDemonst.itemDemonstrativo.descricao}"
                          filterBy="#{itemDemonst.itemDemonstrativo.descricao}">
                    <h:outputText value="#{itemDemonst.contasItens}"/>
                </p:column>
                <p:column headerText="Coluna" styleClass="alinhamentoCentralizado"
                          sortBy="#{itemDemonst.coluna}"
                          filterBy="#{itemDemonst.coluna}">
                    <h:outputText value="#{itemDemonst.coluna}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="Unidade Organizacional" id="tabUO"
               rendered="#{relatoriosItemDemonstControlador.selecionado.usaUnidadeOrganizacional}">
            <h:panelGrid columns="2" id="gridUnid">
                <fc:outputLabelObrigatorio value="Unidade Organizacional: "/>
                <p:autoComplete queryDelay="1000" id="completaUO"
                                completeMethod="#{relatoriosItemDemonstControlador.completarUnidadesOrganizacionais}"
                                value="#{cc.attrs.formulaVO.hierarquiaOrganizacional}"
                                var="hie"
                                title="Informe a unidade organizacional."
                                maxResults="10"
                                itemLabel="#{hie}"
                                itemValue="#{hie.id}"
                                converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                size="70"/>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             title="Clique para Adicionar a Unidade Organizacional"
                             icon="ui-icon-circle-plus"
                             styleClass="padrao mtop10"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             update="unds gridUnid"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarUnidadeOrganizacional(cc.attrs.formulaVO)}"/>

            <p:dataTable id="unds"
                         value="#{cc.attrs.formulaVO.componentesUnidadeOrganizacional}"
                         var="uo"
                         styleClass="mtop03"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>UNIDADES ORGANIZACIONAIS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx">
                <p:column headerText="Ação" style="width: 5%; text-align: center">
                    <p:commandButton update="unds"
                                     icon="ui-icon-trash"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(uo, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column headerText="Descrição"
                          filterMatchMode="contains"
                          sortBy="#{uo.unidadeOrganizacional.descricao}"
                          filterBy="#{uo.unidadeOrganizacional.descricao}">
                    <h:outputText value="#{uo.unidadeOrganizacional.descricao}"/>
                </p:column>
                <p:column headerText="Coluna" styleClass="alinhamentoCentralizado"
                          sortBy="#{uo.coluna}"
                          filterBy="#{uo.coluna}">
                    <h:outputText value="#{uo.coluna}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="Função" id="tabFuncao"
               rendered="#{relatoriosItemDemonstControlador.selecionado.usaFuncao}">
            <h:panelGrid columns="2" id="gridFuncao">
                <fc:outputLabelObrigatorio value="Função: "/>
                <p:autoComplete queryDelay="1000" id="completaFuncao"
                                completeMethod="#{relatoriosItemDemonstControlador.completarFuncoes}"
                                value="#{cc.attrs.formulaVO.funcao}"
                                var="fc"
                                title="Informe a Função"
                                maxResults="10"
                                itemLabel="#{fc}"
                                itemValue="#{fc.id}"
                                converter="#{funcaoControlador.converterGenerico}"
                                size="70"/>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             title="Clique para adicionar este registro."
                             icon="ui-icon-circle-plus"
                             styleClass="padrao mtop10"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             update="gridFuncao fcs"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarFuncao(cc.attrs.formulaVO)}"/>

            <p:dataTable id="fcs"
                         value="#{cc.attrs.formulaVO.componentesFuncao}"
                         styleClass="mtop02"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>FUNÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx"
                         var="fc">
                <p:column headerText="Ação" style="width: 5%; text-align: center">
                    <p:commandButton update=":#{cc.attrs.formulario}:tabGeral:fcs"
                                     icon="ui-icon-trash"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(fc, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column headerText="Código"
                          filterMatchMode="contains"
                          sortBy="#{fc.funcao.codigo}"
                          filterBy="#{fc.funcao.codigo}">
                    <h:outputText value="#{fc.funcao.codigo}"/>
                </p:column>
                <p:column headerText="Descrição"
                          filterMatchMode="contains"
                          sortBy="#{fc.funcao.descricao}"
                          filterBy="#{fc.funcao.descricao}">
                    <h:outputText value="#{fc.funcao.descricao}"/>
                </p:column>
                <p:column headerText="Coluna" styleClass="alinhamentoCentralizado"
                          sortBy="#{fc.coluna}"
                          filterBy="#{fc.coluna}">
                    <h:outputText value="#{fc.coluna}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="Subfunção" id="tabSF"
               rendered="#{relatoriosItemDemonstControlador.selecionado.usaSubFuncao}">
            <h:panelGrid columns="2" id="gridSubFuncao">
                <fc:outputLabelObrigatorio value="Subfunção: "/>
                <p:autoComplete queryDelay="1000" id="completaSubFuncao"
                                completeMethod="#{relatoriosItemDemonstControlador.completarSubfuncoes}"
                                value="#{cc.attrs.formulaVO.subFuncao}"
                                var="sf"
                                title="Informe a subfunção."
                                maxResults="10"
                                itemLabel="#{sf}"
                                itemValue="#{sf.id}"
                                converter="#{subFuncaoControlador.converterGenerico}"
                                size="70"/>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             title="Clique para adicionar este registro."
                             icon="ui-icon-circle-plus"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             styleClass="padrao mtop10"
                             update="sfs gridSubFuncao"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarSubFuncao(cc.attrs.formulaVO)}"/>

            <p:dataTable id="sfs"
                         value="#{cc.attrs.formulaVO.componentesSubFuncao}"
                         var="sf"
                         styleClass="mtop03"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>SUBFUNÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx">
                <p:column headerText="Ação" style="width: 5%; text-align: center">
                    <p:commandButton update="sfs"
                                     icon="ui-icon-trash"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(sf, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column headerText="Código"
                          filterMatchMode="contains"
                          sortBy="#{sf.subFuncao.codigo}"
                          filterBy="#{sf.subFuncao.codigo}">
                    <h:outputText value="#{sf.subFuncao.codigo}"/>
                </p:column>
                <p:column headerText="Descrição"
                          filterMatchMode="contains"
                          sortBy="#{sf.subFuncao.descricao}"
                          filterBy="#{sf.subFuncao.descricao}">
                    <h:outputText value="#{sf.subFuncao.descricao}"/>
                </p:column>
                <p:column headerText="Coluna" styleClass="alinhamentoCentralizado"
                          sortBy="#{sf.coluna}"
                          filterBy="#{sf.coluna}">
                    <h:outputText value="#{sf.coluna}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="Ação" id="tabAcoes"
               rendered="#{relatoriosItemDemonstControlador.selecionado.usaAcao}">
            <h:panelGrid columns="2" id="gridAcao">
                <fc:outputLabelObrigatorio value="Ação: "/>
                <p:autoComplete queryDelay="1000" id="completaAcao"
                                completeMethod="#{relatoriosItemDemonstControlador.completarAcoes}"
                                value="#{cc.attrs.formulaVO.acaoPPA}"
                                var="ac"
                                title="Informe a ação."
                                maxResults="10"
                                itemLabel="#{ac.toStringAutoCompleteRelatorio()}"
                                itemValue="#{ac.id}"
                                converter="#{projetoAtividadeControlador.converterGenerico}"
                                size="70"/>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             title="Clique para adicionar este registro."
                             icon="ui-icon-circle-plus"
                             styleClass="padrao mtop10"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             update="acs gridAcao"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarAcao(cc.attrs.formulaVO)}"/>

            <p:dataTable id="acs"
                         value="#{cc.attrs.formulaVO.componentesAcao}"
                         var="ac"
                         styleClass="mtop03"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>AÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx">
                <p:column headerText="Ação" style="width: 5%; text-align: center">
                    <p:commandButton update="acs"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     icon="ui-icon-trash"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(ac, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column headerText="Código"
                          filterMatchMode="contains"
                          sortBy="#{ac.acaoPPA.tipoAcaoPPA.codigo}#{ac.acaoPPA.codigo}"
                          filterBy="#{ac.acaoPPA.tipoAcaoPPA.codigo}#{ac.acaoPPA.codigo}">
                    <h:outputText value="#{ac.acaoPPA.tipoAcaoPPA.codigo}#{ac.acaoPPA.codigo}"/>
                </p:column>
                <p:column headerText="Descrição"
                          filterMatchMode="contains"
                          sortBy="#{ac.acaoPPA.descricao}"
                          filterBy="#{ac.acaoPPA.descricao}">
                    <h:outputText value="#{ac.acaoPPA.descricao}"/>
                </p:column>
                <p:column headerText="Coluna" styleClass="alinhamentoCentralizado"
                          sortBy="#{ac.coluna}"
                          filterBy="#{ac.coluna}">
                    <h:outputText value="#{ac.coluna}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="Subação" id="tabSubacoes"
               rendered="#{relatoriosItemDemonstControlador.selecionado.usaSubAcao}">
            <h:panelGrid columns="2" id="gridSubacao">
                <fc:outputLabelObrigatorio value="Subação: "/>
                <p:autoComplete queryDelay="1000" id="complSubAcaoAdicao"
                                completeMethod="#{relatoriosItemDemonstControlador.completarSubacoesAdicao}"
                                value="#{cc.attrs.formulaVO.subAcaoPPA}"
                                rendered="#{cc.attrs.formulaVO.operacaoFormula.name() eq 'ADICAO'}"
                                var="sa"
                                title="Informe a subação."
                                maxResults="10"
                                itemLabel="#{sa.toStringAutoCompleteRelatorio()}"
                                itemValue="#{sa.id}"
                                converter="#{relatoriosItemDemonstControlador.converterSubacaoPPA}"
                                size="70"/>

                <p:autoComplete queryDelay="1000" id="complSubAcaoSubtracao"
                                completeMethod="#{relatoriosItemDemonstControlador.completarSubacoesSubtracao}"
                                value="#{cc.attrs.formulaVO.subAcaoPPA}"
                                rendered="#{cc.attrs.formulaVO.operacaoFormula.name() ne 'ADICAO'}"
                                var="sa"
                                title="Informe a subação."
                                maxResults="10"
                                itemLabel="#{sa.toStringAutoCompleteRelatorio()}"
                                itemValue="#{sa.id}"
                                converter="#{relatoriosItemDemonstControlador.converterSubacaoPPA}"
                                size="70"/>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             title="Clique para adicionar este registro."
                             icon="ui-icon-circle-plus"
                             styleClass="padrao mtop10"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             update="sacs gridSubacao"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarSubacao(cc.attrs.formulaVO)}"/>

            <p:dataTable id="sacs"
                         value="#{cc.attrs.formulaVO.componentesSubacao}"
                         var="sac"
                         styleClass="mtop03"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>SUBAÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx">
                <p:column headerText="Ação" style="width: 5%; text-align: center">
                    <p:commandButton update="sacs"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     icon="ui-icon-trash"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(sac, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column headerText="Código"
                          filterMatchMode="contains"
                          sortBy="#{sac.subAcaoPPA.acaoPPA.tipoAcaoPPA.codigo}#{sac.subAcaoPPA.acaoPPA.codigo}.#{sac.subAcaoPPA.codigo}"
                          filterBy="#{sac.subAcaoPPA.acaoPPA.tipoAcaoPPA.codigo}#{sac.subAcaoPPA.acaoPPA.codigo}.#{sac.subAcaoPPA.codigo}">
                    <h:outputText
                        value="#{sac.subAcaoPPA.acaoPPA.tipoAcaoPPA.codigo}#{sac.subAcaoPPA.acaoPPA.codigo}.#{sac.subAcaoPPA.codigo}"/>
                </p:column>
                <p:column headerText="Descrição"
                          filterMatchMode="contains"
                          sortBy="#{sac.subAcaoPPA.descricao}"
                          filterBy="#{sac.subAcaoPPA.descricao}">
                    <h:outputText value="#{sac.subAcaoPPA.descricao}"/>
                </p:column>
                <p:column headerText="Coluna" styleClass="alinhamentoCentralizado"
                          sortBy="#{sac.coluna}"
                          filterBy="#{sac.coluna}">
                    <h:outputText value="#{sac.coluna}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="Conta" id="tabContas"
               rendered="#{relatoriosItemDemonstControlador.selecionado.usaConta}">

            <h:panelGrid columns="2" id="gridConta">
                <fc:outputLabelObrigatorio value="Plano de Contas: "/>
                <h:selectOneMenu title="Selecione um plano de contas"
                                 value="#{cc.attrs.formulaVO.planoDeContas}"
                                 converter="#{planoDeContasWizardControlador.converterGenerico}"
                                 id="planoDeContas">
                    <f:selectItems value="#{relatoriosItemDemonstControlador.planos}"/>
                    <p:ajax event="change"
                            update="completaContaAdicao completaContaSubtracao"
                            listener="#{relatoriosItemDemonstControlador.atribuirNullConta(cc.attrs.formulaVO)}"
                            process="@this"/>
                </h:selectOneMenu>

                <fc:outputLabelObrigatorio value="Conta: "/>
                <p:autoComplete queryDelay="1000" id="completaContaAdicao"
                                value="#{cc.attrs.formulaVO.conta}"
                                completeMethod="#{relatoriosItemDemonstControlador.completarContasAdicao}"
                                converter="#{planoDeContasWizardControlador.converterConta}"
                                disabled="#{cc.attrs.formulaVO.planoDeContas eq null}"
                                rendered="#{cc.attrs.formulaVO.operacaoFormula.name() eq 'ADICAO'}"
                                var="c"
                                size="70"
                                itemLabel="#{c}"
                                itemValue="#{c.id}"
                                title="Informe uma conta."/>

                <p:autoComplete queryDelay="1000" id="completaContaSubtracao"
                                value="#{cc.attrs.formulaVO.conta}"
                                completeMethod="#{relatoriosItemDemonstControlador.completarContasSubtracao}"
                                converter="#{planoDeContasWizardControlador.converterConta}"
                                disabled="#{cc.attrs.formulaVO.planoDeContas eq null}"
                                rendered="#{cc.attrs.formulaVO.operacaoFormula.name() ne 'ADICAO'}"
                                var="c"
                                size="70"
                                itemLabel="#{c}"
                                itemValue="#{c.id}"
                                title="Informe uma conta."/>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             icon="ui-icon-circle-plus"
                             styleClass="padrao mtop10 mrig05"
                             onclick="aguarde.show()"
                             onsuccess="aguarde.hide()"
                             title="Clique para adicionar as contas pelo código informado."
                             update="comp gridConta"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarConta(cc.attrs.formulaVO)}"/>

            <p:dataTable id="comp"
                         value="#{cc.attrs.formulaVO.componentesConta}"
                         var="comp"
                         styleClass="mtop03"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>CONTAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx">
                <p:column style="width: 5%; text-align: center" headerText="Ação">
                    <p:commandButton update="comp"
                                     icon="ui-icon-trash"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(comp, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column sortBy="#{comp.conta.codigo}"
                          headerText="Código"
                          filterMatchMode="contains"
                          filterBy="#{comp.conta.codigo}">
                    <h:outputText value="#{comp.conta.codigo}"/>
                </p:column>
                <p:column sortBy="#{comp.conta.descricao}"
                          headerText="Descrição"
                          filterMatchMode="contains"
                          filterBy="#{comp.conta.descricao}">
                    <h:outputText value="#{comp.conta.descricao}"/>
                </p:column>
                <p:column headerText="Coluna" styleClass="alinhamentoCentralizado"
                          sortBy="#{comp.coluna}"
                          filterBy="#{comp.coluna}">
                    <h:outputText value="#{comp.coluna}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="Fonte de Recurso" id="tabFonteRec"
               rendered="#{relatoriosItemDemonstControlador.selecionado.usaFonteRecurso}">
            <h:panelGrid columns="2" id="gridFonte">
                <fc:outputLabelObrigatorio value="Fonte de Recurso: "/>
                <p:autoComplete queryDelay="1000" id="completaFonte"
                                completeMethod="#{relatoriosItemDemonstControlador.completarFontesDeRecursos}"
                                value="#{cc.attrs.formulaVO.fonteDeRecursos}"
                                var="fr"
                                title="Informe a Fonte de Recurso"
                                maxResults="10"
                                itemLabel="#{fr}"
                                itemValue="#{fr.id}"
                                converter="#{fonteDeRecursosControlador.converterGenerico}"
                                size="70"/>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             title="Clique para Adicionar a Fonte de Recurso"
                             icon="ui-icon-circle-plus"
                             styleClass="padrao mtop10"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             update="frs gridFonte"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarFonteDeRecurso(cc.attrs.formulaVO)}"/>

            <p:dataTable id="frs"
                         value="#{cc.attrs.formulaVO.componentesFonteRecurso}"
                         var="fr"
                         styleClass="mtop03"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>FONTES DE RECURSOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx">
                <p:column headerText="Ação" style="width: 5%; text-align: center">
                    <p:commandButton update="frs"
                                     icon="ui-icon-trash"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(fr, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column headerText="Código"
                          filterMatchMode="contains"
                          sortBy="#{fr.fonteDeRecursos.codigo}"
                          filterBy="#{fr.fonteDeRecursos.codigo}">
                    <h:outputText value="#{fr.fonteDeRecursos.codigo}"/>
                </p:column>
                <p:column headerText="Descrição"
                          filterMatchMode="contains"
                          sortBy="#{fr.fonteDeRecursos.descricao}"
                          filterBy="#{fr.fonteDeRecursos.descricao}">
                    <h:outputText value="#{fr.fonteDeRecursos.descricao}"/>
                </p:column>
                <p:column headerText="Coluna" styleClass="alinhamentoCentralizado"
                          sortBy="#{fr.coluna}"
                          filterBy="#{fr.coluna}">
                    <h:outputText value="#{fr.coluna}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="Conta Financeira" id="tabContaFin"
               rendered="#{relatoriosItemDemonstControlador.selecionado.usaContaFinanceira}">
            <h:panelGrid columns="2" id="gridContaFinanceira">
                <fc:outputLabelObrigatorio value="Conta Financeira: "/>
                <p:autoComplete queryDelay="1000" id="completaSubConta"
                                completeMethod="#{relatoriosItemDemonstControlador.completarSubContas}"
                                value="#{cc.attrs.formulaVO.subConta}"
                                var="cf"
                                title="Informe a Conta Financeira"
                                maxResults="10"
                                itemLabel="#{cf}"
                                itemValue="#{cf.id}"
                                converter="#{contaFinanceiraControlador.converterGenerico}"
                                size="70"/>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             title="Clique para adicionar a Conta Financeira."
                             icon="ui-icon-circle-plus"
                             styleClass="padrao mtop10"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             update="contasFinanceiras gridContaFinanceira"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarSubConta(cc.attrs.formulaVO)}"/>

            <p:dataTable id="contasFinanceiras"
                         value="#{cc.attrs.formulaVO.componentesSubConta}"
                         var="cf"
                         styleClass="mtop03"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>CONTAS FINANCEIRAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx">
                <p:column headerText="Ação" style="width: 5%; text-align: center">
                    <p:commandButton update="contasFinanceiras"
                                     icon="ui-icon-trash"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(cf, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column headerText="Código"
                          filterMatchMode="contains"
                          sortBy="#{cf.subConta.codigo}"
                          filterBy="#{cf.subConta.codigo}">
                    <h:outputText value="#{cf.subConta.codigo}"/>
                </p:column>
                <p:column headerText="Descrição"
                          filterMatchMode="contains"
                          sortBy="#{cf.subConta.descricao}"
                          filterBy="#{cf.subConta.descricao}">
                    <h:outputText value="#{cf.subConta.descricao}"/>
                </p:column>
                <p:column headerText="Coluna" styleClass="alinhamentoCentralizado"
                          sortBy="#{cf.coluna}"
                          filterBy="#{cf.coluna}">
                    <h:outputText value="#{cf.coluna}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="Programa" id="tabProgramas"
               rendered="#{relatoriosItemDemonstControlador.selecionado.usaPrograma}">
            <h:panelGrid columns="2">
                <fc:outputLabelObrigatorio value="Programa: "/>
                <p:autoComplete queryDelay="1000" id="completaProg"
                                completeMethod="#{relatoriosItemDemonstControlador.completaPrograma}"
                                value="#{cc.attrs.formulaVO.programaPPA}"
                                var="pro"
                                title="Informe o Programa"
                                maxResults="10"
                                itemLabel="#{pro}"
                                itemValue="#{pro.id}"
                                converter="#{programaPPAControlador.converterGenerico}"
                                size="70"/>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             title="Clique para Adicionar o Programa"
                             icon="ui-icon-circle-plus"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             styleClass="pardao mtop10"
                             update="tabProgramas"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarPrograma(cc.attrs.formulaVO)}"/>

            <p:dataTable id="progs"
                         value="#{cc.attrs.formulaVO.componentesPrograma}"
                         var="prog"
                         styleClass="mtop03"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>PROGRAMAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx">
                <p:column headerText="Ação" style="width: 5%; text-align: center">
                    <p:commandButton update="progs"
                                     icon="ui-icon-trash"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(prog, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column headerText="Código"
                          filterMatchMode="contains"
                          sortBy="#{prog.programaPPA.codigo}"
                          filterBy="#{prog.programaPPA.codigo}">
                    <h:outputText value="#{prog.programaPPA.codigo}"/>
                </p:column>
                <p:column headerText="Denominação"
                          filterMatchMode="contains"
                          sortBy="#{prog.programaPPA.denominacao}"
                          filterBy="#{prog.programaPPA.denominacao}">
                    <h:outputText value="#{prog.programaPPA.denominacao}"/>
                </p:column>
                <p:column headerText="Coluna" styleClass="alinhamentoCentralizado"
                          sortBy="#{prog.coluna}"
                          filterBy="#{prog.coluna}">
                    <h:outputText value="#{prog.coluna}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="Tipo de Despesa" id="tabTipoDespesa"
               rendered="#{relatoriosItemDemonstControlador.selecionado.usaTipoDespesa}">
            <h:panelGrid columns="2">
                <fc:outputLabelObrigatorio value="Tipo de Despesa: "/>
                <h:selectOneMenu title="Selecione o tipo de despesa."
                                 value="#{cc.attrs.formulaVO.tipoDespesaORC}"
                                 id="tpdespesa">
                    <f:selectItems value="#{relatoriosItemDemonstControlador.tipoDeDespesa}"/>
                </h:selectOneMenu>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             title="Clique para Adicionar o tipo de despesa."
                             icon="ui-icon-circle-plus"
                             styleClass="padrao mtop10"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             update="tps"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarTipoDespesa(cc.attrs.formulaVO)}"/>

            <p:dataTable id="tps"
                         value="#{cc.attrs.formulaVO.componentesTipoDespesa}"
                         var="tp"
                         styleClass="mtop03"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>UNIDADES ORGANIZACIONAIS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx">
                <p:column headerText="Ação" style="width: 5%; text-align: center">
                    <p:commandButton update="tps"
                                     icon="ui-icon-trash"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(tp, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column headerText="Descrição"
                          filterMatchMode="contains"
                          sortBy="#{tp.tipoDespesaORC.descricao}"
                          filterBy="#{tp.tipoDespesaORC.descricao}">
                    <h:outputText value="#{tp.tipoDespesaORC.descricao}"/>
                </p:column>
                <p:column headerText="Coluna" styleClass="alinhamentoCentralizado"
                          sortBy="#{tp.coluna}"
                          filterBy="#{tp.coluna}">
                    <h:outputText value="#{tp.coluna}"/>
                </p:column>
            </p:dataTable>
        </p:tab>

        <p:tab title="Valor Padrão" id="tabValorPadrao"
               rendered="#{relatoriosItemDemonstControlador.selecionado.usaValorPadrao}">
            <h:panelGrid columns="2">
                <h:outputText value="Mês/Previsão: "/>
                <h:selectOneMenu title="Selecione o tipo de despesa."
                                 value="#{cc.attrs.formulaVO.mes}"
                                 id="somMes">
                    <f:selectItems value="#{relatoriosItemDemonstControlador.mesesEPrevisao}"/>
                </h:selectOneMenu>

                <h:outputText value="Valor Padrão (R$): "/>
                <p:inputText title="Informe o Valor Padrão (R$)."
                             value="#{cc.attrs.formulaVO.valorPadrao}"
                             onkeydown="mascara(this, mvalor);"
                             onclick="this.select();"
                             onblur="mascara(this, mvalor);"
                             onfocus="this.select();"
                             converter="moedaConverter"/>
            </h:panelGrid>

            <p:commandButton value="Adicionar"
                             title="Clique para Adicionar o tipo de despesa."
                             icon="ui-icon-circle-plus"
                             styleClass="padrao mtop10"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             update="tableCvp"
                             actionListener="#{relatoriosItemDemonstControlador.adicionarValorPadrao(cc.attrs.formulaVO)}"/>

            <p:dataTable id="tableCvp"
                         value="#{cc.attrs.formulaVO.componentesValorPadrao}"
                         var="cvp"
                         styleClass="mtop03"
                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                         paginator="true"
                         rows="10"
                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>VALORES PADRÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                         emptyMessage="Não foram localizados registros para serem apresentados."
                         rowIndexVar="rowlx">
                <p:column headerText="Ação" style="width: 5%; text-align: center">
                    <p:commandButton update="tableCvp"
                                     icon="ui-icon-trash"
                                     title="Clique para remover este registro."
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                     actionListener="#{relatoriosItemDemonstControlador.removeComponente(cvp, cc.attrs.formulaVO)}"/>
                </p:column>
                <p:column headerText="Mês/Previsão">

                    <h:outputText value="#{cvp.mes ne null ? cvp.mes.descricao : 'Previsão Atualizada'}"/>
                </p:column>
                <p:column headerText="Valor Padrão (R$)" styleClass="alinhamentoDireita">
                    <h:outputText value="#{cvp.valorPadrao}">
                        <f:convertNumber type="currency"/>
                    </h:outputText>
                </p:column>
            </p:dataTable>
        </p:tab>
    </p:tabView>
</cc:implementation>
</html>
