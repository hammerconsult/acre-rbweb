<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:ad="http://java.sun.com/jsf/composite/components/administrativo"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
>

<!-- INTERFACE -->
<cc:interface>
    <cc:attribute name="idRequisicao" required="true"/>
    <cc:attribute name="caminhoId" type="java.lang.String" default=""/>
</cc:interface>

<!-- IMPLEMENTATION -->
<cc:implementation>

    <f:event type="preRenderComponent"
             listener="#{componenteRequisicaoCompraExecucaoControlador.novo(cc.attrs.idRequisicao)}"/>

    <div style="overflow: scroll; max-height: 150px" class="thumbnail">
        <p:dataTable value="#{componenteRequisicaoCompraExecucaoControlador.execucoes}"
                     emptyMessage="Não foram localizados registros para serem apresentados."
                     style="overflow: scroll; max-height: 300px; min-width: 900px"
                     var="exec">
            <p:column headerText="Execução" styleClass="alinhamentoEsquerda">
                <h:outputText value="#{exec.toString()}"
                              styleClass="negrito"/>
            </p:column>
            <p:column headerText="Empenho" styleClass="alinhamentoEsquerda">
                <table class="table table-hover">
                    <ui:repeat value="#{exec.empenhosVO}" var="emp">
                        <tr>
                            <td class="alinhamentoEsquerda">
                                <h:outputText
                                    escape="false"
                                    value="#{emp.toStringEmpenho}"/>
                            </td>
                        </tr>
                    </ui:repeat>
                </table>
            </p:column>
            <p:column headerText="Info" styleClass="alinhamentoCentralizado">
                <p:commandButton icon="ui-icon-info"
                                 styleClass="vinteLarguraVinteAltura botao-transparente"
                                 title="Detalhes da execução da requisção de compra."
                                 onclick="aguarde.show()"
                                 oncomplete="aguarde.hide()"
                                 update=":#{cc.clientId}:formDlgRequisicaoExec"
                                 process="@this"
                                 actionListener="#{componenteRequisicaoCompraExecucaoControlador.selecionarRequisicaoExecucaoVo(exec)}"
                                 tabindex="-1"/>
            </p:column>
        </p:dataTable>
    </div>

    <div id="modalDetalhesRequicaoExec"
         class="modal hide fade"
         tabindex="-1"
         role="dialog"
         style="width: 80%; left: 30%"
         aria-labelledby="modalDetalhesRequicaoExec"
         aria-hidden="true">

        <p:outputPanel id="formDlgRequisicaoExec">
            <ad:dlg-detalhes-requisicao-execucao
                requisicaoExecucaoVO="#{componenteRequisicaoCompraExecucaoControlador.requisicaoCompraExecucaoVO}"/>
        </p:outputPanel>
    </div>


</cc:implementation>
</html>
