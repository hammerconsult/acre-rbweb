<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:ad="http://java.sun.com/jsf/composite/components/administrativo"
      xmlns:co="http://java.sun.com/jsf/composite/components/contabil"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
>

<!-- INTERFACE -->
<cc:interface>
    <cc:attribute name="controlador" required="true"
                  type="br.com.webpublico.controle.AlteracaoContratualControlador"/>
</cc:interface>

<cc:implementation>
    <script type="text/javascript">
        function scrollPanel() {
            window.scrollTo(0, 500);
        }
    </script>

    <h:form id="Formulario">
        <p:remoteCommand name="limparDadosContrato"
                         process="@this"
                         actionListener="#{cc.attrs.controlador.definirAlteracaoContratualComoNull()}"
                         update=":#{cc.clientId}:Formulario:tab-view-geral panelVerContrato"/>

        <p:remoteCommand name="limparDadosAta"
                         process="@this"
                         actionListener="#{cc.attrs.controlador.definirAlteracaoContratualComoNull()}"
                         update=":#{cc.clientId}:Formulario:tab-view-geral panelVerAta"/>

        <fc:cabecalhoPretty controlador="#{cc.attrs.controlador}"
                            origem="#{cc.attrs.controlador.caminhoPadrao}/#{cc.attrs.controlador.caminhoListar}"/>

        <p:panel header="#{cc.attrs.controlador.selecionado.tituloTela}">

            <h:panelGrid columns="4" id="gridGeral" styleClass="mtop05">
                <fc:outputLabelObrigatorio value="Contrato: "
                                           rendered="#{cc.attrs.controlador.selecionado.tipoCadastro.isContrato()}"/>
                <h:panelGroup
                    rendered="#{cc.attrs.controlador.selecionado.tipoCadastro.isContrato()}">
                    <p:autoComplete queryDelay="1000"
                                    id="contrato"
                                    size="70"
                                    title="Informe um contrato"
                                    value="#{cc.attrs.controlador.contrato}"
                                    completeMethod="#{cc.attrs.controlador.completarContratos}"
                                    converter="#{contratoAdmControlador.converterGenerico}"
                                    disabled="#{cc.attrs.controlador.hasMovimentos()}"
                                    maxResults="50"
                                    dropdown="true"
                                    panelStyle="max-height: 250px;max-width: 800px"
                                    onkeyup="if(keyUpCampoVazio(this)){limparDadosContrato();}"
                                    var="cont"
                                    itemValue="#{cont.id}"
                                    itemLabel="#{cont}">
                        <p:ajax event="itemSelect"
                                onstart="aguarde.show()"
                                oncomplete="aguarde.hide()"
                                listener="#{cc.attrs.controlador.recuperarDadosContrato}"
                                update=":#{cc.clientId}:Formulario:panelVerContrato :#{cc.clientId}:Formulario:tab-view-geral"
                                process="@this"/>
                    </p:autoComplete>

                    <p:outputPanel id="panelVerContrato">
                        <p:commandButton process="@none"
                                         styleClass="mlef05"
                                         id="btnVerContrato"
                                         icon="ui-icon-search"
                                         disabled="#{cc.attrs.controlador.contrato eq null}"
                                         update="@none"
                                         onclick="window.open('#{request.contextPath}/contrato-adm/ver/#{cc.attrs.controlador.contrato.id}/','_blank');"/>
                    </p:outputPanel>

                    <co:botao_informacao descricao="
                                  &lt;b>Busca todos contratos aprovados/deferidos. Filtros: &lt;/b>
                                  &lt;br/&gt; &bull;
                                  Número/Ano do Termo
                                  &lt;br/&gt; &bull;
                                  Número/Ano do Contrato
                                  &lt;br/&gt; &bull;
                                  Nome/Razão Social do Fornecedor
                                  &lt;br/&gt; &bull;
                                  Cpf/Cnpj do Fornecedor"/>
                </h:panelGroup>

                <fc:outputLabelObrigatorio value="Ata Registro de Preço: "
                                           rendered="#{cc.attrs.controlador.selecionado.tipoCadastro.isAta()}"/>
                <h:panelGroup
                    rendered="#{cc.attrs.controlador.selecionado.tipoCadastro.isAta()}">
                    <p:autoComplete queryDelay="1000"
                                    size="70"
                                    title="Informe uma ata registro de preço"
                                    value="#{cc.attrs.controlador.ataRegistroPreco}"
                                    completeMethod="#{cc.attrs.controlador.completarAtaRegistroPreco}"
                                    converter="#{ataRegistroPrecoControlador.converterGenerico}"
                                    disabled="#{cc.attrs.controlador.hasMovimentos()}"
                                    maxResults="50"
                                    dropdown="true"
                                    panelStyle="max-height: 250px;max-width: 800px"
                                    onkeyup="if(keyUpCampoVazio(this)){limparDadosAta();}"
                                    var="cont"
                                    itemValue="#{cont.id}"
                                    itemLabel="#{cont}">
                        <p:ajax event="itemSelect"
                                onstart="aguarde.show()"
                                oncomplete="aguarde.hide()"
                                listener="#{cc.attrs.controlador.recuperarDadosAta()}"
                                update=":#{cc.clientId}:Formulario:panelVerAta :#{cc.clientId}:Formulario:tab-view-geral"
                                process="@this"/>
                    </p:autoComplete>

                    <p:outputPanel id="panelVerAta">
                        <p:commandButton process="@none"
                                         styleClass="mlef05"
                                         id="btnVerAta"
                                         icon="ui-icon-search"
                                         disabled="#{cc.attrs.controlador.ataRegistroPreco eq null}"
                                         update="@none"
                                         onclick="window.open('#{request.contextPath}/ata-registro-preco/ver/#{cc.attrs.controlador.ataRegistroPreco.id}/','_blank');"/>
                    </p:outputPanel>

                    <co:botao_informacao descricao="
                                  &lt;b>Busca todas as atas para usuário gestor de licitação. Filtros: &lt;/b>
                                  &lt;br/&gt; &bull;
                                  Número da Ata
                                  &lt;br/&gt; &bull;
                                  Número da Licitação
                                  &lt;br/&gt; &bull;
                                  Número/Ano da Licitação
                                  &lt;br/&gt; &bull;
                                  Ano da Licitação
                                  &lt;br/&gt; &bull;
                                  Resumo do Objeto"/>
                </h:panelGroup>
            </h:panelGrid>

            <p:tabView id="tab-view-geral" styleClass="mtop10">
                <p:tab title="#{cc.attrs.controlador.selecionado.descricaoTipoTermo}">
                    <p:outputPanel id="panel-alteracao">
                        <h:panelGrid columns="2"
                                     styleClass="mtop10">

                            <h:outputLabel value="Situação:"/>
                            <h:outputText
                                styleClass="negrito"
                                value="#{cc.attrs.controlador.selecionado.situacao.descricao}"/>

                            <h:outputLabel
                                value="Número do #{cc.attrs.controlador.selecionado.descricaoTipoTermo}:"/>
                            <h:outputText
                                styleClass="negrito"
                                value="#{cc.attrs.controlador.selecionado.numero ne null ? cc.attrs.controlador.selecionado.numero : 'Gerado automaticamente ao salvar.' }"/>

                            <h:outputText value="Unidade Administrativa: "/>
                            <h:outputText value="#{cc.attrs.controlador.hierarquiaProcesso} "
                                          styleClass="negrito"/>

                            <h:outputText value="Data de Lançamento:"/>
                            <h:outputText value="#{cc.attrs.controlador.selecionado.dataLancamento}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputText value="Data de Aprovação:"
                                          rendered="#{cc.attrs.controlador.selecionado.dataAprovacao ne null}"/>
                            <p:calendar onkeypress="mascara(this, mdata)"
                                        maxlength="10"
                                        showOn="button"
                                        rendered="#{cc.attrs.controlador.selecionado.dataAprovacao ne null}"
                                        disabled="#{!cc.attrs.controlador.isEmElaboracao()}"
                                        title="Digite a data de aprovação"
                                        value="#{cc.attrs.controlador.selecionado.dataAprovacao}"
                                        locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                        size="12">
                                <p:ajax event="blur" process="@this"/>
                                <p:ajax event="dateSelect" process="@this"/>
                            </p:calendar>

                            <h:outputText value="Data de Deferimento: "
                                          rendered="#{cc.attrs.controlador.selecionado.dataDeferimento ne null}"/>
                            <h:outputText value="#{cc.attrs.controlador.selecionado.dataDeferimento}"
                                          styleClass="negrito"
                                          rendered="#{cc.attrs.controlador.selecionado.dataDeferimento ne null}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputLabel value="Data de Assinatura: "
                                           rendered="#{cc.attrs.controlador.selecionado.dataAssinatura ne null}"/>
                            <h:outputText value="#{cc.attrs.controlador.selecionado.dataAssinatura}"
                                          styleClass="negrito"
                                          rendered="#{cc.attrs.controlador.selecionado.dataAssinatura ne null}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputText value="Tipo do Termo: "/>
                            <h:outputText
                                id="tipo-termo"
                                styleClass="negrito"
                                value="#{cc.attrs.controlador.selecionado.tipoTermo.descricao}"/>

                            <fc:outputLabelObrigatorio value="Número/Ano do Termo: "/>
                            <h:panelGroup columns="4">
                                <p:inputText value="#{cc.attrs.controlador.selecionado.numeroTermo}"
                                             size="10"
                                             disabled="#{!cc.attrs.controlador.isEmElaboracao()}"
                                             onkeypress="somenteNumeros(event, this, false, false, true)"
                                             maxlength="8"
                                             style="text-align: right">
                                    <p:ajax event="blur" process="@this" update="@this"/>
                                </p:inputText>

                                <h:outputText value=" / " styleClass="mlef05 mrig05"/>
                                <p:inputMask mask="9999" id="exercicio"
                                             value="#{cc.attrs.controlador.selecionado.exercicio}"
                                             converter="#{exercicioControlador.converterExercicio}"
                                             disabled="#{!cc.attrs.controlador.isEmElaboracao()}"
                                             size="8">
                                    <p:ajax event="blur" process="@this" update="@this"/>
                                </p:inputMask>
                            </h:panelGroup>

                            <fc:outputLabelObrigatorio value="Justificativa:"/>
                            <h:panelGrid columns="2"
                                         cellpadding="0"
                                         cellspacing="0">
                                <p:inputTextarea title="Digite a justificativa"
                                                 value="#{cc.attrs.controlador.selecionado.justificativa}"
                                                 disabled="#{!cc.attrs.controlador.isEmElaboracao()}"
                                                 id="justificativa"
                                                 cols="70"
                                                 maxlength="255"
                                                 autoResize="true"
                                                 counterTemplate="{0} Caracteres Restantes."
                                                 counter="counter-justificativa">
                                    <p:ajax update="@this" process="@this"/>
                                </p:inputTextarea>
                                <h:outputText id="counter-justificativa"
                                              style="color: #497692"
                                              styleClass="mlef05"/>
                            </h:panelGrid>
                        </h:panelGrid>

                        <p:commandButton value="Novo Movimento"
                                         id="btn-novo-mov"
                                         styleClass="padrao mtop10"
                                         title="Clique para adicionar um novo movimento."
                                         icon="ui-icon-circle-plus"
                                         style="width: 160px"
                                         onclick="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         disabled="#{!cc.attrs.controlador.isEmElaboracao()
                                                            or cc.attrs.controlador.movimentoAlteracaoContratual ne null}"
                                         actionListener="#{cc.attrs.controlador.novoMovimento()}"
                                         process="@this :#{cc.clientId}:Formulario:tab-view-geral:panel-alteracao"
                                         update=":#{cc.clientId}:Formulario:tab-view-geral:panel-movimentos
                                                 :#{cc.clientId}:Formulario:tab-view-geral:panel-alteracao"/>

                        <co:botao_informacao
                            styleOverlayPanel="max-width: 800px"
                            appendToBody="false"
                            styleClass="mlef05 mtop10"
                            descricao="#{cc.attrs.controlador.textoAjudaOperacao}"/>
                    </p:outputPanel>

                    <div class="thumbnail" style="margin-top: 10px;">
                        <div class="alert alert-info" align="center" style="padding: 4px">
                            <strong>MOVIMENTOS</strong>
                        </div>
                        <p:outputPanel id="panel-movimentos">
                            <h:panelGrid columns="2" id="grid-mov"
                                         rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual ne null}">
                                <fc:outputLabelObrigatorio value="Operação: "/>
                                <h:panelGrid columns="3">
                                    <h:selectOneMenu title="Selecione a operação do movimento."
                                                     disabled="#{!cc.attrs.controlador.isEmElaboracao()}"
                                                     value="#{cc.attrs.controlador.movimentoAlteracaoContratual.operacao}">
                                        <f:selectItems value="#{cc.attrs.controlador.operacoes}"/>
                                        <p:ajax event="valueChange"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                update=":#{cc.clientId}:Formulario:tab-view-geral:grid-mov :#{cc.clientId}:Formulario:tab-view-geral:tipo-termo
                                                        :#{cc.clientId}:Formulario:tab-view-geral:panel-movimentos"
                                                listener="#{cc.attrs.controlador.listenerOperacaoMovimento()}"
                                                process="@this :#{cc.clientId}:Formulario:tab-view-geral:grid-mov"/>
                                    </h:selectOneMenu>

                                    <p:outputPanel
                                        rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.operacao ne null}">
                                        <div
                                            style="border-radius: 3px"
                                            class="ui-message-info">
                                            <i class="ui-message-info-icon mrig05"/>
                                            #{cc.attrs.controlador.geTextoInformativo()}
                                        </div>
                                    </p:outputPanel>
                                </h:panelGrid>

                                <fc:outputLabelObrigatorio value="Finalidade: "/>
                                <h:selectOneMenu title="Selecione o finalidade"
                                                 id="finalidade"
                                                 value="#{cc.attrs.controlador.movimentoAlteracaoContratual.finalidade}">
                                    <f:selectItems value="#{cc.attrs.controlador.finalidades}"/>
                                    <p:ajax event="change"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            listener="#{cc.attrs.controlador.buscarMovimentosOrigemSupressao()}"
                                            process="@this :#{cc.clientId}:Formulario:tab-view-geral:grid-mov"
                                            update=":#{cc.clientId}:Formulario:tab-view-geral:panel-movimentos"/>
                                </h:selectOneMenu>

                                <h:outputText value="Origem da Supressão: "
                                              rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isMovimentoOrigemSupressao()}"/>
                                <p:dataTable emptyMessage="Não foram localizados registros para serem apresentados"
                                             value="#{cc.attrs.controlador.movimentosItemOrigemSupressao}"
                                             rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isMovimentoOrigemSupressao()}"
                                             selection="#{cc.attrs.controlador.movimentoAlteracaoContratual.movimentoOrigemExecucaoContratoVO}"
                                             var="movOrig"
                                             rowKey="#{movOrig}">
                                    <p:column selectionMode="single" style="width:35px;"/>
                                    <p:column headerText="Origem" style="text-align: left;">
                                        <h:outputText value="#{movOrig.origem.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Operação" style="text-align: left;">
                                        <h:outputText value="#{movOrig.operacao.descricao}"/>
                                    </p:column>
                                    <p:column headerText="SubTipo" style="text-align: left;">
                                        <h:outputText value="#{movOrig.subTipo.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Movimento" style="text-align: left;">
                                        <h:outputText value="#{movOrig.descricaoMovimento}"/>
                                    </p:column>
                                    <p:column headerText="Saldo (R$)" style="text-align: left;">
                                        <h:outputText value="#{movOrig.saldo}">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                </p:dataTable>

                                <h:outputText
                                    value="Valor Atual #{cc.attrs.controlador.selecionado.tipoCadastro.descricaoCurta}: "
                                    rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isOperacoesValor()}"/>
                                <h:outputText
                                    value="#{cc.attrs.controlador.valorAtualProcesso}"
                                    styleClass="negrito"
                                    converter="moneyConverter"
                                    rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isOperacoesValor()}"/>

                                <h:outputText value="Saldo Atual #{cc.attrs.controlador.selecionado.tipoCadastro.descricaoCurta}: "
                                              rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isOperacoesValor()}"/>
                                <h:outputText
                                    value="#{cc.attrs.controlador.saldoAtualProcesso}"
                                    styleClass="negrito"
                                    converter="moneyConverter"
                                    rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isOperacoesValor()}"/>

                                <h:outputLabel value="Índice Aplicado:"
                                               rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.operacao.isRedimensionamentoObjeto()}"/>
                                <p:inputText
                                    value="#{cc.attrs.controlador.movimentoAlteracaoContratual.indice}"
                                    rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.operacao.isRedimensionamentoObjeto()}"/>

                                <h:outputText value="Percentual:"
                                              rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.operacao.isRedimensionamentoObjeto()}"/>
                                <h:outputText
                                    id="percentual"
                                    converter="percentualConverter"
                                    value="#{cc.attrs.controlador.movimentoAlteracaoContratual.percentual}"
                                    rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.operacao.isRedimensionamentoObjeto()}"
                                    styleClass="negrito"/>

                                <fc:outputLabelObrigatorio value="Despesa Orçamentária:"
                                                           rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.operacao.isRedimensionamentoObjeto()}"/>
                                <h:panelGroup
                                    rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.operacao.isRedimensionamentoObjeto()}">
                                    <h:outputText
                                        value="#{cc.attrs.controlador.movimentoAlteracaoContratual.fonteDespesaORC}"
                                        styleClass="negrito"/>

                                    <p:commandButton
                                        process="@this :#{cc.clientId}:Formulario:tab-view-geral:panel-alteracao"
                                        styleClass="mlef05 icone-25"
                                        onclick="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        title="Clique para adicionar fonte de despesa a reserva da execução."
                                        update=":#{cc.clientId}:formDotacao"
                                        actionListener="#{cc.attrs.controlador.novaDespesaOrcamentaria()}"
                                        icon="#{cc.attrs.controlador.movimentoAlteracaoContratual.fonteDespesaORC eq null ? 'ui-icon-circle-plus' :'ui-icon-pencil'}"/>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio value="Objeto:"
                                                           rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.operacao.isRedimensionamentoObjeto() or cc.attrs.controlador.isApostilamentoOperacaoOutro()}"/>
                                <h:panelGrid columns="2"
                                             rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.operacao.isRedimensionamentoObjeto() or cc.attrs.controlador.isApostilamentoOperacaoOutro()}"
                                             cellpadding="0"
                                             cellspacing="0">
                                    <p:inputTextarea title="Digite o objeto."
                                                     value="#{cc.attrs.controlador.movimentoAlteracaoContratual.objeto}"
                                                     id="objeto"
                                                     cols="70"
                                                     maxlength="255"
                                                     autoResize="true"
                                                     counterTemplate="{0} Caracteres Restantes."
                                                     counter="counter-objeto-do-movimento"/>
                                    <h:outputText id="counter-objeto-do-movimento"
                                                  style="color: #497692"
                                                  styleClass="mlef05"/>
                                </h:panelGrid>

                                <h:outputText value="Valor do Movimento: "
                                              rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isOperacoesValor()}"/>
                                <h:outputText
                                    id="vl-movimento"
                                    rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isOperacoesValor()}"
                                    style="font-size: 14px"
                                    styleClass="negrito label label-default"
                                    value="#{cc.attrs.controlador.movimentoAlteracaoContratual.valor}"
                                    converter="moneyConverter"/>

                                <fc:outputLabelObrigatorio value="Fornecedor: "
                                                           rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isTransferenciaFornecedor()}"/>
                                <p:autoComplete queryDelay="1000"
                                                id="fornecedor"
                                                title="Digite o fornecedor deseja pesquisar."
                                                value="#{cc.attrs.controlador.movimentoAlteracaoContratual.fornecedor}"
                                                completeMethod="#{cc.attrs.controlador.completarFornecedor}"
                                                converter="#{pessoaContabilControlador.converterGenerico}"
                                                rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isTransferenciaFornecedor()}"
                                                var="forn"
                                                dropdown="true"
                                                panelStyle="max-height: 250px;max-width: 800px"
                                                maxResults="50"
                                                itemValue="#{forn.id}"
                                                itemLabel="#{forn}"
                                                size="70">
                                    <p:ajax event="itemSelect"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            listener="#{cc.attrs.controlador.listenerFornecedorProcesso()}"
                                            update="@this"
                                            process="@this"/>
                                </p:autoComplete>

                                <fc:outputLabelObrigatorio value="Responsável pelo Fornecedor: "
                                                           rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isTransferenciaFornecedor()}"/>
                                <p:autoComplete queryDelay="1000"
                                                title="Digite o responsável pela empresa que deseja pesquisar."
                                                value="#{cc.attrs.controlador.movimentoAlteracaoContratual.responsavelFornecedor}"
                                                completeMethod="#{cc.attrs.controlador.completarResponsavelFornecedor}"
                                                converter="#{pessoaContabilControlador.converterGenerico}"
                                                rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isTransferenciaFornecedor()}"
                                                var="respFor"
                                                dropdown="true"
                                                panelStyle="max-height: 250px;max-width: 800px"
                                                maxResults="50"
                                                itemValue="#{respFor.id}"
                                                itemLabel="#{respFor}"
                                                size="70"/>

                                <h:outputText value="Unidade Vigente Contrato: "
                                              rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isTransferenciaUnidade()}"/>
                                <h:outputText
                                    value="#{cc.attrs.controlador.contrato.unidadeAdministrativa}"
                                    styleClass="negrito"
                                    rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isTransferenciaUnidade()}"/>

                                <fc:outputLabelObrigatorio value="Unidade Administrativa: "
                                                           rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isTransferenciaUnidade()}"/>
                                <p:autoComplete queryDelay="1000" title="Digite a unidade administrativa."
                                                value="#{cc.attrs.controlador.hierarquiaTransferenciaUnidade}"
                                                rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isTransferenciaUnidade()}"
                                                completeMethod="#{cc.attrs.controlador.completarHierarquiasAdministrativa}"
                                                converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                                var="hoAdm"
                                                dropdown="true"
                                                panelStyle="max-width: 800px; max-height: 250px"
                                                itemValue="#{hoAdm.id}"
                                                itemLabel="#{hoAdm}"
                                                id="hierarquiaAdm"
                                                maxResults="50"
                                                size="70">
                                    <p:ajax event="itemSelect"
                                            process="@this"/>
                                </p:autoComplete>

                                <fc:outputLabelObrigatorio value="Reservas de Dotação: "
                                                           rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isTransferenciaDotacao()}"/>
                                <p:dataTable emptyMessage="Não foram localizados registros para serem apresentados"
                                             value="#{cc.attrs.controlador.dotacoesSolicitacaoCompra}"
                                             rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isTransferenciaDotacao()}"
                                             selectionMode="single"
                                             id="tabela-dotacao-transf"
                                             selection="#{cc.attrs.controlador.dotacaoSolicitacaoCompraSelecionada}"
                                             var="dsc"
                                             rowKey="#{dsc.fonteDespesaORC}">
                                    <p:ajax event="rowSelect"
                                            listener="#{cc.attrs.controlador.onRowSelectDotacao}"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            process="@this"
                                            update=":#{cc.clientId}:Formulario:tab-view-geral:grid-mov"/>
                                    <p:column headerText="Dotação" style="text-align: left;">
                                        <h:outputText
                                            value="#{dsc.fonteDespesaORC}"/>
                                    </p:column>
                                    <p:column headerText="Valor Reservado (R$)" style="text-align: right">
                                        <h:outputText value="#{dsc.valorReservado}">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Valor Executado (R$)" style="text-align: right">
                                        <h:outputText value="#{dsc.valorExecutado}">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Saldo Disponível (R$)" style="text-align: right">
                                        <h:outputText value="#{dsc.saldo}">
                                            <f:convertNumber pattern="#,##0.00"/>
                                        </h:outputText>
                                    </p:column>
                                </p:dataTable>

                                <fc:outputLabelObrigatorio value="Dotação à Transferir: "
                                                           rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"/>
                                <co:consultar-despesa-orcamentaria-na-tela
                                    showBorda="true"
                                    tiposObjetoCompra="#{cc.attrs.controlador.getTiposObjetoCompraDotacao(cc.attrs.controlador.dotacaoSolicitacaoCompraSelecionada.tipoObjetoCompra)}"
                                    subTipoObjetoCompra="#{cc.attrs.controlador.contrato.objetoAdequado.subTipoObjetoCompra}"
                                    rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"
                                    value="#{cc.attrs.controlador.despesaORC}"
                                    mostrarArvoreExpandida="true"
                                    styleElementoDespesa="margin-right: 65px"
                                    update=":#{cc.clientId}:Formulario:tab-view-geral:fonte-transf :#{cc.clientId}:Formulario:tab-view-geral:saldo-fonte-transferir"
                                    actionListener="#{cc.attrs.controlador.limparCamposDespesa()}"
                                    unidadeOrcamentaria="#{cc.attrs.controlador.unidadeOrcamentariaDespesaOrc}"
                                    unidadeAdministrativa="#{cc.attrs.controlador.contrato.unidadeAdministrativa.subordinada}"/>

                                <fc:outputLabelObrigatorio value="Conta de Destinação de Recurso: "
                                                           rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"/>
                                <p:outputPanel id="fonte-transf"
                                               rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}">
                                    <h:selectOneMenu
                                        value="#{cc.attrs.controlador.movimentoAlteracaoContratual.fonteDespesaORC}"
                                        converter="#{cc.attrs.controlador.converterFonteDespesaORC}">
                                        <f:selectItems
                                            value="#{cc.attrs.controlador.fontesDespesaOrcamentaria}"
                                            var="fo"
                                            itemValue="#{fo.id}"
                                            itemLabel="#{fo.provisaoPPAFonte.destinacaoDeRecursos}"/>
                                        <p:ajax event="change"
                                                process="@this"
                                                update="@this :#{cc.clientId}:Formulario:tab-view-geral:saldo-fonte-transferir"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                listener="#{cc.attrs.controlador.buscarSaldoFonteDespesaORC()}"/>
                                    </h:selectOneMenu>
                                </p:outputPanel>

                                <h:outputText value="Saldo Fonte de Despesa: "
                                              rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"/>
                                <p:outputPanel id="saldo-fonte-transferir">
                                    <h:outputText
                                        rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"
                                        value="#{cc.attrs.controlador.saldoFonteDespesaORC}"
                                        converter="moneyConverter"
                                        styleClass="negrito"/>
                                </p:outputPanel>

                                <h:outputText value="Valor Reservado (R$) "
                                              rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"/>
                                <h:outputText
                                    styleClass="negrito"
                                    rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"
                                    value="#{cc.attrs.controlador.dotacaoSolicitacaoCompraSelecionada.valorReservado}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>

                                <h:outputText value="Valor Executado (R$) "
                                              rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"/>
                                <h:outputText
                                    styleClass="negrito"
                                    rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"
                                    value="#{cc.attrs.controlador.dotacaoSolicitacaoCompraSelecionada.valorExecutado}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>

                                <h:outputText value="Saldo à Transferir (R$) "
                                              rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"/>
                                <h:outputText
                                    styleClass="negrito"
                                    rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"
                                    value="#{cc.attrs.controlador.dotacaoSolicitacaoCompraSelecionada.saldo}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>

                                <h:outputText value="Valor da Transferência (R$) "
                                              rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"/>
                                <p:outputPanel id="vl-transf-dotacao">
                                    <p:inputText
                                        value="#{cc.attrs.controlador.movimentoAlteracaoContratual.valor}"
                                        size="20"
                                        onfocus="this.select()"
                                        onclick="this.select()"
                                        rendered="#{cc.attrs.controlador.hasDotacaoSolicitacaoCompraSelecionada()}"
                                        onkeypress="mascara(this, mvalor)"
                                        style="text-align: right">
                                        <p:ajax event="blur"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                process="@this"
                                                update="vl-transf-dotacao :#{cc.clientId}:Formulario:tab-view-geral:tabela-dotacao-transf"
                                                listener="#{cc.attrs.controlador.validarSaldoDisponivelTransferenciaDotacao()}"/>
                                        <f:convertNumber pattern="#,##0.00"/>
                                    </p:inputText>
                                </p:outputPanel>


                            </h:panelGrid>

                            <table>
                                <tr style="vertical-align: top">
                                    <td>
                                        <p:fieldset
                                            legend="Prazo de Vigência"
                                            rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual ne null
                                               and cc.attrs.controlador.movimentoAlteracaoContratual.isOperacoesPrazo()}">
                                            <h:panelGrid columns="2">

                                                <h:outputText
                                                    value="Término Vigência Atual do(a) #{cc.attrs.controlador.selecionado.tipoCadastro.descricaoCurta}:"/>
                                                <h:outputText
                                                    styleClass="label label-default"
                                                    style="font-weight: normal; font-size: 14px"
                                                    value="#{cc.attrs.controlador.selecionado.terminoVigenciaAtual}">
                                                    <f:convertDateTime type="date"/>
                                                </h:outputText>

                                                <fc:outputLabelObrigatorio value="Início de Vigência:"/>
                                                <p:calendar onkeypress="mascara(this, mdata)"
                                                            maxlength="10"
                                                            style="text-align: right"
                                                            readonly="true"
                                                            autocomplete="off"
                                                            title="Informe o início de vigência."
                                                            value="#{cc.attrs.controlador.movimentoAlteracaoContratual.inicioVigencia}"
                                                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                            showOn="button"
                                                            size="15"/>

                                                <fc:outputLabelObrigatorio value="Término de Vigência: "/>
                                                <p:calendar onkeypress="mascara(this, mdata)"
                                                            maxlength="10"
                                                            style="text-align: right"
                                                            autocomplete="off"
                                                            title="Informe o término de vigência."
                                                            value="#{cc.attrs.controlador.movimentoAlteracaoContratual.terminoVigencia}"
                                                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                            showOn="button"
                                                            size="15"/>
                                            </h:panelGrid>
                                        </p:fieldset>
                                    </td>

                                    <td>
                                        <p:fieldset
                                            styleClass="mlef50"
                                            legend="Prazo de Execução"
                                            rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual ne null
                                                        and cc.attrs.controlador.movimentoAlteracaoContratual.isOperacoesPrazo()
                                                        and cc.attrs.controlador.selecionado.tipoCadastro.isContrato()}">

                                            <h:panelGrid columns="2">
                                                <h:outputText value="Término Execução Atual do Contrato:"/>
                                                <h:outputText
                                                    styleClass="label label-default"
                                                    style="font-weight: normal; font-size: 14px"
                                                    value="#{cc.attrs.controlador.contrato.terminoExecucaoAtual}">
                                                    <f:convertDateTime type="date"/>
                                                </h:outputText>

                                                <fc:outputLabelObrigatorio value="Início de Execução:"/>
                                                <p:calendar onkeypress="mascara(this, mdata)"
                                                            maxlength="10"
                                                            readonly="true"
                                                            style="text-align: right"
                                                            autocomplete="off"
                                                            title="Informe a data de início de execução."
                                                            value="#{cc.attrs.controlador.movimentoAlteracaoContratual.inicioExecucao}"
                                                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                            showOn="button"
                                                            size="15"/>

                                                <fc:outputLabelObrigatorio value="Término de Execução:"/>
                                                <p:calendar onkeypress="mascara(this, mdata)"
                                                            maxlength="10"
                                                            style="text-align: right"
                                                            autocomplete="off"
                                                            title="Informe a data de témino de execução."
                                                            value="#{cc.attrs.controlador.movimentoAlteracaoContratual.terminoExecucao}"
                                                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                            showOn="button"
                                                            size="15"/>
                                            </h:panelGrid>
                                        </p:fieldset>
                                    </td>
                                </tr>
                            </table>

                            <p:dataTable paginator="true"
                                         id="tabela-itens-mov"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         paginatorPosition="bottom"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual.isOperacoesValor()}"
                                         value="#{cc.attrs.controlador.movimentoAlteracaoContratual.itens}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Itens&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="item">
                                <f:facet name="header">
                                    ITENS DO MOVIMENTO
                                </f:facet>
                                <p:columnGroup type="header">
                                    <p:row>
                                        <p:column styleClass="alinhamentoEsquerda"
                                                  headerText="Item" rowspan="2"/>
                                        <p:column styleClass="alinhamentoEsquerda"
                                                  headerText="Unid. Med." rowspan="2"/>
                                        <p:column
                                            styleClass="alinhamentoCentralizado negrito"
                                            headerText="Original" colspan="3"/>
                                        <p:column
                                            styleClass="alinhamentoCentralizado negrito"
                                            headerText="Movimentação"
                                            colspan="3"/>
                                    </p:row>
                                    <p:row>
                                        <p:column styleClass="alinhamentoDireita"
                                                  headerText="Qtde" colspan="1"/>
                                        <p:column styleClass="alinhamentoDireita"
                                                  headerText="Valor Unit. (R$)" colspan="1"/>
                                        <p:column styleClass="alinhamentoDireita"
                                                  headerText="Valor Total (R$)" colspan="1"/>
                                        <p:column styleClass="alinhamentoDireita"
                                                  headerText="#{cc.attrs.controlador.movimentoAlteracaoContratual.labelColunaQuantidadeAjuste()}"
                                                  colspan="1"/>
                                        <p:column styleClass="alinhamentoDireita"
                                                  headerText="#{cc.attrs.controlador.movimentoAlteracaoContratual.labelColunaValorUnitarioAjuste()}"
                                                  colspan="1"/>
                                        <p:column styleClass="alinhamentoDireita"
                                                  headerText="Valor Total (R$)" colspan="1"/>
                                    </p:row>
                                </p:columnGroup>
                                <p:column styleClass="alinhamentoEsquerda"
                                          headerText="Item">
                                    <h:outputText
                                        value="#{item.numeroDescricao}"/>
                                </p:column>
                                <p:column styleClass="alinhamentoEsquerda"
                                          headerText="Item">
                                    <h:outputText
                                        value="#{item.unidadeMedida.sigla}"/>
                                </p:column>
                                <p:column styleClass="alinhamentoDireita">
                                    <h:outputText
                                        value="#{item.quantidadeProcesso}">
                                        <f:convertNumber pattern="#,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column
                                    styleClass="alinhamentoDireita">
                                    <h:outputText
                                        value="#{item.valorUnitarioProcesso}">
                                        <f:convertNumber pattern="#,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column styleClass="alinhamentoDireita">
                                    <h:outputText value="#{item.valorTotalProcesso}">
                                        <f:convertNumber type="currency"
                                                         pattern="#,##0.00"/>
                                    </h:outputText>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText
                                                value="#{cc.attrs.controlador.movimentoAlteracaoContratual.valorTotalItensOriginal}"
                                                styleClass="negrito">
                                                <f:convertNumber type="currency"
                                                                 pattern="#,##0.00"/>
                                            </h:outputText>
                                        </div>
                                    </f:facet>
                                </p:column>
                                <p:column styleClass="alinhamentoDireita"
                                          headerText="#{cc.attrs.controlador.movimentoAlteracaoContratual.labelColunaQuantidadeAjuste()}">
                                    <fc:input-mascara-unidade-medida
                                        size="15"
                                        listener="#{cc.attrs.controlador.atribuirValorUnitarioAndCalcularValorTotalItem(item, cc.attrs.controlador.movimentoAlteracaoContratual)}"
                                        update=":#{cc.clientId}:Formulario:tab-view-geral:tabela-itens-mov:vl-total-item
                                                :#{cc.clientId}:Formulario:tab-view-geral:tabela-itens-mov:vl-unit-item
                                                :#{cc.clientId}:Formulario:tab-view-geral:percentual
                                                :#{cc.clientId}:Formulario:tab-view-geral:vl-movimento"
                                        tipoMascara="#{item.mascaraQuantidade}"
                                        value="#{item.quantidade}"/>
                                </p:column>
                                <p:column styleClass="alinhamentoDireita"
                                          headerText="#{cc.attrs.controlador.movimentoAlteracaoContratual.labelColunaValorUnitarioAjuste()}">
                                    <p:outputPanel id="vl-unit-item">
                                        <fc:input-mascara-unidade-medida
                                            size="15"
                                            listener="#{cc.attrs.controlador.calcularValorTotalMovimento(item, cc.attrs.controlador.movimentoAlteracaoContratual)}"
                                            update=":#{cc.clientId}:Formulario:tab-view-geral:tabela-itens-mov:vl-total-item
                                                    :#{cc.clientId}:Formulario:tab-view-geral:percentual :#{cc.clientId}:Formulario:tab-view-geral:vl-movimento"
                                            tipoMascara="#{item.mascaraValorUnitario}"
                                            value="#{item.valorUnitario}"/>
                                    </p:outputPanel>
                                </p:column>
                                <p:column styleClass="alinhamentoDireita"
                                          headerText="Valor Total">
                                    <p:outputPanel id="vl-total-item">
                                        <h:outputText value="#{item.valorTotal}">
                                            <f:convertNumber type="currency"
                                                             pattern="#,##0.00"/>
                                        </h:outputText>
                                    </p:outputPanel>
                                </p:column>
                            </p:dataTable>

                            <p:commandButton value="Adicionar"
                                             styleClass="prioritario mtop10 mrig05"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             process="@this :#{cc.clientId}:Formulario:tab-view-geral:panel-alteracao :#{cc.clientId}:Formulario:tab-view-geral:panel-movimentos"
                                             title="Clique para confirmar este movimento."
                                             rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual ne null}"
                                             actionListener="#{cc.attrs.controlador.adicionarMovimento(cc.attrs.id)}"
                                             icon="ui-icon-check"/>

                            <p:commandButton value="Cancelar"
                                             styleClass="padrao mtop10"
                                             process="@this"
                                             onclick="aguarde.show();"
                                             oncomplete="aguarde.hide()"
                                             title="Clique para cancelar este movimento."
                                             rendered="#{cc.attrs.controlador.movimentoAlteracaoContratual ne null}"
                                             actionListener="#{cc.attrs.controlador.cancelarMovimento}"
                                             update=":#{cc.clientId}:Formulario:tab-view-geral:panel-movimentos :#{cc.clientId}:Formulario:tab-view-geral:panel-alteracao"
                                             icon="ui-icon-cancel"/>

                            <table class="table table-condensed">
                                <tr>
                                    <th class="alinhamentoCentralizado" style="width: 10%">Ações</th>
                                    <th class="alinhamentoEsquerda">Operação</th>
                                    <th class="alinhamentoEsquerda">Finalidade</th>
                                </tr>
                                <ui:repeat value="#{cc.attrs.controlador.selecionado.movimentos}"
                                           varStatus="indexMov"
                                           var="mov">

                                    <tr class="fundo-amarelo-claro">
                                        <td class="alinhamentoCentralizado" style="width: 10%">
                                            <p:commandButton
                                                icon="ui-icon-search"
                                                process="@this"
                                                update="@none"
                                                disabled="#{cc.attrs.controlador.movimentoAlteracaoContratual != null}"
                                                styleClass="icone-25"
                                                title="Clique para ver os detalhes do movimento."
                                                onclick="$('#div-detalhes#{indexMov.index}').slideToggle('fast');"/>

                                            <p:commandButton icon="ui-icon-pencil"
                                                             title="Clique para alterar este registro."
                                                             onclick="aguarde.show();scrollPanel()"
                                                             oncomplete="aguarde.hide();"
                                                             disabled="#{cc.attrs.controlador.movimentoAlteracaoContratual != null
                                                                        or !cc.attrs.controlador.isEmElaboracao()
                                                                        or (mov.operacao.isTransferenciaDotacao() and mov.finalidade.isSupressao())}"
                                                             process="@this :#{cc.clientId}:Formulario:tab-view-geral:panel-movimentos"
                                                             actionListener="#{cc.attrs.controlador.editarMovimento(mov)}"
                                                             update=":#{cc.clientId}:Formulario:tab-view-geral:panel-movimentos"
                                                             styleClass="icone-25 mlef05"/>

                                            <p:commandButton icon="ui-icon-trash"
                                                             process="@this"
                                                             styleClass="icone-25 mlef05"
                                                             onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                             oncomplete="aguarde.hide()"
                                                             disabled="#{cc.attrs.controlador.movimentoAlteracaoContratual != null
                                                                        or !cc.attrs.controlador.isEmElaboracao()}"
                                                             actionListener="#{cc.attrs.controlador.removerMovimento(mov)}"
                                                             title="Clique para remover este registro."
                                                             update=":#{cc.clientId}:Formulario:gridGeral
                                                                     :#{cc.clientId}:Formulario:tab-view-geral:panel-alteracao
                                                                     :#{cc.clientId}:Formulario:tab-view-geral:panel-movimentos"/>
                                        </td>
                                        <td class="alinhamentoEsquerda">
                                            <h:outputText value="#{mov.operacao.descricao}"/>
                                        </td>
                                        <td class="alinhamentoEsquerda">
                                            <h:outputText value="#{mov.finalidade.descricao}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="7">
                                            <div id="div-detalhes#{indexMov.index}" class="borda-azul"
                                                 style="display: none; margin-left: 40px">
                                                <h:panelGrid columns="2"
                                                             rendered="#{mov.isTransferenciaFornecedor()}"
                                                             styleClass="semBorda">
                                                    <h:outputText value="Fornecedor: "/>
                                                    <h:outputText value="#{mov.fornecedor}"
                                                                  styleClass="negrito"/>

                                                    <h:outputText value="Responsável pelo Fornecedor: "/>
                                                    <h:outputText value="#{mov.responsavelFornecedor}"
                                                                  styleClass="negrito"/>
                                                </h:panelGrid>

                                                <h:panelGrid columns="2"
                                                             rendered="#{mov.isTransferenciaUnidade()}"
                                                             styleClass="semBorda">
                                                    <h:outputText value="Unidade Vigente do Contrato: "/>
                                                    <h:outputText
                                                        value="#{cc.attrs.controlador.contrato.unidadeAdministrativa}"
                                                        styleClass="negrito"/>

                                                    <h:outputText value="Unidade da Transferência: "/>
                                                    <fc:codigo-descricao-hierarquia
                                                        unidadeOrganizacional="#{mov.unidadeOrganizacional}"
                                                        tipoHierarquia="ADMINISTRATIVA"
                                                        dataMovimento="#{cc.attrs.controlador.selecionado.dataLancamento}"/>
                                                </h:panelGrid>

                                                <h:panelGrid columns="2"
                                                             rendered="#{mov.isTransferenciaDotacao()}"
                                                             styleClass="semBorda">
                                                    <h:outputText value="Despesa Orçamentária: "/>
                                                    <h:outputText
                                                        value="#{mov.fonteDespesaORC.despesaORC.codigo} / #{mov.fonteDespesaORC.despesaORC.contaDeDespesa} "/>

                                                    <h:outputText value="Fonte Despesa Orçamentária: "/>
                                                    <h:outputText
                                                        value="#{mov.fonteDespesaORC.provisaoPPAFonte.destinacaoDeRecursos}"
                                                        styleClass="negrito"/>

                                                    <h:outputText value="Valor do Movimento: "/>
                                                    <h:outputText
                                                        styleClass="negrito"
                                                        value="#{mov.valor}"
                                                        converter="moneyConverter"/>
                                                </h:panelGrid>

                                                <h:panelGrid columns="2" rendered="#{mov.isOperacoesValor()}"
                                                             styleClass="semBorda">

                                                    <h:outputText value="Índice Aplicado: "
                                                                  rendered="#{mov.operacao.isRedimensionamentoObjeto()}"/>
                                                    <h:outputText
                                                        rendered="#{mov.operacao.isRedimensionamentoObjeto()}"
                                                        styleClass="negrito"
                                                        value="#{mov.indice}"/>

                                                    <h:outputText value="Percentual: "
                                                                  rendered="#{mov.operacao.isRedimensionamentoObjeto()}"/>
                                                    <h:outputText
                                                        rendered="#{mov.operacao.isRedimensionamentoObjeto()}"
                                                        styleClass="negrito"
                                                        value="#{mov.percentual}"
                                                        converter="percentualConverter"/>

                                                    <h:outputText value="Valor/Variação Contrato: "
                                                                  rendered="#{cc.attrs.controlador.selecionado.tipoCadastro.isContrato()}"/>
                                                    <h:outputText
                                                        styleClass="negrito"
                                                        rendered="#{cc.attrs.controlador.selecionado.tipoCadastro.isContrato()}"
                                                        value="#{mov.valorVariacaoContrato ? 'Sim' : 'Não'}"/>

                                                    <h:outputText value="Dotação Orçamentária: "
                                                                  rendered="#{mov.operacao.isRedimensionamentoObjeto()}"/>
                                                    <h:outputText
                                                        rendered="#{mov.operacao.isRedimensionamentoObjeto()}"
                                                        styleClass="negrito"
                                                        value="#{mov.fonteDespesaORC}"/>

                                                    <h:outputText value="Objeto: "
                                                                  rendered="#{mov.operacao.isRedimensionamentoObjeto()}"/>
                                                    <p:inputTextarea
                                                        rendered="#{mov.operacao.isRedimensionamentoObjeto()}"
                                                        value="#{mov.objeto}"
                                                        cols="70"
                                                        readonly="true"
                                                        rows="3"/>

                                                    <h:outputText value="Valor Atual #{cc.attrs.controlador.selecionado.tipoCadastro.descricaoCurta}: "/>
                                                    <h:outputText
                                                        styleClass="negrito"
                                                        value="#{cc.attrs.controlador.valorAtualProcesso}"
                                                        converter="moneyConverter"/>

                                                    <h:outputText value="Saldo Atual #{cc.attrs.controlador.selecionado.tipoCadastro.descricaoCurta}: "/>
                                                    <h:outputText
                                                        styleClass="negrito"
                                                        value="#{cc.attrs.controlador.saldoAtualProcesso}"
                                                        converter="moneyConverter"/>

                                                    <h:outputText value="Valor do Movimento: "/>
                                                    <h:outputText
                                                        style="font-size: 14px"
                                                        styleClass="negrito label label-default"
                                                        value="#{mov.valor}"
                                                        converter="moneyConverter"/>
                                                </h:panelGrid>

                                                <h:panelGrid columns="2"
                                                             rendered="#{mov.isApostilamentoOperacaoOutro()}"
                                                             styleClass="semBorda">

                                                    <h:outputText value="Objeto: "/>
                                                    <p:inputTextarea
                                                        value="#{mov.objeto}"
                                                        cols="70"
                                                        readonly="true"
                                                        rows="3"/>
                                                </h:panelGrid>

                                                <table>
                                                    <tr style="vertical-align: top">
                                                        <td>
                                                            <p:fieldset
                                                                styleClass="mtop10"
                                                                legend="Prazo de Vigência"
                                                                rendered="#{mov.isOperacoesPrazo()}">
                                                                <h:panelGrid columns="2">

                                                                    <h:outputText
                                                                        value="Término Vigência Atual do(a) #{cc.attrs.controlador.selecionado.tipoCadastro.descricaoCurta}:"/>
                                                                    <h:outputText
                                                                        styleClass="label label-default"
                                                                        style="font-weight: normal; font-size: 14px"
                                                                        value="#{cc.attrs.controlador.selecionado.terminoVigenciaAtual}">
                                                                        <f:convertDateTime type="date"/>
                                                                    </h:outputText>

                                                                    <h:outputText
                                                                        value="Início de Vigência:"/>
                                                                    <h:outputText
                                                                        value="#{mov.inicioVigencia}">
                                                                        <f:convertDateTime type="date"/>
                                                                    </h:outputText>

                                                                    <h:outputText
                                                                        value="Término de Vigência:"/>
                                                                    <h:outputText
                                                                        value="#{mov.terminoVigencia}">
                                                                        <f:convertDateTime type="date"/>
                                                                    </h:outputText>
                                                                </h:panelGrid>
                                                            </p:fieldset>
                                                        </td>

                                                        <td>
                                                            <p:fieldset
                                                                styleClass="mlef50 mtop10"
                                                                legend="Prazo de Execução"
                                                                rendered="#{mov.isOperacoesPrazo() and cc.attrs.controlador.selecionado.tipoCadastro.isContrato()}">

                                                                <h:panelGrid columns="2">
                                                                    <h:outputText
                                                                        value="Término Execução Atual do Contrato:"/>
                                                                    <h:outputText
                                                                        styleClass="label label-default"
                                                                        style="font-weight: normal; font-size: 14px"
                                                                        value="#{cc.attrs.controlador.contrato.terminoExecucaoAtual}">
                                                                        <f:convertDateTime type="date"/>
                                                                    </h:outputText>

                                                                    <h:outputText
                                                                        value="Início de Execução:"/>
                                                                    <h:outputText
                                                                        value="#{mov.inicioExecucao}">
                                                                        <f:convertDateTime type="date"/>
                                                                    </h:outputText>

                                                                    <h:outputText
                                                                        value="Término de Execução:"/>
                                                                    <h:outputText
                                                                        value="#{mov.terminoExecucao}">
                                                                        <f:convertDateTime type="date"/>
                                                                    </h:outputText>
                                                                </h:panelGrid>
                                                            </p:fieldset>
                                                        </td>
                                                    </tr>
                                                </table>

                                                <p:dataTable paginator="true"
                                                             rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                                             rowIndexVar="rowIx"
                                                             styleClass="mtop05"
                                                             emptyMessage="Não foram localizados registros para serem apresentados"
                                                             rendered="#{mov.isOperacoesValor()}"
                                                             value="#{mov.itens}"
                                                             rows="10"
                                                             paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Itens&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                             currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                                             rowsPerPageTemplate="10,25,50,100"
                                                             var="item">
                                                    <p:columnGroup type="header">
                                                        <p:row>
                                                            <p:column styleClass="alinhamentoEsquerda"
                                                                      headerText="Item" rowspan="2"/>
                                                            <p:column styleClass="alinhamentoEsquerda"
                                                                      headerText="Unid. Med." rowspan="2"/>
                                                            <p:column
                                                                styleClass="alinhamentoCentralizado negrito"
                                                                headerText="Original" colspan="3"/>
                                                            <p:column
                                                                styleClass="alinhamentoCentralizado negrito"
                                                                headerText="Movimentação"
                                                                colspan="3"/>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column styleClass="alinhamentoDireita"
                                                                      headerText="Qtde" colspan="1"/>
                                                            <p:column styleClass="alinhamentoDireita"
                                                                      headerText="Valor Unit. (R$)" colspan="1"/>
                                                            <p:column styleClass="alinhamentoDireita"
                                                                      headerText="Valor Total (R$)" colspan="1"/>
                                                            <p:column styleClass="alinhamentoDireita"
                                                                      headerText="#{mov.labelColunaQuantidadeAjuste()}"
                                                                      colspan="1"/>
                                                            <p:column styleClass="alinhamentoDireita"
                                                                      headerText="#{mov.labelColunaValorUnitarioAjuste()}"
                                                                      colspan="1"/>
                                                            <p:column styleClass="alinhamentoDireita"
                                                                      headerText="Valor Total (R$)" colspan="1"/>
                                                        </p:row>
                                                    </p:columnGroup>
                                                    <p:column styleClass="alinhamentoEsquerda"
                                                              headerText="Item">
                                                        <h:outputText
                                                            value="#{item.numeroDescricao}"/>
                                                    </p:column>
                                                    <p:column styleClass="alinhamentoEsquerda"
                                                              headerText="Item">
                                                        <h:outputText
                                                            value="#{item.unidadeMedida.sigla}"/>
                                                    </p:column>
                                                    <p:column styleClass="alinhamentoDireita">
                                                        <h:outputText
                                                            value="#{item.quantidadeProcesso}">
                                                            <f:convertNumber pattern="#,##0.00"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column
                                                        styleClass="alinhamentoDireita">
                                                        <h:outputText
                                                            value="#{item.valorUnitarioProcesso}">
                                                            <f:convertNumber pattern="#,##0.00"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column styleClass="alinhamentoDireita">
                                                        <h:outputText value="#{item.valorTotalProcesso}"
                                                                      converter="moneyConverter"/>
                                                        <f:facet name="footer">
                                                            <div style="text-align: right">
                                                                <h:outputText
                                                                    value="#{mov.valorTotalItensOriginal}"
                                                                    styleClass="negrito">
                                                                    <f:convertNumber type="currency"
                                                                                     pattern="#,##0.00"/>
                                                                </h:outputText>
                                                            </div>
                                                        </f:facet>
                                                    </p:column>
                                                    <p:column styleClass="alinhamentoDireita"
                                                              headerText="#{mov.labelColunaQuantidadeAjuste()}">
                                                        <fc:output-mascara-unidade-medida
                                                            tipoMascara="#{item.mascaraQuantidade}"
                                                            value="#{item.quantidade}"/>
                                                    </p:column>
                                                    <p:column styleClass="alinhamentoDireita"
                                                              headerText="#{mov.labelColunaValorUnitarioAjuste()}">
                                                        <fc:output-mascara-unidade-medida
                                                            tipoMascara="#{item.mascaraValorUnitario}"
                                                            value="#{item.valorUnitario}"/>
                                                    </p:column>
                                                    <p:column styleClass="alinhamentoDireita"
                                                              headerText="Valor Total">
                                                        <h:outputText value="#{item.valorTotal}">
                                                            <f:convertNumber type="currency"
                                                                             pattern="#,##0.00"/>
                                                        </h:outputText>
                                                    </p:column>
                                                </p:dataTable>
                                            </div>
                                        </td>
                                    </tr>
                                </ui:repeat>
                            </table>
                        </p:outputPanel>
                    </div>
                </p:tab>

                <p:tab title="Contrato"
                       rendered="#{cc.attrs.controlador.selecionado.tipoCadastro.isContrato()}">
                    <p:outputPanel id="tab-contrato">
                        <ad:detalhes-contrato contrato="#{cc.attrs.controlador.contrato}"/>
                    </p:outputPanel>
                </p:tab>

                <p:tab title="Ata Registro de Preço"
                       rendered="#{cc.attrs.controlador.selecionado.tipoCadastro.isAta()}">
                    <p:tab title="Ata Registro de Preço"
                           rendered="#{cc.attrs.controlador.selecionado.tipoCadastro.isAta()}">
                        <h:panelGrid columns="2">
                            <h:outputText value="Número da Ata:"/>
                            <h:outputText value="#{cc.attrs.controlador.ataRegistroPreco.numero}"
                                          styleClass="negrito"/>

                            <h:outputText value="Data de Início:"/>
                            <h:outputText value="#{cc.attrs.controlador.ataRegistroPreco.dataInicio}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputText value="Data de Vencimento:"/>
                            <h:outputText value="#{cc.attrs.controlador.ataRegistroPreco.dataVencimento}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputText value="Data de Vencimento Atual:"/>
                            <h:outputText value="#{cc.attrs.controlador.ataRegistroPreco.dataVencimentoAtual}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputText value="Data de Assinatura:"/>
                            <h:outputText value="#{cc.attrs.controlador.ataRegistroPreco.dataAssinatura}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputText value="Licitação: "/>
                            <h:commandLink
                                styleClass="link-redirecionar"
                                target="_blank"
                                actionListener="#{licitacaoControlador.redirecionarParaLicitacao(cc.attrs.controlador.ataRegistroPreco.licitacao)}"
                                title="Clique para visualizar este registro em nova aba.">
                                <h:outputText styleClass="negrito"
                                              value="#{cc.attrs.controlador.ataRegistroPreco.licitacao}"/>
                            </h:commandLink>

                            <h:outputText value="Número do Processo:"/>
                            <h:outputText value="#{cc.attrs.controlador.ataRegistroPreco.licitacao.numero}"
                                          styleClass="negrito"/>

                            <h:outputText value="Modalidade:"/>
                            <h:outputText
                                value="#{cc.attrs.controlador.ataRegistroPreco.licitacao.modalidadeLicitacao.descricao}"
                                styleClass="negrito"/>

                            <h:outputText value="Unidade Organizacional: "/>
                            <h:outputText value="#{cc.attrs.controlador.hierarquiaProcesso}"
                                          styleClass="negrito"/>

                            <h:outputText value="Objeto:"/>
                            <p:inputTextarea value="#{cc.attrs.controlador.ataRegistroPreco.licitacao.resumoDoObjeto}"
                                             cols="100"
                                             rows="5"
                                             readonly="true"/>
                        </h:panelGrid>
                    </p:tab>
                </p:tab>

                <p:tab title="Publicações"
                       rendered="#{cc.attrs.controlador.selecionado.tipoCadastro.isContrato()}">
                    <p:dataTable paginator="true"
                                 id="tabela-publicacoes"
                                 rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                 rowIndexVar="rowIx"
                                 styleClass="mtop03"
                                 emptyMessage="Não foram localizados registros para serem apresentados"
                                 value="#{cc.attrs.controlador.selecionado.publicacoes}"
                                 rows="10"
                                 paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Publicações&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                 rowsPerPageTemplate="10,25,50,100"
                                 var="pub">
                        <p:column headerText="Data de Publicação" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{pub.dataPublicacao}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Veículo de Publicação" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{pub.veiculoDePublicacao}"/>
                        </p:column>
                        <p:column headerText="Número da Publicação" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{pub.numero}"/>
                        </p:column>
                        <p:column headerText="Página da Publicação" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{pub.pagina}"/>
                        </p:column>
                    </p:dataTable>
                </p:tab>
                <p:tab id="tabAnexo" title="Anexos">
                    <fc:detentorDocumentoLicitacao selecionado="#{cc.attrs.controlador.selecionado}"/>
                </p:tab>
            </p:tabView>
        </p:panel>

        <p:commandButton value="Salvar"
                         styleClass="operacao mtop10 prioritario"
                         process=":#{cc.clientId}:Formulario"
                         onstart="aguarde.show()"
                         oncomplete="aguarde.hide()"
                         title="Clique para salvar as execuções."
                         actionListener="#{cc.attrs.controlador.salvarAlteracao}"
                         icon="ui-icon-disk"/>

        <p:commandButton value="Cancelar"
                         styleClass="operacao mlef05 mtop10"
                         onclick="aguarde.show()"
                         oncomplete="aguarde.hide()"
                         title="Clique para cancelar esta operação."
                         actionListener="#{cc.attrs.controlador.cancelar()}"
                         icon="ui-icon-cancel"/>

        <p:commandButton icon="ui-icon-check"
                         process="@this"
                         value="Aprovar #{cc.attrs.controlador.selecionado.descricaoTipoTermo}"
                         update=":#{cc.clientId}:formAprovar"
                         rendered="#{cc.attrs.controlador.isEmElaboracao() and cc.attrs.controlador.isOperacaoEditar()}"
                         onclick="aguarde.show()"
                         actionListener="#{cc.attrs.controlador.aprovar()}"
                         oncomplete="aguarde.hide()"
                         title="Clique para aprovar."
                         styleClass="mlef05 mtop10 operacao prioritario"/>

        <p:commandButton icon="ui-icon-check"
                         process="@this"
                         value="Deferir #{cc.attrs.controlador.selecionado.descricaoTipoTermo}"
                         update=":#{cc.clientId}:formDeferir"
                         rendered="#{cc.attrs.controlador.isAprovado()}"
                         onclick="aguarde.show()"
                         actionListener="#{cc.attrs.controlador.deferirAlteracao()}"
                         oncomplete="aguarde.hide(); dlgDeferir.show()"
                         title="Clique para deferir."
                         styleClass="mlef05 mtop10 operacao prioritario"/>
    </h:form>

    <p:dialog showHeader="false"
              modal="true"
              dynamic="true"
              position="center"
              style="position: fixed !important;"
              draggable="false"
              resizable="false"
              widgetVar="dlgFinalizarProcesso"
              closable="false">
        <h:form id="formFinalizarProcesso">
            <div align="center">
                <br/>
                <div class="alert alert-success" style="font-size: 14px">
                    #{cc.attrs.controlador.selecionado.descricaoTipoTermo} #{cc.attrs.controlador.selecionado.numeroAnoTermo} foi salvo com sucesso!
                </div>

                <p:commandButton icon="ui-icon-eye"
                                 title="Clique para redirecionar para contrato."
                                 process="@this"
                                 value="Ver Contrato"
                                 actionListener="#{contratoAdmControlador.redirecionarParaContrato(cc.attrs.controlador.contrato)}"
                                 styleClass="mtop20 padrao"
                                 style="width: 130px"
                                 onclick="aguarde.show();"/>


                <p:commandButton icon="ui-icon-categorias"
                                 title="Clique para redirecionar para lista."
                                 process="@this"
                                 value="Lista de #{cc.attrs.controlador.selecionado.descricaoTipoTermo}s"
                                 actionListener="#{cc.attrs.controlador.cancelar()}"
                                 styleClass="mtop20 padrao mlef05"
                                 style="width: 130px"
                                 onclick="aguarde.show();"/>
            </div>
        </h:form>
    </p:dialog>

    <p:dialog modal="true"
              dynamic="true"
              position="top"
              style="position: fixed !important; margin-top: 100px!important;"
              resizable="false"
              widgetVar="dlgAprovar"
              minWidth="700"
              closable="false">
        <h:form id="formAprovar">
            <legend class="legenda">Aprovar #{cc.attrs.controlador.selecionado.descricaoTipoTermo}</legend>

            <div align="center" class="alert alert-warning" style="padding: 1%">
                <strong>Atenção!</strong> O #{cc.attrs.controlador.selecionado.descricaoTipoTermo} será aprovado e não poderá sofrer alterações.
                <br/>
                A data de Aprovação deve ser menor ou igual que a data de assinatura.
            </div>

            <br/>
            <h:panelGrid columns="2">
                <fc:outputLabelObrigatorio value="Data de Aprovação: "/>
                <p:calendar onkeypress="mascara(this, mdata)"
                            maxlength="10"
                            showOn="button"
                            title="Digite a data de publicação"
                            value="#{cc.attrs.controlador.selecionado.dataAprovacao}"
                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                            size="12">
                    <p:ajax event="blur" process="@this"/>
                    <p:ajax event="dateSelect" process="@this"/>
                </p:calendar>

                <h:outputText value="Cancelar Reservado por Licitação:"
                              rendered="#{cc.attrs.controlador.isMovimentoValorVariacaoSupressao()}"/>
                <p:selectBooleanCheckbox
                    value="#{cc.attrs.controlador.selecionado.movimentarSaldoOrcamentario}"
                    rendered="#{cc.attrs.controlador.isMovimentoValorVariacaoSupressao()}">
                    <p:ajax event="change"
                            process="@this"
                            update=":#{cc.clientId}:formAprovar"
                            listener="#{cc.attrs.controlador.atribuirMovimentoParaGerarSaldoOrcamentarioSupressao()}"
                            onstart="aguarde.show()"
                            oncomplete="aguarde.hide()"/>
                </p:selectBooleanCheckbox>
            </h:panelGrid>

            <p:outputPanel rendered="#{cc.attrs.controlador.selecionado.movimentarSaldoOrcamentario}">

                <p:outputPanel>
                    <div class="fundoAzul mtop05 alinhamentoCentralizado">
                        <h:outputText value="Resumo da movimentação de supressão do saldo orçamentário"
                                      style="color: white; font-size: 14px"/>
                    </div>
                    <p:outputPanel rendered="#{!cc.attrs.controlador.hasVoReservadoPorLicitacao()}">
                        <div class="alert alert-info" style="font-size: 13px" align="center">
                            A fonte de depsesa informada não possui saldo reservado por licitação para movimentação
                        </div>
                    </p:outputPanel>

                    <p:dataTable
                        rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                        rowIndexVar="rowIx"
                        style="overflow: scroll; max-width: 900px; max-height: 250px"
                        emptyMessage="Não foram localizados registros para serem apresentados"
                        value="#{cc.attrs.controlador.voReservasPorLicitacao}"
                        var="res">
                        <p:column headerText="Fonte" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{res.fonteDespesaORC}"/>
                        </p:column>
                        <p:column headerText="Execução Cont. " styleClass="alinhamentoDireita">
                            <h:outputText value="#{res.solicitacoEmpenho}">
                                <f:convertNumber type="currency" pattern="#,##0.00"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Empenho" styleClass="alinhamentoDireita">
                            <h:outputText value="#{res.empenho}">
                                <f:convertNumber type="currency" pattern="#,##0.00"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Valor Mov." styleClass="alinhamentoDireita">
                            <h:outputText value="#{res.valorMovimento}">
                                <f:convertNumber type="currency" pattern="#,##0.00"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Reserv. Licitação" styleClass="alinhamentoDireita">
                            <h:outputText value="#{res.reservadoPorLicitacao}">
                                <f:convertNumber type="currency" pattern="#,##0.00"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Reserv. Calculado" styleClass="alinhamentoDireita">
                            <h:outputText value="#{res.valorFinal}"
                                          styleClass="#{res.hasValorFinalNegativo() ? 'vermelhonegrito' : ''}">
                                <f:convertNumber type="currency" pattern="#,##0.00"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Saldo Atual" styleClass="alinhamentoDireita">
                            <h:outputText value="#{res.saldoFonteDespesa}">
                                <f:convertNumber type="currency" pattern="#,##0.00"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Saldo Calculado" styleClass="alinhamentoDireita">
                            <h:outputText value="#{res.saldoAtual}">
                                <f:convertNumber type="currency" pattern="#,##0.00"/>
                            </h:outputText>
                        </p:column>
                    </p:dataTable>
                    <p:outputPanel
                        rendered="#{cc.attrs.controlador.hasSupressaoValorNegativoReservadoLicitacao()}">
                        <div class="alert alert-danger" style="font-size: 13px" align="center">
                            A movimentação deixará o valor reservado por licitação negativo, para esses casos não será movimentado o saldo orçamentário.<br/>
                            Será movimentado somente o valor/saldo atual do contrato.
                        </div>
                    </p:outputPanel>
                </p:outputPanel>
            </p:outputPanel>

            <p:tabView styleClass="mtop10"
                       rendered="#{cc.attrs.controlador.isTransferenciaUnidade()}">

                <p:tab title="Transferência de Unidade do Contrato">
                    <div class="alert alert-danger" style="font-size: 13px" align="center">
                        <strong>Atenção!</strong> Transferência de Unidade do Contrato
                        #{cc.attrs.controlador.textoInformativoTransferenciaUnidade}
                    </div>

                    <h:panelGrid columns="2" cellspacing="2" cellpadding="2">
                        <h:outputText value="Unidade Vigente do Contrato: "/>
                        <h:outputText
                            value="#{cc.attrs.controlador.hierarquiaProcesso}"
                            styleClass="negrito"/>
                    </h:panelGrid>

                    <hr class="mbot05"/>

                    <h:panelGrid columns="2" cellspacing="2" cellpadding="2">
                        <h:outputText value="Unidade a ser Transferida: "/>
                        <h:outputText
                            style="margin-left: 12px"
                            value="#{cc.attrs.controlador.hierarquiaTransferenciaUnidade}"
                            styleClass="negrito"/>
                    </h:panelGrid>
                </p:tab>
            </p:tabView>

            <div style="text-align: center">
                <p:commandButton value="Confirmar"
                                 icon="ui-icon-check"
                                 process="formAprovar"
                                 styleClass="padrao mtop10 prioritario"
                                 title="Clique para confirmar a aprovação."
                                 update="@none"
                                 onclick="aguarde.show();"
                                 oncomplete="aguarde.hide()"
                                 actionListener="#{cc.attrs.controlador.confirmarAprovacao()}"/>

                <p:commandButton value="Cancelar"
                                 icon="ui-icon-cancel"
                                 styleClass="padrao mlef05 mtop10"
                                 title="Clique para cancelar a aprovação."
                                 process="@this"
                                 onclick="aguarde.show();"
                                 actionListener="#{cc.attrs.controlador.cancelarAprovacao()}"
                                 oncomplete="aguarde.hide();dlgAprovar.hide();"/>

            </div>
        </h:form>
    </p:dialog>


    <p:dialog modal="true"
              dynamic="true"
              position="center"
              showHeader="false"
              style="position: fixed !important;"
              draggable="false"
              resizable="false"
              widgetVar="dlgDeferir"
              closable="false">
        <h:form id="formDeferir">

            <legend
                class="legenda">Deferimento de #{cc.attrs.controlador.selecionado.descricaoTipoTermo}</legend>

            <h:panelGrid columns="2">
                <h:outputText value="Data de Deferimento: "/>
                <h:outputText value="#{cc.attrs.controlador.selecionado.dataDeferimento}"
                              styleClass="negrito">
                    <f:convertDateTime type="date"/>
                </h:outputText>

                <fc:outputLabelObrigatorio value="Data de Assinatura: "/>
                <p:calendar maxlength="19"
                            onkeypress="mascara(this, mdata)"
                            id="dataAssinatura"
                            showOn="button"
                            title="Informe a data de assinatura."
                            value="#{cc.attrs.controlador.selecionado.dataAssinatura}"
                            locale="pt_BR"
                            navigator="true"
                            pattern="dd/MM/yyyy"
                            size="12">
                </p:calendar>
            </h:panelGrid>

            <div style="text-align: center">
                <p:commandButton value="Confirmar"
                                 icon="ui-icon-check"
                                 process="formDeferir :#{cc.clientId}:Formulario:tab-view-geral:panel-alteracao"
                                 styleClass="mrig05 padrao mtop10 prioritario"
                                 title="Clique para confirmar o deferimento."
                                 update="@none"
                                 onclick="aguarde.show();"
                                 oncomplete="aguarde.hide()"
                                 actionListener="#{cc.attrs.controlador.confirmarDeferimento()}"/>

                <p:commandButton value="Cancelar"
                                 icon="ui-icon-cancel"
                                 title="Clique para cancelar o deferimento."
                                 process="@this"
                                 styleClass="padrao mtop10"
                                 onclick="aguarde.show();"
                                 actionListener="#{cc.attrs.controlador.cancelarDeferimento()}"
                                 oncomplete="aguarde.hide();dlgDeferir.hide();"/>

            </div>
        </h:form>
    </p:dialog>


    <p:dialog modal="true"
              dynamic="true"
              position="center"
              style="position: fixed !important;"
              resizable="false"
              showHeader="false"
              widgetVar="dlgDotacao"
              width="900"
              max-height="400"
              closable="false">
        <h:form id="formDotacao">
            <p:panel>
                <co:consultar-despesa-orcamentaria-na-tela
                    value="#{cc.attrs.controlador.despesaORC}"
                    mostrarArvoreExpandida="true"
                    styleElementoDespesa="margin-right: 65px"
                    update=":#{cc.clientId}:formDotacao:gridDotacao"
                    actionListener="#{cc.attrs.controlador.limparCamposDespesa()}"
                    unidadeAdministrativa="#{cc.attrs.controlador.hierarquiaProcesso.subordinada}"/>

                <h:panelGrid columns="2" id="gridDotacao">
                    <fc:outputLabelObrigatorio value="Conta de Destinação de Recurso: "/>
                    <h:selectOneMenu
                        value="#{cc.attrs.controlador.movimentoAlteracaoContratual.fonteDespesaORC}"
                        id="fonteDespesaOrcamentaria"
                        converter="#{cc.attrs.controlador.converterFonteDespesaORC}">
                        <f:selectItems value="#{cc.attrs.controlador.fontesDespesaOrcamentaria}"
                                       var="fo"
                                       itemValue="#{fo.id}"
                                       itemLabel="#{fo.provisaoPPAFonte.destinacaoDeRecursos}"/>
                        <p:ajax event="change"
                                process="@this"
                                update="@this saldoFonteDespesa"
                                onstart="aguarde.show()"
                                oncomplete="aguarde.hide()"
                                listener="#{cc.attrs.controlador.buscarSaldoFonteDespesaORC()}"/>
                    </h:selectOneMenu>

                    <h:outputText value="Saldo Fonte de Despesa: "/>
                    <p:outputPanel id="saldoFonteDespesa">
                        <h:outputText
                            value="#{cc.attrs.controlador.saldoFonteDespesaORC}"
                            converter="moneyConverter"
                            styleClass="negrito"/>
                    </p:outputPanel>
                </h:panelGrid>
            </p:panel>

            <div class="centralizado mtop10">
                <p:commandButton value="Confirmar"
                                 icon="ui-icon-check"
                                 styleClass="padrao mrig05"
                                 process=":#{cc.clientId}:formDotacao @this"
                                 update=":#{cc.clientId}:Formulario:tab-view-geral:panel-movimentos"
                                 onclick="aguarde.show()"
                                 oncomplete="aguarde.hide()"
                                 actionListener="#{cc.attrs.controlador.confirmarDotacao()}"/>

                <p:commandButton value="Cancelar"
                                 styleClass="padrao"
                                 icon="ui-icon-cancel"
                                 update="@none"
                                 process="@this"
                                 onclick="aguarde.show()"
                                 oncomplete="aguarde.hide();dlgDotacao.hide()"/>
            </div>
        </h:form>
    </p:dialog>
</cc:implementation>
</html>
