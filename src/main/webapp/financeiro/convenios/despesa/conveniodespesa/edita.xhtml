<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:co="http://java.sun.com/jsf/composite/components/contabil"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">

            <fc:cabecalhoPretty controlador="#{convenioDespesaControlador}"
                                origem="#{convenioDespesaControlador.caminhoPadrao}novo/"/>

            <p:panel header="Cadastro de Convênio de Despesa">
                <p:tabView id="tabViewGeral" styleClass="mtop05">
                    <p:tab title="Convênio de Despesa">
                        <h:panelGrid columns="2">
                            <h:outputText value="Número do Convênio: "/>
                            <h:panelGrid columns="2">
                                <p:inputText value="#{convenioDespesaControlador.selecionado.numConvenio}"
                                             readonly="true"
                                             size="21"
                                             id="numeroConvenio"
                                             disabled="#{convenioDespesaControlador.selecionado.id ne null}"
                                             title="Número do convênio gerado automaticamente ao salvar."/>
                                <p:watermark value="Gerado Automaticamente" for="numeroConvenio"/>
                            </h:panelGrid>

                            <fc:outputLabelObrigatorio value="Nome do Projeto: "/>
                            <h:panelGrid columns="2">
                                <p:inputTextarea title="Informe o nome do projeto."
                                                 autoResize="true"
                                                 cols="70"
                                                 rows="3"
                                                 maxlength="3000"
                                                 style="margin-left: -3px"
                                                 value="#{convenioDespesaControlador.selecionado.nomeProjeto}"
                                                 id="nomeProjeto"
                                                 counterTemplate="{0} Caracteres Restantes."
                                                 counter="counterNomeProj"/>
                                <h:outputText id="counterNomeProj"/>
                            </h:panelGrid>

                            <h:outputText value="Número do Termo: "/>
                            <p:inputText value="#{convenioDespesaControlador.selecionado.numero}"
                                         size="20"
                                         id="numero"
                                         title="Informe o número do termo."/>

                            <h:outputText value="Tipo de Convênio: "/>
                            <h:selectOneMenu title="Selecione um tipo de convênio."
                                             id="tipoConvenioReceita"
                                             value="#{convenioDespesaControlador.selecionado.tipoConvenio}">
                                <f:selectItems value="#{convenioDespesaControlador.tiposConvenios}"/>
                            </h:selectOneMenu>

                            <h:outputText value="Destinação de Recursos: " style="margin-right: 12px"/>
                            <h:selectOneMenu value="#{convenioDespesaControlador.selecionado.destinacaoRecurso}"
                                             id="destRecurso"
                                             title="Informe a destinação de recurso."
                                             style="width: 377px">
                                <f:selectItems value="#{convenioDespesaControlador.destinacaoRecursos}"/>
                            </h:selectOneMenu>

                            <h:outputText value="Ato Legal: "/>
                            <h:panelGroup>
                                <p:autoComplete queryDelay="1000"
                                                value="#{convenioDespesaControlador.selecionado.atoLegal}"
                                                title="Informe o ato legal."
                                                id="atoLegal"
                                                var="ato"
                                                maxResults="10"
                                                styleClass="mrig05"
                                                size="70"
                                                completeMethod="#{convenioDespesaControlador.completaAtoLegal}"
                                                converter="#{atoLegalControlador.converterGenerico}"
                                                itemValue="#{ato.id}"
                                                itemLabel="#{ato.toStringAtoLegalConvenio()}"
                                                forceSelection="true"
                                                style="margin-right: 4px"/>

                                <fc:novoParente origem="#{convenioDespesaControlador.caminhoPadrao}novo/"
                                                destino="#{atoLegalControlador.caminhoPadrao}novo/"
                                                selecionado="#{convenioDespesaControlador.selecionado}"/>

                            </h:panelGroup>

                            <fc:outputLabelObrigatorio value="Situação: "/>
                            <h:selectOneMenu
                                value="#{convenioDespesaControlador.selecionado.situacaoCadastralContabil}">
                                <f:selectItems value="#{convenioDespesaControlador.situacoesCadastrais}"/>
                            </h:selectOneMenu>

                            <h:outputText value="Artigo LDO: "/>
                            <p:inputText value="#{convenioDespesaControlador.selecionado.artLdo}"
                                         id="artLdo"
                                         title="Informe o artigo da LDO."/>


                            <h:outputText value="Artigo LOA: "/>
                            <p:inputText value="#{convenioDespesaControlador.selecionado.artLoa}"
                                         id="artLoa"
                                         title="Informe o artigo da LOA."/>

                            <fc:outputLabelObrigatorio value="Entidade Beneficiária: "/>
                            <h:panelGroup>
                                <p:autoComplete queryDelay="1000"
                                                value="#{convenioDespesaControlador.selecionado.entidadeBeneficiaria}"
                                                id="entidadebeneficiaria"
                                                size="70"
                                                styleClass="mrig05"
                                                var="ent"
                                                completeMethod="#{convenioDespesaControlador.completaEntidadeBeneficiaria}"
                                                converter="#{entidadeBeneficiariaControlador.converterGenerico}"
                                                itemLabel="#{ent.pessoaJuridica.cnpj} - #{ent.pessoaJuridica.razaoSocial} (#{ent.pessoaJuridica.situacaoCadastralPessoa})"
                                                itemValue="#{ent.id}"
                                                forceSelection="true"
                                                maxResults="9"
                                                onkeyup="keyUpLimparEsconderDesabilidarCampo(this, 'classeCredor_input', true, false, true);
                    keyUpLimparEsconderDesabilidarCampo(this, 'contacorrente', true, false, true)"
                                                style="margin-right: 4px"
                                                title="Informe a entidade beneficiária.">
                                    <p:ajax event="itemSelect" update="classeCredor contacorrente compCamposPessoa"/>
                                </p:autoComplete>

                                <p:outputPanel id="compCamposPessoa">
                                    <fc:novoParente origem="#{convenioDespesaControlador.caminhoOrigem}"
                                                    selecionado="#{convenioDespesaControlador.selecionado}"
                                                    icon="ui-icon-search"
                                                    title="Clique para visualizar a entidade beneficiária selecionada."
                                                    disabled="#{convenioDespesaControlador.selecionado.entidadeBeneficiaria eq null}"
                                                    destino="#{pessoaContabilControlador.getCaminhoVisualizarPessoa(convenioDespesaControlador.selecionado.entidadeBeneficiaria.pessoaJuridica)}"/>
                                </p:outputPanel>

                                <p:spacer width="4"/>
                                <fc:novoParente origem="#{convenioDespesaControlador.caminhoPadrao}novo/"
                                                destino="#{entidadeBeneficiariaControlador.caminhoPadrao}novo/"
                                                selecionado="#{convenioDespesaControlador.selecionado}"/>

                                <p:spacer width="4"/>
                                <co:botao_informacao
                                    descricao="A Entidade Beneficiária é filtrada por Pessoa Jurídica com a Classe de Pessoa do tipo Convênio de Despesa."/>
                            </h:panelGroup>

                            <fc:outputLabelObrigatorio value="Classe: "/>
                            <h:panelGroup>
                                <p:autoComplete queryDelay="1000"
                                                value="#{convenioDespesaControlador.selecionado.classeCredor}"
                                                id="classeCredor"
                                                size="70"
                                                var="cc"
                                                completeMethod="#{convenioDespesaControlador.completaClasseCredor}"
                                                converter="#{classeCredorControlador.converterGenerico}"
                                                disabled="#{convenioDespesaControlador.selecionado.entidadeBeneficiaria.pessoaJuridica.id eq null}"
                                                itemLabel="#{cc}"
                                                itemValue="#{cc.id}"
                                                styleClass="mrig05"
                                                forceSelection="true"
                                                maxResults="10"
                                                style="margin-right: 4px"
                                                title="Informe a Classe de Pessoa para o Convênio de Despesa"/>

                                <fc:novoParente origem="#{convenioDespesaControlador.caminhoPadrao}novo/"
                                                destino="#{classeCredorControlador.caminhoPadrao}novo/"
                                                selecionado="#{convenioDespesaControlador.selecionado}"/>
                            </h:panelGroup>

                            <h:outputText value="Conta Bancária: "/>
                            <h:selectOneMenu title="Selecione um conta corrente da Entidade Beneficiária."
                                             value="#{convenioDespesaControlador.selecionado.contaCorrenteBanc}"
                                             id="contacorrente"
                                             disabled="#{convenioDespesaControlador.selecionado.entidadeBeneficiaria.pessoaJuridica.id eq null}"
                                             converter="#{contaCorrenteBancariaControlador.converterGenerico}">
                                <f:selectItems value="#{convenioDespesaControlador.contasCorrentes}"/>
                            </h:selectOneMenu>

                            <h:outputText value="Data Assinatura: "/>
                            <p:calendar value="#{convenioDespesaControlador.selecionado.dataAss}"
                                        navigator="true"
                                        locale="pt_BR"
                                        onkeypress="mascara(this, mdata)"
                                        pattern="dd/MM/yyyy"
                                        id="dataAss"
                                        title="Informe a data da assinatura."/>

                            <h:outputText value="Orgão de Publicação: "/>
                            <h:panelGroup>
                                <p:autoComplete queryDelay="1000"
                                                value="#{convenioDespesaControlador.selecionado.veiculoDePublicacao}"
                                                id="public"
                                                size="70"
                                                var="op"
                                                completeMethod="#{convenioDespesaControlador.completaOrgaoPublicacao}"
                                                converter="#{veiculoDePublicacaoControlador.converterGenerico}"
                                                itemLabel="#{op}" itemValue="#{op}"
                                                title="Informe o órgão de publicação."
                                                style="margin-right: 4px"/>

                                <fc:novoParente origem="#{convenioDespesaControlador.caminhoPadrao}novo/"
                                                destino="#{veiculoDePublicacaoControlador.caminhoPadrao}novo/"
                                                selecionado="#{convenioDespesaControlador.selecionado}"/>

                            </h:panelGroup>

                            <h:outputText value="Data da Publicação: "/>
                            <p:calendar value="#{convenioDespesaControlador.selecionado.dataPublicacao}"
                                        navigator="true"
                                        locale="pt_BR"
                                        onkeypress="mascara(this, mdata)"
                                        pattern="dd/MM/yyyy"
                                        id="dataPublicacao"
                                        title="Informe a data de publicação."/>
                        </h:panelGrid>

                        <h:panelGrid columns="4" id="panelValoresConvenio">
                            <fc:outputLabelObrigatorio value="Valor do Convênio: "/>
                            <p:inputText value="#{convenioDespesaControlador.selecionado.valorConvenio}"
                                         converter="#{convenioDespesaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         title="Informe o valor total do Convênio de Despesa."
                                         styleClass="alinhamentoDireita mrig50"
                                         id="valorConvenio">
                                <p:ajax event="blur"
                                        listener="#{convenioDespesaControlador.calculaValorRepasse}"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        update="valorRepasse"/>
                            </p:inputText>

                            <h:outputText value="Valor do Convênio Aditivado: "/>
                            <p:inputText value="#{convenioDespesaControlador.selecionado.valorConvenioAditivado}"
                                         converter="#{convenioDespesaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         title="Informe o valor do convênio aditivado."
                                         styleClass="alinhamentoDireita"
                                         id="valorConvenioAdit"/>

                            <h:outputText value="Valor da Contrapartida: "/>
                            <p:inputText value="#{convenioDespesaControlador.selecionado.valorContrapartida}"
                                         converter="#{convenioDespesaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         styleClass="alinhamentoDireita mrig50"
                                         title="Informe o valor da contrapartida."
                                         id="valorContra">
                                <p:ajax event="blur"
                                        listener="#{convenioDespesaControlador.calculaValorRepasse}"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        update="valorRepasse"/>
                            </p:inputText>

                            <h:outputText value="Valor da Contrapartida Aditivada: "/>
                            <p:inputText value="#{convenioDespesaControlador.selecionado.valorContrapartidaAditivada}"
                                         converter="#{convenioDespesaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         title="Informe o valor da contrapartida aditivada."
                                         styleClass="alinhamentoDireita"
                                         id="valorContrapartidaAdit"/>

                            <h:outputText value="Valor de Repasse: "/>
                            <p:inputText value="#{convenioDespesaControlador.selecionado.valorRepasse}"
                                         title="Valor de repasse um campo calculado."
                                         readonly="true"
                                         styleClass="alinhamentoDireita mrig50"
                                         converter="#{convenioDespesaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         id="valorRepasse"/>

                            <h:outputText value="Valor de Repasse Aditivado: "/>
                            <p:inputText value="#{convenioDespesaControlador.selecionado.valorRepasseAditivado}"
                                         converter="#{convenioDespesaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         title="Informe o valor de repasse aditivado."
                                         styleClass="alinhamentoDireita"
                                         id="valorRepasseAdit"/>
                        </h:panelGrid>

                        <h:panelGrid columns="4">
                            <fc:outputLabelObrigatorio value="Início de Vigência: "/>
                            <p:calendar value="#{convenioDespesaControlador.selecionado.dataVigenciaInicial}"
                                        locale="pt_BR"
                                        onkeypress="mascara(this, mdata)"
                                        pattern="dd/MM/yyyy"
                                        navigator="true"
                                        id="dtVigenciaInicial"
                                        styleClass="mrig50"
                                        title="Informe a data inicial da vigência.">
                            </p:calendar>
                            <h:outputText value="Fim de Vigência: " style="margin-right: 82px"/>
                            <p:calendar value="#{convenioDespesaControlador.selecionado.dataVigenciaFinal}"
                                        locale="pt_BR"
                                        onkeypress="mascara(this, mdata)"
                                        pattern="dd/MM/yyyy"
                                        navigator="true"
                                        id="dtVigenciaFinal"
                                        title="Informe a data final da vigência."
                                        validator="#{convenioDespesaControlador.validarDatas}">
                                <p:ajax event="dateSelect" update=":Formulario:tabViewGeral:dtVigenciaFinal" process="@this"/>
                                <p:ajax event="valueChange" update=":Formulario:tabViewGeral:dtVigenciaFinal" process="@this"/>
                            </p:calendar>
                            <h:outputText value="Prest. Contas Final: " style="margin-right: 35px"/>
                            <p:calendar value="#{convenioDespesaControlador.selecionado.prestacaoContaFinal}"
                                        locale="pt_BR"
                                        onkeypress="mascara(this, mdata)"
                                        navigator="true" pattern="dd/MM/yyyy"
                                        title="Informe a data da prestação de contas."
                                        styleClass="mrig50"
                                        id="prestContaFinal"/>

                            <h:outputText value="Periodicidade: " style="margin-right: 10px"/>
                            <h:panelGroup>
                                <h:selectOneMenu value="#{convenioDespesaControlador.selecionado.periodicidade}"
                                                 style="width: 125px"
                                                 styleClass="mrig03"
                                                 converter="#{periodicidadeControlador.converterGenerico}"
                                                 id="periodicidade"
                                                 title="Informe a periodicidade.">
                                    <f:selectItems value="#{convenioDespesaControlador.periodicidades}"/>
                                </h:selectOneMenu>

                                <fc:novoParente origem="#{convenioDespesaControlador.caminhoPadrao}novo/"
                                                destino="#{periodicidadeControlador.caminhoPadrao}novo/"
                                                selecionado="#{convenioDespesaControlador.selecionado}"/>
                            </h:panelGroup>
                        </h:panelGrid>

                        <h:panelGrid columns="2">
                            <h:outputText value="Data da Periodicidade: " style="margin-right: 20px"/>
                            <p:spinner value="#{convenioDespesaControlador.selecionado.dataPeriodicidade}"
                                       stepFactor="1"
                                       max="30"
                                       min="0"
                                       title="Informe a data da periodicidade.">
                                <p:ajax event="blur" listener="#{convenioDespesaControlador.verificarDataPeriodiciade}"
                                        update="@this"/>
                            </p:spinner>

                            <fc:outputLabelObrigatorio value="  Objeto: "/>
                            <h:panelGrid columns="2" cellspacing="0">
                                <p:inputTextarea value="#{convenioDespesaControlador.selecionado.objeto}"
                                                 style="width: 600px"
                                                 rows="5"
                                                 maxlength="3000"
                                                 counterTemplate="{0} Caracteres Restantes."
                                                 counter="counterObjeto"
                                                 id="objeto"
                                                 title="Informe o objeto."
                                                 autoResize="true"/>
                                <h:outputText id="counterObjeto"/>
                            </h:panelGrid>

                            <fc:outputLabelObrigatorio value="Órgão Concedente: "/>
                            <p:autoComplete queryDelay="1000" id="orgaoConvenete"
                                            var="o"
                                            itemValue="#{o.id}"
                                            itemLabel="#{o}"
                                            size="70"
                                            maxResults="10"
                                            title="Informe o campo órgão concedente."
                                            converter="#{entidadeControlador.converterGenerico}"
                                            completeMethod="#{convenioDespesaControlador.completaOrgaoConvenente}"
                                            value="#{convenioDespesaControlador.selecionado.orgaoConvenente}"/>

                            <h:outputText value="Pertence a Emenda Parlamentar? "/>
                            <p:selectBooleanCheckbox value="#{convenioDespesaControlador.pertenceEmenda}">
                                <p:ajax event="change" process="@this" update="labelEmenda autoEmenda"
                                        listener="#{convenioDespesaControlador.limparEmenda()}"/>
                            </p:selectBooleanCheckbox>

                            <h:panelGroup id="labelEmenda">
                                <fc:outputLabelObrigatorio value="Emenda: "
                                                           rendered="#{convenioDespesaControlador.pertenceEmenda}"/>
                            </h:panelGroup>

                            <h:panelGroup id="autoEmenda">
                                <p:autoComplete queryDelay="1000"
                                                title="Selecione uma emenda."
                                                value="#{convenioDespesaControlador.selecionado.emenda}"
                                                converter="#{emendaControlador.converterGenerico}"
                                                completeMethod="#{convenioDespesaControlador.completarEmendas}"
                                                rendered="#{convenioDespesaControlador.pertenceEmenda}"
                                                var="e"
                                                itemLabel="#{e.toStringAutoComplete()}"
                                                itemValue="#{e.id}"
                                                maxResults="10"
                                                scrollHeight="200"
                                                size="70"/>
                            </h:panelGroup>
                        </h:panelGrid>

                        <br/>
                        <p:panel id="panelLiberacao">

                            <co:titulo-panel titulo="Recurso Liberado"/>
                            <h:panelGrid columns="2" id="gridLiberacao">

                                <h:outputText value="Data de Liberação do Recurso: "/>
                                <p:calendar id="dataLibRecurso"
                                            value="#{convenioDespesaControlador.convenioDespesaLiberacoes.dataLiberacaoRecurso}"
                                            locale="pt_BR"
                                            pattern="dd/MM/yyyy"
                                            navigator="true"
                                            onkeypress="mascara(this, mdata)"
                                            title="Informe a data da libereção do recurso."/>


                                <h:outputText value="Valor Liberado Concedente: " style="margin-right: 30px"/>
                                <fc:inputMoeda id="valorLibConcedente"
                                               value="#{convenioDespesaControlador.convenioDespesaLiberacoes.valorLiberadoConcedente}"/>

                                <h:outputText value="Valor Liberado Contrapartida: "/>
                                <fc:inputMoeda id="valorLiberadaContrapartida"
                                               value="#{convenioDespesaControlador.convenioDespesaLiberacoes.valorLiberadoContrapartida}"/>
                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             icon="ui-icon-circle-plus"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao mtop20"
                                             actionListener="#{convenioDespesaControlador.adicionaLiberacoes()}"
                                             update=":Formulario:tabViewGeral:tabelaLiberacao :Formulario:tabViewGeral:gridLiberacao "
                                             title="Clique para adicionar este registro."/>

                            <p:dataTable value="#{convenioDespesaControlador.selecionado.convenioDespesaLiberacoes}"
                                         var="lib"
                                         id="tabelaLiberacao"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>RECURSOS LIBERADOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ação" style="text-align: center; width: 8%">
                                    <p:commandButton id="btnEditarDotacao"
                                                     icon="ui-icon-pencil"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     styleClass="mrig05"
                                                     process="@this"
                                                     title="Clique para editar este registro."
                                                     actionListener="#{convenioDespesaControlador.editarRecursoLiberado(lib)}"
                                                     update=":Formulario:tabViewGeral:panelLiberacao :Formulario:tabViewGeral:tabelaLiberacao"/>

                                    <p:commandButton image="ui-icon-trash"
                                                     actionListener="#{convenioDespesaControlador.removerLiberacoes}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     styleClass="mrig05"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     update=":Formulario:tabViewGeral:tabelaLiberacao :Formulario:tabViewGeral:panelLiberacao">
                                        <f:attribute name="removeLiberacao" value="#{lib}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Data de Liberação do Recurso"
                                          styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{lib.dataLiberacaoRecurso}">
                                        <f:convertDateTime type="date"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor Liberado Concedente (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{lib.valorLiberadoConcedente}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: "/>
                                            <p:spacer width="5"/>
                                            <h:outputText
                                                value="#{convenioDespesaControlador.calcularTotalLiberadoConcedente()}"
                                                id="totalConcedente"
                                                converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                                <p:column headerText="Valor Liberado Contrapartida (R$)"
                                          styleClass="alinhamentoDireita">
                                    <h:outputText value="#{lib.valorLiberadoContrapartida}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: "/>
                                            <p:spacer width="5"/>
                                            <h:outputText
                                                value="#{convenioDespesaControlador.calcularTotalLiberadoContrapartida()}"
                                                id="totalContrapartida"
                                                converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>

                            </p:dataTable>
                        </p:panel>

                        <p:panel styleClass="mtop10">

                            <co:titulo-panel titulo="Dotação Orçamentária"/>
                            <h:panelGrid columns="2" id="panelDespesaOrc">
                                <h:outputText value="Dotação Orçamentária: "/>
                                <co:consultar-despesa-orcamentaria value="#{convenioDespesaControlador.despesaORC}"
                                                                   recuperarSomenteUnidadeLogada="false"
                                                                   tiposContaDespesa="#{convenioDespesaControlador.tipoContaDespesa}"
                                                                   id="dotacaoOrc"/>

                                <h:outputText for="fonteDespesaORC" value="Fonte de Recurso: "/>
                                <p:autoComplete queryDelay="1000" id="fonteDespesaORC"
                                                size="70"
                                                title="Informe a Fonte de Recurso"
                                                value="#{convenioDespesaControlador.despesaExercConvenioSelecionado.fonteDespesaORC}"
                                                completeMethod="#{convenioDespesaControlador.completaFonteDespesaORC}"
                                                converter="#{convenioDespesaControlador.converterFonteDespesaORC}"
                                                var="fo"
                                                itemValue="#{fo.id}"
                                                itemLabel="#{fo.provisaoPPAFonte.destinacaoDeRecursos}"/>

                                <h:outputText for="valorDespesaOrcamentaria" value="Valor: "/>
                                <fc:inputMoeda
                                    value="#{convenioDespesaControlador.despesaExercConvenioSelecionado.valor}"
                                    title="Informe o valor da dotaçãoo orçamentária."
                                    id="valorDespesaOrcamentaria"/>

                                <h:outputText value="Gerar Solicitação de Empenho: "/>
                                <p:selectBooleanCheckbox id="gerarSolicitacao"
                                                         value="#{convenioDespesaControlador.despesaExercConvenioSelecionado.gerarSolicitacaoEmpenho}"/>
                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             styleClass="padrao mtop20"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             image="ui-icon-circle-plus"
                                             actionListener="#{convenioDespesaControlador.adicionaDespesa()}"
                                             title="Clique para adicionar a Conta de Despesa Selecionado Acima"
                                             update=":Formulario:tabViewGeral:tabelaDespesa :Formulario:tabViewGeral:panelDespesaOrc"/>

                            <p:dataTable value="#{convenioDespesaControlador.selecionado.despesaExercConvenios}"
                                         var="desp"
                                         id="tabelaDespesa"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>DOTAÇÕES ORÇAMENTÁRIAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ação" style="text-align: center; width: 8%">
                                    <p:commandButton id="btnEditarDotacao"
                                                     icon="ui-icon-pencil"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     styleClass="mrig05"
                                                     process="@this"
                                                     title="Clique para editar este registro."
                                                     actionListener="#{convenioDespesaControlador.editarDotacaoOrcamentario(desp)}"
                                                     update=":Formulario:tabViewGeral:panelDespesaOrc :Formulario:tabViewGeral:tabelaDespesa"/>

                                    <p:commandButton image="ui-icon-trash"
                                                     actionListener="#{convenioDespesaControlador.removeDespesa}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     styleClass="mrig05"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     id="btnRemoveOcorrencia"
                                                     update=":Formulario:tabViewGeral:tabelaDespesa">
                                        <f:attribute name="removeDespesa" id="btnRemoveDespesa" value="#{desp}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Solicitação de Empenho" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{desp.gerarSolicitacaoEmpenho ? 'Sim' : 'Não'}"/>
                                </p:column>
                                <p:column headerText="Exercício" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{desp.exercicio}"/>
                                </p:column>
                                <p:column headerText="Funcional Programática" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{desp.despesaORC}"/>
                                </p:column>
                                <p:column headerText="Despesa Orçamentária" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{desp.despesaORC.provisaoPPADespesa.contaDeDespesa}"/>
                                </p:column>
                                <p:column headerText="Tipo Conta Despesa" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{desp.despesaORC.tipoContaDespesa.descricao}"/>
                                </p:column>
                                <p:column headerText="Fonte de Recurso" styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{desp.fonteDespesaORC.provisaoPPAFonte.destinacaoDeRecursos}"/>
                                </p:column>
                                <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{desp.valor}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText
                                                value="#{convenioDespesaControlador.calcularTotalDespesaOrcamentarias()}"
                                                id="totalDespesa"
                                                styleClass="negrito"
                                                converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panel id="panelStatusPrestacao" styleClass="mtop10">

                            <co:titulo-panel titulo="Prestação de Contas"/>
                            <h:panelGrid columns="2">
                                <h:outputText value="Data: "/>
                                <p:calendar id="dataPrestacao"
                                            value="#{convenioDespesaControlador.prestacaoContas.dataLancamento}"
                                            size="20"
                                            locale="pt_BR"
                                            onkeypress="mascara(this, mdata)"
                                            pattern="dd/MM/yyyy"
                                            navigator="true"
                                            title="Informe a data da Prestação de Contas"/>

                                <h:outputText value="Situação: "/>
                                <h:selectOneMenu title="Informe o Status da Prestação de Contas"
                                                 id="statusPrestacao"
                                                 style="width: 127px"
                                                 value="#{convenioDespesaControlador.prestacaoContas.tipoPrestacaoContas}">
                                    <f:selectItems value="#{convenioDespesaControlador.tipoDePrestacaoContas}"/>
                                </h:selectOneMenu>
                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             styleClass="padrao mtop20"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             image="ui-icon-circle-plus"
                                             actionListener="#{convenioDespesaControlador.adicionaStatusPrestacaoContas()}"
                                             update=":Formulario:tabViewGeral:panelStatusPrestacao :Formulario:tabViewGeral:tabelaStatusPrestacao"
                                             title="Clique para adicionar um Status da Prestação de Contas"/>

                            <p:dataTable value="#{convenioDespesaControlador.selecionado.prestacaoContas}"
                                         id="tabelaStatusPrestacao"
                                         var="prest"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>PRESTAÇÃO DE CONTAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Ação" style="text-align: center; width: 5%">
                                    <p:commandButton image="ui-icon-trash"
                                                     actionListener="#{convenioDespesaControlador.removeStatusPrestacaoContas}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     id="btnRemoverStatus"
                                                     update=":Formulario:tabViewGeral:tabelaStatusPrestacao">
                                        <f:attribute name="removeStatusPrestacao" value="#{prest}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{prest.dataLancamento}">
                                        <f:convertDateTime type="date"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Situação" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{prest.tipoPrestacaoContas.descricao}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>


                    <p:tab title="Ocorrências">

                        <p:panel id="panelOcorrencia">
                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Data: "/>
                                <p:calendar
                                    value="#{convenioDespesaControlador.tramiteConvenioDespSelecionado.dataTramite}"
                                    navigator="true"
                                    locale="pt_BR"
                                    pattern="dd/MM/yyyy"
                                    id="dataOcorrencia"
                                    title="Informe a Data da Ocorrência"
                                    onkeypress="mascara(this, mdata)"/>

                                <fc:outputLabelObrigatorio value="Ocorrência: "/>
                                <h:panelGroup>
                                    <p:autoComplete queryDelay="1000"
                                                    value="#{convenioDespesaControlador.tramiteConvenioDespSelecionado.ocorrenciaConvenioDesp}"
                                                    id="ocorrencia"
                                                    styleClass="mrig03"
                                                    size="70"
                                                    var="oco"
                                                    completeMethod="#{convenioDespesaControlador.completaOcorrencia}"
                                                    converter="#{ocorrenciaConvenioDespControlador.converterGenerico}"
                                                    itemLabel="#{oco}" itemValue="#{oco.id}" forceSelection="true"
                                                    title="Informe a Ocorrência"
                                                    style="margin-right: 4px"/>

                                    <fc:novoParente selecionado="#{convenioDespesaControlador.selecionado}"
                                                    destino="#{ocorrenciaConvenioDespControlador.caminhoPadrao}novo/"
                                                    origem="#{convenioDespesaControlador.caminhoPadrao}novo/"/>
                                </h:panelGroup>

                                <h:outputText value="Descrição: "/>
                                <h:panelGrid columns="2">
                                    <p:inputTextarea id="complementoHistorico" title="Informe o Histórico"
                                                     value="#{convenioDespesaControlador.tramiteConvenioDespSelecionado.descricao}"
                                                     cols="70" maxlength="3000"
                                                     style="margin-left: -3px"
                                                     autoResize="true" counterTemplate="{0} Caracteres Restantes."
                                                     counter="counter"/>
                                    <h:outputText id="counter"/>
                                </h:panelGrid>
                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             styleClass="padrao mtop20"
                                             icon="ui-icon-circle-plus"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             actionListener="#{convenioDespesaControlador.adicionaOcorrencia}"
                                             title="Clique para adicionar a ocorrência."
                                             update=":Formulario:tabViewGeral:panelOcorrencia"/>

                            <p:dataTable value="#{convenioDespesaControlador.selecionado.tramites}"
                                         id="tabelaOcorrencias"
                                         var="oco"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>OCORRÊNCIAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ações" style="text-align: center; width: 7%">
                                    <p:commandButton id="btnEditarOcorrencia"
                                                     icon="ui-icon-pencil"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     styleClass="mrig05"
                                                     process="@this"
                                                     title="Clique para editar este registro."
                                                     actionListener="#{convenioDespesaControlador.editarOcorrencia(oco)}"
                                                     update=":Formulario:tabViewGeral:panelOcorrencia">
                                    </p:commandButton>
                                    <p:commandButton image="ui-icon-trash"
                                                     actionListener="#{convenioDespesaControlador.removeOcorrencia}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     id="btnRemoveOcorrencia"
                                                     update=":Formulario:tabViewGeral:panelOcorrencia">
                                        <f:attribute name="removeOcorrencia" value="#{oco}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column style="width: 5%" headerText="Descrição">
                                    <p:rowToggler/>
                                </p:column>
                                <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{oco.dataTramite}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Ocorrência" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{oco.ocorrenciaConvenioDesp}"/>
                                </p:column>

                                <p:rowExpansion>
                                    <h:outputText value="Descrição: " styleClass="negrito mtop05"/>
                                    <h:outputText value="#{oco.descricao}"/>
                                </p:rowExpansion>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>

                    <p:tab title="Plano de Trabalho">
                        <p:panel id="panelPlanoDeTrabalho">

                            <h:panelGrid columns="2">
                                <h:outputText value="Número da Meta: "/>
                                <p:inputText value="#{convenioDespesaControlador.planoAplicacaoSelecionado.numero}"
                                             title="Informe um número"/>

                                <h:outputText value="Descrição: "/>
                                <p:inputText value="#{convenioDespesaControlador.planoAplicacaoSelecionado.descricao}"
                                             size="70"
                                             title="Informe uma descrição"/>

                                <fc:outputLabelObrigatorio value="Categoria de Despesa: "/>
                                <p:commandButton value="Selecionar Categoria de Despesa"
                                                 styleClass="padrao"
                                                 process="@this"
                                                 update=":formCategoria"
                                                 onstart="aguarde.show()"
                                                 oncomplete="dialogCategoria.show(); aguarde.hide();"
                                                 title="Clique para selecionar categorias de despesa."
                                                 icon="ui-icon-circle-plus"/>

                                <fc:outputLabelObrigatorio value="Elemento de Despesa: "/>
                                <p:commandButton value="Selecionar Elemento de Despesa"
                                                 styleClass="padrao"
                                                 process="@this"
                                                 update=":formElemento"
                                                 onstart="aguarde.show()"
                                                 oncomplete="dialogElementoDesp.show(); aguarde.hide();"
                                                 title="Clique para selecionar categorias de despesa."
                                                 icon="ui-icon-circle-plus"/>

                                <h:outputText value="Unidade de Medida: "/>
                                <h:selectOneMenu
                                    value="#{convenioDespesaControlador.planoAplicacaoSelecionado.unidadeMedida}"
                                    converter="#{unidadeMedidaControlador.converterGenerico}"
                                    id="uniMedida"
                                    title="Informe a Unidade de Medida do Plano de Trabalho">
                                    <f:selectItems value="#{convenioDespesaControlador.unidadeMedidas}"/>
                                </h:selectOneMenu>

                                <h:outputText value="Meta Física: " style="margin-right: 80px"/>
                                <p:inputText value="#{convenioDespesaControlador.planoAplicacaoSelecionado.metaFisica}"
                                             title="Informe a Meta Física do Plano de Trabalho"/>

                                <h:outputText value="Valor: "/>
                                <fc:inputMoeda
                                    value="#{convenioDespesaControlador.planoAplicacaoSelecionado.valorConvenioPlano}"
                                    id="valorPlano"
                                    title="Informe o Valor do Convênio no Plano de Trabalho"/>

                                <h:outputText value="Valor da Contrapartida: "/>
                                <fc:inputMoeda
                                    value="#{convenioDespesaControlador.planoAplicacaoSelecionado.valorContrapartidaPlano}"
                                    id="valorContraPlano"
                                    title="Informe o Valor da ContraPartida no Plano de Trabalho"/>
                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             id="btnAddPlano"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             actionListener="#{convenioDespesaControlador.adicionaPlanoAplicacao()}"
                                             styleClass="padrao mtop20"
                                             icon="ui-icon-circle-plus"
                                             update=":Formulario:tabViewGeral:panelPlanoDeTrabalho"
                                             title="Clique para Adicionar o Plano de Trabalho"/>

                            <p:dataTable value="#{convenioDespesaControlador.selecionado.planoAplicacoes}"
                                         id="tabelaPlano"
                                         var="plano"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>PLANOS DE TRABALHOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ações" style="text-align: center; width: 7%">
                                    <p:commandButton id="btnEditarPlano"
                                                     icon="ui-icon-pencil"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     styleClass="mrig05"
                                                     title="Clique para editar este registro."
                                                     actionListener="#{convenioDespesaControlador.editarPlanoAplicacao(plano)}"
                                                     update=":Formulario:tabViewGeral:panelPlanoDeTrabalho">
                                        <f:attribute id="removePlano" name="removePlano" value="#{plano}"/>
                                    </p:commandButton>
                                    <p:commandButton id="btnRemovePlano"
                                                     icon="ui-icon-trash"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     actionListener="#{convenioDespesaControlador.removePlano}"
                                                     update=":Formulario:tabViewGeral:panelPlanoDeTrabalho">
                                        <f:attribute id="removePlano" name="removePlano" value="#{plano}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Despesa"
                                          style="width: 5%"
                                          styleClass="alinhamentoCentralizado">
                                    <p:rowToggler/>
                                </p:column>
                                <p:column headerText="Número da Meta" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{plano.numero}"/>
                                </p:column>
                                <p:column headerText="Descrição" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{plano.descricao}"/>
                                </p:column>
                                <p:column headerText="Meta Física" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{plano.metaFisica}"/>
                                </p:column>
                                <p:column headerText="Unidade Medida" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{plano.unidadeMedida.descricao}"/>
                                </p:column>
                                <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{plano.valorConvenioPlano}"
                                                  converter="#{convenioDespesaControlador.moneyConverter}"/>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText
                                                value="#{convenioDespesaControlador.calcularTotalConvenioPlanoTrabalho()}"
                                                styleClass="negrito"
                                                converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                                <p:column headerText="Valor da Contrapartida (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{plano.valorContrapartidaPlano}"
                                                  converter="#{convenioDespesaControlador.moneyConverter}"/>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText
                                                value="#{convenioDespesaControlador.calcularTotalContrapartidaPlanoTrabalho()}"
                                                styleClass="negrito"
                                                converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>

                                <p:rowExpansion>
                                    <p:dataTable value="#{plano.listaCategoriaDespesas}"
                                                 var="cat"
                                                 emptyMessage="Não foram localizados registros para serem apresentados."
                                                 styleClass="mtop05">
                                        <p:columnGroup type="header">
                                            <p:row>
                                                <p:column rowspan="1" colspan="2"
                                                          headerText="CATEGORIAS DE DESPESAS"
                                                          style="color: #000000"
                                                          styleClass="negrito alinhamentoEsquerda"/>
                                            </p:row>
                                        </p:columnGroup>
                                        <p:column>
                                            <h:outputText value="#{cat.categoriaDespesa}"/>
                                        </p:column>

                                        <p:column styleClass="alinhamentoDireita">
                                            <h:outputText value="#{cat.valor}">
                                                <f:convertNumber type="currency"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <div align="right" style="color: #000000">
                                                    <h:outputText value="Total: " styleClass="negrito"/>
                                                    <h:outputText
                                                        value="#{convenioDespesaControlador.calcularTotalCategoriaDespesaNoPlanoTrabalho(plano)}"
                                                        styleClass="negrito"
                                                        converter="#{convenioDespesaControlador.moneyConverter}"/>
                                                </div>
                                            </f:facet>
                                        </p:column>
                                    </p:dataTable>

                                    <p:dataTable value="#{plano.listaElementosDespesa}"
                                                 var="e"
                                                 emptyMessage="Não foram localizados registros para serem apresentados."
                                                 styleClass="mtop10">

                                        <p:columnGroup type="header">
                                            <p:row>
                                                <p:column rowspan="1" colspan="2"
                                                          headerText="ELEMENTOS DE DESPESAS"
                                                          style="color: #000000"
                                                          styleClass="negrito alinhamentoEsquerda"/>
                                            </p:row>
                                        </p:columnGroup>
                                        <p:column>
                                            <h:outputText value="#{e.elementoDespesa}"/>
                                        </p:column>

                                        <p:column styleClass="alinhamentoDireita">
                                            <h:outputText value="#{e.valor}">
                                                <f:convertNumber type="currency"/>
                                            </h:outputText>
                                            <f:facet name="footer">
                                                <div align="right" style="color: #000000">
                                                    <h:outputText value="Total: " styleClass="negrito"/>
                                                    <h:outputText
                                                        value="#{convenioDespesaControlador.calcularTotalElementoDespesaNoPlanoTrabalho(plano)}"
                                                        styleClass="negrito"
                                                        converter="#{convenioDespesaControlador.moneyConverter}"/>
                                                </div>
                                            </f:facet>
                                        </p:column>
                                    </p:dataTable>
                                    <br/>
                                </p:rowExpansion>
                            </p:dataTable>
                        </p:panel>

                        <p:panel id="panelCronograma" styleClass="mtop20">

                            <co:titulo-panel titulo="Cronograma de Desembolso"/>
                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Data: "/>
                                <p:calendar id="dataCrono"
                                            navigator="true"
                                            value="#{convenioDespesaControlador.cronogramaDesembolsoSelecionado.dataCronograma}"
                                            pattern="dd/MM/yyyy"
                                            onkeypress="mascara(this, mdata)"
                                            title="Informe a data do cronograma."/>

                                <h:outputText value="Valor do Convênio: " style="margin-right: 45px"/>
                                <fc:inputMoeda
                                    value="#{convenioDespesaControlador.cronogramaDesembolsoSelecionado.valorConvenioCronograma}"
                                    id="valorConCronograma"
                                    title="Informe o valor do convênio do cronograma."/>

                                <h:outputText value="Valor da Contrapartida: "/>
                                <fc:inputMoeda
                                    value="#{convenioDespesaControlador.cronogramaDesembolsoSelecionado.valorConvenioContapartida}"
                                    id="valorContraCronograma"
                                    title="Informe o Valor de Contrapartida do Cronograma."/>
                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             styleClass="padrao mtop20"
                                             icon="ui-icon-circle-plus"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             actionListener="#{convenioDespesaControlador.adicionaCronograma()}"
                                             update=":Formulario:tabViewGeral:panelCronograma"
                                             title="Clique para adicionar o cronograma de desembolso."/>

                            <p:dataTable value="#{convenioDespesaControlador.selecionado.cronogramaDesembolsos}"
                                         id="tabelaCronograma"
                                         var="cro"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>CRONOGRAMAS DE DESEMBOLSOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ação" style="text-align: center; width: 5%">
                                    <p:commandButton image="ui-icon-trash"
                                                     actionListener="#{convenioDespesaControlador.removeCronograma}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     id="btnRemoveCronograma"
                                                     update=":Formulario:tabViewGeral:panelCronograma">
                                        <f:attribute name="removeCrono" value="#{cro}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Data do Cronograma" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{cro.dataCronograma}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor do Convênio (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{cro.valorConvenioCronograma}"
                                                  converter="#{convenioDespesaControlador.moneyConverter}"/>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText
                                                value="#{convenioDespesaControlador.calcularTotalConvenioCronogramaDesembolso()}"
                                                styleClass="negrito"
                                                converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                                <p:column headerText="Valor da Contrapartida (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{cro.valorConvenioContapartida}"
                                                  converter="#{convenioDespesaControlador.moneyConverter}"/>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText
                                                value="#{convenioDespesaControlador.calcularTotalContrapartidaCronogramaDesembolso()}"
                                                styleClass="negrito"
                                                converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                            </p:dataTable>

                        </p:panel>
                    </p:tab>


                    <p:tab id="tabAdit" title="Aditivos">
                        <p:panel id="painelAditivos" styleClass="mtop10">

                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Número: "/>
                                <p:inputText id="numeroAditivo"
                                             value="#{convenioDespesaControlador.aditivos.numero}"
                                             title="Informe o número"/>

                                <fc:outputLabelObrigatorio value="Descrição: " id="descri"/>
                                <p:inputText value="#{convenioDespesaControlador.aditivos.descricao}"
                                             title="Informe a descrição."
                                             size="70"/>

                                <h:outputText value="Valor do Aditivo: " style="margin-right: 60px"/>
                                <fc:inputMoeda title="Informe o valor Aditivo"
                                               id="valorAditivo"
                                               value="#{convenioDespesaControlador.aditivos.valorAditivo}"/>

                                <h:outputText value="Valor da Contrapartida: "/>
                                <fc:inputMoeda title="Informe o valor da Contrapartida"
                                               id="valorContrapartida"
                                               value="#{convenioDespesaControlador.aditivos.valorContrapartida}"/>

                                <h:outputText value="Início de Vigência: "/>
                                <p:calendar id="vigenciaIni"
                                            value="#{convenioDespesaControlador.aditivos.dataIniVigencia}"
                                            title="Informe a Vigência Inicial"
                                            onkeypress="mascara(this, mdata)"
                                            locale="pt_BR"
                                            pattern="dd/MM/yyyy"
                                            navigator="true"/>

                                <h:outputText value="Fim de Vigência: "/>
                                <p:calendar id="vigenciaFim"
                                            value="#{convenioDespesaControlador.aditivos.dataFimVigencia}"
                                            title="Informe a Vigência Final"
                                            onkeypress="mascara(this, mdata)"
                                            locale="pt_BR"
                                            pattern="dd/MM/yyyy"
                                            navigator="true"/>
                            </h:panelGrid>

                            <p:commandButton id="btnAddAditi"
                                             value="Adicionar"
                                             icon="ui-icon-circle-plus"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao mtop10"
                                             actionListener="#{convenioDespesaControlador.adicionaAditivos()}"
                                             title="Clique para adicionar um Aditivo"
                                             update=":Formulario:tabViewGeral:painelAditivos :Formulario:tabViewGeral:panelValoresConvenio
                         :Formulario:tabViewGeral:dtVigenciaFinal"/>

                            <p:dataTable id="tableAditi"
                                         value="#{convenioDespesaControlador.selecionado.aditivosConvenioDespesas}"
                                         var="aditivo"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ADITIVOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ações" style="text-align: center; width: 7%">
                                    <p:commandButton id="btnEditarAditivo"
                                                     icon="ui-icon-pencil"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     styleClass="mrig05"
                                                     process="@this"
                                                     title="Clique para editar este registro."
                                                     actionListener="#{convenioDespesaControlador.editarAditivo(aditivo)}"
                                                     update=":Formulario:tabViewGeral:painelAditivos ">
                                    </p:commandButton>
                                    <p:commandButton id="btnRemoveAditi"
                                                     icon="ui-icon-trash"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     actionListener="#{convenioDespesaControlador.removerAditivos}"
                                                     update=":Formulario:tabViewGeral:tableAditi :Formulario:tabViewGeral:valorConvenio
                                 :Formulario:tabViewGeral:dtVigenciaFinal :Formulario:tabViewGeral:valorContra :Formulario:tabViewGeral:valorRepasse">
                                        <f:attribute id="removeAditi" name="removeAditi" value="#{aditivo}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Número" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{aditivo.aditivos.numero}"/>
                                </p:column>
                                <p:column headerText="Descrição" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{aditivo.aditivos.descricao}"/>
                                </p:column>
                                <p:column headerText="Vigência Inicial" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{aditivo.aditivos.dataIniVigencia}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Vigência Final" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{aditivo.aditivos.dataFimVigencia}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor do Aditivo (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{aditivo.aditivos.valorAditivo}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText value="#{convenioDespesaControlador.calcularTotalAditivo()}"
                                                          styleClass="negrito"
                                                          converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                                <p:column headerText="Valor da Contrapartida (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{aditivo.aditivos.valorContrapartida}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText
                                                value="#{convenioDespesaControlador.calcularTotalAditivoContrapartida()}"
                                                styleClass="negrito"
                                                converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>

                    <p:tab id="tab3" title="Execução Orçamentária">
                        <p:tabView id="tabViewExecucao">
                            <p:tab id="tabEmpenho" title="Empenho">
                                <p:dataTable id="tabelaEmpenho"
                                             value="#{convenioDespesaControlador.listaEmpenhos}"
                                             var="e"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>EMPENHOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{e.dataEmpenho}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{e.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{e.valor}"
                                                      converter="#{convenioDespesaControlador.moneyConverter}"/>

                                        <f:facet name="footer">
                                            <div style="text-align: right">
                                                <h:outputText value="Total: " styleClass="mlef05"/>
                                                <h:outputText value="#{convenioDespesaControlador.somaEmpenhos}"
                                                              converter="#{convenioDespesaControlador.moneyConverter}"/>
                                            </div>
                                        </f:facet>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabEmpenhoEstorno" title="Estorno de Empenho">
                                <p:dataTable id="tabelaEmpenhoEstorno"
                                             value="#{convenioDespesaControlador.listaEmpenhoEstorno}"
                                             var="e"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE EMPENHOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{e.dataEstorno}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{e.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{e.valor}"
                                                      converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        <f:facet name="footer">
                                            <div style="text-align: right">
                                                <h:outputText value="Total: " styleClass="mlef05"/>
                                                <h:outputText value="#{convenioDespesaControlador.somaEstornoEmpenhos}"
                                                              converter="#{convenioDespesaControlador.moneyConverter}"/>
                                            </div>
                                        </f:facet>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabLiquidacao" title="Liquidação">
                                <p:dataTable id="tabelaLiquidacao"
                                             value="#{convenioDespesaControlador.listaLiquidacao}"
                                             var="l"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>LIQUIDAÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{l.dataLiquidacao}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.valor}"
                                                      converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        <f:facet name="footer">
                                            <div style="text-align: right">
                                                <h:outputText value="Total: " styleClass="mlef05"/>
                                                <h:outputText value="#{convenioDespesaControlador.somaLiquidacoes}"
                                                              converter="#{convenioDespesaControlador.moneyConverter}"/>
                                            </div>
                                        </f:facet>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabLiquidacaoEstorno" title="Estorno de Liquidação">
                                <p:dataTable id="tabelaLiquidacaoEstorno"
                                             value="#{convenioDespesaControlador.listaLiquidacaoEstorno}"
                                             var="l"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE LIQUIDAÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{l.dataEstorno}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.valor}"
                                                      converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        <f:facet name="footer">
                                            <div style="text-align: right">
                                                <h:outputText value="Total: " styleClass="mlef05"/>
                                                <h:outputText
                                                    value="#{convenioDespesaControlador.somaEstornoLiquidacoes}"
                                                    converter="#{convenioDespesaControlador.moneyConverter}"/>
                                            </div>
                                        </f:facet>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabPagamento" title="Pagamento">
                                <p:dataTable id="tabelaPagamento"
                                             value="#{convenioDespesaControlador.listaPagamento}"
                                             var="p"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>PAGAMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{p.dataPagamento}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.numeroPagamento}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.valor}"
                                                      converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        <f:facet name="footer">
                                            <div style="text-align: right">
                                                <h:outputText value="Total: " styleClass="mlef05"/>
                                                <h:outputText value="#{convenioDespesaControlador.somaPagamentos}"
                                                              converter="#{convenioDespesaControlador.moneyConverter}"/>
                                            </div>
                                        </f:facet>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabPagamentoEstorno" title="Estorno de Pagamento">
                                <p:dataTable id="tabelaPagamentoEstorno"
                                             value="#{convenioDespesaControlador.listaPagamentoEstorno}"
                                             var="p"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE PAGAMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data " styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{p.dataEstorno}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.valor}"
                                                      converter="#{convenioDespesaControlador.moneyConverter}"/>
                                        <f:facet name="footer">
                                            <div style="text-align: right">
                                                <h:outputText value="Total: " styleClass="mlef05"/>
                                                <h:outputText
                                                    value="#{convenioDespesaControlador.somaEstornoPagamentos}"
                                                    converter="#{convenioDespesaControlador.moneyConverter}"/>
                                            </div>
                                        </f:facet>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                        </p:tabView>
                    </p:tab>
                    <p:tab title="Anexos">
                        <p:panel styleClass="semBorda">
                            <fc:outputLabelObrigatorio value="Arquivo anexo:"/>
                        </p:panel>
                        <fc:filesUploadWP selecionado="#{convenioDespesaControlador.selecionado}"
                                          anexoNovaAba="true"/>
                    </p:tab>
                </p:tabView>
            </p:panel>

            <fc:rodapePretty controlador="#{convenioDespesaControlador}"/>
        </h:form>

        <p:dialog widgetVar="dialogCategoria"
                  position="center"
                  width="1000"
                  dynamic="true"
                  modal="true"
                  style="position: fixed !important;"
                  closable="true"
                  resizable="true">

            <h:form id="formCategoria">
                <p:panel header="Categoria de Despesa" styleClass="mtop03">

                    <h:panelGrid columns="2" id="panelCategoria">
                        <fc:outputLabelObrigatorio value="Categoria de Despesa: "/>
                        <h:panelGroup>
                            <p:autoComplete queryDelay="1000"
                                            value="#{convenioDespesaControlador.categoriaDespesaSelecionada.categoriaDespesa}"
                                            completeMethod="#{convenioDespesaControlador.completaCategoriaDespesa}"
                                            converter="#{categoriaDespesaControlador.converterGenerico}"
                                            var="cat"
                                            itemLabel="#{cat}"
                                            itemValue="#{cat.id}"
                                            id="categoriaDespesa"
                                            size="70"
                                            title="Informe a categoria de despesa."
                                            style="margin-right: 4px"/>

                            <fc:novoParente selecionado="#{convenioDespesaControlador.selecionado}"
                                            destino="#{categoriaDespesaControlador.caminhoPadrao}novo/"
                                            origem="#{convenioDespesaControlador.caminhoPadrao}novo/"/>
                        </h:panelGroup>

                        <fc:outputLabelObrigatorio value="Valor: "/>
                        <fc:inputMoeda id="valorCategoria"
                                       value="#{convenioDespesaControlador.categoriaDespesaSelecionada.valor}"/>
                    </h:panelGrid>

                    <p:commandButton value="Adicionar"
                                     id="btnAddCategoria"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{convenioDespesaControlador.adicionarCategoriaDespesa()}"
                                     styleClass="padrao mtop20 mrig05"
                                     icon="ui-icon-circle-plus"
                                     update=":formCategoria"
                                     title="Clique para adicionar a categoria de despesa."/>

                    <p:commandButton value="Confirmar"
                                     id="btConfirmar"
                                     onstart="aguarde.show()"
                                     oncomplete="dialogCategoria.hide();aguarde.hide()"
                                     process="@this"
                                     styleClass="padrao mtop20"
                                     icon="ui-icon-circle-check"
                                     title="Clique para confirmar as despesa adicionadas."/>

                    <p:dataTable id="tabelaCategorias"
                                 value="#{convenioDespesaControlador.planoAplicacaoSelecionado.listaCategoriaDespesas}"
                                 var="cat"
                                 styleClass="mtop03"
                                 rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                 paginator="true"
                                 rows="10"
                                 paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>CATEGORIAS DE DESPESAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                 emptyMessage="Não foram localizados registros para serem apresentados."
                                 rowIndexVar="rowlx">
                        <p:column headerText="Ações" style="text-align: center; width: 5%">
                            <p:commandButton id="btnEditarCategoria"
                                             icon="ui-icon-pencil"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             process="@this"
                                             styleClass="mrig05"
                                             title="Clique para editar este registro."
                                             actionListener="#{convenioDespesaControlador.editarCategoriaDespesa(cat)}"
                                             update=":formCategoria">
                            </p:commandButton>
                            <p:commandButton id="btnRemoveCategoria"
                                             icon="ui-icon-trash"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             process="@this"
                                             title="Clique para remover este registro."
                                             onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                             actionListener="#{convenioDespesaControlador.removerCategoriaDespesa}"
                                             update=":formCategoria">
                                <f:attribute id="removeCategoria" name="removeCategoria" value="#{cat}"/>
                            </p:commandButton>
                        </p:column>
                        <p:column headerText="Categoria da Despesa" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{cat.categoriaDespesa}"/>
                        </p:column>
                        <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                            <h:outputText value="#{cat.valor}">
                                <f:convertNumber type="currency"/>
                            </h:outputText>
                            <f:facet name="footer">
                                <div align="right">
                                    <h:outputText value="Total: " styleClass="negrito"/>
                                    <h:outputText value="#{convenioDespesaControlador.calcularTotalCategoriaDespesa()}"
                                                  styleClass="negrito"
                                                  converter="#{convenioDespesaControlador.moneyConverter}"/>
                                </div>
                            </f:facet>
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dialogElementoDesp"
                  position="center"
                  width="1000"
                  dynamic="true"
                  modal="true"
                  style="position: fixed !important;"
                  closable="true"
                  resizable="true">

            <h:form id="formElemento">
                <p:panel header="Elemento de Despesa" styleClass="mtop03">

                    <h:panelGrid columns="2" id="panelElemento">
                        <fc:outputLabelObrigatorio value="Elemento de Despesa: "/>
                        <p:autoComplete queryDelay="1000"
                                        value="#{convenioDespesaControlador.elementoDespesaSelecionado.elementoDespesa}"
                                        id="contaDespesa"
                                        completeMethod="#{convenioDespesaControlador.completaContaDespesa}"
                                        converter="#{planoDeContasWizardControlador.converterConta}"
                                        maxResults="10"
                                        var="conta"
                                        itemLabel="#{conta}"
                                        itemValue="#{conta.id}"
                                        size="70"
                                        title="Informe a conta de despesa."/>

                        <fc:outputLabelObrigatorio value="Valor: "/>
                        <fc:inputMoeda id="valorElemento"
                                       value="#{convenioDespesaControlador.elementoDespesaSelecionado.valor}"/>
                    </h:panelGrid>

                    <p:commandButton value="Adicionar"
                                     id="btnAddElemento"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{convenioDespesaControlador.adicionarElementoDespesa()}"
                                     styleClass="padrao mtop20 mrig05"
                                     icon="ui-icon-circle-plus"
                                     update=":formElemento"
                                     title="Clique para adicionar um elemento de despesa."/>

                    <p:commandButton value="Confirmar"
                                     id="btConfirmarElemento"
                                     onstart="aguarde.show()"
                                     oncomplete="dialogElementoDesp.hide();aguarde.hide()"
                                     process="@this"
                                     styleClass="padrao mtop20"
                                     icon="ui-icon-circle-check"
                                     title="Clique para confirmar o elementos de desepesas adicionados."/>

                    <p:dataTable id="tabelaElementosDesp"
                                 value="#{convenioDespesaControlador.planoAplicacaoSelecionado.listaElementosDespesa}"
                                 var="elem"
                                 styleClass="mtop03"
                                 rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                 paginator="true"
                                 rows="10"
                                 paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ELEMENTOS DE DESPESAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                 emptyMessage="Não foram localizados registros para serem apresentados."
                                 rowIndexVar="rowlx">
                        <p:column headerText="Ações" style="text-align: center;">
                            <p:commandButton id="btnEditarElemento"
                                             icon="ui-icon-pencil"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             process="@this"
                                             styleClass="mrig05"
                                             title="Clique para editar este registro."
                                             actionListener="#{convenioDespesaControlador.editarElementoDespesa(elem)}"
                                             update=":formElemento">
                            </p:commandButton>
                            <p:commandButton id="btnRemoveElemento"
                                             icon="ui-icon-trash"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             process="@this"
                                             title="Clique para remover este registro."
                                             onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                             actionListener="#{convenioDespesaControlador.removerElementoDespesa}"
                                             update=":formElemento">
                                <f:attribute id="removeElemento" name="removeElemento" value="#{elem}"/>
                            </p:commandButton>
                        </p:column>
                        <p:column headerText="Elemento de Despesa" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{elem.elementoDespesa}"/>
                        </p:column>
                        <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                            <h:outputText value="#{elem.valor}">
                                <f:convertNumber type="currency"/>
                            </h:outputText>
                            <f:facet name="footer">
                                <div align="right">
                                    <h:outputText value="Total: " styleClass="negrito"/>
                                    <h:outputText value="#{convenioDespesaControlador.calcularTotalElementoDespesa()}"
                                                  styleClass="negrito"
                                                  converter="#{convenioDespesaControlador.moneyConverter}"/>
                                </div>
                            </f:facet>
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
</html>
