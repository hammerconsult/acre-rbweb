<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:co="http://java.sun.com/jsf/composite/components/contabil"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">

        <h:form id="Formulario">
            <fc:cabecalhoPretty id="cabecalhoEdita"
                                controlador="#{convenioReceitaControlador}"
                                origem="#{convenioReceitaControlador.caminhoPadrao}listar/"/>

            <p:panel id="painelConvRec" header="Cadastro de Convênio de Receita">

                <p:tabView id="tabGeral" styleClass="mtop05">
                    <p:tab id="tabCadastro" title="Convênio de Receita">
                        <h:panelGrid columns="2">
                            <h:outputText value="Número do Convênio: " style="margin-right: 75px"/>
                            <h:panelGroup>
                                <p:inputText value="#{convenioReceitaControlador.selecionado.numero}"
                                             readonly="true"
                                             size="22"
                                             id="numero"
                                             title="Número do convênio gerado automaticamente."/>
                                <p:watermark value="Gerado Automaticamente" for="numero"/>
                            </h:panelGroup>

                            <fc:outputLabelObrigatorio value="Nome do Projeto: "/>
                            <h:panelGrid columns="2">
                                <p:inputTextarea title="Informe o nome do projeto."
                                                 autoResize="true"
                                                 cols="70"
                                                 rows="3"
                                                 maxlength="255"
                                                 style="margin-left: -3px"
                                                 value="#{convenioReceitaControlador.selecionado.nomeConvenio}"
                                                 id="nomeProjeto"
                                                 counterTemplate="{0} Caracteres Restantes."
                                                 counter="counterNomeProj"/>
                                <h:outputText id="counterNomeProj"/>
                            </h:panelGrid>

                            <fc:outputLabelObrigatorio value="Tipo de Convênio: "/>
                            <h:selectOneMenu title="Selecione um tipo de convênio."
                                             id="tipoConvenioReceita"
                                             value="#{convenioReceitaControlador.selecionado.tipoConvenioReceita}">
                                <f:selectItems value="#{convenioReceitaControlador.tipoConvenio}"/>
                            </h:selectOneMenu>

                            <h:outputText value="Situação: "/>
                            <h:selectOneMenu
                                value="#{convenioReceitaControlador.selecionado.situacaoCadastralContabil}">
                                <f:selectItems value="#{convenioReceitaControlador.situacoesCadastrais}"/>
                            </h:selectOneMenu>

                            <fc:outputLabelObrigatorio value="Entidade Concedente: "/>
                            <h:panelGrid columns="2">
                                <p:autoComplete queryDelay="1000" id="entidadeRepassadora"
                                                title="Informe a entidade concedente."
                                                style="margin-left: -4px"
                                                styleClass="mrig03"
                                                value="#{convenioReceitaControlador.selecionado.entidadeRepassadora}"
                                                converter="#{convenioReceitaControlador.converterEntidadeRepassadora}"
                                                completeMethod="#{convenioReceitaControlador.completaEntidadeRepassadora}"
                                                var="er"
                                                itemValue="#{er.id}"
                                                itemLabel="#{er}"
                                                size="70"/>

                                <fc:novoParente origem="#{convenioReceitaControlador.caminhoPadrao}novo/"
                                                destino="#{entidadeRepassadoraControlador.caminhoPadrao}novo/"
                                                selecionado="#{convenioReceitaControlador.selecionado}"/>
                            </h:panelGrid>


                            <h:outputText value="Objeto do Convênio:"/>
                            <h:panelGrid columns="2">
                                <p:inputTextarea title="Informe o objeto do convênio."
                                                 autoResize="true"
                                                 cols="70"
                                                 maxlength="3000"
                                                 style="margin-left: -3px"
                                                 value="#{convenioReceitaControlador.selecionado.objetoConvenio}"
                                                 id="objetoConvenio"
                                                 counterTemplate="{0} Caracteres Restantes."
                                                 counter="counterObjt"/>
                                <h:outputText id="counterObjt"/>
                            </h:panelGrid>

                            <fc:outputLabelObrigatorio value="Data da Assinatura: "/>
                            <p:calendar id="dataAss"
                                        value="#{convenioReceitaControlador.selecionado.dataAssinatura}"
                                        title="Informe a data da assinatura do convênio."
                                        onkeypress="mascara(this, mdata)"
                                        locale="pt_BR"
                                        pattern="dd/MM/yyyy"
                                        navigator="true"/>

                            <fc:outputLabelObrigatorio value="Número do Termo: "/>
                            <p:inputText title="Informe o número do termo do convênio."
                                         id="numeroTermo"
                                         maxlength="70"
                                         size="20"
                                         value="#{convenioReceitaControlador.selecionado.numeroTermo}"/>

                            <h:outputText value="Número do Diário Oficial: "/>
                            <p:inputText title="Informe o número do diário oficial."
                                         id="numeroDiarioOficial"
                                         maxlength="70"
                                         size="20"
                                         value="#{convenioReceitaControlador.selecionado.numeroDiarioOficial}"/>

                            <h:outputText value="Data do Diário Oficial: "/>
                            <p:calendar id="dataDiarioOficial"
                                        value="#{convenioReceitaControlador.selecionado.dataDiarioOficial}"
                                        title="Informe a data do diário oficial."
                                        onkeypress="mascara(this, mdata)"
                                        locale="pt_BR"
                                        pattern="dd/MM/yyyy"
                                        navigator="true"/>

                            <h:outputText value="Código do Cadastro no TCE: "/>
                            <p:inputText title="Informe o código do cadastro no TCE."
                                         id="codigoCadTce"
                                         maxlength="70"
                                         size="70"
                                         value="#{convenioReceitaControlador.selecionado.codigoCadTce}"/>

                            <h:outputText value="Destinação do Recurso: "/>
                            <h:selectOneMenu title="Selecione a destinação do recurso."
                                             id="destinacaoRecurso"
                                             value="#{convenioReceitaControlador.selecionado.destinacaoRecurso}">
                                <f:selectItems value="#{convenioReceitaControlador.destinacaoRecurso}"/>
                            </h:selectOneMenu>
                        </h:panelGrid>


                        <h:panelGrid columns="4" id="panelValoresConvenio">
                            <fc:outputLabelObrigatorio value="Valor do Convênio: "/>
                            <p:inputText value="#{convenioReceitaControlador.selecionado.valorConvenio}"
                                         converter="#{convenioReceitaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         title="Informe o valor total do Convênio de Despesa."
                                         styleClass="alinhamentoDireita mrig50"
                                         id="valorConvenio">
                                <p:ajax event="blur"
                                        listener="#{convenioReceitaControlador.calcularValorRepasse}"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        update="valorRepasse"/>
                            </p:inputText>

                            <h:outputText value="Valor do Convênio Aditivado: "/>
                            <p:inputText value="#{convenioReceitaControlador.selecionado.valorConvenioAditivado}"
                                         converter="#{convenioReceitaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         title="Informe o valor do convênio aditivado."
                                         styleClass="alinhamentoDireita"
                                         id="valorConvenioAdit">
                                <p:ajax event="blur"
                                        listener="#{convenioReceitaControlador.calcularValorRepasseAditivado}"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        update="valorRepasseAdit"/>
                            </p:inputText>

                            <h:outputText value="Valor da Contrapartida: " style="margin-right: 63px"/>
                            <p:inputText value="#{convenioReceitaControlador.selecionado.valorContrapartida}"
                                         converter="#{convenioReceitaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         styleClass="alinhamentoDireita mrig50"
                                         title="Informe o valor da contrapartida."
                                         id="valorContra">
                                <p:ajax event="blur"
                                        listener="#{convenioReceitaControlador.calcularValorRepasse}"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        update="valorRepasse"/>
                            </p:inputText>

                            <h:outputText value="Valor da Contrapartida Aditivada: "/>
                            <p:inputText value="#{convenioReceitaControlador.selecionado.valorContrapartidaAditivada}"
                                         converter="#{convenioReceitaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         title="Informe o valor da contrapartida aditivada."
                                         styleClass="alinhamentoDireita"
                                         id="valorContrapartidaAdit">
                                <p:ajax event="blur"
                                        listener="#{convenioReceitaControlador.calcularValorRepasseAditivado}"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        update="valorRepasseAdit"/>
                            </p:inputText>

                            <h:outputText value="Valor de Repasse: "/>
                            <p:inputText value="#{convenioReceitaControlador.selecionado.valorRepasse}"
                                         title="Valor de repasse um campo calculado."
                                         readonly="true"
                                         styleClass="alinhamentoDireita mrig50"
                                         converter="#{convenioReceitaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         id="valorRepasse"/>

                            <h:outputText value="Valor de Repasse Aditivado: "/>
                            <p:inputText value="#{convenioReceitaControlador.selecionado.valorRepasseAditivado}"
                                         converter="#{convenioReceitaControlador.moneyConverter}"
                                         onkeydown="mascaraMonetaria(this)"
                                         title="Informe o valor de repasse aditivado."
                                         styleClass="alinhamentoDireita"
                                         id="valorRepasseAdit"/>
                        </h:panelGrid>

                        <h:panelGrid columns="4">
                            <fc:outputLabelObrigatorio value="Vigência Inicial: "/>
                            <p:calendar id="vigenciaInicial"
                                        value="#{convenioReceitaControlador.selecionado.vigenciaInicial}"
                                        style="margin-left: 11px"
                                        title="Informe a vigência inicial do convênio."
                                        onkeypress="mascara(this, mdata)"
                                        locale="pt_BR"
                                        pattern="dd/MM/yyyy"
                                        navigator="true"/>

                            <fc:outputLabelObrigatorio value="Vigência Final: " style="margin-left: 50px"/>
                            <p:calendar id="vigenciaFinal"
                                        value="#{convenioReceitaControlador.selecionado.vigenciaFinal}"
                                        title="Informe a vigência final do convênio."
                                        style="margin-left: 82px"
                                        onkeypress="mascara(this, mdata)"
                                        locale="pt_BR"
                                        pattern="dd/MM/yyyy"
                                        navigator="true"
                                        validator="#{convenioReceitaControlador.validarDatas}">
                                <p:ajax event="dateSelect" update=":Formulario:tabGeral:vigenciaFinal" process="@this"/>
                                <p:ajax event="valueChange" update=":Formulario:tabGeral:vigenciaFinal" process="@this"/>
                            </p:calendar>

                            <fc:outputLabelObrigatorio value="Data Final Prestação de Contas: "/>
                            <p:calendar id="prestacaoFinal"
                                        style="margin-left: 11px"
                                        value="#{convenioReceitaControlador.selecionado.dataPrestacaoContas}"
                                        title="Informe a data final prevista para prestação de contas"
                                        onkeypress="mascara(this, mdata)"
                                        locale="pt_BR"
                                        pattern="dd/MM/yyyy"
                                        navigator="true"/>

                            <h:outputText value="Periodicidade: " style="margin-left: 50px"/>
                            <h:panelGrid columns="3" cellpadding="0" cellspacing="0">
                                <h:selectOneMenu value="#{convenioReceitaControlador.selecionado.periodicidade}"
                                                 style="width: 126px; margin-left: 82px"
                                                 styleClass="mrig03"
                                                 converter="#{convenioReceitaControlador.converterPeriodicidade}"
                                                 id="periodicidade"
                                                 title="Informe a Periodicidade">
                                    <f:selectItems value="#{convenioReceitaControlador.periodicidades}"/>
                                </h:selectOneMenu>

                                <fc:novoParente destino="#{periodicidadeControlador.caminhoPadrao}novo/"
                                                origem="#{convenioReceitaControlador.caminhoPadrao}novo/"
                                                rendered="#{!convenioReceitaControlador.verificaEdicao}"
                                                selecionado="#{convenioReceitaControlador.selecionado}"
                                                styleClass="vinteLargura botao_azul icone_branco"/>
                            </h:panelGrid>
                        </h:panelGrid>

                        <h:panelGrid columns="2">
                            <h:outputText value="Prazo p/ Solicitação de Prorrogação: "/>
                            <p:calendar title="Informe a Prazo para Solicitação de Prorrogação"
                                        id="qntDiaPro"
                                        locale="pt_BR"
                                        navigator="true"
                                        pattern="dd/MM/yyyy"
                                        onkeypress="mascara(this, mdata)"
                                        size="20"
                                        value="#{convenioReceitaControlador.selecionado.qtdeDiaPro}"/>

                            <fc:outputLabelObrigatorio value="Convenente: "/>
                            <p:autoComplete queryDelay="1000" id="autocompleteUnidadeConvenete"
                                            var="uc"
                                            itemValue="#{uc.id}"
                                            itemLabel="#{uc}"
                                            size="70"
                                            maxResults="10"
                                            forceSelection="true"
                                            title="Informe o campo convenente."
                                            converter="#{convenioReceitaControlador.converterUnidadeOrganizacional}"
                                            completeMethod="#{convenioReceitaControlador.completaUnidadeConvenente}"
                                            value="#{convenioReceitaControlador.selecionado.entidadeConvenente}"/>
                        </h:panelGrid>

                        <p:panel id="painelOrigem" styleClass="mtop10">
                            <co:titulo-panel titulo="Origem"/>
                            <h:panelGrid columns="2">
                                <h:outputText value="Pertence a Emenda Parlamentar? "/>
                                <p:selectBooleanCheckbox value="#{convenioReceitaControlador.pertenceEmenda}">
                                    <p:ajax event="change" process="@this" update="labelOrigem autoOrigem"
                                            listener="#{convenioReceitaControlador.limparOrigem()}"/>
                                </p:selectBooleanCheckbox>

                                <h:panelGroup id="labelOrigem">
                                    <h:outputText value="Programa: "
                                                  rendered="#{!convenioReceitaControlador.pertenceEmenda}"/>

                                    <fc:outputLabelObrigatorio value="Emenda: "
                                                               rendered="#{convenioReceitaControlador.pertenceEmenda}"/>
                                </h:panelGroup>
                                <h:panelGroup id="autoOrigem">
                                    <p:autoComplete queryDelay="1000"
                                                    title="Selecione um programa."
                                                    value="#{convenioReceitaControlador.selecionado.programaGoverno}"
                                                    converter="#{programaGovernoControlador.converterGenerico}"
                                                    completeMethod="#{programaGovernoControlador.completarProgramasPorNome}"
                                                    rendered="#{!convenioReceitaControlador.pertenceEmenda}"
                                                    var="pg"
                                                    itemLabel="#{pg}"
                                                    itemValue="#{pg.id}"
                                                    maxResults="10"
                                                    scrollHeight="200"
                                                    size="70"/>

                                    <p:autoComplete queryDelay="1000"
                                                    title="Selecione uma emenda."
                                                    value="#{convenioReceitaControlador.selecionado.emendaGoverno}"
                                                    converter="#{emendaGovernoControlador.converterGenerico}"
                                                    completeMethod="#{emendaGovernoControlador.completarEmendasPorNumeroOuDescricao}"
                                                    rendered="#{convenioReceitaControlador.pertenceEmenda}"
                                                    var="eg"
                                                    itemLabel="#{eg.toStringAutoComplete()}"
                                                    itemValue="#{eg.id}"
                                                    maxResults="10"
                                                    scrollHeight="200"
                                                    size="70"/>
                                </h:panelGroup>
                            </h:panelGrid>
                        </p:panel>

                        <p:panel id="painelInter" styleClass="mtop10">
                            <co:titulo-panel titulo="Unidade Executora"/>
                            <h:panelGrid columns="2" cellpadding="3">
                                <fc:outputLabelObrigatorio for="pessoa" value="Pessoa: "/>
                                <h:panelGrid columns="5">
                                    <p:autoComplete queryDelay="1000" id="pessoa" size="70"
                                                    title="Informe a Pessoa"
                                                    value="#{convenioReceitaControlador.selecionado.pessoa}"
                                                    completeMethod="#{convenioReceitaControlador.completaPessoa}"
                                                    converter="#{convenioReceitaControlador.converterPessoa}"
                                                    maxResults="10"
                                                    styleClass="mrig03"
                                                    forceSelection="true"
                                                    onkeyup="keyUpLimparEsconderDesabilidarCampo(this, 'classeCredor_input', true, false, true);"
                                                    var="p" itemValue="#{p.id}"
                                                    itemLabel="#{p} (#{p.situacaoCadastralPessoa})">
                                        <p:ajax update="classeCredor" event="itemSelect"/>
                                        <p:ajax event="itemSelect" process="@this" update="compCamposPessoa pessoa"/>
                                    </p:autoComplete>

                                    <p:outputPanel id="compCamposPessoa">
                                        <fc:novoParente origem="#{convenioReceitaControlador.caminhoOrigem}"
                                                        selecionado="#{convenioReceitaControlador.selecionado}"
                                                        icon="ui-icon-search"
                                                        title="Clique para visualizar a Pessoa selecionada"
                                                        disabled="#{convenioReceitaControlador.selecionado.pessoa eq null}"
                                                        destino="#{pessoaContabilControlador.getCaminhoVisualizarPessoa(convenioReceitaControlador.selecionado.pessoa)}"/>
                                    </p:outputPanel>

                                    <fc:novoParente destino="#{pessoaContabilControlador.retornaCaminhoPadraoPJ()}novo/"
                                                    label="P.J."
                                                    origem="#{convenioReceitaControlador.caminhoPadrao}novo/"
                                                    selecionado="#{convenioReceitaControlador.selecionado}"/>
                                </h:panelGrid>


                                <fc:outputLabelObrigatorio for="classeCredor" value="Classe: "/>
                                <p:autoComplete queryDelay="1000" id="classeCredor"
                                                title="Informe a Classe da Pessoa"
                                                value="#{convenioReceitaControlador.selecionado.classeCredor}"
                                                converter="#{convenioReceitaControlador.converterClasseCredor}"
                                                completeMethod="#{convenioReceitaControlador.completaClasseCredor}"
                                                disabled="#{convenioReceitaControlador.selecionado.pessoa.id eq null}"
                                                forceSelection="true"
                                                size="70"
                                                var="cc"
                                                itemLabel="#{cc}"
                                                itemValue="#{cc.id}"/>
                            </h:panelGrid>
                        </p:panel>

                        <p:panel id="painelRecLib" styleClass="mtop10">
                            <co:titulo-panel titulo="Recurso Liberado" styleClass="mtop20"/>
                            <h:panelGrid columns="2" id="gridLiberacao">

                                <h:outputText value="Data de Liberação do Recurso: " style="margin-right: 15px"/>
                                <p:calendar id="dataLibRecurso"
                                            value="#{convenioReceitaControlador.convenioReceitaLiberacoes.dataLiberacaoRecurso}"
                                            locale="pt_BR" pattern="dd/MM/yyyy"
                                            navigator="true"
                                            onkeypress="mascara(this, mdata)"
                                            title="Informe a data da Libereção do Recurso"/>

                                <h:outputText value="Valor Liberado Concedente: "/>
                                <fc:inputMoeda id="valorLibConcedente"
                                               value="#{convenioReceitaControlador.convenioReceitaLiberacoes.valorLiberadoConcedente}"/>

                                <h:outputText value="Valor Liberado Contrapartida: "/>
                                <fc:inputMoeda id="valorLiberadaContrapartida"
                                               value="#{convenioReceitaControlador.convenioReceitaLiberacoes.valorLiberadoContrapartida}"/>
                            </h:panelGrid>


                            <p:commandButton value="Adicionar"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao mtop10"
                                             icon="ui-icon-circle-plus"
                                             actionListener="#{convenioReceitaControlador.adicionaLiberacoes()}"
                                             update=":Formulario:tabGeral:tabelaLiberacao :Formulario:tabGeral:gridLiberacao "
                                             title="Clique para adicionar uma Liberação"/>

                            <p:dataTable value="#{convenioReceitaControlador.selecionado.convenioReceitaLiberacoes}"
                                         var="lib"
                                         id="tabelaLiberacao"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>RECURSOS LIBERADOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ação" style="text-align: center; width: 5%">
                                    <p:commandButton image="ui-icon-trash"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     actionListener="#{convenioReceitaControlador.removerLiberacoes}"
                                                     update=":Formulario:tabGeral:tabelaLiberacao :Formulario:tabGeral:panelUnidade">
                                        <f:attribute name="removeLiberacao" value="#{lib}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Data de Liberação do Recurso"
                                          styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{lib.dataLiberacaoRecurso}">
                                        <f:convertDateTime type="date"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor Liberado Concedente (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{lib.valorLiberadoConcedente}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText
                                                value="#{convenioReceitaControlador.calcularTotalRecursoLiberado()}"
                                                id="totalRecurso"
                                                styleClass="negrito"
                                                converter="#{convenioReceitaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                                <p:column headerText="Valor Liberado Contrapartida (R$)"
                                          styleClass="alinhamentoDireita">
                                    <h:outputText value="#{lib.valorLiberadoContrapartida}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText
                                                value="#{convenioReceitaControlador.calcularTotalRecursoLiberadoContrapartida()}"
                                                id="totalLiberacoesContra"
                                                styleClass="negrito"
                                                converter="#{convenioReceitaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <br/>
                        <p:panel id="panelUnidadesMedida">

                            <co:titulo-panel titulo="Meta"/>
                            <h:panelGrid columns="2">

                                <h:outputText value="Descrição: "/>
                                <h:panelGrid columns="2">
                                    <p:inputTextarea title="Informe a descrição da meta."
                                                     autoResize="true"
                                                     cols="70"
                                                     maxlength="255"
                                                     style="margin-left: -3px"
                                                     value="#{convenioReceitaControlador.convenioReceitaUnidMedida.descricao}"
                                                     id="descMetas"
                                                     counterTemplate="{0} Caracteres Restantes."
                                                     counter="counterDescMeta"/>
                                    <h:outputText id="counterDescMeta"/>
                                </h:panelGrid>

                                <fc:outputLabelObrigatorio value="Unidade de Medida: "/>
                                <h:panelGrid columns="3">
                                    <p:autoComplete queryDelay="1000" id="autcompunidadeMedida"
                                                    forceSelection="true"
                                                    var="um"
                                                    value="#{convenioReceitaControlador.convenioReceitaUnidMedida.unidadeMedida}"
                                                    title="Informe uma Unidade de Medida"
                                                    converter="#{convenioReceitaControlador.converterUnidadeMedida}"
                                                    completeMethod="#{convenioReceitaControlador.completaUnidadeMedida}"
                                                    itemValue="#{um.id}" itemLabel="#{um}" size="70" maxResults="10"
                                                    style="margin-left: -3px"/>
                                    <h:commandLink
                                        actionListener="#{convenioReceitaControlador.navegarParaUnidadeMedida()}"
                                        target="_blank">

                                        <p:commandButton icon="ui-icon-circle-plus"
                                                         styleClass="vinteAltura botao_azul icone_branco"
                                                         ajax="false"
                                                         title="Clique para inserir um novo registro"/>
                                    </h:commandLink>
                                </h:panelGrid>
                                <fc:outputLabelObrigatorio value="Meta Física: "/>
                                <p:inputText id="qtdeMetas"
                                             value="#{convenioReceitaControlador.convenioReceitaUnidMedida.qtdeMetaFisica}"
                                             title="Informe a quantidade da Meta Física">
                                    <f:convertNumber integerOnly="true" for="qtdeMetas"/>
                                    <p:ajax event="blur"/>
                                </p:inputText>

                                <fc:outputLabelObrigatorio value="Valor: "/>
                                <fc:inputMoeda title="Informe o valor da Meta Física"
                                               id="valorMetaFisica"
                                               value="#{convenioReceitaControlador.convenioReceitaUnidMedida.metaFisica}"/>

                                <p:commandButton value="Adicionar"
                                                 styleClass="padrao mtop10"
                                                 icon="ui-icon-circle-plus"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 actionListener="#{convenioReceitaControlador.adicionaUnidadeMedida()}"
                                                 update=":Formulario:tabGeral:tabelaUnidadeMedida :Formulario:tabGeral:panelUnidadesMedida"
                                                 title="Após selecionar uma Unidade de Medida clique para adicionar na lista"/>
                            </h:panelGrid>

                            <p:dataTable value="#{convenioReceitaControlador.selecionado.convenioRecUnidMedida}"
                                         id="tabelaUnidadeMedida"
                                         var="meta"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop01"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>METAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ações" style="text-align: center; width: 7%">
                                    <p:commandButton id="btEditarMetas"
                                                     icon="ui-icon-pencil"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     styleClass="mrig05"
                                                     process="@this"
                                                     title="Clique para editar este registro."
                                                     actionListener="#{convenioReceitaControlador.editarMetas(meta)}"
                                                     update=":Formulario:tabGeral:panelUnidadesMedida ">
                                    </p:commandButton>
                                    <p:commandButton icon="ui-icon-trash"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     actionListener="#{convenioReceitaControlador.removeUnidadeMedida}"
                                                     id="btnRemoveUnidadeMedida"
                                                     update=":Formulario:tabGeral:tabelaUnidadeMedida">
                                        <f:attribute name="removeUnidadeMedida" value="#{meta}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Descrição" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{meta.descricao}"/>
                                </p:column>
                                <p:column headerText="Unidade de Medida" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{meta.unidadeMedida}"/>
                                </p:column>
                                <p:column headerText="Meta Física " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{meta.qtdeMetaFisica}"/>
                                </p:column>
                                <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{meta.metaFisica}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText value="#{convenioReceitaControlador.calcularTotalMetas()}"
                                                          id="totalMetas"
                                                          styleClass="negrito"
                                                          converter="#{convenioReceitaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <br/>
                        <p:panel id="panelStatusPrestacao">

                            <co:titulo-panel titulo="Prestação de Contas"/>
                            <h:panelGrid columns="2">

                                <h:outputText value="Data: "/>
                                <p:calendar id="dataPrestacao"
                                            value="#{convenioReceitaControlador.prestacaoContas.dataLancamento}"
                                            onkeypress="mascara(this, mdata)"
                                            size="20"
                                            locale="pt_BR" pattern="dd/MM/yyyy" navigator="true"
                                            title="Informe a data da Prestação de Contas"/>

                                <h:outputText value="Situação: "/>
                                <h:selectOneMenu title="Informe o Status da Prestação de Contas"
                                                 id="statusPrestacao"
                                                 style="width: 127px"
                                                 value="#{convenioReceitaControlador.prestacaoContas.tipoPrestacaoContas}">
                                    <f:selectItems value="#{convenioReceitaControlador.tipoDePrestacaoContas}"/>
                                </h:selectOneMenu>

                                <p:commandButton value="Adicionar"
                                                 styleClass="padrao mtop10"
                                                 icon="ui-icon-circle-plus"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 actionListener="#{convenioReceitaControlador.adicionaStatusPrestacaoContas()}"
                                                 update=":Formulario:tabGeral:panelStatusPrestacao :Formulario:tabGeral:tabelaStatusPrestacao"
                                                 title="Clique para adicionar um Status da Prestação de Contas"/>
                            </h:panelGrid>

                            <p:dataTable value="#{convenioReceitaControlador.selecionado.prestacaoContas}"
                                         id="tabelaStatusPrestacao"
                                         var="prest"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop01"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>PRESTAÇÃO DE CONTAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ação" style="text-align: center; width: 5%">
                                    <p:commandButton icon="ui-icon-trash"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     actionListener="#{convenioReceitaControlador.removeStatusPrestacaoContas}"
                                                     id="btnRemoverStatus"
                                                     update=":Formulario:tabGeral:tabelaStatusPrestacao">
                                        <f:attribute name="removeStatusPrestacao" value="#{prest}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Data " styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{prest.dataLancamento}">
                                        <f:convertDateTime type="date"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Situação" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{prest.tipoPrestacaoContas.descricao}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>

                    <p:tab title="Ocorrências">

                        <p:panel styleClass="mtop10">
                            <h:panelGrid columns="2" id="panelOcorrencias">
                                <fc:outputLabelObrigatorio value="Ocorrência: "/>
                                <h:panelGroup>
                                    <p:autoComplete queryDelay="1000"
                                                    value="#{convenioReceitaControlador.tramiteConvenioRecSelecionado.ocorrencia}"
                                                    id="ocorrencia" size="70"
                                                    var="oco"
                                                    completeMethod="#{convenioReceitaControlador.completaOcorrencia}"
                                                    converter="#{convenioReceitaControlador.converterOcorrencia}"
                                                    itemLabel="#{oco}" itemValue="#{oco.id}" forceSelection="true"
                                                    title="Informe a Ocorrência"
                                                    style="margin-right: 4px"/>

                                    <h:commandLink actionListener="#{convenioReceitaControlador.navegarParaConvenio()}"
                                                   target="_blank">
                                        <p:commandButton icon="ui-icon-circle-plus"
                                                         styleClass="vinteAltura botao_azul icone_branco"
                                                         ajax="false"
                                                         title="Clique para inserir um novo registro"/>
                                    </h:commandLink>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio value="Data: "/>
                                <p:calendar
                                    value="#{convenioReceitaControlador.tramiteConvenioRecSelecionado.dataTramite}"
                                    onkeyup="mascara(this, mdata)"
                                    navigator="true" locale="pt_BR" pattern="dd/MM/yyyy" id="dataOcorrencia"
                                    title="Informe a Data da Ocorrência"/>

                                <h:outputText value="Descrição: "/>
                                <h:panelGrid columns="2">
                                    <p:inputTextarea title="Informe o objeto do Convênio"
                                                     autoResize="true"
                                                     cols="70"
                                                     maxlength="3000"
                                                     style="margin-left: -3px"
                                                     value="#{convenioReceitaControlador.tramiteConvenioRecSelecionado.descricao}"
                                                     id="descricaoOcorrencia"
                                                     counterTemplate="{0} Caracteres Restantes."
                                                     counter="counter"/>
                                    <h:outputText id="counter"/>
                                </h:panelGrid>
                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao mtop10"
                                             image="ui-icon-circle-plus"
                                             title="Clique para adicionar uma Ocorrência."
                                             actionListener="#{convenioReceitaControlador.adicionaOcorrencia()}"
                                             update=":Formulario:tabGeral:tabelaOcorrencias :Formulario:tabGeral:panelOcorrencias"/>

                            <p:dataTable value="#{convenioReceitaControlador.selecionado.tramitesConvenioRec}"
                                         id="tabelaOcorrencias"
                                         var="oco"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>OCORRÊNCIAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Descrição" style="width: 5%; text-align: center">
                                    <p:rowToggler/>
                                </p:column>
                                <p:column headerText="Ação" style="text-align: center; width: 5%">
                                    <p:commandButton image="ui-icon-trash"
                                                     actionListener="#{convenioReceitaControlador.removeOcorrencia}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     id="btnRemoveOcorrencia"
                                                     update=":Formulario:tabGeral:tabelaOcorrencias">
                                        <f:attribute name="removeOcorrencia" value="#{oco}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Data" style="width: 20%" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{oco.dataTramite}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Ocorrência" style="width: 70%" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{oco.ocorrencia}"/>
                                </p:column>
                                <p:rowExpansion>
                                    <br/>
                                    <h:outputText value="Descrição: " styleClass="negrito"/>
                                    <h:outputText value="#{oco.descricao}"/>
                                </p:rowExpansion>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>

                    <p:tab id="tabAdit" title="Aditivos">
                        <p:panel id="painelAditivos" styleClass="mtop10">

                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Número: "/>
                                <p:inputText id="numeroAditivo"
                                             value="#{convenioReceitaControlador.aditivos.numero}"
                                             title="Informe o número.">
                                    <f:convertNumber integerOnly="true" for="numeroAditivo"/>
                                    <p:ajax event="blur"/>
                                </p:inputText>

                                <fc:outputLabelObrigatorio value="Descrição: " id="descri"/>
                                <p:inputText value="#{convenioReceitaControlador.aditivos.descricao}"
                                             title="Informe a descrição."
                                             size="70"/>

                                <h:outputText value="Valor do Aditivo: " style="margin-right: 60px"/>
                                <fc:inputMoeda title="Informe o valor aditivo."
                                               id="valorAditivo"
                                               value="#{convenioReceitaControlador.aditivos.valorAditivo}"/>

                                <h:outputText value="Valor da Contrapartida: "/>
                                <fc:inputMoeda title="Informe o valor da contrapartida."
                                               value="#{convenioReceitaControlador.aditivos.valorContrapartida}"/>

                                <h:outputText value="Vigência Inicial: "/>
                                <p:calendar id="vigenciaIni"
                                            value="#{convenioReceitaControlador.aditivos.dataIniVigencia}"
                                            title="Informe a Vigência Inicial"
                                            onkeypress="mascara(this, mdata)"
                                            locale="pt_BR"
                                            pattern="dd/MM/yyyy"
                                            navigator="true"/>

                                <h:outputText value="Vigência Final: "/>
                                <p:calendar id="vigenciaFim"
                                            value="#{convenioReceitaControlador.aditivos.dataFimVigencia}"
                                            title="Informe a Vigência Final"
                                            onkeypress="mascara(this, mdata)"
                                            locale="pt_BR"
                                            pattern="dd/MM/yyyy"
                                            navigator="true"/>
                            </h:panelGrid>

                            <p:commandButton id="btnAddAditi"
                                             value="Adicionar"
                                             icon="ui-icon-circle-plus"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao mtop10"
                                             actionListener="#{convenioReceitaControlador.adicionaAditivos()}"
                                             title="Clique para adicionar um aditivo."
                                             update=":Formulario:tabGeral:painelAditivos :Formulario:tabGeral:panelValoresConvenio :Formulario:tabGeral:vigenciaFinal"/>

                            <p:dataTable id="tableAditi"
                                         value="#{convenioReceitaControlador.selecionado.aditivosConvenioReceitas}"
                                         var="aditi"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ADITIVOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ações" style="text-align: center; width: 7%">
                                    <p:commandButton id="btnEditarAditivo"
                                                     icon="ui-icon-pencil"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     styleClass="mrig05"
                                                     process="@this"
                                                     title="Clique para editar este registro."
                                                     actionListener="#{convenioReceitaControlador.editarAditivo(aditi)}"
                                                     update=":Formulario:tabGeral:painelAditivos :Formulario:tabGeral:panelValoresConvenio">
                                    </p:commandButton>
                                    <p:commandButton id="btnRemoveAditi"
                                                     icon="ui-icon-trash"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     actionListener="#{convenioReceitaControlador.removerAditivos}"
                                                     update=":Formulario:tabGeral:tableAditi :Formulario:tabGeral:panelValoresConvenio">
                                        <f:attribute id="removeAditi" name="removeAditi" value="#{aditi}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Número" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{aditi.aditivos.numero}"/>
                                </p:column>
                                <p:column headerText="Descrição" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{aditi.aditivos.descricao}"/>
                                </p:column>
                                <p:column headerText="Vigência Inicial" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{aditi.aditivos.dataIniVigencia}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Vigência Final" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{aditi.aditivos.dataFimVigencia}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor do Aditivo (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{aditi.aditivos.valorAditivo}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText value="#{convenioReceitaControlador.calcularTotalAditivo()}"
                                                          id="totalAditivo"
                                                          styleClass="negrito"
                                                          converter="#{convenioReceitaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                                <p:column headerText="Valor da Contrapartida (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{aditi.aditivos.valorContrapartida}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total: " styleClass="negrito"/>
                                            <h:outputText
                                                value="#{convenioReceitaControlador.calcularTotalAditivoContrapartida()}"
                                                id="totalAditivoContra"
                                                styleClass="negrito"
                                                converter="#{convenioReceitaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>

                    <p:tab id="tabInfoContabeis" title="Informações Contábeis">
                        <p:panel id="panelUnidade" styleClass="mtop10">

                            <co:titulo-panel titulo="Unidade Organizacional"/>
                            <h:panelGrid columns="1" id="painelPesquisaUnidade" width="100%">
                                <fc:pesquisaUnidadeOrganizacional tipoHierarquia="ORCAMENTARIA"
                                                                  listaDeHierarquias="#{convenioReceitaControlador.listaUnidades}"
                                                                  update=":Formulario:tabGeral:panelContaFinanceira"/>
                            </h:panelGrid>
                        </p:panel>

                        <p:panel id="panelContaFinanceira" styleClass="mtop10">

                            <co:titulo-panel titulo="Conta Financeira"/>
                            <h:panelGrid columns="4" id="gridContas">
                                <h:outputLabel value="Conta Financeira:"/>

                                <p:autoComplete queryDelay="1000" id="autocompleteSubConta"
                                                disabled="#{convenioReceitaControlador.listaUnidades.size() == 0}"
                                                var="cta"
                                                itemValue="#{cta.id}"
                                                itemLabel="#{cta.toStringAutoCompleteContaFinanceira()}"
                                                size="70"
                                                maxResults="10"
                                                forceSelection="true"
                                                title="Informe uma Conta Financeira"
                                                converter="#{convenioReceitaControlador.converterSubConta}"
                                                completeMethod="#{convenioReceitaControlador.completaSubConta}"
                                                value="#{convenioReceitaControlador.subConta}"/>

                                <p:commandButton id="bt-informacao"
                                                 icon="ui-icon-info"
                                                 styleClass="mrig05 mrig03"
                                                 disabled="#{oCCContaFinanceiraControlador.selecionado.id ne null}"/>

                                <p:overlayPanel for="bt-informacao"
                                                style="border : solid black 1px;"
                                                showEvent="mouseover"
                                                hideEvent="mouseout">
                                    <h:outputText
                                        value="Filtra a Conta Financeira a partir da(s) Unidade(s) Organizacional(is) selecionada(s) pertencente ao exercício logado e Tipo de Recurso da Conta: Convênio e Congênere."
                                        escape="false"/>
                                </p:overlayPanel>

                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             icon="ui-icon-circle-plus"
                                             styleClass="padrao mtop10"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             actionListener="#{convenioReceitaControlador.addSubConta()}"
                                             disabled="#{convenioReceitaControlador.listaUnidades.size() == 0}"
                                             update=":Formulario:tabGeral:tabelaSubContas :Formulario:tabGeral:gridContas :Formulario:tabGeral:panelFonteRec"
                                             title="Clique para adicionar o registro na lista."/>

                            <p:dataTable value="#{convenioReceitaControlador.selecionado.convenioReceitaSubContas}"
                                         var="con"
                                         id="tabelaSubContas"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop03"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>CONTAS FINANCEIRAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Ação" style="text-align: center; width: 5%">
                                    <p:commandButton image="ui-icon-trash"
                                                     actionListener="#{convenioReceitaControlador.removeSubConta(con)}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     update=":Formulario:tabGeral:tabelaSubContas :Formulario:tabGeral:panelFonteRec"/>
                                </p:column>
                                <p:column headerText="Exercício" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{con.exercicio}"/>
                                </p:column>
                                <p:column headerText="Conta Financeira" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{con.subConta}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panel id="panelFonteRec" styleClass="mtop10">

                            <co:titulo-panel titulo="Fonte de Recurso"/>
                            <h:panelGrid columns="2" id="gridFonteRec">
                                <h:outputLabel value="Fonte de Recursos:"/>
                                <p:autoComplete queryDelay="1000" id="fonteRec"
                                                forceSelection="true"
                                                var="cta"
                                                value="#{convenioReceitaControlador.conta}"
                                                title="Informe uma Fonte de Recursos da Conta(s) Financeira(s) selecionada(s)"
                                                converter="#{convenioReceitaControlador.converterConta}"
                                                completeMethod="#{convenioReceitaControlador.completaConta}"
                                                validator="#{convenioReceitaControlador.validaCategoriaConta}"
                                                disabled="#{convenioReceitaControlador.selecionado.convenioReceitaSubContas.size() == 0}"
                                                itemValue="#{cta.id}" itemLabel="#{cta}" size="70" maxResults="10"/>

                                <p:commandButton value="Adicionar"
                                                 icon="ui-icon-circle-plus"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 actionListener="#{convenioReceitaControlador.adicionaConta()}"
                                                 disabled="#{convenioReceitaControlador.selecionado.convenioReceitaSubContas.size() == 0}"
                                                 styleClass="padrao mtop10"
                                                 update=":Formulario:tabGeral:tabelaFontRec :Formulario:tabGeral:gridFonteRec"
                                                 title="Após selecionar uma Fonte de Recurso clique para adicionar na lista"/>

                            </h:panelGrid>

                            <p:dataTable value="#{convenioReceitaControlador.selecionado.convenioRecConta}"
                                         var="fr"
                                         id="tabelaFontRec"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop01"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>FONTES DE RECURSOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Ação" style="text-align: center; width: 5%">
                                    <p:commandButton image="ui-icon-trash"
                                                     actionListener="#{convenioReceitaControlador.removeConta}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     title="Clique para remover este registro."
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     update=":Formulario:tabGeral:tabelaFontRec">
                                        <f:attribute name="con" value="#{fr}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Exercício" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{fr.conta.exercicio}"/>
                                </p:column>
                                <p:column headerText="Códigio" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{fr.conta.codigo}"/>
                                </p:column>
                                <p:column headerText="Descrição" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{fr.conta.descricao}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>

                    <p:tab id="tabExecOrc" title="Execução Orçamentária">
                        <p:tabView styleClass="mtop10">
                            <p:tab title="Receita Realizada">

                                <p:dataTable id="tabelaReceitasRealizadas"
                                             value="#{convenioReceitaControlador.listaReceitasRealizadas}"
                                             var="lr"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop05"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>RECEITAS REALIZADAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{lr.dataLancamento}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{lr.numero}"/>
                                    </p:column>
                                    <p:column headerText="Conta de Receita" styleClass="alinhamentoEsquerda">
                                        <h:outputText
                                            value="#{lr.receitaLOA.contaDeReceita.codigo} - #{lr.receitaLOA.contaDeReceita.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{lr.valor}"
                                                      converter="#{convenioReceitaControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total:" styleClass="mrig03"/>
                                            <h:outputText
                                                value="#{convenioReceitaControlador.calculaTotalReceitaRealizada}"
                                                id="totalRecRea"
                                                converter="#{convenioReceitaControlador.moneyConverter}"
                                                styleClass="negrito"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>

                            <p:tab title="Estorno de Receita Realizada">

                                <p:dataTable id="tabelaEstornoReceitasRealizadas"
                                             value="#{convenioReceitaControlador.listaEstornoReceitasRealizadas}"
                                             var="err"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop05"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE RECEITAS REALIZADAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{err.dataEstorno}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{err.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{err.valor}"
                                                      converter="#{convenioReceitaControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total:" styleClass="mrig03"/>
                                            <h:outputText
                                                value="#{convenioReceitaControlador.calculaTotalEstornoReceitaRealizada}"
                                                id="totalEstRecRea"
                                                converter="#{convenioReceitaControlador.moneyConverter}"
                                                styleClass="negrito"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>

                            <p:tab title="Empenho">
                                <p:dataTable id="tabelaEmpenho"
                                             value="#{convenioReceitaControlador.listaEmpenhos}"
                                             var="e"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop05"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>EMPENHOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{e.dataEmpenho}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{e.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{e.valor}"
                                                      converter="#{convenioReceitaControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total:" styleClass="mrig03"/>
                                            <h:outputText value="#{convenioReceitaControlador.calculaTotalEmpenho}"
                                                          id="totalEmp"
                                                          converter="#{convenioReceitaControlador.moneyConverter}"
                                                          styleClass="negrito"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>

                            <p:tab title="Estorno de Empenho">
                                <p:dataTable id="tabelaEstornoEmpenho"
                                             value="#{convenioReceitaControlador.listaEmpenhoEstornos}"
                                             var="es"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop05"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE EMPENHOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{es.dataEstorno}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{es.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{es.valor}"
                                                      converter="#{convenioReceitaControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div align="right">
                                            <h:outputText value="Total:" styleClass="mrig03"/>
                                            <h:outputText
                                                value="#{convenioReceitaControlador.calculaTotalEmpenhoEstorno}"
                                                id="totalEmpEst"
                                                converter="#{convenioReceitaControlador.moneyConverter}"
                                                styleClass="negrito"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabLiquidacao" title="Liquidação">
                                <p:dataTable id="tabelaLiquidacao"
                                             value="#{convenioReceitaControlador.listaLiquidacao}"
                                             var="l"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop05"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>LIQUIDAÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{l.dataLiquidacao}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.valor}"
                                                      converter="#{convenioReceitaControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText value="#{convenioReceitaControlador.somaLiquidacoes}"
                                                          converter="#{convenioReceitaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>
                            <p:tab id="tabLiquidacaoEstorno" title="Estorno de Liquidação">
                                <p:dataTable id="tabelaLiquidacaoEstorno"
                                             value="#{convenioReceitaControlador.listaLiquidacaoEstorno}"
                                             var="l"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop05"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE LIQUIDAÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data de Estorno" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{l.dataEstorno}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.valor}"
                                                      converter="#{convenioReceitaControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText value="#{convenioReceitaControlador.somaEstornoLiquidacoes}"
                                                          converter="#{convenioReceitaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>
                            <p:tab id="tabPagamento" title="Pagamento">
                                <p:dataTable id="tabelaPagamento"
                                             value="#{convenioReceitaControlador.listaPagamento}"
                                             var="p"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop05"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>PAGAMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{p.dataPagamento}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.numeroPagamento}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.valor}"
                                                      converter="#{convenioReceitaControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText value="#{convenioReceitaControlador.somaPagamentos}"
                                                          converter="#{convenioReceitaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabPagamentoEstorno" title="Estorno de Pagamento">
                                <p:dataTable id="tabelaPagamentoEstorno"
                                             value="#{convenioReceitaControlador.listaPagamentoEstorno}"
                                             var="p"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop05"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE PAGAMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data de Estorno" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{p.dataEstorno}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.valor}"
                                                      converter="#{convenioReceitaControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText value="#{convenioReceitaControlador.somaEstornoPagamentos}"
                                                          converter="#{convenioReceitaControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>
                        </p:tabView>
                        <br/>
                        <h:outputText value="Saldo:"/>
                        <p:spacer width="5"/>
                        <h:outputText value="#{convenioReceitaControlador.calculaSaldoFinal}" id="saldoFinal"
                                      converter="#{convenioReceitaControlador.moneyConverter}" styleClass="negrito"/>
                    </p:tab>

                    <p:tab title="Anexos">
                        <p:panel styleClass="semBorda">
                            <fc:outputLabelObrigatorio value="Arquivo anexo:"/>
                        </p:panel>
                        <fc:filesUploadWP selecionado="#{convenioReceitaControlador.selecionado}"
                                          anexoNovaAba="true"/>
                    </p:tab>
                </p:tabView>
            </p:panel>
            <fc:rodapePretty controlador="#{convenioReceitaControlador}"/>
        </h:form>
    </ui:define>
</ui:composition>
</html>
