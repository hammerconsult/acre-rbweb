<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <fc:cabecalhoPretty controlador="#{relatoriosItemDemonstControlador}"
                                origem="#{relatoriosItemDemonstControlador.caminhoPadrao}listar"/>

            <p:panel
                header="#{relatoriosItemDemonstControlador.operacaoNovo ? 'Novo' : 'Editar'} Relatório de Item Demonstrativo">
                <h:panelGrid columns="2">
                    <h:outputText value="Exercício: "/>
                    <h:outputText value="#{relatoriosItemDemonstControlador.selecionado.exercicio}"
                                  styleClass="negrito"/>

                    <fc:outputLabelObrigatorio value="Descrição: "/>
                    <p:inputText title="Digite a Descrição do Relatório"
                                 value="#{relatoriosItemDemonstControlador.selecionado.descricao}"
                                 id="descricao"
                                 maxlength="70"
                                 size="70"/>

                    <fc:outputLabelObrigatorio value="Tipo do Relatório: "/>
                    <h:selectOneMenu
                        value="#{relatoriosItemDemonstControlador.selecionado.tipoRelatorioItemDemonstrativo}"
                        id="cbTipoRelatorioItemDemonstrativo"
                        title="Informe o Tipo do Relatório">
                        <f:selectItems value="#{relatoriosItemDemonstControlador.listaTipoRelatorioItemDemonstrativo}"/>
                    </h:selectOneMenu>

                    <fc:outputLabelObrigatorio value="Grupos: "/>
                    <p:inputText title="Informe a quantidade de grupos possíveis para o relatório."
                                 value="#{relatoriosItemDemonstControlador.selecionado.grupos}"
                                 id="grupos"
                                 maxlength="2"
                                 size="2"/>

                    <h:outputText value="Utiliza Conta: "/>
                    <p:selectBooleanCheckbox
                        title="Selecione para utilizar conta na configuração do item demonstrativo."
                        value="#{relatoriosItemDemonstControlador.selecionado.usaConta}"
                        id="bcbConta"/>

                    <h:outputText value="Utiliza Programa: "/>
                    <p:selectBooleanCheckbox
                        title="Selecione para utilizar programa na configuração do item demonstrativo."
                        value="#{relatoriosItemDemonstControlador.selecionado.usaPrograma}"
                        id="bcbPrograma"/>

                    <h:outputText value="Utiliza Acao: "/>
                    <p:selectBooleanCheckbox title="Selecione para utilizar ação na configuração do item demonstrativo."
                                             value="#{relatoriosItemDemonstControlador.selecionado.usaAcao}"
                                             id="bcbAcao"/>

                    <h:outputText value="Utiliza Subacao: "/>
                    <p:selectBooleanCheckbox
                        title="Selecione para utilizar subação na configuração do item demonstrativo."
                        value="#{relatoriosItemDemonstControlador.selecionado.usaSubAcao}"
                        id="bcbSuacao"/>

                    <h:outputText value="Utiliza Fonte de Recurso: "/>
                    <p:selectBooleanCheckbox
                        title="Selecione para utilizar fonte de recurso na configuração do item demonstrativo."
                        value="#{relatoriosItemDemonstControlador.selecionado.usaFonteRecurso}"
                        id="bcbFonteRecurso"/>

                    <h:outputText value="Utiliza Função: "/>
                    <p:selectBooleanCheckbox
                        title="Selecione para utilizar função na configuração do item demonstrativo."
                        value="#{relatoriosItemDemonstControlador.selecionado.usaFuncao}"
                        id="bcbFuncao"/>

                    <h:outputText value="Utiliza Subfunção: "/>
                    <p:selectBooleanCheckbox
                        title="Selecione para utilizar subfunção na configuração do item demonstrativo."
                        value="#{relatoriosItemDemonstControlador.selecionado.usaSubFuncao}"
                        id="bcbSubfuncao"/>

                    <h:outputText value="Utiliza Unidade Organizacional: "/>
                    <p:selectBooleanCheckbox
                        title="Selecione para utilizar unidade organizacional na configuração do item demonstrativo."
                        value="#{relatoriosItemDemonstControlador.selecionado.usaUnidadeOrganizacional}"
                        id="bcbUnidadeOrganizacional"/>

                    <h:outputText value="Utiliza Tipo de Despesa: "/>
                    <p:selectBooleanCheckbox
                        title="Selecione para utilizar tipo de despesa na configuração do item demonstrativo."
                        value="#{relatoriosItemDemonstControlador.selecionado.usaTipoDespesa}"
                        id="bcbTipoDespesa"/>

                    <h:outputText value="Utiliza Conta Financeira: "/>
                    <p:selectBooleanCheckbox
                        title="Selecione para utilizar conta financeira na configuração do item demonstrativo."
                        value="#{relatoriosItemDemonstControlador.selecionado.usaContaFinanceira}"
                        id="bcbContaFinanceira"/>

                    <h:outputText value="Utiliza Valor Padrão: "/>
                    <p:selectBooleanCheckbox
                        title="Selecione para utilizar valor padrão na configuração do item demonstrativo."
                        value="#{relatoriosItemDemonstControlador.selecionado.usaValorPadrao}"
                        id="bcbValorPadrao"/>

                    <h:outputText value="Nota Explicativa:"/>
                    <h:panelGrid columns="2">
                        <p:inputTextarea id="notaExplicativa"
                                         title="Informe a nota explicativa."
                                         value="#{relatoriosItemDemonstControlador.selecionado.notaExplicativa}"
                                         cols="70" maxlength="3000"
                                         style="margin-left: -3px"
                                         autoResize="true" counterTemplate="{0} Caracteres Restantes."
                                         counter="counter"/>
                        <h:outputText id="counter"/>
                    </h:panelGrid>
                </h:panelGrid>
            </p:panel>

            <h:panelGrid columns="4">
                <p:commandButton value="Salvar"
                                 id="cbSalvar"
                                 styleClass="mtop10 prioritario"
                                 style="height: 30px"
                                 icon="ui-icon-disk"
                                 onclick="transferirConteudo();remoteComand();"
                                 title="Clique para salvar o registro."
                                 actionListener="#{relatoriosItemDemonstControlador.salvar()}"
                                 oncomplete="aguarde.hide()"/>

                <p:commandButton value="Editar Configuração"
                                 id="cbConfig"
                                 style="height: 30px"
                                 styleClass="mtop10"
                                 icon="ui-icon-pencil"
                                 onstart="aguarde.show()"
                                 oncomplete="aguarde.hide()"
                                 title="Clique para editar a configuração."
                                 actionListener="#{relatoriosItemDemonstControlador.redirecionarConfigItens()}"/>

                <p:commandButton value="Cancelar"
                                 id="cbCancelar"
                                 style="height: 30px"
                                 styleClass="mtop10"
                                 icon="ui-icon-cancel"
                                 onstart="aguarde.show()"
                                 onclick="aguarde.hide()"
                                 title="Clique para cancelar e retornar a página anterior."
                                 actionListener="#{relatoriosItemDemonstControlador.cancelar()}"/>

                <p:commandButton value="Duplicar para Exercício"
                                 id="cbDuplicar"
                                 style="height: 30px"
                                 styleClass="mtop10 mrig05"
                                 onstart="aguarde.show()"
                                 oncomplete="aguarde.hide()"
                                 icon="ui-icon-blue-document-copy"
                                 update=":formDialog"
                                 title="Clique para duplicar o plano de contas para um determinado exercício."
                                 actionListener="#{relatoriosItemDemonstControlador.abrirDialogTransporte()}"
                                 rendered="#{relatoriosItemDemonstControlador.selecionado.id ne null}"/>
            </h:panelGrid>
        </h:form>

        <p:dialog id="dialogTransportarRelatorio"
                  header="Duplicar para Exercício"
                  widgetVar="dialogTransportar"
                  dynamic="true"
                  style="position: fixed !important;"
                  position="center"
                  modal="true"
                  resizable="false"
                  closable="false">
            <h:form id="formDialog">
                <p:panel>
                    <h:panelGrid columns="2">
                        <fc:outputLabelObrigatorio value="Exercício: "/>
                        <p:autoComplete queryDelay="1000" id="exer" title="Informe um exercício."
                                        value="#{relatoriosItemDemonstControlador.exercicioCopia}"
                                        completeMethod="#{relatoriosItemDemonstControlador.recuperarExerciciosSemRelatorio}"
                                        var="exer"
                                        size="20"
                                        maxResults="10"
                                        itemLabel="#{exer.ano} "
                                        itemValue="#{exer.id}"
                                        forceSelection="true"
                                        converter="#{exercicioControlador.converterGenerico}"/>
                    </h:panelGrid>

                    <p:commandButton value="Duplicar"
                                     id="btnDuplicar"
                                     icon="ui-icon-check"
                                     onstart="duplicando.show()"
                                     oncomplete="duplicando.hide()"
                                     styleClass="padrao prioritario mrig05 mtop20"
                                     title="Clique para duplicar o relatório."
                                     actionListener="#{relatoriosItemDemonstControlador.transportarRelatorio()}"
                                     update=":Formulario :formDialog"/>

                    <p:commandButton value="Cancelar"
                                     id="btnCancelar"
                                     actionListener="#{relatoriosItemDemonstControlador.cancelarTransporte()}"
                                     title="Clique para cancelar a duplicação do relatório."
                                     styleClass="padrao mtop20"
                                     process="@this"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     icon="ui-icon-cancel"/>
                </p:panel>
            </h:form>
        </p:dialog>
        <fc:aguarde widgetVar="duplicando" texto="Duplicando Relatório..." gif="/img/ajaxloadingbar.gif"/>
    </ui:define>
</ui:composition>
</html>
