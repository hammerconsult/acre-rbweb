<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:co="http://java.sun.com/jsf/composite/components/contabil"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <script type="text/javascript">
            function cleanCampos(arg) {
                var componente = document.getElementById(arg);
                if (componente.value.toString().trim().length == 0 || componente.value == '' || componente.value == 'undefined') {
                    var idPanel = arg.replace(':pessoa_input', ':cc_input');
                    var panel = document.getElementById(idPanel);
                    panel.style.display = 'none';
                    var idPane2 = arg.replace(':pessoa_input', ':contaBanc_input');
                    var pane2 = document.getElementById(idPane2);
                    pane2.style.display = 'none';

                }
            }

            window.onload = function () {
                limpaCampos(':Formulario:tabView:pessoa_input');
            }

            function cleanCamposBanco(arg) {
                var componente = document.getElementById(arg);
                if (componente.value.toString().trim().length == 0 || componente.value == '' || componente.value == 'undefined') {
                    var idPanel = arg.replace(':contaBanc_input', ':panelBanco');
                    var panel = document.getElementById(idPanel);
                    panel.style.display = 'none';
                }
            }

            function limpaCampos(arg) {
                var componente = document.getElementById(arg);
                if (componente.value.toString().trim().length == 0 || componente.value == '' || componente.value == 'undefined') {
                    var idPanel = arg.replace(':pessoa_input', ':cc_input');
                    var panel = document.getElementById(idPanel);
                    panel.value = '';
                    panel.disabled = true;

                    var idPanel2 = arg.replace(':pessoa_input', ':contaBanc_input');
                    var panel2 = document.getElementById(idPanel2);
                    panel2.value = '';
                    panel2.disabled = true;

                    var idPanel3 = arg.replace(':pessoa_input', ':panelBanco');
                    var panel3 = document.getElementById(idPanel3);
                    panel3.style.display = 'none';
                }
            }

            window.onload = function () {
                limpaCampos(':Formulario:tabView:contaBanc_input');
            }

            function verificaValor(arg, valor) {
                var componente = document.getElementById(arg);
                var valorConvertido = parseInt(valor)

                if (componente.value > valorConvertido) {
                    componente.value = '';
                }
            }

        </script>

        <h:form id="Formulario">
            <fc:cabecalhoPretty controlador="#{propostaConcessaoDiariaControlador}"
                                origem="#{propostaConcessaoDiariaControlador.caminhoPadrao}listar/"/>

            <p:tabView id="tabView" styleClass="mtop10">
                <p:tab id="tab1" title="Proposta de Concessão Diária">
                    <h:panelGrid columns="2">
                        <h:outputText value="Número: "/>
                        <p:inputText title="Código gerado Automaticamente ao Salvar"
                                     value="#{propostaConcessaoDiariaControlador.selecionado.codigo}"
                                     id="codigo" size="21"
                                     readonly="true"
                                     disabled="true">
                            <p:watermark value="Gerado Automaticamente" for="codigo"/>
                        </p:inputText>

                        <fc:outputLabelObrigatorio value="Data: "/>
                        <fc:calendarUnidadeOrganizacional
                            unidadeOrganizacionalORC="#{propostaConcessaoDiariaControlador.selecionado.unidadeOrganizacional}"
                            data="#{propostaConcessaoDiariaControlador.selecionado.dataLancamento}"
                            id="dataLanc"
                            disabled="true"
                            title="Informe a data"
                            update=":Formulario:tabView:unidade"/>

                        <h:outputText value="Unidade Organizacional: "/>
                        <fc:codigo-descricao-hierarquia
                            id="unidade"
                            dataMovimento="#{propostaConcessaoDiariaControlador.selecionado.dataLancamento}"
                            tipoHierarquia="ORCAMENTARIA"
                            unidadeOrganizacional="#{propostaConcessaoDiariaControlador.selecionado.unidadeOrganizacional}"/>

                        <fc:outputLabelObrigatorio value="Tipo de Proposta: "/>
                        <p:selectOneRadio title="Informe o tipo da proposta de diária."
                                          value="#{propostaConcessaoDiariaControlador.selecionado.tipoProposta}"
                                          disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                          id="tipoProp">
                            <f:selectItems value="#{propostaConcessaoDiariaControlador.tipos}"/>
                            <p:ajax event="change"
                                    update="@form"
                                    onstart="aguarde.show();"
                                    oncomplete="aguarde.hide();"
                                    process="@form"
                                    listener="#{propostaConcessaoDiariaControlador.atribuirNullDespesa()}"/>
                        </p:selectOneRadio>

                        <fc:outputLabelObrigatorio value="Elemento de Despesa: "/>
                        <p:outputPanel id="painelDespesa">
                            <h:panelGrid columns="2">
                                <p:autoComplete queryDelay="1000" id="completaElementoDesp"
                                                value="#{propostaConcessaoDiariaControlador.selecionado.despesaORC}"
                                                completeMethod="#{propostaConcessaoDiariaControlador.completarDespesasORC}"
                                                converter="#{propostaConcessaoDiariaControlador.converterContaDespesa}"
                                                disabled="#{propostaConcessaoDiariaControlador.isOperacaoEditar()}"
                                                title="Selecione um elemento de despesa."
                                                size="70" style="margin-left: -4px"
                                                var="conta"
                                                itemLabel="#{conta.provisaoPPADespesa.contaDeDespesa} (#{conta.codigo})"
                                                itemValue="#{conta.id}">
                                    <p:ajax event="itemSelect"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            listener="#{propostaConcessaoDiariaControlador.atribuirFocoNoCampoFonteRecurso()}"
                                            update=":Formulario:tabView:completaFonte"/>
                                </p:autoComplete>
                            </h:panelGrid>
                        </p:outputPanel>

                        <fc:outputLabelObrigatorio value="Conta de Destinação de Recurso: "/>
                        <p:autoComplete queryDelay="1000"
                                        id="completaFonte"
                                        size="70"
                                        completeMethod="#{propostaConcessaoDiariaControlador.completarFontesDeDespesaORC}"
                                        converter="#{propostaConcessaoDiariaControlador.converterFonteDespesaORC}"
                                        value="#{propostaConcessaoDiariaControlador.selecionado.fonteDespesaORC}"
                                        disabled="#{propostaConcessaoDiariaControlador.selecionado.despesaORC eq null or !propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                        validator="#{propostaConcessaoDiariaControlador.validarSaldoFonteDespesaOrc}"
                                        title="Informe a Fonte de Recursos da Conta de Despesa selecionada."
                                        var="fonte"
                                        itemValue="#{fonte.id}"
                                        itemLabel="#{fonte.provisaoPPAFonte.destinacaoDeRecursos}">
                        </p:autoComplete>

                        <fc:outputLabelObrigatorio for="pessoa" value="Pessoa: "/>
                        <h:panelGrid columns="2">
                            <p:autoComplete queryDelay="1000"
                                            title="Informe a pessoa da diária."
                                            value="#{propostaConcessaoDiariaControlador.selecionado.pessoaFisica}"
                                            id="pessoa"
                                            size="70"
                                            style="margin-left: -4px"
                                            var="p"
                                            itemValue="#{p.id}"
                                            itemLabel="#{p} - #{p.situacaoCadastralPessoa}"
                                            completeMethod="#{propostaConcessaoDiariaControlador.completarPessoasFisicas}"
                                            converter="#{pessoaContabilControlador.converterGenerico}"
                                            onkeyup="keyUpLimparEsconderDesabilidarCampo(this, 'cc', false, false, true)"
                                            disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}">
                                <p:ajax event="itemSelect"
                                        onstart="aguarde.show();"
                                        oncomplete="aguarde.hide();"
                                        update=":Formulario:tabView:cc :Formulario:tabView:contaBanc verPessoa"
                                        listener="#{propostaConcessaoDiariaControlador.definirContaBancariaComoNull}"/>
                            </p:autoComplete>

                            <p:outputPanel id="verPessoa">
                                <fc:visualizarCampos
                                    objeto="#{propostaConcessaoDiariaControlador.selecionado.pessoaFisica}"
                                    disabled="#{propostaConcessaoDiariaControlador.selecionado.pessoaFisica.id eq null}"/>
                            </p:outputPanel>
                        </h:panelGrid>

                        <fc:outputLabelObrigatorio for="cc" value="Classe: "/>
                        <p:autoComplete queryDelay="1000"
                                        id="cc"
                                        size="70"
                                        title="Informe a Classe de Pessoa da Pessoa selecionada"
                                        disabled="#{propostaConcessaoDiariaControlador.selecionado.pessoaFisica eq null or !propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                        value="#{propostaConcessaoDiariaControlador.selecionado.classeCredor}"
                                        maxResults="10"
                                        completeMethod="#{propostaConcessaoDiariaControlador.completarClassesCredor}"
                                        converter="#{classeCredorControlador.converterGenerico}"
                                        forceSelection="true" var="classe"
                                        itemValue="#{classe.id}" itemLabel="#{classe}">
                            <p:ajax event="itemSelect"
                                    process="@this"/>
                        </p:autoComplete>

                        <fc:outputLabelObrigatorio for="contaBanc" value="Conta Bancária: "/>
                        <p:autoComplete queryDelay="1000" id="contaBanc"
                                        value="#{propostaConcessaoDiariaControlador.selecionado.contaCorrenteBanc}"
                                        disabled="#{propostaConcessaoDiariaControlador.selecionado.pessoaFisica eq null or !propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                        title="Informe a Conta Bancária da Pessoa selecionada"
                                        completeMethod="#{propostaConcessaoDiariaControlador.completarContasCorrentes}"
                                        converter="#{propostaConcessaoDiariaControlador.converterContaCorrente}"
                                        var="cc" itemLabel="#{cc}"
                                        itemValue="#{cc.id}" size="70" maxResults="10"
                                        onkeyup="cleanCamposBanco(this.id)">
                            <p:ajax event="itemSelect" update=":Formulario:tabView:pessoa"
                                    process=":Formulario:tabView:pessoa"/>
                        </p:autoComplete>

                        <fc:outputLabelObrigatorio value="Base Legal: "/>
                        <h:panelGrid columns="2">
                            <h:selectOneMenu id="baseLegal"
                                             value="#{propostaConcessaoDiariaControlador.selecionado.configuracaoDiaria}"
                                             converter="#{configuracaoDiariaControlador.converterGenerico}"
                                             title="Informe a Base Legal"
                                             style="margin-left: -3px"
                                             disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}">
                                <f:selectItems value="#{propostaConcessaoDiariaControlador.configuracoesDiaria}"/>
                                <p:ajax event="change"
                                        update=":Formulario:tabView:verConfiguracaoDiaria :Formulario:tabView:classeDiaria :Formulario:tabView:pessoa :Formulario:tabView:cc"
                                        process="@this"
                                        listener="#{propostaConcessaoDiariaControlador.validarPessoa}"/>
                            </h:selectOneMenu>

                            <p:outputPanel id="verConfiguracaoDiaria">
                                <fc:visualizarCampos
                                    objeto="#{propostaConcessaoDiariaControlador.selecionado.configuracaoDiaria}"
                                    disabled="#{propostaConcessaoDiariaControlador.selecionado.configuracaoDiaria.id eq null}"/>
                            </p:outputPanel>
                        </h:panelGrid>

                        <fc:outputLabelObrigatorio value="Classe de Diária: "/>
                        <h:panelGrid columns="2" id="classeDiaria">
                            <h:selectOneMenu id="classe"
                                             value="#{propostaConcessaoDiariaControlador.selecionado.classeDiaria}"
                                             converter="#{propostaConcessaoDiariaControlador.converterClasseDiaria}"
                                             title="Informe a Classe da Diária"
                                             style="margin-left: -3px"
                                             disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto() or propostaConcessaoDiariaControlador.selecionado.configuracaoDiaria.id eq null}">
                                <f:selectItems value="#{propostaConcessaoDiariaControlador.classesDiarias}"/>
                                <p:ajax event="change" update="verClasseDiaria"/>
                            </h:selectOneMenu>

                            <p:outputPanel id="verClasseDiaria">
                                <fc:visualizarCampos
                                    objeto="#{propostaConcessaoDiariaControlador.selecionado.classeDiaria}"
                                    disabled="#{propostaConcessaoDiariaControlador.selecionado.classeDiaria.id eq null}"/>
                            </p:outputPanel>
                        </h:panelGrid>
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <h:outputText value="Assessor Técnico de Autoridade Acompanhada: "/>
                        <p:autoComplete queryDelay="1000"
                                        id="autoridade"
                                        value="#{propostaConcessaoDiariaControlador.selecionado.propostaConcessaoDiaria}"
                                        title="Informe o Assessor Técnico de Autoridade Acompanhada"
                                        completeMethod="#{propostaConcessaoDiariaControlador.completarDiarias}"
                                        disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                        converter="#{propostaConcessaoDiariaControlador.converterGenerico}"
                                        var="aut"
                                        itemLabel="#{aut}"
                                        itemValue="#{aut.id}"
                                        size="70"
                                        maxResults="10">
                            <p:ajax event="itemSelect"
                                    update=":Formulario:tabView:tabelaViagens"
                                    process="@this"
                                    listener="#{propostaConcessaoDiariaControlador.limparViagens()}"/>
                        </p:autoComplete>
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <fc:outputLabelObrigatorio value="Tipo de Viagem: "/>
                        <p:selectOneRadio id="tipo"
                                          value="#{propostaConcessaoDiariaControlador.selecionado.tipoViagem}"
                                          disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}">
                            <f:selectItems value="#{propostaConcessaoDiariaControlador.tiposDeViagem}"
                                           itemLabel="#{b}" var="b"/>
                            <p:ajax event="change" update="@this" process="@this"/>
                        </p:selectOneRadio>
                    </h:panelGrid>

                    <h:panelGrid columns="2">
                        <fc:outputLabelObrigatorio value="Objetivo: "
                                                   rendered="#{!propostaConcessaoDiariaControlador.isDiariaColaboradorEventual()}"/>
                        <fc:outputLabelObrigatorio value="Motivação: "
                                                   rendered="#{propostaConcessaoDiariaControlador.isDiariaColaboradorEventual()}"/>
                        <h:panelGrid columns="2">
                            <p:inputTextarea title="Informe o objetivo da Proposta de Concessão Diária"
                                             value="#{propostaConcessaoDiariaControlador.selecionado.objetivo}"
                                             id="objetivo"
                                             cols="67"
                                             rows="3"
                                             maxlength="3000"
                                             disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                             autoResize="true" counterTemplate="{0} Caracteres Restantes."
                                             counter="counterObjetivo"/>
                            <h:outputText id="counterObjetivo"/>
                        </h:panelGrid>

                        <fc:outputLabelObrigatorio value="Razão: "
                                                   rendered="#{propostaConcessaoDiariaControlador.isDiariaColaboradorEventual()}"/>
                        <h:panelGrid columns="2"
                                     rendered="#{propostaConcessaoDiariaControlador.isDiariaColaboradorEventual()}">
                            <p:inputTextarea title="Informe a Razão da Proposta de Concessão Diária"
                                             value="#{propostaConcessaoDiariaControlador.selecionado.razao}"
                                             id="razao"
                                             cols="67"
                                             rows="3"
                                             maxlength="3000"
                                             disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                             autoResize="true" counterTemplate="{0} Caracteres Restantes."
                                             counter="counterRazao"/>
                            <h:outputText id="counterRazao"/>
                        </h:panelGrid>

                        <h:outputText value="Observação: " style="margin-right: 45px"/>
                        <h:panelGrid columns="2">
                            <p:inputTextarea title="Informe as observações da Proposta de Concessao Diária"
                                             value="#{propostaConcessaoDiariaControlador.selecionado.observacao}"
                                             id="observacao"
                                             cols="67"
                                             rows="3"
                                             maxlength="3000"
                                             disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                             autoResize="true" counterTemplate="{0} Caracteres Restantes."
                                             counter="counterObservacao"/>
                            <h:outputText id="counterObservacao"/>
                        </h:panelGrid>

                        <fc:outputLabelObrigatorio value="Declaração: "
                                                   rendered="#{propostaConcessaoDiariaControlador.isDiariaColaboradorEventual()}"/>
                        <p:outputPanel id="arquivoDeclaracao">
                            <h:outputText value="#{propostaConcessaoDiariaControlador.selecionado.declaracao.nome}"
                                          rendered="#{propostaConcessaoDiariaControlador.isDiariaColaboradorEventual() and propostaConcessaoDiariaControlador.selecionado.declaracao ne null}"
                                          styleClass="negrito"/>

                            <p:fileUpload
                                fileUploadListener="#{propostaConcessaoDiariaControlador.uploadArquivoDeclaracao}"
                                rendered="#{propostaConcessaoDiariaControlador.isDiariaColaboradorEventual() and propostaConcessaoDiariaControlador.selecionado.declaracao eq null}"
                                update="arquivoDeclaracao"
                                cancelLabel="Cancelar"
                                uploadLabel="Enviar"
                                styleClass="mtop05"
                                label="Selecionar Arquivo"
                                multiple="true"
                                sizeLimit="10485760"
                                id="botaoSelecionarDeclaracao"
                                auto="true"
                                allowTypes="/(\.|\/)(pdf)$/"
                                invalidFileMessage="Extensão de arquivo inválida!"
                                invalidSizeMessage="Tamanho do arquivo não suportador. O tamanho do arquivo suportado é de 10Mb."/>

                            <h:commandLink target="_blank"
                                           rendered="#{propostaConcessaoDiariaControlador.selecionado.declaracao.id ne null}"
                                           actionListener="#{propostaConcessaoDiariaControlador.visualizarArquivo(propostaConcessaoDiariaControlador.selecionado.declaracao)}">
                                <p:commandButton icon="ui-icon-search"
                                                 update="arquivoQualificacao"
                                                 ajax="false"
                                                 title="Clique para Visualizar este Arquivo"
                                                 styleClass="vinteLarguraVinteAltura mlef05"
                                                 process="@this"/>
                            </h:commandLink>

                            <p:commandButton icon="ui-icon-close"
                                             actionListener="#{propostaConcessaoDiariaControlador.removerDeclaracao()}"
                                             rendered="#{propostaConcessaoDiariaControlador.isDiariaColaboradorEventual() and propostaConcessaoDiariaControlador.selecionado.declaracao ne null}"
                                             update="arquivoDeclaracao"
                                             title="Clique para remover este Arquivo"
                                             styleClass="vinteLarguraVinteAltura mlef05"
                                             disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                             process="@this"/>
                        </p:outputPanel>

                        <fc:outputLabelObrigatorio value="Qualificação do Colaborador: "
                                                   rendered="#{propostaConcessaoDiariaControlador.isDiariaColaboradorEventual()}"/>
                        <p:outputPanel id="arquivoQualificacao">
                            <h:outputText
                                value="#{propostaConcessaoDiariaControlador.selecionado.qualificacaoColaborador.nome}"
                                rendered="#{propostaConcessaoDiariaControlador.isDiariaColaboradorEventual() and propostaConcessaoDiariaControlador.selecionado.qualificacaoColaborador ne null}"
                                styleClass="negrito"/>

                            <p:fileUpload
                                fileUploadListener="#{propostaConcessaoDiariaControlador.uploadArquivoQualificacao}"
                                rendered="#{propostaConcessaoDiariaControlador.isDiariaColaboradorEventual() and propostaConcessaoDiariaControlador.selecionado.qualificacaoColaborador eq null}"
                                update="arquivoQualificacao"
                                cancelLabel="Cancelar"
                                uploadLabel="Enviar"
                                styleClass="mtop05"
                                label="Selecionar Arquivo"
                                multiple="true"
                                sizeLimit="10485760"
                                id="botaoSelecionarQualificacao"
                                auto="true"
                                allowTypes="/(\.|\/)(pdf)$/"
                                invalidFileMessage="Extensão de arquivo inválida!"
                                invalidSizeMessage="Tamanho do arquivo não suportador. O tamanho do arquivo suportado é de 10Mb."/>

                            <h:commandLink target="_blank"
                                           rendered="#{propostaConcessaoDiariaControlador.selecionado.qualificacaoColaborador.id ne null}"
                                           actionListener="#{propostaConcessaoDiariaControlador.visualizarArquivo(propostaConcessaoDiariaControlador.selecionado.qualificacaoColaborador)}">
                                <p:commandButton icon="ui-icon-search"
                                                 update="arquivoQualificacao"
                                                 ajax="false"
                                                 title="Clique para Visualizar este Arquivo"
                                                 styleClass="vinteLarguraVinteAltura mlef05"
                                                 process="@this"/>
                            </h:commandLink>


                            <p:commandButton icon="ui-icon-close"
                                             actionListener="#{propostaConcessaoDiariaControlador.removerQualificacao}"
                                             rendered="#{propostaConcessaoDiariaControlador.isDiariaColaboradorEventual() and propostaConcessaoDiariaControlador.selecionado.qualificacaoColaborador ne null}"
                                             update="arquivoQualificacao"
                                             title="Clique para remover este Arquivo"
                                             styleClass="vinteLarguraVinteAltura mlef05"
                                             disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                             process="@this"/>
                        </p:outputPanel>
                    </h:panelGrid>

                    <co:titulo-panel titulo="Viagens"/>
                    <p:outputPanel id="outPutViagens">
                        <hr class="mtop05 mbto03"/>
                        <p:commandButton icon="ui-icon-plus" value="Novo" styleClass="operacao mrig05"
                                         rendered="#{propostaConcessaoDiariaControlador.viagemDiaria eq null}"
                                         actionListener="#{propostaConcessaoDiariaControlador.instanciarViagemDiaria()}"
                                         onstart="aguarde.show();"
                                         oncomplete="aguarde.hide();"
                                         disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                         process=":Formulario:tabView:outPutViagens"
                                         update=":Formulario:tabView:outPutViagens"/>

                        <p:panel id="painelDadosViagem"
                                 rendered="#{propostaConcessaoDiariaControlador.viagemDiaria ne null}">
                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Tipo de Viagem: "/>
                                <p:selectOneRadio id="tipoViagem"
                                                  value="#{propostaConcessaoDiariaControlador.viagemDiaria.tipoViagem}"
                                                  disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}">
                                    <f:selectItems value="#{propostaConcessaoDiariaControlador.tiposDeViagem}"
                                                   itemLabel="#{b}" var="b"/>
                                    <p:ajax event="change"
                                            update="indicadorEconom valorIndicador"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            listener="#{propostaConcessaoDiariaControlador.definirIndicadorEconomicoComoNull}"/>
                                </p:selectOneRadio>
                            </h:panelGrid>
                            <p:outputPanel id="indicadorEconom">
                                <h:panelGrid columns="4"
                                             rendered="#{propostaConcessaoDiariaControlador.viagemDiaria.diariaInternacional}">
                                    <h:outputText value="Indicador Econômico: " style="margin-right: 30px"/>
                                    <p:selectOneRadio value="#{propostaConcessaoDiariaControlador.indicadorEconomico}"
                                                      disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                      converter="#{indicadorEconomicoControlador.converterGenerico}">
                                        <f:selectItems
                                            value="#{propostaConcessaoDiariaControlador.indicadoresEnconomicos}"
                                            var="ind"
                                            itemLabel="#{ind}"/>
                                        <p:ajax event="change"
                                                update="valorIndicador panelInfoValores"
                                                listener="#{propostaConcessaoDiariaControlador.definirValoresIndicadorEconomico}"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                        />
                                    </p:selectOneRadio>

                                    <p:outputPanel id="panelInfoValores">
                                        <p:commandButton process="@this"
                                                         update="@none"
                                                         oncomplete="painelInfoValores.show()"
                                                         styleClass="mlef05 mrig02"
                                                         id="btInfoValores"
                                                         rendered="#{!empty propostaConcessaoDiariaControlador.valoresIndicadorEconomico}"
                                                         title="Clique para visualizar os valores do indicador enconômico."
                                                         icon="ui-icon-lista"/>

                                        <p:overlayPanel for="btInfoValores"
                                                        at="right top"
                                                        widgetVar="painelInfoValores"
                                                        style="border : solid #497692 1px;"
                                                        styleClass="semSombra">

                                            <p:dataTable id="listaValores"
                                                         var="v"
                                                         rowIndexVar="rowlx"
                                                         rowStyleClass="#{v.valor eq propostaConcessaoDiariaControlador.valorIndicador ? 'fundo-amarelo-padrao' : empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'vinteAltura'}"
                                                         style="max-height: 200px !important; overflow-y: scroll; border : solid #92B8D3 1px; margin-top: 10px;"
                                                         value="#{propostaConcessaoDiariaControlador.valoresIndicadorEconomico}"
                                                         styleClass="mtop03 mbot03 semBorda">
                                                <f:facet name="header">
                                                    <h:outputText value="Valores do Indicador"/>
                                                </f:facet>
                                                <p:column style="text-align: left">
                                                    <h:outputText
                                                        value="#{propostaConcessaoDiariaControlador.indicadorEconomico.sigla} "
                                                        styleClass="negrito"/>
                                                    <h:outputText value="#{v.valor}" styleClass="negrito">
                                                        <f:convertNumber pattern="###,##0.00"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column style="text-align: left">
                                                    <h:outputText value="Período: "/>
                                                    <h:outputText value="#{v.inicioVigencia}">
                                                        <f:convertDateTime type="date"/>
                                                    </h:outputText>
                                                    <h:outputText value=" a "/>
                                                    <h:outputText value="#{v.fimVigencia}" styleClass="mrig05">
                                                        <f:convertDateTime type="date"/>
                                                    </h:outputText>

                                                </p:column>
                                            </p:dataTable>
                                        </p:overlayPanel>
                                    </p:outputPanel>
                                </h:panelGrid>
                            </p:outputPanel>
                            <p:outputPanel id="valorIndicador">
                                <h:panelGrid columns="2">
                                    <h:outputText
                                        value="Valor (#{propostaConcessaoDiariaControlador.indicadorEconomico.sigla}): "
                                        style="margin-right: 75px"
                                        rendered="#{propostaConcessaoDiariaControlador.renderizarValoresIndicador()}"/>
                                    <h:outputText value="#{propostaConcessaoDiariaControlador.valorIndicador}"
                                                  rendered="#{propostaConcessaoDiariaControlador.renderizarValoresIndicador()}"
                                                  styleClass="negrito">
                                        <f:convertNumber pattern="###,##0.00"/>/>
                                    </h:outputText>
                                </h:panelGrid>
                            </p:outputPanel>
                            <p:panel styleClass="semBorda">
                                <co:titulo-panel titulo="Itinerário"/>
                                <h:panelGrid columns="2">
                                    <h:outputText value="Cidade de Origem: "/>
                                    <h:panelGrid columns="2">
                                        <p:autoComplete queryDelay="1000"
                                                        id="cidadeOrigem"
                                                        size="70"
                                                        title="Selecione a cidade."
                                                        completeMethod="#{propostaConcessaoDiariaControlador.completaCidadeOrigem}"
                                                        converter="#{cidadeControlador.converterGenerico}"
                                                        value="#{propostaConcessaoDiariaControlador.cidadeOrigem}"
                                                        disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                        var="city"
                                                        itemValue="#{city.id}"
                                                        itemLabel="#{city}"
                                                        maxResults="10">
                                            <p:ajax event="itemSelect"
                                                    onstart="aguarde.show()"
                                                    oncomplete="aguarde.hide()"
                                                    update="etinerario cidadeOrigem"
                                                    listener="#{propostaConcessaoDiariaControlador.atribuirCidadeOrigemNoItinerario}"/>
                                        </p:autoComplete>

                                        <p:commandButton icon="ui-icon-circle-plus"
                                                         onclick="window.open('#{request.contextPath}/cidade/novo/?sessao=true', '_blank')"
                                                         update="@this"
                                                         disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                         title="Clique para inserir um novo registro."
                                                         process="@this"/>

                                        <p:watermark
                                            value="O campo filtro de cidade é para auxiliar a compor o itinerário. O mesmo não será salvo no banco."
                                            for="cidadeOrigem"/>
                                    </h:panelGrid>


                                    <h:outputText value="Cidade de Destino: "/>
                                    <h:panelGrid columns="2">
                                        <p:autoComplete queryDelay="1000"
                                                        id="cidadeDestino"
                                                        size="70"
                                                        title="Selecione a cidade de destino."
                                                        completeMethod="#{propostaConcessaoDiariaControlador.completaCidadeDestino}"
                                                        converter="#{cidadeControlador.converterGenerico}"
                                                        value="#{propostaConcessaoDiariaControlador.cidadeDestino}"
                                                        disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                        var="c"
                                                        itemValue="#{c.id}"
                                                        itemLabel="#{c}"
                                                        maxResults="10">
                                            <p:ajax event="itemSelect"
                                                    onstart="aguarde.show()"
                                                    oncomplete="aguarde.hide()"
                                                    update="etinerario cidadeDestino"
                                                    listener="#{propostaConcessaoDiariaControlador.atribuirCidadeDestinoNoItinerario}"/>
                                        </p:autoComplete>

                                        <p:commandButton icon="ui-icon-circle-plus"
                                                         onclick="window.open('#{request.contextPath}/cidade/novo/?sessao=true', '_blank')"
                                                         disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                         update="@this"
                                                         title="Clique para inserir um novo registro."
                                                         process="@this"/>
                                        <p:watermark
                                            value="O campo filtro de cidade é para auxiliar a compor o itinerário. O mesmo não será salvo no banco."
                                            for="cidadeDestino"/>
                                    </h:panelGrid>

                                    <fc:outputLabelObrigatorio value="Itinerário: "/>
                                    <h:panelGrid columns="2">
                                        <p:inputTextarea title="Informe o itinerário da Proposta de Concessão Diária"
                                                         value="#{propostaConcessaoDiariaControlador.viagemDiaria.itinerario}"
                                                         id="etinerario"
                                                         cols="67"
                                                         rows="4"
                                                         maxlength="3000"
                                                         disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                         autoResize="true"
                                                         counterTemplate="{0} Caracteres Restantes."
                                                         counter="counterEtinerario"/>
                                        <h:outputText id="counterEtinerario"/>
                                    </h:panelGrid>
                                </h:panelGrid>
                                <hr class="mtop05"/>
                            </p:panel>
                            <h:panelGrid columns="2">
                                <h:outputText value="Meio de Transporte: "/>
                                <p:selectOneRadio id="transporte"
                                                  disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                  value="#{propostaConcessaoDiariaControlador.viagemDiaria.meioDeTransporte}">
                                    <f:selectItems value="#{propostaConcessaoDiariaControlador.meiosDeTransporte}"
                                                   itemLabel="#{b}" var="b"/>
                                </p:selectOneRadio>

                                <fc:outputLabelObrigatorio value="Data Inicial de Saída: "/>
                                <h:panelGrid columns="6">
                                    <p:calendar title="Digite a data inicial de saída"
                                                value="#{propostaConcessaoDiariaControlador.viagemDiaria.dataInicialSaida}"
                                                id="dataInicialSaida"
                                                disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                locale="pt_BR"
                                                pattern="dd/MM/yyyy"
                                                navigator="true" immediate="true"
                                                onkeyup="mascara(this, mdata)"/>

                                    <h:outputText value=" às "/>
                                    <p:inputMask mask="99"
                                                 size="5"
                                                 value="#{propostaConcessaoDiariaControlador.viagemDiaria.horaInicialSaida}"
                                                 disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                 onkeyup="verificaValor(this.id, '23')">
                                    </p:inputMask>

                                    <h:outputText value=" horas e "/>
                                    <p:inputMask mask="99"
                                                 size="5"
                                                 value="#{propostaConcessaoDiariaControlador.viagemDiaria.minutoInicialSaida}"
                                                 disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                 onkeyup="verificaValor(this.id, '59')">
                                    </p:inputMask>
                                    <h:outputText value=" minutos "/>
                                </h:panelGrid>

                                <fc:outputLabelObrigatorio value="Data Final de Saída: "/>
                                <h:panelGrid columns="6">
                                    <p:calendar title="Digite a data final de saída"
                                                value="#{propostaConcessaoDiariaControlador.viagemDiaria.dataFinalSaida}"
                                                id="dataFinalSaida"
                                                disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                locale="pt_BR"
                                                pattern="dd/MM/yyyy"
                                                navigator="true" immediate="true"
                                                onkeyup="mascara(this, mdata)"/>

                                    <h:outputText value=" às "/>
                                    <p:inputMask mask="99"
                                                 size="5"
                                                 value="#{propostaConcessaoDiariaControlador.viagemDiaria.horaFinalSaida}"
                                                 disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                 onkeyup="verificaValor(this.id, '23')">
                                    </p:inputMask>

                                    <h:outputText value=" horas e "/>
                                    <p:inputMask mask="99"
                                                 size="5"
                                                 value="#{propostaConcessaoDiariaControlador.viagemDiaria.minutoFinalSaida}"
                                                 disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                 onkeyup="verificaValor(this.id, '59')">
                                    </p:inputMask>
                                    <h:outputText value=" minutos "/>
                                </h:panelGrid>

                                <fc:outputLabelObrigatorio value="Data Inicial de Retorno: "/>
                                <h:panelGrid columns="6">
                                    <p:calendar title="Digite a data inicial de retorno"
                                                value="#{propostaConcessaoDiariaControlador.viagemDiaria.dataInicialRetorno}"
                                                id="dataInicialRetorno"
                                                locale="pt_BR"
                                                pattern="dd/MM/yyyy"
                                                navigator="true" immediate="true"
                                                disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                onkeyup="mascara(this, mdata)"/>

                                    <h:outputText value=" às "/>
                                    <p:inputMask mask="99" size="5"
                                                 value="#{propostaConcessaoDiariaControlador.viagemDiaria.horaInicialRetorno}"
                                                 disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                 onkeyup="verificaValor(this.id, '23')">
                                    </p:inputMask>

                                    <h:outputText value=" horas e "/>
                                    <p:inputMask mask="99" size="5"
                                                 value="#{propostaConcessaoDiariaControlador.viagemDiaria.minutoInicialRetorno}"
                                                 disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                 onkeyup="verificaValor(this.id, '59')">
                                    </p:inputMask>
                                    <h:outputText value=" minutos "/>
                                </h:panelGrid>

                                <fc:outputLabelObrigatorio value="Data Final de Retorno: "/>
                                <h:panelGrid columns="6">
                                    <p:calendar title="Digite a data final de retorno"
                                                value="#{propostaConcessaoDiariaControlador.viagemDiaria.dataFinalRetorno}"
                                                id="dataFinalRetorno"
                                                locale="pt_BR"
                                                pattern="dd/MM/yyyy"
                                                navigator="true" immediate="true"
                                                disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                onkeyup="mascara(this, mdata)"/>

                                    <h:outputText value=" às "/>
                                    <p:inputMask mask="99" size="5"
                                                 value="#{propostaConcessaoDiariaControlador.viagemDiaria.horaFinalRetorno}"
                                                 disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                 onkeyup="verificaValor(this.id, '23')">
                                    </p:inputMask>
                                    <h:outputText value=" horas e "/>

                                    <p:inputMask mask="99" size="5"
                                                 value="#{propostaConcessaoDiariaControlador.viagemDiaria.minutoFinalRetorno}"
                                                 disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                                 onkeyup="verificaValor(this.id, '59')">
                                    </p:inputMask>
                                    <h:outputText value=" minutos "/>
                                </h:panelGrid>
                            </h:panelGrid>

                            <p:commandButton id="btnCalcular"
                                             icon="ui-icon-calculator"
                                             styleClass="padrao mtop05 mbot20"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update=":Formulario:tabView:calculados"
                                             value="Calcular"
                                             title="Clique para calcular os valores da diária."
                                             disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                             actionListener="#{propostaConcessaoDiariaControlador.calcularValorDiaria()}"/>

                            <co:titulo-panel titulo="Valores da Viagem"/>
                            <h:panelGrid columns="6" cellspacing="3" id="calculados">
                                <h:outputText value="Dias: "/>
                                <h:outputText
                                    value="#{propostaConcessaoDiariaControlador.viagemDiaria.quantidadeDeDias}"
                                    styleClass="negrito"/>

                                <h:outputText value="Meia Diária: "/>
                                <h:outputText
                                    value="#{propostaConcessaoDiariaControlador.viagemDiaria.caracterMeiaDiaria}"
                                    styleClass="negrito"/>

                                <h:outputText value="Total de Dias: "/>
                                <h:outputText value="#{propostaConcessaoDiariaControlador.viagemDiaria.diasFormatado}"
                                              styleClass="negrito"/>

                                <h:outputText value="Valor Integral: "/>
                                <h:outputText value="#{propostaConcessaoDiariaControlador.viagemDiaria.totalIntegral}"
                                              converter="moneyConverter"
                                              styleClass="negrito"/>

                                <h:outputText value="Valor Meia: "/>
                                <h:outputText value="#{propostaConcessaoDiariaControlador.viagemDiaria.totalValorMeia}"
                                              converter="moneyConverter"
                                              styleClass="negrito"/>

                                <h:outputText value="Total da Despesa: "/>
                                <h:outputText value="#{propostaConcessaoDiariaControlador.viagemDiaria.valorTotal}"
                                              converter="moneyConverter"
                                              styleClass="negrito"/>
                            </h:panelGrid>

                            <p:commandButton id="adicionarViagem"
                                             styleClass="padrao mtop10"
                                             title="Clique para adicionar o registro."
                                             icon="ui-icon-circle-plus"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                             value="Adicionar"
                                             actionListener="#{propostaConcessaoDiariaControlador.adicionarViagemDiaria}"
                                             process=":Formulario:tabView:outPutViagens"
                                             update=":Formulario:tabView:outPutViagens :Formulario:tabView:tabelaViagens :Formulario:tabView:etinerarioExec"/>

                            <p:commandButton id="cancelarViagem"
                                             styleClass="padrao mtop10 mlef05"
                                             title="Clique para cancelar o registro."
                                             icon="ui-icon-cancel"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             value="Cancelar"
                                             process="@this"
                                             actionListener="#{propostaConcessaoDiariaControlador.cancelarViagemDiaria}"
                                             update=":Formulario:tabView:outPutViagens"/>
                        </p:panel>
                    </p:outputPanel>

                    <p:dataTable id="tabelaViagens"
                                 value="#{propostaConcessaoDiariaControlador.selecionado.viagens}"
                                 var="viagem"
                                 rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                 paginator="true"
                                 styleClass="mtop03"
                                 rows="10"
                                 paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>VIAGENS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                 emptyMessage="Não foram localizados registros para serem apresentados."
                                 rowIndexVar="rowlx">
                        <p:column>
                            <p:rowToggler/>
                        </p:column>
                        <p:column headerText="Ação" style="width: 10%; text-align: center">
                            <p:commandButton id="cbAlterarViagem"
                                             icon="ui-icon-pencil"
                                             styleClass="mrig05"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update=":Formulario:tabView:outPutViagens"
                                             process="@this"
                                             disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                             title="Clique para alterar este registro."
                                             actionListener="#{propostaConcessaoDiariaControlador.editarViagemDiaria(viagem)}"/>
                            <p:commandButton id="cbRemoverViagem"
                                             icon="ui-icon-trash"
                                             title="Clique para remover este registro."
                                             process="@this"
                                             disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                             actionListener="#{propostaConcessaoDiariaControlador.removerViagemDiaria(viagem)}"
                                             update=":Formulario:tabView:tabelaViagens"/>
                        </p:column>
                        <p:column headerText="Tipo de Viagem">
                            <h:outputText value="#{viagem.tipoViagem.descricao}"/>
                        </p:column>
                        <p:column headerText="Meio de Transporte">
                            <h:outputText value="#{viagem.meioDeTransporte.descricao}"/>
                        </p:column>

                        <p:column headerText="Dias">
                            <h:outputText value="#{viagem.diasFormatado}"/>
                        </p:column>
                        <p:column headerText="Valor Integral" styleClass="alinhamentoDireita">
                            <h:outputText value="#{viagem.totalIntegral}" converter="moneyConverter"/>
                            <f:facet name="footer">
                                <div class="alinhamentoDireita">
                                    <h:outputText
                                        value="#{propostaConcessaoDiariaControlador.calcularTotalIntegral()}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </div>
                            </f:facet>
                        </p:column>
                        <p:column headerText="Valor Meia" styleClass="alinhamentoDireita">
                            <h:outputText value="#{viagem.totalValorMeia}" converter="moneyConverter"/>
                            <f:facet name="footer">
                                <div class="alinhamentoDireita">
                                    <h:outputText
                                        value="#{propostaConcessaoDiariaControlador.calcularTotalValorMeia()}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </div>
                            </f:facet>
                        </p:column>
                        <p:column headerText="Total da Despesa" styleClass="alinhamentoDireita">
                            <h:outputText value="#{viagem.valorTotal}" converter="moneyConverter"/>
                            <f:facet name="footer">
                                <div class="alinhamentoDireita">
                                    <h:outputText
                                        value="#{propostaConcessaoDiariaControlador.calcularTotalDaDespesa()}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </div>
                            </f:facet>
                        </p:column>
                        <p:rowExpansion>
                            <p:panelGrid columns="8">
                                <h:outputText value="Data Inicial de Saída"/>
                                <h:outputText value="Hora Inicial de Saída"/>
                                <h:outputText value="Data Final de Saída"/>
                                <h:outputText value="Hora Final de Saída"/>
                                <h:outputText value="Data Inicial de Retorno"/>
                                <h:outputText value="Hora Inicial de Retorno"/>
                                <h:outputText value="Data Final de Retorno"/>
                                <h:outputText value="Hora Final de Retorno"/>

                                <h:outputText value="#{viagem.dataInicialSaida}">
                                    <f:convertDateTime type="date"/>
                                </h:outputText>
                                <h:outputText value="#{viagem.horaInicialSaida}:#{viagem.minutoInicialSaida}"/>
                                <h:outputText value="#{viagem.dataFinalSaida}">
                                    <f:convertDateTime type="date"/>
                                </h:outputText>
                                <h:outputText value="#{viagem.horaFinalSaida}:#{viagem.minutoFinalSaida}"/>
                                <h:outputText value="#{viagem.dataInicialRetorno}">
                                    <f:convertDateTime type="date"/>
                                </h:outputText>
                                <h:outputText value="#{viagem.horaInicialRetorno}:#{viagem.minutoInicialRetorno}"/>
                                <h:outputText value="#{viagem.dataFinalRetorno}">
                                    <f:convertDateTime type="date"/>
                                </h:outputText>
                                <h:outputText value="#{viagem.horaFinalRetorno}:#{viagem.minutoFinalRetorno}"/>
                            </p:panelGrid>
                        </p:rowExpansion>
                    </p:dataTable>

                    <p:outputPanel rendered="#{propostaConcessaoDiariaControlador.isDiariaNormal()}">
                        <hr class="mtop05 mtop03"/>

                        <co:titulo-panel titulo="Dados do Fornecedor da Passagem/Locomoção"/>
                        <h:panelGrid columns="2" rendered="#{propostaConcessaoDiariaControlador.isDiariaNormal()}">
                            <h:outputText value="Passagem comprada pelo município? "/>
                            <h:panelGroup>
                                <p:selectBooleanCheckbox
                                    value="#{propostaConcessaoDiariaControlador.selecionado.compradaPeloMunicipio}"/>

                                <co:botao_informacao
                                    styleClass="mlef05"
                                    descricao="Ao selecionar esta opção, as informações da passagem devem ser informadas."/>
                            </h:panelGroup>

                            <fc:outputLabelObrigatorio styleAsterisco="color: blue !important" for="fornecedor" value="Fornecedor: "/>
                            <p:autoComplete queryDelay="1000" id="fornecedor" size="70"
                                            title="Informe a Fornecedora da Passagem."
                                            value="#{propostaConcessaoDiariaControlador.selecionado.fornecedor}"
                                            completeMethod="#{propostaConcessaoDiariaControlador.completarFornecedores}"
                                            converter="#{pessoaContabilControlador.converterGenerico}"
                                            disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                            maxResults="10"
                                            styleClass="mrig05"
                                            var="fo"
                                            itemValue="#{fo.id}"
                                            itemLabel="#{fo.nomeAutoComplete}"/>

                            <fc:outputLabelObrigatorio styleAsterisco="color: blue !important" for="numeroContrato" value="Número do Contrato: "/>
                            <p:inputText id="numeroContrato"
                                         disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                         value="#{propostaConcessaoDiariaControlador.selecionado.numeroContrato}"
                                         title="Informe o Número do Contrato"/>


                            <fc:outputLabelObrigatorio styleAsterisco="color: blue !important" value="Anexos: "/>
                            <h:panelGrid columns="2" id="panelArquivo">
                                <p:commandButton id="anexarArquivo"
                                                 title="Clique para anexar o arquivo."
                                                 oncomplete="aguarde.hide()"
                                                 update=":formularioUpload"
                                                 icon="ui-icon-folder-open"
                                                 value="#{propostaConcessaoDiariaControlador.selecionado.id eq null ? 'Anexar':'Anexos'}"
                                                 styleClass="padrao"
                                                 actionListener="#{propostaConcessaoDiariaControlador.inicializarArquivo(false)}"
                                                 onstart="aguarde.show();arq.show();"/>
                            </h:panelGrid>

                            <fc:outputLabelObrigatorio styleAsterisco="color: blue !important" value="Valor da Passagem:"/>
                            <fc:inputMoeda id="valorPassagem"
                                           value="#{propostaConcessaoDiariaControlador.selecionado.valorPassagem}"
                                           title="Informe o Valor da Passagem"/>
                        </h:panelGrid>
                    </p:outputPanel>

                    <hr class="mtop05 mbto03"/>
                    <h:panelGrid columns="2">

                        <h:outputText value="Situação: "/>
                        <h:outputText value="#{propostaConcessaoDiariaControlador.selecionado.situacao.descricao}"
                                      styleClass="negrito"/>

                        <h:outputText value="Situação da Diária: "/>
                        <h:outputText value="#{propostaConcessaoDiariaControlador.selecionado.situacaoDiaria.descricao}"
                                      styleClass="negrito"/>

                        <h:outputText value="Responsável: "
                                      rendered="#{propostaConcessaoDiariaControlador.selecionado.responsavel ne null}"/>
                        <h:outputText value="#{propostaConcessaoDiariaControlador.selecionado.responsavel}"
                                      rendered="#{propostaConcessaoDiariaControlador.selecionado.responsavel ne null}"
                                      styleClass="negrito"/>

                        <h:outputText value="Ato Legal: "
                                      rendered="#{propostaConcessaoDiariaControlador.selecionado.atoLegal ne null}"/>
                        <h:outputText value="#{propostaConcessaoDiariaControlador.selecionado.atoLegal}"
                                      rendered="#{propostaConcessaoDiariaControlador.selecionado.atoLegal ne null}"
                                      styleClass="negrito"/>
                    </h:panelGrid>

                </p:tab>
                <p:tab title="Despesas Custeadas por Terceiros">
                    <h:panelGrid columns="2">
                        <h:outputText value="Despesas Custeadas por Terceiros: "/>
                        <p:selectOneMenu title="Informe o tipo de despesa custeada por terceiros."
                                         value="#{propostaConcessaoDiariaControlador.selecionado.tipoDespesaCusteadaTerceiro}"
                                         disabled="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}">
                            <f:selectItems value="#{propostaConcessaoDiariaControlador.tiposDeDespesasCusteadas}"/>
                            <p:ajax update=":Formulario:tabView:tabelaViagens"
                                    event="change"
                                    process="@this"
                                    listener="#{propostaConcessaoDiariaControlador.calcularValorDiariaTotal()}"/>
                        </p:selectOneMenu>

                        <h:outputText value="Indenização com Locomoção: "/>
                        <p:selectBooleanCheckbox
                            value="#{propostaConcessaoDiariaControlador.selecionado.indenizacaoComLocomocao}"/>

                        <h:outputText value="Anexos: "/>
                        <h:panelGrid columns="2" id="panelArquivoDespesas">
                            <p:commandButton id="anexarArquivoDespesas"
                                             title="Clique para anexar o arquivo."
                                             oncomplete="aguarde.hide()"
                                             icon="ui-icon-folder-open"
                                             value="#{propostaConcessaoDiariaControlador.selecionado.id eq null ? 'Anexar':'Anexos'}"
                                             styleClass="padrao"
                                             update=":formularioUpload"
                                             actionListener="#{propostaConcessaoDiariaControlador.inicializarArquivo(true)}"
                                             onstart="aguarde.show();arq.show();"/>
                        </h:panelGrid>
                    </h:panelGrid>
                </p:tab>

                <p:tab id="tab2" title="Relatório de Viagem">
                    <p:panel id="panelLancamento">
                        <h:panelGrid columns="2">
                            <h:outputText value="Data de Saída: "/>
                            <h:panelGrid columns="6">
                                <p:calendar title="Informe a data de saída"
                                            value="#{propostaConcessaoDiariaControlador.selecionado.inicioExec}"
                                            id="dataSaidaExec"
                                            locale="pt_BR"
                                            pattern="dd/MM/yyyy"
                                            navigator="true"
                                            onkeyup="mascara(this, mdata)"/>

                                <h:outputText value=" às "/>
                                <p:inputMask mask="99"
                                             size="5"
                                             value="#{propostaConcessaoDiariaControlador.selecionado.horaSaidaExecutado}"
                                             onkeyup="verificaValor(this.id, '23')"/>

                                <h:outputText value=" horas e "/>
                                <p:inputMask mask="99"
                                             size="5"
                                             value="#{propostaConcessaoDiariaControlador.selecionado.minutoSaidaExecutado}"
                                             onkeyup="verificaValor(this.id, '59')"/>

                                <h:outputText value=" minutos "/>
                            </h:panelGrid>


                            <h:outputText value="Data de Retorno: "/>
                            <h:panelGrid columns="6">
                                <p:calendar title="Informe a data de retorno."
                                            value="#{propostaConcessaoDiariaControlador.selecionado.fimExec}"
                                            id="dataRetornoExec"
                                            locale="pt_BR"
                                            pattern="dd/MM/yyyy"
                                            navigator="true"
                                            onkeyup="mascara(this, mdata)"/>

                                <h:outputText value=" às "/>
                                <p:inputMask mask="99" size="5"
                                             value="#{propostaConcessaoDiariaControlador.selecionado.horaChegadaExecutado}"
                                             onkeyup="verificaValor(this.id, '23')"/>

                                <h:outputText value=" horas e "/>
                                <p:inputMask mask="99" size="5"
                                             value="#{propostaConcessaoDiariaControlador.selecionado.minutoChegadaExecutado}"
                                             onkeyup="verificaValor(this.id, '59')"/>

                                <h:outputText value=" minutos "/>
                            </h:panelGrid>

                            <h:outputText value="Justificativa: "/>
                            <fc:inputTextarea value="#{propostaConcessaoDiariaControlador.selecionado.justificativa}"/>

                            <h:outputText value="Atividades Desenvolvidas: "/>
                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0">
                                <p:inputTextarea id="atividDesenvolvidas"
                                                 value="#{propostaConcessaoDiariaControlador.selecionado.descricaoAtividades}"
                                                 rows="04"
                                                 cols="100"
                                                 title="Informe as atividades desenvolvidas."
                                                 maxlength="3000"
                                                 autoResize="true"
                                                 counterTemplate=" {0} Caracteres Restantes."
                                                 counter="counterAtvDesenvolvidas"/>
                                <h:outputText id="counterAtvDesenvolvidas" styleClass="mlef05"/>
                            </h:panelGrid>


                            <h:outputText value="Documentos Anexados: "/>
                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0">
                                <p:inputTextarea id="docAnexado"
                                                 value="#{propostaConcessaoDiariaControlador.selecionado.documentosAnexados}"
                                                 rows="04"
                                                 cols="100"
                                                 title="Informe os documentos anexados."
                                                 maxlength="3000"
                                                 autoResize="true"
                                                 counterTemplate=" {0} Caracteres Restantes."
                                                 counter="counterDocAnexados"/>
                                <h:outputText id="counterDocAnexados" styleClass="mlef05"/>
                            </h:panelGrid>

                            <h:outputText value="Itinerário: "/>
                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0">
                                <p:inputTextarea id="etinerarioExec"
                                                 value="#{propostaConcessaoDiariaControlador.selecionado.etinerarioExec}"
                                                 title="Informe o itinerário."
                                                 rows="04"
                                                 cols="100"
                                                 maxlength="255"
                                                 autoResize="true"
                                                 counterTemplate=" {0} Caracteres Restantes."
                                                 counter="counterEtinerarioExec"/>
                                <h:outputText id="counterEtinerarioExec" styleClass="mlef05"/>
                            </h:panelGrid>
                        </h:panelGrid>

                        <br/>
                        <co:titulo-panel titulo="Demonstrativo de Gastos"/>
                        <h:panelGrid columns="2" id="gridDemonstrativo">
                            <fc:outputLabelObrigatorio value="Data: "/>
                            <p:calendar id="dataPrestacao"
                                        value="#{propostaConcessaoDiariaControlador.diariaPrestacaoContaselecionada.dataValor}"
                                        navigator="true" locale="pt_BR" pattern="dd/MM/yyyy"
                                        onkeyup="mascara(this, mdata)"
                                        title="Informe a Data"/>

                            <fc:outputLabelObrigatorio value="N° do Documento: "/>
                            <p:inputText id="numeroNota"
                                         value="#{propostaConcessaoDiariaControlador.diariaPrestacaoContaselecionada.numeroNota}"
                                         title="Informe o Nº do Documento"/>

                            <fc:outputLabelObrigatorio value="Série do Documento: "/>
                            <p:inputText id="serieDocumento"
                                         value="#{propostaConcessaoDiariaControlador.diariaPrestacaoContaselecionada.serieDocumento}"
                                         title="Informe a Série do Documento"/>

                            <fc:outputLabelObrigatorio value="Razão Social: "/>
                            <p:inputText id="razaosocial"
                                         value="#{propostaConcessaoDiariaControlador.diariaPrestacaoContaselecionada.razaosocial}"
                                         size="70"
                                         title="Informe a Razão Social"/>

                            <fc:outputLabelObrigatorio value="CPF/CNPJ: "/>
                            <p:inputText id="cpfcnpj"
                                         value="#{propostaConcessaoDiariaControlador.diariaPrestacaoContaselecionada.cpfCnpj}"
                                         title="Informe o CPF/CNPJ"/>

                            <fc:outputLabelObrigatorio value="Valor: "/>
                            <fc:inputMoeda id="valorPrestacao"
                                           value="#{propostaConcessaoDiariaControlador.diariaPrestacaoContaselecionada.valor}"
                                           title="Informe o Valor"/>
                        </h:panelGrid>

                        <h:panelGrid columns="2">
                            <p:commandButton value="Adicionar"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao"
                                             icon="ui-icon-circle-plus"
                                             actionListener="#{propostaConcessaoDiariaControlador.adicionarDemonstrativoGastos}"
                                             update=":Formulario:tabView:panelLancamento :Formulario:tabView:tabelaLancamento"
                                             title="Clique para adicionar este registro."/>
                        </h:panelGrid>

                        <p:dataTable id="tabelaLancamento"
                                     value="#{propostaConcessaoDiariaControlador.selecionado.diariaPrestacaoContas}"
                                     var="l"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>DEMONSTRATIVOS DE GASTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Ações" style="width: 7%; text-align: center">
                                <p:commandButton icon="ui-icon-pencil"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 styleClass="mrig05"
                                                 actionListener="#{propostaConcessaoDiariaControlador.editarDemonstrativoGastos(l)}"
                                                 title="Clique para alterar este registro."
                                                 id="btnEditarDocto"
                                                 update=":Formulario:tabView:tabelaLancamento :Formulario:tabView:panelLancamento">
                                </p:commandButton>

                                <p:commandButton icon="ui-icon-trash"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="@this"
                                                 actionListener="#{propostaConcessaoDiariaControlador.removerDemonstrativoGastos(l)}"
                                                 update=":Formulario:tabView:tabelaLancamento"
                                                 title="Clique para remover este registro."
                                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}">
                                </p:commandButton>
                            </p:column>
                            <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{l.dataValor}">
                                    <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="N° do Documento" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{l.numeroNota}"/>
                            </p:column>
                            <p:column headerText="Série do Documento" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{l.serieDocumento}"/>
                            </p:column>
                            <p:column headerText="Razão Social" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{l.razaosocial}"/>
                            </p:column>
                            <p:column headerText="CPF/CNPJ" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{l.cpfCnpj}"/>
                            </p:column>
                            <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                <h:outputText value="#{l.valor}"
                                              converter="moneyConverter"/>
                                <f:facet name="footer">
                                    <h:outputText value="Total: " styleClass="negrito"/>
                                    <h:outputText styleClass="negrito" id="totais"
                                                  value="#{propostaConcessaoDiariaControlador.totalPrestacaoContas}"
                                                  converter="moneyConverter"/>
                                </f:facet>
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                </p:tab>

                <p:tab id="tab3" title="Execução Orçamentária">
                    <p:tabView id="tabViewExecucao">
                        <p:tab id="tabEmpenho" title="Empenho">

                            <p:dataTable id="tabelaEmpenho"
                                         value="#{propostaConcessaoDiariaControlador.empenhos}"
                                         var="e"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop05"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>EMPENHOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{e.dataEmpenho}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Número" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{e.numero}"/>
                                </p:column>
                                <p:column headerText="Histórico" style="text-align: justify">
                                    <h:outputText value="#{e.historicoNota}"/>
                                </p:column>
                                <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{e.valor}"
                                                  converter="moneyConverter"/>
                                </p:column>
                                <f:facet name="footer">
                                    <div style="text-align: right">
                                        <h:outputText value="Total: " styleClass="mlef05"/>
                                        <h:outputText value="#{propostaConcessaoDiariaControlador.somaEmpenhos}"
                                                      converter="moneyConverter"/>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </p:tab>
                        <p:tab id="tabEmpenhoEstorno" title="Estorno de Empenho">

                            <p:dataTable id="tabelaEmpenhoEstorno"
                                         value="#{propostaConcessaoDiariaControlador.empenhosEstorno}"
                                         var="e"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop05"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE EMPENHOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{e.dataEstorno}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Número" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{e.numero}"/>
                                </p:column>
                                <p:column headerText="Histórico" style="text-align: justify">
                                    <h:outputText value="#{e.historicoNota}"/>
                                </p:column>
                                <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{e.valor}"
                                                  converter="moneyConverter"/>
                                </p:column>
                                <f:facet name="footer">
                                    <div style="text-align: right">
                                        <h:outputText value="Total: " styleClass="mlef05"/>
                                        <h:outputText
                                            value="#{propostaConcessaoDiariaControlador.somaEstornoEmpenhos}"
                                            converter="moneyConverter"/>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </p:tab>
                        <p:tab id="tabLiquidacao" title="Liquidação">
                            <p:dataTable id="tabelaLiquidacao"
                                         value="#{propostaConcessaoDiariaControlador.liquidacoes}"
                                         var="l"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop05"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>LIQUIDAÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{l.dataLiquidacao}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Número" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{l.numero}"/>
                                </p:column>
                                <p:column headerText="Histórico" style="text-align: justify">
                                    <h:outputText value="#{l.historicoNota}"/>
                                </p:column>
                                <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{l.valor}"
                                                  converter="moneyConverter"/>
                                </p:column>
                                <f:facet name="footer">
                                    <div style="text-align: right">
                                        <h:outputText value="Total: " styleClass="mlef05"/>
                                        <h:outputText value="#{propostaConcessaoDiariaControlador.somaLiquidacoes}"
                                                      converter="moneyConverter"/>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </p:tab>
                        <p:tab id="tabLiquidacaoEstorno" title="Estorno de Liquidação">
                            <p:dataTable id="tabelaLiquidacaoEstorno"
                                         value="#{propostaConcessaoDiariaControlador.liquidacoesEstorno}"
                                         var="l"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop05"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE LIQUIDAÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Data de Estorno" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{l.dataEstorno}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Número" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{l.numero}"/>
                                </p:column>
                                <p:column headerText="Histórico" style="text-align: justify">
                                    <h:outputText value="#{l.historicoNota}"/>
                                </p:column>
                                <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{l.valor}"
                                                  converter="moneyConverter"/>
                                </p:column>
                                <f:facet name="footer">
                                    <div style="text-align: right">
                                        <h:outputText value="Total: " styleClass="mlef05"/>
                                        <h:outputText
                                            value="#{propostaConcessaoDiariaControlador.somaEstornoLiquidacoes}"
                                            converter="moneyConverter"/>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </p:tab>
                        <p:tab id="tabPagamento" title="Pagamento">
                            <p:dataTable id="tabelaPagamento"
                                         value="#{propostaConcessaoDiariaControlador.pagamentos}"
                                         var="p"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop05"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>PAGAMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{p.dataPagamento}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Número" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{p.numeroPagamento}"/>
                                </p:column>
                                <p:column headerText="Histórico" style="text-align: justify">
                                    <h:outputText value="#{p.historicoNota}"/>
                                </p:column>
                                <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{p.valor}"
                                                  converter="moneyConverter"/>
                                </p:column>
                                <f:facet name="footer">
                                    <div style="text-align: right">
                                        <h:outputText value="Total: " styleClass="mlef05"/>
                                        <h:outputText value="#{propostaConcessaoDiariaControlador.somaPagamentos}"
                                                      converter="moneyConverter"/>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </p:tab>
                        <p:tab id="tabPagamentoEstorno" title="Estorno de Pagamento">
                            <p:dataTable id="tabelaPagamentoEstorno"
                                         value="#{propostaConcessaoDiariaControlador.pagamentosEstorno}"
                                         var="p"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop05"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE PAGAMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Data de Estorno" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{p.dataEstorno}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Número" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{p.numero}"/>
                                </p:column>
                                <p:column headerText="Histórico" style="text-align: justify">
                                    <h:outputText value="#{p.historicoNota}"/>
                                </p:column>
                                <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{p.valor}"
                                                  converter="moneyConverter"/>
                                </p:column>
                                <f:facet name="footer">
                                    <div style="text-align: right">
                                        <h:outputText value="Total: " styleClass="mlef05"/>
                                        <h:outputText
                                            value="#{propostaConcessaoDiariaControlador.somaEstornoPagamentos}"
                                            converter="moneyConverter"/>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </p:tab>
                        <p:tab id="tabInscricao" title="Inscrição">
                            <p:dataTable id="tabelaInscricao"
                                         value="#{propostaConcessaoDiariaControlador.diariasContabilizacaoInscricaoNormal}"
                                         var="dc"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop05"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>INSCRIÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Data da Inscrição" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{dc.dataDiaria}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Número " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{dc.numero}"/>
                                </p:column>
                                <p:column headerText="Histórico" style="text-align: justify">
                                    <h:outputText value="#{dc.historicoNota}"/>
                                </p:column>
                                <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{dc.valor}"
                                                  converter="moneyConverter"/>
                                </p:column>
                                <f:facet name="footer">
                                    <div style="text-align: right">
                                        <h:outputText value="Total: " styleClass="mlef05"/>
                                        <h:outputText
                                            value="#{propostaConcessaoDiariaControlador.somaInscricoesNormal}"
                                            converter="moneyConverter"/>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </p:tab>
                        <p:tab id="tabInscricaoEstorno" title="Estorno da Inscrição">
                            <p:dataTable id="tabelaInscricaoEstorno"
                                         value="#{propostaConcessaoDiariaControlador.diariasContabilizacaoInscricaoEstorno}"
                                         var="dc"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop05"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE INSCRIÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Data do Estorno" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{dc.dataDiaria}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Número" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{dc.numero}"/>
                                </p:column>
                                <p:column headerText="Histórico" style="text-align: justify">
                                    <h:outputText value="#{dc.historicoNota}"/>
                                </p:column>
                                <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{dc.valor}"
                                                  converter="moneyConverter"/>
                                </p:column>
                                <f:facet name="footer">
                                    <div style="text-align: right">
                                        <h:outputText value="Total: " styleClass="mlef05"/>
                                        <h:outputText
                                            value="#{propostaConcessaoDiariaControlador.somaInscricoesEstorno}"
                                            converter="moneyConverter"/>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </p:tab>
                        <p:tab id="tabBaixa" title="Baixa">
                            <p:dataTable id="tabelaBaixa"
                                         value="#{propostaConcessaoDiariaControlador.diariasContabilizacaoBaixaNormal}"
                                         var="dc"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop05"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>BAIXAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{dc.dataDiaria}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Número " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{dc.numero}"/>
                                </p:column>
                                <p:column headerText="Histórico" style="text-align: justify">
                                    <h:outputText value="#{dc.historicoNota}"/>
                                </p:column>
                                <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{dc.valor}"
                                                  converter="moneyConverter"/>
                                </p:column>
                                <f:facet name="footer">
                                    <div style="text-align: right">
                                        <h:outputText value="Total: " styleClass="mlef05"/>
                                        <h:outputText value="#{propostaConcessaoDiariaControlador.somaBaixasNormal}"
                                                      converter="moneyConverter"/>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </p:tab>
                        <p:tab id="tabBaixaEstorno" title="Estorno da Baixa">
                            <p:dataTable id="tabelaBaixaEstorno"
                                         value="#{propostaConcessaoDiariaControlador.diariasContabilizacaoBaixaEstorno}"
                                         var="dc"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop05"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE BAIXAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Data do Estorno" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{dc.dataDiaria}">
                                        <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Número " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{dc.numero}"/>
                                </p:column>
                                <p:column headerText="Histórico" style="text-align: justify">
                                    <h:outputText value="#{dc.historicoNota}"/>
                                </p:column>
                                <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                    <h:outputText value="#{dc.valor}"
                                                  converter="moneyConverter"/>
                                </p:column>
                                <f:facet name="footer">
                                    <div style="text-align: right">
                                        <h:outputText value="Total: " styleClass="mlef05"/>
                                        <h:outputText
                                            value="#{propostaConcessaoDiariaControlador.somaBaixasEstorno}"
                                            converter="moneyConverter"/>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </p:tab>
                    </p:tabView>
                </p:tab>
            </p:tabView>

            <h:panelGrid cellpadding="0" cellspacing="0" columns="5">
                <fc:rodapePretty controlador="#{propostaConcessaoDiariaControlador}"/>

                <p:commandButton value="Deferir"
                                 title="Clique para deferir a diária."
                                 icon="ui-icon-deferir"
                                 onstart="aguarde.show()"
                                 oncomplete="aguarde.hide()"
                                 update=":formSolicitacao :Formulario:tabView:calculados"
                                 styleClass="mtop10 mlef03 mrig03"
                                 style="height: 30px;"
                                 actionListener="#{propostaConcessaoDiariaControlador.calcularValorDiariaAoAbrirDialogDeferir}"
                                 disabled="#{propostaConcessaoDiariaControlador.selecionado.aprovado or propostaConcessaoDiariaControlador.selecionado.empenhado}"
                                 rendered="#{propostaConcessaoDiariaControlador.renderizarBotaoDeferir()}"/>

                <p:commandButton value="Indeferir"
                                 title="Clique para indeferir a diária."
                                 icon="ui-icon-deferir"
                                 onstart="aguarde.show()"
                                 oncomplete="aguarde.hide()"
                                 styleClass="mtop10 mlef03"
                                 style="height: 30px;"
                                 onclick="if(!confirm('Deseja indeferir essa diária?')) return false;"
                                 actionListener="#{propostaConcessaoDiariaControlador.indeferirDiaria()}"
                                 rendered="#{propostaConcessaoDiariaControlador.renderizarBotaoIndeferir()}"/>

                <p:commandButton value="Relatório de Diária"
                                 icon="ui-icon-print"
                                 style="height: 30px"
                                 onclick="aguarde.show()"
                                 oncomplete="aguarde.hide()"
                                 styleClass="mrig05 mtop10 mlef05"
                                 rendered="#{propostaConcessaoDiariaControlador.isOperacaoEditar()}"
                                 actionListener="#{propostaConcessaoDiariaControlador.gerarRelatorioDiaria()}"
                                 title="Clique para imprimir o relatório de Diária "/>

                <p:commandButton value="Relatório de Viagem"
                                 icon="ui-icon-print"
                                 style="height: 30px"
                                 onclick="aguarde.show()"
                                 oncomplete="aguarde.hide()"
                                 styleClass="mtop10"
                                 rendered="#{propostaConcessaoDiariaControlador.isOperacaoEditar()}"
                                 actionListener="#{propostaConcessaoDiariaControlador.gerarRelatorioViagem()}"
                                 title="Clique para imprimir o relatório de viagem"/>
            </h:panelGrid>
        </h:form>


        <p:dialog widgetVar="geraSol"
                  modal="true"
                  style="position: fixed !important;"
                  dynamic="true"
                  draggable="true"
                  position="center"
                  resizable="false"
                  showHeader="false"
                  closable="false">

            <h:form id="formSolicitacao">
                <p:panel id="panelSolicitacao" header="Gerar Solicitação de Empenho" styleClass="mtop05 mbot05">

                    <p:outputPanel rendered="#{propostaConcessaoDiariaControlador.canGerarSolicitacaoDeEmpenho()}">

                        <h:panelGrid columns="2" id="gridReserva">
                            <h:outputText value="Gerar Reserva ?" id="textReserva"
                                          rendered="#{!propostaConcessaoDiariaControlador.liberaReserva}"/>
                            <p:selectBooleanCheckbox id="geraReserva"
                                                     rendered="#{!propostaConcessaoDiariaControlador.liberaReserva}"
                                                     value="#{propostaConcessaoDiariaControlador.geraReserva}"/>

                            <fc:outputLabelObrigatorio value="Ato Legal: "/>
                            <h:panelGrid columns="2">
                                <fc:autoComplete
                                    completeMethod="#{propostaConcessaoDiariaControlador.completarAtoLegal}"
                                    id="completaAtoLegal"
                                    value="#{propostaConcessaoDiariaControlador.selecionado.atoLegal}"
                                    converter="#{atoLegalControlador.converterGenerico}"
                                    maxResults="50"/>

                                <p:commandButton icon="ui-icon-circle-plus"
                                                 onclick="window.open('#{request.contextPath}/atolegal/novo/?sessao=true', '_blank')"
                                                 update="@this"
                                                 title="Clique para inserir um novo registro"
                                                 process="@this"/>
                            </h:panelGrid>

                            <fc:outputLabelObrigatorio value="Responsável: "/>
                            <p:autoComplete queryDelay="1000"
                                            size="70"
                                            maxResults="10"
                                            id="completaResp"
                                            title="Selecione a pessoa responsável."
                                            value="#{propostaConcessaoDiariaControlador.selecionado.responsavel}"
                                            completeMethod="#{propostaConcessaoDiariaControlador.completarPessoasFisicas}"
                                            var="p"
                                            itemValue="#{p.id}"
                                            itemLabel="#{p}"
                                            converter="#{pessoaContabilControlador.converterGenerico}"/>
                        </h:panelGrid>

                        <p:commandButton id="btnGeraSol"
                                         value="Confirmar"
                                         onstart="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         styleClass="padrao mtop20"
                                         icon="ui-icon-check"
                                         title="Clique para confirmar a solicitação de empneho."
                                         actionListener="#{propostaConcessaoDiariaControlador.deferirDiaria()}"/>

                        &nbsp;
                        <p:commandButton id="btnCancelar"
                                         value="Cancelar"
                                         onstart="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         styleClass="padrao mtop20"
                                         icon="ui-icon-cancel"
                                         title="Clique para cancelar a solicitação de empenho."
                                         actionListener="#{propostaConcessaoDiariaControlador.cancelarDeferimento()}"/>
                    </p:outputPanel>

                    <p:outputPanel rendered="#{!propostaConcessaoDiariaControlador.canGerarSolicitacaoDeEmpenho()}">
                        <center>
                            <div class="ui-messages-warn ui-corner-all">
                                <div class="ui-messages-warn-icon"/>
                                &nbsp;
                                Não é permitido gerar solicitação de empenho, pois não foi encontrado saldo na fonte de despesa: #{propostaConcessaoDiariaControlador.selecionado.fonteDespesaORC}.
                            </div>

                            <p:commandButton value="Confirmar"
                                             title="Clique para retornar a lista de diárias."
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao mtop20"
                                             onclick="geraSol.hide()"
                                             icon="ui-icon-check"
                                             actionListener="#{propostaConcessaoDiariaControlador.cancelar()}"/>
                        </center>
                    </p:outputPanel>

                </p:panel>
            </h:form>
        </p:dialog>


        <p:dialog modal="true"
                  id="dialogUpload"
                  header="Upload de Arquivos"
                  widgetVar="arq"
                  dynamic="true"
                  position="center"
                  style="position: fixed!important;"
                  closable="false"
                  resizable="false">
            <h:form id="formularioUpload">
                <h:panelGrid id="panelUpload">
                    <p:fileUpload fileUploadListener="#{propostaConcessaoDiariaControlador.handleFileUpload}"
                                  mode="advanced"
                                  auto="true"
                                  rendered="#{propostaConcessaoDiariaControlador.selecionado.situacao eq 'ABERTO'}"
                                  update=":formularioUpload"
                                  cancelLabel="Cancelar"
                                  uploadLabel="Enviar"
                                  label="Selecionar"
                                  sizeLimit="15728640"
                                  id="botaoSelecionar"/>
                    <h:panelGrid columns="2"
                                 rendered="#{propostaConcessaoDiariaControlador.selecionado.situacao eq 'ABERTO'}">
                        <h:outputText value="Arquivo:"/>
                        <h:outputText value="#{propostaConcessaoDiariaControlador.arquivo.arquivo}"
                                      styleClass="negrito"/>

                        <fc:outputLabelObrigatorio for="descricaoAnexo" value="Descrição:"/>
                        <p:inputText id="descricaoAnexo" value="#{propostaConcessaoDiariaControlador.arquivo.descricao}"
                                     size="70"
                                     maxlength="255"
                                     title="Informe a Descrição do Arquivo"/>
                    </h:panelGrid>

                    <h:panelGrid columns="2"
                                 rendered="#{propostaConcessaoDiariaControlador.selecionado.situacao eq 'ABERTO'}">
                        <p:commandButton value="Confirmar"
                                         icon="ui-icon-check"
                                         onstart="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         styleClass="padrao mtop10"
                                         title="Clique para confirmar adicionar o Arquivo."
                                         actionListener="#{propostaConcessaoDiariaControlador.adicionarArquivo}"
                                         update="formularioUpload"/>

                        <p:commandButton value="Fechar"
                                         onstart="aguarde.show()"
                                         oncomplete="arq.hide(); aguarde.hide()"
                                         process="@this"
                                         styleClass="padrao mlef05 mtop10"
                                         icon="ui-icon-circle-close"
                                         title="Clique para fechar a janela."/>

                    </h:panelGrid>

                    <p:commandButton value="Fechar"
                                     onstart="aguarde.show()"
                                     oncomplete="arq.hide(); aguarde.hide()"
                                     rendered="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}"
                                     process="@this"
                                     styleClass="padrao mlef05 mtop10"
                                     icon="ui-icon-circle-close"
                                     title="Clique para fechar a janela."/>

                    <p:dataTable id="tabelaArquivos"
                                 value="#{propostaConcessaoDiariaControlador.buscarArquivosDiaria()}"
                                 var="obj"
                                 rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                 paginator="true"
                                 styleClass="mtop01"
                                 rows="10"
                                 paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>ANEXOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                 emptyMessage="Não foram localizados registros para serem apresentados."
                                 rowIndexVar="rowlx">
                        <p:column headerText="Ação"
                                  styleClass="centralizado"
                                  rendered="#{propostaConcessaoDiariaControlador.selecionado.situacao eq 'ABERTO'}">
                            <p:commandButton id="btnExcluir"
                                             icon="ui-icon-trash"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             title="Clique para remover este registro."
                                             onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                             update=":formularioUpload:tabelaArquivos"
                                             actionListener="#{propostaConcessaoDiariaControlador.removerArquivo(obj)}"/>
                        </p:column>
                        <p:column headerText="Download"
                                  styleClass="centralizado"
                                  rendered="#{!propostaConcessaoDiariaControlador.selecionado.situacao.isAberto()}">

                            <p:commandButton icon="ui-icon-download"
                                             onclick="window.open('#{request.contextPath}/arquivos/#{obj.arquivo.nome}?id=#{obj.arquivo.id}', '_blank')"
                                             update="@this"
                                             title="Clique para fazer o Download do Arquivo."
                                             process="@this"/>

                        </p:column>
                        <p:column headerText="Arquivo" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{obj.arquivo}"/>
                        </p:column>
                        <p:column headerText="Descrição" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{obj.descricao}"/>
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
