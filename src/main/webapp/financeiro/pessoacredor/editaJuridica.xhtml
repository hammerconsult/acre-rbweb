<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:co="http://java.sun.com/jsf/composite/components/contabil"
      xmlns:p="http://primefaces.org/ui"


>

<script type="text/javascript">
    // INICIO FUNÇÃO DE MASCARA MAIUSCULA
    function minuscula(z) {
        v = z.value.toLowerCase();
        z.value = v;
    }

    //FIM DA FUNÇÃO MASCARA MAIUSCULA
</script>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">

        <h:form id="Formulario">

            <fc:cabecalhoPretty id="cabecalhoEdita"
                                controlador="#{pessoaContabilControlador}"
                                origem="#{pessoaContabilControlador.caminhoPadrao}listar/"/>
            <p:tabView id="tabViewPrincipal">
                <p:tab title="Cadastro de Pessoa Jurídica">
                    <h:panelGrid columns="2">
                        <fc:outputLabelObrigatorio value="Razão Social: " id="oRazaoSocial"/>
                        <p:inputText value="#{pessoaContabilControlador.selecionado.razaoSocial}"
                                     title="Informe a Razão Social"
                                     id="iRazaoSocial"
                                     size="70"
                                     maxlength="70">
                            <p:ajax event="blur"
                                    update=":Formulario:tabViewPrincipal:tabViewGeral:PessoaContaCorrente :Formulario:tabViewPrincipal:tabViewGeral:msgContaCorrente iNomeReduzido"
                                    listener="#{pessoaContabilControlador.executaListenter()}"/>
                        </p:inputText>

                        <h:outputText value="Nome Reduzido:" id="oNomeReduzido"/>
                        <p:inputText value="#{pessoaContabilControlador.selecionado.nomeReduzido}"
                                     title="Informe o Nome Reduzido"
                                     id="iNomeReduzido"
                                     size="70"
                                     maxlength="70">
                        </p:inputText>

                        <fc:outputLabelObrigatorio value="Nome Fantasia: " id="oNomeFantasia"/>
                        <p:outputPanel id="iNomeFantasia">
                            <p:inputText value="#{pessoaContabilControlador.selecionado.nomeFantasia}"
                                         title="Informe o Nome Fantasia"

                                         size="70"
                                         maxlength="70"/>
                        </p:outputPanel>

                        <h:outputText id="oTipoInscricao" value="Tipo de Inscrição: "/>
                        <h:selectOneMenu value="#{pessoaContabilControlador.selecionado.tipoInscricao}"
                                         title="Informe o Tipo de Inscrição"
                                         id="iTipoInscricao">
                            <f:selectItems value="#{pessoaContabilControlador.tiposInscricao}"/>
                            <p:ajax event="change" process=":Formulario" update=":Formulario"/>
                        </h:selectOneMenu>

                        <fc:outputLabelObrigatorio value="CNPJ: " id="oCNPJ"/>
                        <p:inputMask mask="99.999.999/9999-99"
                                     readonly="#{!pessoaContabilControlador.isOperacaoNovo()}"
                                     value="#{pessoaContabilControlador.selecionado.cnpj}"
                                     title="Informe o CNPJ"
                                     id="iCNPJ"
                                     size="20"
                                     maxlength="18">
                            <p:ajax event="blur" process="@this"
                                    update=":Formulario:tabViewPrincipal:tabViewGeral:PessoaContaCorrente :Formulario:tabViewPrincipal:tabViewGeral:msgContaCorrente"/>
                        </p:inputMask>

                        <h:outputText value="CEI:" id="oCEI"/>
                        <p:inputText value="#{pessoaContabilControlador.selecionado.cei}"
                                     title="Informe o CEI"
                                     id="iCEI"
                                     size="20"
                                     maxlength="18"/>

                        <h:outputText value="Inscrição Estadual:" id="oInscricao"/>
                        <p:inputText value="#{pessoaContabilControlador.selecionado.inscricaoEstadual}"
                                     title="Informe a Inscrição Estadual"
                                     id="iIncricao"
                                     size="20"
                                     maxlength="25"/>

                        <h:outputText id="oSecretariaRequerente" value="Secretaria / Requerente: "/>
                        <p:autoComplete queryDelay="1000"
                                        value="#{pessoaContabilControlador.unidadeOrganizacionalSelecionada}"
                                        id="iSecretariaRequerente" size="70" var="uni" itemLabel="#{uni}"
                                        itemValue="#{uni.id}"
                                        completeMethod="#{pessoaContabilControlador.completaHierarquiaOrganizacional}"
                                        converter="#{pessoaContabilControlador.converterHierarquiaOrganizacional}"
                                        title="Informe a Secretaria / Requerente"
                                        forceSelection="true">
                        </p:autoComplete>

                        <h:outputText value="E-mail:" id="oEmail"/>
                        <p:inputText value="#{pessoaContabilControlador.selecionado.email}"
                                     title="Informe o Email"
                                     id="iEmail" size="70"
                                     maxlength="70"
                                     style="text-transform: lowercase"
                                     onkeyup="minuscula(this)"/>

                        <h:outputText id="oTipoEmpresa" value="Porte: "/>
                        <h:selectOneMenu value="#{pessoaContabilControlador.selecionado.tipoEmpresa}"
                                         title="Informe o Porte"
                                         id="iTipoEmpresa">
                            <f:selectItems value="#{pessoaContabilControlador.tipoEmpresas}"/>
                        </h:selectOneMenu>

                        <h:outputText value="Home Page:" id="oHomePage"/>
                        <p:inputText value="#{pessoaContabilControlador.selecionado.homePage}"
                                     title="Informe a Home Page"
                                     id="iHomePage"
                                     size="70"
                                     maxlength="70"/>

                        <h:outputText value="Observação: "/>
                        <h:panelGrid columns="2">
                            <p:inputTextarea id="observacao"
                                             title="Observação"
                                             value="#{pessoaContabilControlador.selecionado.observacao}"
                                             style="width: 500px; margin-left: -4px"
                                             cols="70"
                                             maxlength="3000"
                                             autoResize="true" counterTemplate="{0} Caracteres Restantes."
                                             counter="counter"/>
                            <h:outputText id="counter"/>
                        </h:panelGrid>

                        <h:outputText value="Bloqueado: " id="oBloqueado"/>
                        <p:selectBooleanCheckbox value="#{pessoaContabilControlador.selecionado.bloqueado}"
                                                 id="iBloqueado">
                            <p:ajax update=":Formulario:tabViewPrincipal:iMotivoBloqueio" event="change"/>
                        </p:selectBooleanCheckbox>

                        <h:outputText value="Motivo do Bloqueio: " id="oMotivoBloqueio"/>
                        <p:inputTextarea value="#{pessoaContabilControlador.selecionado.motivo}"
                                         disabled="#{pessoaContabilControlador.selecionado.bloqueado eq false}"
                                         required="#{pessoaContabilControlador.selecionado.bloqueado eq true}"
                                         cols="70"
                                         rows="3"
                                         id="iMotivoBloqueio"
                                         title="Informe o motivo do bloqueio"/>


                        <h:outputText value="Receita Bruta CPRB: " for="receitaBrutaCPRB"/>
                        <p:selectBooleanCheckbox value="#{pessoaContabilControlador.selecionado.receitaBrutaCPRB}"
                                                 id="receitaBrutaCPRB"/>

                        <h:outputText value="Código de isenção/imunidade: "/>
                        <h:panelGrid columns="2" cellpadding="0" cellspacing="0">
                            <p:inputText value="#{pessoaContabilControlador.selecionado.codigoIsencaoImunidade}"
                                         title="Informe o código de isenção/imunidade."
                                         size="3"
                                         maxlength="1"
                                         onkeypress="mascara(this, soNumeros)"/>

                            <co:botao_informacao descricao="Informações sobre isenção e imunidade:&lt;br/>
    1 - Entidade não isenta/não imune - Tributação normal;&lt;br/>
    2 - Instituição de educação e de assistência social sem fins lucrativos, a que se refere o art. 12 da Lei nº 9.532, de 10 de dezembro de 1997;&lt;br/>
    3 - Instituição de caráter filantrópico, recreativo, cultural, científico e às associações civis, a que se refere o art. 15 da Lei nº 9.532, de 1997."/>
                        </h:panelGrid>
                    </h:panelGrid>

                    <p:tabView id="tabViewGeral" styleClass="mtop10">

                        <p:tab id="tabClasses" title="Classe de Pessoa">
                            <h:panelGrid columns="2" id="pClasseCredor" styleClass="mtop05">
                                <fc:outputLabelObrigatorio value="Classe de Pessoa: " id="oClasseCredor"/>
                                <h:panelGroup>
                                    <p:autoComplete queryDelay="1000"
                                                    value="#{pessoaContabilControlador.classeCredorSelecionada.classeCredor}"
                                                    id="iClasseCredorSelecionado"
                                                    size="70"
                                                    var="cc"
                                                    styleClass="mrig05"
                                                    itemLabel="#{cc}"
                                                    itemValue="#{cc.id}"
                                                    completeMethod="#{pessoaContabilControlador.completaClasseCredor}"
                                                    converter="#{pessoaContabilControlador.converterClasseCredor}"
                                                    title="Informe a classe de pessoa."
                                                    maxResults="10"/>

                                    <p:commandButton icon="ui-icon-circle-plus"
                                                     onclick="window.open('#{request.contextPath}/classe-credor/novo/?sessao=true', '_blank')"
                                                     update="@this"
                                                     styleClass="mrig05"
                                                     title="Clique para inserir um novo registro."
                                                     process="@this"/>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio value="Operação: "/>
                                <h:selectOneMenu title="Informe a operação para classe de pessoa."
                                                 id="operacao"
                                                 value="#{pessoaContabilControlador.classeCredorSelecionada.operacaoClasseCredor}">
                                    <f:selectItems value="#{pessoaContabilControlador.listaOperacao}"/>
                                </h:selectOneMenu>

                                <fc:outputLabelObrigatorio value="Início de Vigência: "/>
                                <p:calendar
                                    value="#{pessoaContabilControlador.classeCredorSelecionada.dataInicioVigencia}"
                                    id="iInicioVigencia"
                                    onkeypress="mascara(this, mdata)"
                                    title="Informe a data de início de vigência."
                                    pattern="dd/MM/yyyy"
                                    locale="pt_BR"/>
                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             icon="ui-icon-circle-plus"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="botao_verde icone_branco padrao mtop10"
                                             actionListener="#{pessoaContabilControlador.adicionaClassePessoa()}"
                                             id="bAdicionarClasseCredor"
                                             title="Clique para adicionar esta classe de pessoa na lista."
                                             update=":Formulario:tabViewPrincipal:tabViewGeral:tabelaClasse :Formulario:tabViewPrincipal:tabViewGeral:pClasseCredor"/>

                            <p:dataTable id="tabelaClasse"
                                         var="obj"
                                         value="#{pessoaContabilControlador.selecionado.classeCredorPessoas}"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>CLASSES DA PESSOA&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">
                                <p:column headerText="Encerrar Vigência" style="text-align: center; width: 5%">
                                    <p:commandButton icon="ui-icon-calendar-select"
                                                     disabled="#{!pessoaContabilControlador.podeEditar(obj)}"
                                                     oncomplete="confirmEncerrar.show();aguarde.hide()"
                                                     onstart="aguarde.show()"
                                                     actionListener="#{pessoaContabilControlador.setaClasseCredor(obj)}"
                                                     title="Clique para encerrar a vigência."
                                                     process="@this"
                                                     update=":formDialogEncerrar"/>
                                </p:column>
                                <p:column headerText="Ação" style="width: 5%; text-align: center">
                                    <p:commandButton id="cbRemoverClasseCredor" icon="ui-icon-trash"
                                                     update=":Formulario:tabViewPrincipal:tabViewGeral:tabelaClasse"
                                                     title="Clique para remover este registro."
                                                     process="@this"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     actionListener="#{pessoaContabilControlador.removeClasse(obj)}"
                                                     disabled="#{!pessoaContabilControlador.podeEditar(obj)}">
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Início de Vigência" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{obj.dataInicioVigencia}">
                                        <f:convertDateTime type="date"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Fim de Vigência" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{obj.dataFimVigencia}">
                                        <f:convertDateTime type="date"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Classe de Pessoa" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{obj.classeCredor}"/>
                                </p:column>
                                <p:column headerText="Tipo de Classe" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{obj.classeCredor.tipoClasseCredor.descricao}"/>
                                </p:column>
                                <p:column headerText="Operação" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{obj.operacaoClasseCredor.descricao}"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Telefone" id="pTelefones">
                            <script type="text/javascript">
                                function validarTelefone(elem) {
                                    if (elem.value.toString().length &lt; 14) {
                                        elem.value = '';
                                    }
                                }
                            </script>

                            <h:panelGrid columns="2" id="gridFone">
                                <fc:outputLabelObrigatorio value="Telefone: "/>
                                <p:inputText onkeydown="mascara(this, mtel)"
                                             maxlength="15"
                                             onblur="validarTelefone(this)"
                                             id="inputFone"
                                             title="Informe o número do telefone"
                                             value="#{pessoaContabilControlador.telefone.telefone}"/>

                                <h:outputText value="Tipo de Telefone: "/>
                                <h:selectOneMenu value="#{pessoaContabilControlador.telefone.tipoFone}"
                                                 id="tipoFone"
                                                 style="width: 125px"
                                                 title="Informe o tipo do telefone">
                                    <f:selectItems value="#{pessoaContabilControlador.tiposFone}"/>
                                </h:selectOneMenu>

                                <h:outputText id="oPessoaContato" value="Pessoa p/ Contato:"/>
                                <p:inputText id="iPessoaContato"
                                             size="70" maxlength="70"
                                             title="Informe uma Pessoa para contato."
                                             value="#{pessoaContabilControlador.telefone.pessoaContato}"/>

                                <h:outputText value="Telefone Principal: "/>
                                <p:selectBooleanCheckbox
                                    disabled="#{pessoaContabilControlador.liberaTelefonePrincipal()}"
                                    id="fonePrincipal"
                                    value="#{pessoaContabilControlador.telefone.principal}"/>
                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             id="cbAdicionarTel"
                                             icon="ui-icon-circle-plus"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="gridFone fones"
                                             actionListener="#{pessoaContabilControlador.adicionarTelefonePJ}"
                                             title="cllique para adicionar este telefone."
                                             styleClass="padrao mtop10"/>

                            <p:dataTable id="fones" value="#{pessoaContabilControlador.selecionado.telefones}"
                                         var="fone"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop03"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>TELEFONES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ações" style="width: 8%; text-align: center">
                                    <p:commandButton id="cbAlterarTel"
                                                     icon="ui-icon-pencil"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     styleClass="mrig05"
                                                     update=":Formulario:tabViewPrincipal:tabViewGeral:gridFone"
                                                     title="clique para alterar o registro."
                                                     actionListener="#{pessoaContabilControlador.setaTelefone}">
                                        <f:attribute name="alteraFone" id="alteraFone" value="#{fone}"/>
                                    </p:commandButton>

                                    <p:commandButton id="cbRemoverTel" icon="ui-icon-trash"
                                                     styleClass="icone_vermelho"
                                                     title="Clique para remover este registro."
                                                     process="@this"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     update=":Formulario:tabViewPrincipal:tabViewGeral:gridFone :Formulario:tabViewPrincipal:tabViewGeral:fones"
                                                     actionListener="#{pessoaContabilControlador.removeFone}">
                                        <f:attribute name="vfone" id="vfone" value="#{fone}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Telefone" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{fone.telefone}"/>
                                </p:column>
                                <p:column headerText="Tipo de Telefone" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{fone.tipoFone.tipoFone}"/>
                                </p:column>
                                <p:column headerText="Pessoa p/ Contato" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{fone.pessoaContato}"/>
                                </p:column>
                                <p:column headerText="Principal" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{fone.principal ? 'Principal' : ''}"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Endereço" id="pEnderecos">
                            <h:panelGrid columns="2" id="gridEndereco2">
                                <fc:outputLabelObrigatorio value="CEP: "/>
                                <h:panelGroup>
                                    <p:autoComplete queryDelay="1000" value="#{pessoaContabilControlador.endereco.cep}"
                                                    completeMethod="#{pessoaContabilControlador.completaCEP}"
                                                    var="ce"
                                                    title="Informe um cep para pesquisar ou insira um cep válido."
                                                    id="cepNumero"
                                                    maxlength="8"
                                                    styleClass="mrig05"
                                                    itemLabel="#{ce}"
                                                    itemValue="#{ce}"
                                                    size="25">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                update="gridEndereco2"
                                                listener="#{pessoaContabilControlador.atualizaLogradouros}"/>

                                    </p:autoComplete>

                                    <p:commandButton id="cbPesquisaEnd"
                                                     title="clique para pesquisar"
                                                     icon="ui-icon-lupa"
                                                     styleClass="icone-25"
                                                     actionListener="#{pessoaContabilControlador.atualizaLogradouros}"
                                                     update="gridEndereco2"
                                                     process="gridEndereco2"/>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio value="Estado: "/>
                                <h:selectOneMenu value="#{pessoaContabilControlador.endereco.uf}">
                                    <f:selectItems value="#{pessoaTributarioControlador.listaUF}"
                                                   var="uf" itemLabel="#{uf.nome}" itemValue="#{uf.sigla}"/>
                                </h:selectOneMenu>

                                <fc:outputLabelObrigatorio value="Cidade: "/>
                                <p:inputText id="iCidade"
                                             title="informe uma Cidade"
                                             value="#{pessoaContabilControlador.endereco.localidade}"
                                             size="25"/>

                                <fc:outputLabelObrigatorio value="Bairro: "/>
                                <p:inputText id="iBairro"
                                             title="informe um Bairro"
                                             value="#{pessoaContabilControlador.endereco.bairro}"
                                             size="25"/>

                                <fc:outputLabelObrigatorio value="Logradouro: "/>
                                <p:inputText id="iLogradouro"
                                             title="informe um Logradouro"
                                             value="#{pessoaContabilControlador.endereco.logradouro}"
                                             size="25"/>


                                <h:outputText value="Complemento: "/>
                                <p:inputText id="itComplementoEnd"
                                             title="informe um complemento"
                                             value="#{pessoaContabilControlador.endereco.complemento}"
                                             size="25"/>

                                <h:outputText value="Número: "/>
                                <p:inputText id="itNumeroEnd"
                                             title="informe um número"
                                             value="#{pessoaContabilControlador.endereco.numero}"
                                             size="25"/>

                                <h:outputText value="Tipo de Endereco: " id="oTipoEndereco"/>
                                <h:selectOneMenu id="iTipoEndereco"
                                                 title="selecione um tipo de endereço"
                                                 value="#{pessoaContabilControlador.endereco.tipoEndereco}">
                                    <f:selectItems value="#{pessoaContabilControlador.tiposEnderecos}"/>
                                </h:selectOneMenu>

                                <h:outputText value="Endereço Principal: "/>
                                <p:selectBooleanCheckbox id="endPrincipal"
                                                         value="#{pessoaContabilControlador.endereco.principal}"
                                                         disabled="#{pessoaContabilControlador.liberaEnderecoPrincipal()}"/>

                                <p:commandButton value="Adicionar"
                                                 id="cbAdicionarEndereco"
                                                 title="Clique para adicionar um endereço."
                                                 icon="ui-icon-circle-plus"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 styleClass="mtop10 padrao"
                                                 update="endersD gridEndereco2"
                                                 actionListener="#{pessoaContabilControlador.adicionarEndereco}"/>
                            </h:panelGrid>

                            <p:dataTable id="endersD"
                                         var="ender"
                                         value="#{pessoaContabilControlador.selecionado.enderecos}"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop01"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ENDEREÇOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ações" style="width: 8%; text-align: center">
                                    <p:commandButton id="cbAlterarEndereco"
                                                     icon="ui-icon-pencil"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     styleClass="mrig05"
                                                     update=":Formulario:tabViewPrincipal:tabViewGeral:gridEndereco2"
                                                     title="clique para alterar o registro."
                                                     actionListener="#{pessoaContabilControlador.editaEndereco}">
                                        <f:attribute name="endereco" id="endereco" value="#{ender}"/>
                                    </p:commandButton>

                                    <p:commandButton id="cbRemoverEnd"
                                                     icon="ui-icon-trash"
                                                     update=":Formulario:tabViewPrincipal:tabViewGeral:endersD :Formulario:tabViewPrincipal:tabViewGeral:gridEndereco2"
                                                     title="Clique para remover este registro."
                                                     process="@this"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     actionListener="#{pessoaContabilControlador.removeEndereco}">
                                        <f:attribute name="vendereco" id="vendereco" value="#{ender}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Endereço" styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{ender.logradouro}, #{ender.numero}, #{ender.localidade} - #{ender.uf}, #{ender.cep}"/>
                                </p:column>
                                <p:column headerText="Tipo de Endereço" style="text-align: left; width: 20%">
                                    <h:outputText value="#{ender.tipoEndereco.descricao}"/>
                                </p:column>
                                <p:column headerText="Principal" style="text-align: left; width: 20%">
                                    <h:outputText value="#{ender.principal ? 'Principal' : ''}"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Conta Corrente Bancária" id="pContaCorrente">

                            <p:outputPanel id="msgContaCorrente">
                                <co:mensagem
                                    mensagem="Para inserir uma Conta Corrente Bancária existente, é necessário que a Pessoa: #{pessoaContabilControlador.selecionado}, esteja salva no sistema."/>
                            </p:outputPanel>

                            <h:panelGrid columns="2" cellpadding="2">
                                <h:outputText value="Conta Corrente Bancária"/>
                                <p:selectOneRadio value="#{pessoaContabilControlador.mudaPanelContaCorrenteBancaria}">
                                    <f:selectItem itemLabel="Inserir/Editar Conta" itemValue="novaConta"/>
                                    <f:selectItem itemLabel="Selecionar Conta" itemValue="contaExistente"
                                                  itemDisabled="#{pessoaContabilControlador.selecionado.id eq null}"/>
                                    <p:ajax event="change"
                                            update=":Formulario:tabViewPrincipal:tabViewGeral:panelContaCorrente"
                                            listener="#{pessoaContabilControlador.limparContaCorrenteBancaria}"/>
                                </p:selectOneRadio>

                            </h:panelGrid>


                            <p:panel id="panelContaCorrente">
                                <h:panelGrid columns="2" id="gridConta1"
                                             rendered="#{pessoaContabilControlador.mudaPanelContaCorrenteBancaria eq 'novaConta'}">

                                    <fc:outputLabelObrigatorio value="Banco: "/>
                                    <p:autoComplete queryDelay="1000" id="banco"
                                                    title="Informe o banco"
                                                    size="70"
                                                    value="#{pessoaContabilControlador.banco}"
                                                    completeMethod="#{pessoaContabilControlador.completarBancos}"
                                                    var="bc"
                                                    itemLabel="#{bc}"
                                                    itemValue="#{bc.id}"
                                                    forceSelection="true"
                                                    converter="#{bancoControlador.converterGenerico}">
                                        <p:ajax event="itemSelect"
                                                onstart="aguarde.show()"
                                                listener="#{pessoaContabilControlador.limparAgencia}"
                                                oncomplete="aguarde.hide()"
                                                update="agencia modalidade"/>
                                    </p:autoComplete>


                                    <fc:outputLabelObrigatorio value="Agência: "/>
                                    <h:panelGrid columns="2">
                                        <p:autoComplete queryDelay="1000" id="agencia"
                                                        title="Informe a Agência Bancária"
                                                        size="70"
                                                        style="margin-left: -4px"
                                                        disabled="#{pessoaContabilControlador.banco eq null}"
                                                        value="#{pessoaContabilControlador.contaCorrenteBancaria.agencia}"
                                                        completeMethod="#{pessoaContabilControlador.completarAgencias}"
                                                        var="a" itemLabel="#{a}" itemValue="#{a.id}"
                                                        forceSelection="true"
                                                        converter="#{pessoaContabilControlador.converterAgencia}"/>

                                        <p:commandButton icon="ui-icon-circle-plus"
                                                         onclick="window.open('#{request.contextPath}/agencia/novo/?sessao=true', '_blank')"
                                                         update="@this"
                                                         styleClass="mrig05"
                                                         title="Clique para inserir um novo registro."
                                                         process="@this"/>
                                    </h:panelGrid>

                                    <fc:outputLabelObrigatorio value="Tipo da Conta: "/>
                                    <h:selectOneMenu title="Informe o Tipo da Conta"
                                                     value="#{pessoaContabilControlador.contaCorrenteBancaria.modalidadeConta}"
                                                     id="modalidade">
                                        <f:selectItems value="#{pessoaContabilControlador.modalidades}"/>
                                        <p:ajax event="change" update="NumeroDaConta"/>
                                    </h:selectOneMenu>
                                    <fc:outputLabelObrigatorio value="Número da Conta: "/>
                                    <h:panelGrid columns="6">
                                        <p:inputText title="Informe o número Conta Corrente"
                                                     value="#{pessoaContabilControlador.contaCorrenteBancaria.numeroConta}"
                                                     id="NumeroDaConta"
                                                     size="20"
                                                     maxlength="#{pessoaContabilControlador.maxLengthNumeroConta()}"
                                                     style="margin-left: -3px"/>

                                        <h:outputText value=" - "/>
                                        <p:inputText title="Informe o Dígito Verificador"
                                                     value="#{pessoaContabilControlador.contaCorrenteBancaria.digitoVerificador}"
                                                     id="digitoVerificador"
                                                     size="3"
                                                     maxlength="3"/>
                                        <h:outputText value="Dígito Verificador" style="color: silver"/>
                                    </h:panelGrid>
                                    <h:outputText value="Situação: " style="margin-right: 65px"/>
                                    <h:selectOneMenu title="Informe a Situação da Conta Corrente"
                                                     value="#{pessoaContabilControlador.contaCorrenteBancaria.situacao}"
                                                     id="situacao">
                                        <f:selectItems value="#{pessoaContabilControlador.situacaoConta}"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="Conta Principal: "/>
                                    <p:selectBooleanCheckbox id="contaPrincipal1"
                                                             value="#{pessoaContabilControlador.contaCorrenteBancPessoa.principal}"
                                                             disabled="#{pessoaContabilControlador.liberaContaPrincipal()}"/>
                                </h:panelGrid>


                                <h:panelGrid columns="2" id="gridConta2"
                                             rendered="#{pessoaContabilControlador.mudaPanelContaCorrenteBancaria eq 'contaExistente'}">

                                    <fc:outputLabelObrigatorio value="Pessoa: "/>
                                    <p:autoComplete queryDelay="1000" id="PessoaContaCorrente"
                                                    title="Selecione o registro desejado"
                                                    value="#{pessoaContabilControlador.pessoaFiltro}"
                                                    completeMethod="#{pessoaContabilControlador.completarPessoa}"
                                                    var="p"
                                                    size="70"
                                                    itemLabel="#{p.nome}   #{p.cpf_Cnpj} "
                                                    itemValue="#{p.id}"
                                                    converter="#{pessoaContabilControlador.converterGenerico}"
                                                    forceSelection="true"
                                                    maxResults="10">
                                        <p:ajax event="itemSelect" update="panelBancario" process="@this"/>
                                    </p:autoComplete>

                                    <fc:outputLabelObrigatorio value="Conta Corrente Bancária: "/>
                                    <h:panelGrid columns="4" id="panelBancario">
                                        <p:autoComplete queryDelay="1000" size="70" id="contaid"
                                                        title="Digite uma conta corrente bancária"
                                                        style="margin-left: -3px"
                                                        value="#{pessoaContabilControlador.contaCorrenteBancaria}"
                                                        completeMethod="#{pessoaContabilControlador.completaContaCorrenteBancarias}"
                                                        converter="#{pessoaContabilControlador.converterContaCorrenteBancaria}"
                                                        var="contaBancaria"
                                                        itemLabel="#{contaBancaria}"
                                                        itemValue="#{contaBancaria.id}"
                                                        dropdown="true"/>

                                        <p:commandButton id="bt_informacao"
                                                         icon="ui-icon-info"
                                                         styleClass="trintaLarguraTrintaAltura mrig05"/>

                                        <p:overlayPanel for="bt_informacao"
                                                        style="border : solid black 1px;"
                                                        showEvent="mouseover"
                                                        hideEvent="mouseout">
                                            <h:outputText
                                                value="Lista todas as contas ativas filtrando por Banco, Agência, Número e Pessoa(listando todas as contas da pessoa selecionada)."
                                                escape="false"/>
                                        </p:overlayPanel>
                                    </h:panelGrid>

                                    <h:outputText value="Conta Principal: "/>
                                    <p:selectBooleanCheckbox id="contaPrincipal"
                                                             value="#{pessoaContabilControlador.contaCorrenteBancPessoa.principal}"
                                                             disabled="#{pessoaContabilControlador.liberaContaPrincipal()}"/>
                                </h:panelGrid>

                                <p:commandButton id="adicionarContaCorrenteBancaria"
                                                 styleClass="padrao mtop10"
                                                 title="Clique para adicionar o registro."
                                                 icon="ui-icon-circle-plus"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 value="Adicionar"
                                                 actionListener="#{pessoaContabilControlador.adicionarContaBancariaPessoaJuridica}"
                                                 update=":Formulario:tabViewPrincipal:tabViewGeral:gridConta2 :Formulario:tabViewPrincipal:tabViewGeral:gridConta1 :Formulario:tabViewPrincipal:tabViewGeral:tableContas"/>

                                <p:dataTable id="tableContas"
                                             value="#{pessoaContabilControlador.selecionado.contaCorrenteBancPessoas}"
                                             var="c"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop03"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>CONTAS CORRENTES BANCÁRIAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">

                                    <p:column headerText="Ação" style="width: 7%; text-align: center">
                                        <p:commandButton id="cbAlterarConta"
                                                         icon="ui-icon-pencil"
                                                         styleClass="mrig05"
                                                         onstart="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         update=":Formulario:tabViewPrincipal:tabViewGeral:gridConta1 :Formulario:tabViewPrincipal:tabViewGeral:gridConta2 :Formulario:tabViewPrincipal:tabViewGeral:tableContas"
                                                         title="Clique para alterar este registro."
                                                         actionListener="#{pessoaContabilControlador.editarContaCorrenteBancaria(c)}">
                                        </p:commandButton>
                                        <p:commandButton id="cbRemoverContaBancaria"
                                                         icon="ui-icon-trash"
                                                         title="Clique para remover este registro."
                                                         process="@this"
                                                         onstart="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"

                                                         actionListener="#{pessoaContabilControlador.removeContaCorrenteBancPJ}"
                                                         update=":Formulario:tabViewPrincipal:tabViewGeral:gridConta1 :Formulario:tabViewPrincipal:tabViewGeral:gridConta2 :Formulario:tabViewPrincipal:tabViewGeral:tableContas">
                                            <f:attribute value="#{c}" name="objeto"/>
                                        </p:commandButton>
                                    </p:column>
                                    <p:column headerText="Conta Corrente Bancária" styleClass="alinhamentoEsquerda">
                                        <h:outputText
                                            value="#{c.contaCorrenteBancaria}"/>
                                    </p:column>
                                    <p:column headerText="Tipo de Conta" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{c.contaCorrenteBancaria.modalidadeConta.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Conta Principal" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{c.principal ? 'Principal' : ''}"/>
                                    </p:column>
                                    <p:column headerText="Situação" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{c.contaCorrenteBancaria.situacao.descricao}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>

                        <p:tab title="Documentos Anexos" id="pDocumentosAnexos">
                            <fc:filesUploadWP selecionado="#{pessoaContabilControlador.selecionado}"
                                              anexoNovaAba="true"/>
                        </p:tab>
                    </p:tabView>
                </p:tab>

                <p:tab title="Solicitações" rendered="#{pessoaContabilControlador.operacaoNovo}">
                    <p:dataTable id="tableSolicitacoesPendentes"
                                 value="#{pessoaContabilControlador.solicitacoesPendentes}"
                                 var="sp"
                                 rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                 paginator="true"
                                 styleClass="mtop05"
                                 rows="10"
                                 paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>SOLICITAÇÕES PENDENTES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                 emptyMessage="Não foram localizados registros para serem apresentados."
                                 rowIndexVar="rowlx">
                        <p:column headerText="Cadastrar" style="text-align: center; width: 5%">
                            <p:commandButton icon="ui-icon-blue-document-copy"
                                             title="Clique para alterar este registro."
                                             styleClass="icone-25"
                                             onstart="aguarde.show()"
                                             process="@this"
                                             disabled="#{!pessoaContabilControlador.isDamPago(sp.key)}"
                                             actionListener="#{pessoaContabilControlador.redirecionarParaVerOrEditar(sp.idPessoa, 'editar')}"/>
                        </p:column>
                        <p:column headerText="Data Expiração" styleClass="alinhamentoCentralizado">
                            <h:outputText value="#{sp.dataExpiracao}">
                                <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Empresa/Razão Social" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{sp.nomeRazaoSocial}"/>
                        </p:column>
                        <p:column headerText="CNPJ" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{sp.cpfCnpj}"/>
                        </p:column>
                        <p:column headerText="Endereço" styleClass="alinhamentoEsquerda">
                            <h:outputText value="#{sp.enderecoCorreio}"/>
                        </p:column>
                    </p:dataTable>
                </p:tab>
            </p:tabView>

            <fc:rodapePretty controlador="#{pessoaContabilControlador}"/>
        </h:form>

        <p:dialog widgetVar="dialogImprimirFicha"
                  modal="true"
                  closable="false"
                  resizable="false"
                  showHeader="false"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;">
            <h:form id="formImprimirFichaPessoa">
                <center>
                    <p:panel style="margin: 0px" styleClass="mtop05 mbot05" id="panelFichaPes"
                             header="Ficha da Pessoa ">

                        <br/>
                        <h:outputText value="Deseja imprimir a ficha da pessoa"/>

                        <br/><br/><br/>
                        <h:panelGrid columns="2">
                            <p:commandButton value="SIM"
                                             icon="ui-icon-print"
                                             style="height: 30px"
                                             onclick="aguarde.show(); redirecionar();"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao mrig05"
                                             actionListener="#{pessoaContabilControlador.geraFichaPessoa()}"
                                             title="Clique para imprimir a ficha da pessoa"/>

                            <p:commandButton value="NÃO"
                                             icon="ui-icon-cancel"
                                             styleClass="padrao"
                                             title="Clique para cancelar a impressão."
                                             actionListener="#{pessoaContabilControlador.cancelaImprimirFicha()}"/>

                            <p:remoteCommand name="redirecionar"
                                             actionListener="#{pessoaContabilControlador.cancelaImprimirFicha()}"
                                             onstart="dialogImprimirFicha.hide()"/>
                        </h:panelGrid>
                    </p:panel>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog id="dialogconfirmEncerrar"
                  widgetVar="confirmEncerrar"
                  closable="false"
                  showHeader="false"
                  resizable="false"
                  position="center"
                  style="position: fixed !important;"
                  dynamic="true"
                  modal="true">

            <h:form id="formDialogEncerrar">
                <center>
                    <p:panel header="Encerrar Vigência" styleClass="mtop05">
                        <h:panelGrid columns="2" cellpadding="2" styleClass="mtop10">
                            <h:outputText value="Início de Vigência: "/>
                            <p:calendar value="#{pessoaContabilControlador.classeCredorSelecionada.dataInicioVigencia}"
                                        navigator="true"
                                        pattern="dd/MM/yyyy"
                                        onkeyup="mascara(this, mdata)"
                                        title="Informe a data para alterar o início de vigência.">
                                <p:ajax event="dateSelect" update=":formDialogEncerrar"/>
                            </p:calendar>

                            <h:outputText value="Fim de Vigência: "/>
                            <p:calendar value="#{pessoaContabilControlador.classeCredorSelecionada.dataFimVigencia}"
                                        validator="#{pessoaContabilControlador.validaDataEncerraVigencia}"
                                        navigator="true"
                                        id="fimVigencia"
                                        pattern="dd/MM/yyyy"
                                        onkeyup="mascara(this, mdata)"
                                        title="Informe a data para encerrar a vigência.">
                                <p:ajax event="dateSelect" update=":formDialogEncerrar"/>
                            </p:calendar>
                        </h:panelGrid>

                        <p:commandButton id="confirm"
                                         value="Confirmar"
                                         icon="ui-icon-check"
                                         styleClass="padrao mtop20"
                                         disabled="#{pessoaContabilControlador.classeCredorSelecionada.dataFimVigencia eq null}"
                                         update=":Formulario:tabViewPrincipal:tabViewGeral:tabelaClasse"
                                         onstart="aguarde.show()"
                                         oncomplete="aguarde.hide();confirmEncerrar.hide()"
                                         actionListener="#{pessoaContabilControlador.encerrarVigencia}"
                                         title="Clique para confirmar a operação."/>

                        <p:commandButton id="fechar"
                                         value="Fechar"
                                         update=":Formulario:tabViewPrincipal:tabViewGeral:tabelaClasse"
                                         icon="ui-icon-close"
                                         onstart="aguade.show()"
                                         oncomplete="confirmEncerrar.hide();aguarde.hide()"
                                         styleClass="padrao mlef05 mtop20"
                                         actionListener="#{pessoaContabilControlador.cancelaEncerrarVigencia}"
                                         title="Clique para fechar a janela."/>
                    </p:panel>
                </center>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
</html>
