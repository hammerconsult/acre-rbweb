<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:co="http://java.sun.com/jsf/composite/components/contabil"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <script type="text/javascript">

            function limpaCampos(arg) {
                var componente = document.getElementById(arg);
                if (componente.value.toString().trim().length == 0 || componente.value == '' || componente.value == 'undefined') {
                    var idPanel = arg.replace(':fornecedor_input', ':classeCredor_input');
                    var panel = document.getElementById(idPanel);
                    panel.value = '';
                    panel.disabled = true;
                }
            }
        </script>

        <h:form id="Formulario">

            <fc:cabecalhoPretty controlador="#{empenhoControlador}"
                                origem="#{empenhoControlador.caminhoPadrao}novo/"/>

            <p:outputPanel rendered="#{empenhoControlador.possuiSolicitacao}">
                <div class="alert alert-info alinhamentoCentralizado" style="font-size: 13px">
                    <h:outputText value="#{empenhoControlador.mensagemSolicitacaoEmpenho}"/>
                </div>
            </p:outputPanel>

            <p:outputPanel id="panelGeral">

                <p:tabView id="tabGeral" activeIndex="#{empenhoControlador.indiceAba}" styleClass="mtop05">
                    <p:tab title="#{empenhoControlador.tituloEmpenho}" id="tabEm">

                        <h:panelGrid columns="3" styleClass="mtop05"
                                     rendered="#{!empenhoControlador.isCategoriaOrcamentariaNormal() and empenhoControlador.operacao eq 'NOVO'}">
                            <fc:outputLabelObrigatorio value="Empenho: "/>
                            <p:autoComplete queryDelay="1000" value="#{empenhoControlador.selecionado.empenho}"
                                            title="Selecione o empenho de resto a pagar."
                                            id="empenhoResto"
                                            style="margin-left: 125px"
                                            styleClass="mrig02"
                                            converter="#{empenhoControlador.converterGenerico}"
                                            disabled="#{empenhoControlador.isRegistroEditavel()}"
                                            completeMethod="#{empenhoControlador.completarEmpenho}"
                                            var="empenho"
                                            size="70"
                                            onkeyup="keyUpLimparEsconderDesabilidarCampo(this, 'dadosEmp', false, true, false)"
                                            itemValue="#{empenho.id}"
                                            itemLabel="#{empenho}">
                                <p:ajax event="itemSelect"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        update=":Formulario:tabGeral:dadosEmp"
                                        listener="#{empenhoControlador.setaEmpenho}"/>
                            </p:autoComplete>

                            <co:botao_informacao
                                descricao="Lista empenhos de exercícios anteriores que não foram pagos integralmentes.&lt;br/&gt;
                                    Filtrando pela unidade organizacional orçamentária logada."
                                disabled="#{empenhoControlador.isRegistroEditavel()}"/>
                        </h:panelGrid>

                        <p:panel closeTitle="Clique para fechar a visualização do empenho."
                                 toggleTitle="Clique para minimizar/maximizar a visualização do empenho."
                                 header="Empenho: #{empenhoControlador.selecionado.empenho}"
                                 id="dadosEmp"
                                 toggleable="true"
                                 visible="#{empenhoControlador.selecionado.empenho ne null}"
                                 styleClass="mtop05 ">

                            <h:panelGrid columns="2" cellpadding="2">
                                <h:outputText value="Número: "/>
                                <h:outputText value="#{empenhoControlador.selecionado.empenho.numero}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Data: "/>
                                <h:outputText value="#{empenhoControlador.selecionado.empenho.dataEmpenho}"
                                              style="font-weight: bold">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>

                                <h:outputText value="Evento Contábil: "/>
                                <h:outputText value="#{empenhoControlador.selecionado.empenho.eventoContabil}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Tipo de Empenho: "/>
                                <h:outputText value="#{empenhoControlador.selecionado.empenho.tipoEmpenho.descricao}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Código Reduzido: "/>
                                <h:outputText value="#{empenhoControlador.selecionado.empenho.despesaORC.codigo}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Órgão: "/>
                                <h:outputText value="#{empenhoControlador.vwHierarquiaDespesaORC.orgao}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Unidade: "/>
                                <h:outputText value="#{empenhoControlador.vwHierarquiaDespesaORC.unidade}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Funcional: "/>
                                <h:outputText value="#{empenhoControlador.vwHierarquiaDespesaORC.subAcao}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Conta de Despesa: "/>
                                <h:outputText value="#{empenhoControlador.vwHierarquiaDespesaORC.conta}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Fonte de Recurso: "/>
                                <h:outputText
                                    value="#{empenhoControlador.selecionado.empenho.fonteDespesaORC.descricaoFonteDeRecurso}"
                                    style="font-weight: bold"/>

                                <h:outputText value="Conta de Destinação de Recurso: "/>
                                <h:outputText
                                    value="#{empenhoControlador.selecionado.empenho.fonteDespesaORC.descricaoContaDeDestinacao}"
                                    style="font-weight: bold"/>

                                <h:outputText value="Funcional Programática: "/>
                                <h:outputText
                                    value="#{empenhoControlador.selecionado.fonteDespesaORC.funcionalProgramatica}"
                                    style="font-weight: bold"/>

                                <h:outputText value="Pessoa: "/>
                                <h:outputText value="#{empenhoControlador.selecionado.empenho.fornecedor}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Classe: "/>
                                <h:outputText value="#{empenhoControlador.selecionado.empenho.classeCredor}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Histórico Padrão: "/>
                                <h:outputText value="#{empenhoControlador.selecionado.empenho.historicoContabil}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Histórico: "/>
                                <h:outputText value="#{empenhoControlador.selecionado.empenho.complementoHistorico}"
                                              style="font-weight: bold"/>

                                <h:outputText value="Valor: "/>
                                <h:outputText value="#{empenhoControlador.selecionado.empenho.valor}"
                                              converter="moneyConverter"
                                              styleClass="negrito"/>

                                <h:outputText value="Saldo: "/>
                                <h:outputText value="#{empenhoControlador.selecionado.empenho.saldo}"
                                              converter="moneyConverter" styleClass="negrito"/>
                            </h:panelGrid>
                        </p:panel>

                        <h:panelGrid columns="2" id="gridGeral" styleClass="mtop05">
                            <h:outputText value="Categoria Orçamentária: "/>
                            <h:outputText value="#{empenhoControlador.selecionado.categoriaOrcamentaria.descricao}"
                                          styleClass="negrito"/>

                            <h:outputText value="Número: "/>
                            <h:outputText
                                value="#{empenhoControlador.selecionado.numero eq null ? 'Gerado pelo sistema' : empenhoControlador.selecionado.numero}"
                                styleClass="negrito"/>

                            <h:outputText value="Data do Empenho: "/>
                            <h:outputText value="#{empenhoControlador.selecionado.dataEmpenho}"
                                          styleClass="negrito">
                                <f:convertDateTime type="date"/>
                            </h:outputText>

                            <h:outputText value="Unidade Orçamentária: "/>
                            <fc:codigo-descricao-hierarquia
                                dataMovimento="#{empenhoControlador.selecionado.dataEmpenho}"
                                tipoHierarquia="ORCAMENTARIA"
                                unidadeOrganizacional="#{empenhoControlador.selecionado.unidadeOrganizacional}"/>

                            <h:outputText for="tipoProcessados"
                                          rendered="#{!empenhoControlador.isCategoriaOrcamentariaNormal()}"
                                          value="Tipo Restos Processados: "/>
                            <h:selectOneMenu value="#{empenhoControlador.selecionado.tipoRestosProcessados}"
                                             id="tipoProcessados"
                                             rendered="#{!empenhoControlador.isCategoriaOrcamentariaNormal()}"
                                             title="Selecione o tipo de restos processados."
                                             disabled="#{empenhoControlador.isRegistroEditavel()}">
                                <f:selectItems value="#{empenhoControlador.tipoRestosProcessado}"/>
                                <p:ajax event="change"
                                        update=":Formulario"
                                        process="@form"
                                        listener="#{empenhoControlador.definirEventoContabil()}"/>
                            </h:selectOneMenu>

                            <h:outputText for="tipoInscritos"
                                          rendered="#{!empenhoControlador.isCategoriaOrcamentariaNormal()}"
                                          value="Tipo Restos Inscritos: "/>
                            <h:selectOneMenu value="#{empenhoControlador.selecionado.tipoRestosInscritos}"
                                             id="tipoInscritos"
                                             rendered="#{!empenhoControlador.isCategoriaOrcamentariaNormal()}"
                                             title="Selecione o tipo de restos inscritos."
                                             disabled="#{empenhoControlador.isRegistroEditavel()}">
                                <f:selectItems value="#{empenhoControlador.tipoRestosInscritos}"/>
                            </h:selectOneMenu>

                            <fc:outputLabelObrigatorio for="modalidade" value="Modalidade: "/>
                            <h:selectOneMenu value="#{empenhoControlador.selecionado.modalidadeLicitacao}"
                                             id="modalidade"
                                             title="Informe a Modalidade"
                                             disabled="#{empenhoControlador.isRegistroEditavel()
                                                         or empenhoControlador.geradoPorSolicitacaoModalidadeDispensa}">
                                <f:selectItems value="#{empenhoControlador.listaModalidadeLicitacao}"/>
                            </h:selectOneMenu>

                            <p:outputPanel id="outputContrato">
                                <h:outputText value="Contrato: "
                                              rendered="#{empenhoControlador.selecionado.modalidadeLicitacao ne 'SEM_LICITACAO'
                                                            and empenhoControlador.selecionado.execucaoProcesso eq null}"/>
                            </p:outputPanel>
                            <h:panelGroup id="pgContrato">
                                <p:autoComplete queryDelay="1000"
                                                id="contrato"
                                                size="70"
                                                title="Informe o contrato."
                                                dropdown="true"
                                                panelStyle="max-height: 250px;max-width: 750px"
                                                value="#{empenhoControlador.selecionado.contrato}"
                                                completeMethod="#{empenhoControlador.completarContrato}"
                                                converter="#{contratoAdmControlador.converterGenerico}"
                                                disabled="#{empenhoControlador.isRegistroEditavel() or empenhoControlador.geradoPorSolicitacao}"
                                                rendered="#{empenhoControlador.selecionado.modalidadeLicitacao ne 'SEM_LICITACAO'
                                                            and empenhoControlador.selecionado.execucaoProcesso eq null}"
                                                maxResults="50"
                                                styleClass="mrig05"
                                                var="cont"
                                                itemValue="#{cont.id}"
                                                itemLabel="#{cont}">
                                    <p:ajax event="itemSelect"
                                            update=":Formulario:tabGeral:pgContrato"
                                            process=":Formulario:tabGeral:pgContrato"
                                            listener="#{empenhoControlador.definirContrato}"/>
                                </p:autoComplete>

                                <p:outputPanel id="compCamposContrato">
                                    <fc:visualizarCampos objeto="#{empenhoControlador.selecionado.contrato}"
                                                         rendered="#{empenhoControlador.selecionado.modalidadeLicitacao ne 'SEM_LICITACAO'
                                                                    and empenhoControlador.selecionado.execucaoProcesso eq null}"
                                                         disabled="#{empenhoControlador.selecionado.contrato eq null}"/>
                                </p:outputPanel>

                                <co:botao_informacao styleClass="mlef05"
                                                     disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                     rendered="#{empenhoControlador.selecionado.modalidadeLicitacao ne 'SEM_LICITACAO'
                                                                 and empenhoControlador.selecionado.execucaoProcesso eq null}"
                                                     descricao="Contratos filtrando pela Modalidade da Licitação selecionada e Unidade Administrativa Logada."/>
                            </h:panelGroup>

                            <h:outputText value="#{empenhoControlador.selecionado.execucaoProcesso.tipoExecucao.descricao}: "
                                          rendered="#{empenhoControlador.selecionado.execucaoProcesso ne null}"/>
                            <h:outputText value="#{empenhoControlador.selecionado.execucaoProcesso.descricaoProcesso}"
                                          styleClass="negrito"
                                          rendered="#{empenhoControlador.selecionado.execucaoProcesso ne null}"/>

                            <fc:outputLabelObrigatorio for="eventoContabil" value="Evento Contábil: "/>
                            <co:visualizarEventoContabil evento="#{empenhoControlador.selecionado.eventoContabil}"
                                                         parametroEvento="#{empenhoControlador.getParametroEvento()}"/>

                            <fc:outputLabelObrigatorio for="tipoEmpenho" value="Tipo de Empenho: "/>
                            <h:selectOneMenu id="tipoEmpenho"
                                             title="Informe o Tipo de Empenho"
                                             disabled="#{empenhoControlador.isRegistroEditavel()}"
                                             value="#{empenhoControlador.selecionado.tipoEmpenho}">
                                <f:selectItems value="#{empenhoControlador.tipoEmpenho}"/>
                                <p:ajax event="change"
                                        process="@this"/>
                            </h:selectOneMenu>

                            <fc:outputLabelObrigatorio for="elementoDespesa" value="Elemento de Despesa: "/>
                            <co:consultar-despesa-orcamentaria value="#{empenhoControlador.selecionado.despesaORC}"
                                                               update="@this :Formulario:tabGeral:gridGeral :Formulario:tabGeral:painelDesdob"
                                                               process=":Formulario:tabGeral:gridGeral @this"
                                                               disabled="#{!empenhoControlador.canEditarFonteRecursos()}"
                                                               recuperarSomenteUnidadeLogada="true"
                                                               id="elementoDespesa"
                                                               actionListener="#{empenhoControlador.buscarTiposDeConta()}"/>

                            <fc:outputLabelObrigatorio value="Tipo de Despesa: "
                                                       rendered="#{empenhoControlador.renderizarTipoDespesa()}"/>
                            <p:selectOneRadio id="tipoContaDespesa"
                                              value="#{empenhoControlador.selecionado.tipoContaDespesa}"
                                              disabled="#{empenhoControlador.isRegistroEditavel() and  !empenhoControlador.isSolicitacaoDeExercicioAnterior()}"
                                              rendered="#{empenhoControlador.renderizarTipoDespesa()}">
                                <f:selectItems value="#{empenhoControlador.tipoContas}"/>
                                <p:ajax
                                    update=":Formulario:tabGeral:panelIntegracao :Formulario:tabGeral:gridGeral :Formulario:tabGeral:tabelaDesdobramento"
                                    process="@this :Formulario:tabGeral:gridGeral"
                                    event="change"
                                    onstart="aguarde.show()"
                                    oncomplete="aguarde.hide()"
                                    listener="#{empenhoControlador.definirSubTipoDespesaPorTipoDespesa}"/>
                            </p:selectOneRadio>

                            <fc:outputLabelObrigatorio value="Subtipo de Despesa: "
                                                       id="outPutSubTipo"
                                                       rendered="#{empenhoControlador.renderizaSubTipoDespesa()}"/>
                            <p:selectOneRadio id="subTipoDespesa"
                                              value="#{empenhoControlador.selecionado.subTipoDespesa}"
                                              rendered="#{empenhoControlador.renderizaSubTipoDespesa()}"
                                              disabled="#{empenhoControlador.isRegistroEditavel()}">
                                <f:selectItems value="#{empenhoControlador.subTipoContas}"/>
                                <p:ajax event="change"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        listener="#{empenhoControlador.definirSubTipoDespesa}"
                                        process=":Formulario:tabGeral:gridGeral @this"
                                        update=":Formulario:tabGeral:panelIntegracao  :Formulario:tabGeral:gridGeral"/>
                            </p:selectOneRadio>

                            <h:outputText value="Fonte de Recursos: "/>
                            <h:outputText
                                value="#{empenhoControlador.selecionado.fonteDespesaORC.descricaoFonteDeRecurso}"
                                styleClass="negrito"/>

                            <fc:outputLabelObrigatorio value="Conta de Destinação de Recurso: "/>
                            <p:autoComplete queryDelay="1000" id="fdOrc"
                                            size="70"
                                            title="Informe a Conta de Destinação de Recurso."
                                            value="#{empenhoControlador.selecionado.fonteDespesaORC}"
                                            completeMethod="#{empenhoControlador.buscarFontes}"
                                            converter="#{empenhoControlador.converterFonteDespesaORC}"
                                            disabled="#{!empenhoControlador.canEditarFonteRecursos()}"
                                            maxResults="10"
                                            styleClass="mrig05"
                                            forceSelection="true"
                                            scrollHeight="200"
                                            dropdown="true"
                                            var="cd"
                                            itemValue="#{cd.id}"
                                            itemLabel="#{cd.descricaoContaDeDestinacao}">
                                <p:ajax event="itemSelect"
                                        update="pInfo saldoFonte :Formulario:tabGeral:panelIntegracao :Formulario:tabGeral:gridGeral"
                                        process="@this"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        listener="#{empenhoControlador.buscarDetalhamentoFonte()}"/>
                            </p:autoComplete>

                            <h:outputText value="Extensão da Fonte de Recurso: "/>
                            <h:outputText value="#{empenhoControlador.selecionado.extensaoFonteRecurso}"
                                          styleClass="negrito"/>

                            <h:outputText value="Funcional Programática: "/>
                            <h:outputText
                                value="#{empenhoControlador.selecionado.fonteDespesaORC.funcionalProgramatica}"
                                styleClass="negrito"/>

                            <fc:outputLabelObrigatorio for="fornecedor" value="Pessoa: "/>
                            <h:panelGroup>
                                <p:autoComplete queryDelay="1000" id="fornecedor" size="70"
                                                title="Informe a pessoa."
                                                value="#{empenhoControlador.selecionado.fornecedor}"
                                                completeMethod="#{empenhoControlador.completarFornecedor}"
                                                converter="#{pessoaContabilControlador.converterGenerico}"
                                                disabled="#{empenhoControlador.isRegistroEditavel() or empenhoControlador.geradoPorSolicitacao}"
                                                maxResults="10"
                                                onkeyup="limpaCampos(this.id)"
                                                forceSelection="true"
                                                styleClass="mrig05"
                                                var="fo"
                                                itemValue="#{fo.id}"
                                                itemLabel="#{fo.nomeAutoComplete}">
                                    <p:ajax update="classeCredor compCamposPessoa"
                                            process="@this"
                                            event="itemSelect"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            listener="#{empenhoControlador.definirNullParaClasseCredor()}"/>
                                </p:autoComplete>

                                <p:outputPanel id="compCamposPessoa">
                                    <fc:visualizarCampos objeto="#{empenhoControlador.selecionado.fornecedor}"
                                    />
                                </p:outputPanel>

                                <p:commandButton icon="ui-icon-search"
                                                 title="Clique para Consultar as Pessoas"
                                                 oncomplete="DialogPesquisarPessoa.show()"
                                                 styleClass="mlef05"
                                                 update=":FormularioPesquisarPessoa"
                                                 process=":FormularioPesquisarPessoa"
                                                 disabled="#{empenhoControlador.isRegistroEditavel() or empenhoControlador.geradoPorSolicitacao}"/>
                            </h:panelGroup>

                            <fc:outputLabelObrigatorio for="classeCredor" value="Classe: "/>
                            <h:panelGroup>
                                <h:selectOneMenu value="#{empenhoControlador.selecionado.classeCredor}"
                                                 id="classeCredor"
                                                 title="Informe a Classe da Pessoa."
                                                 converter="#{classeCredorControlador.converterGenerico}"
                                                 disabled="#{empenhoControlador.isRegistroEditavel() or empenhoControlador.bloquearClassePessoaPelaSolicitacaoEmpenho()}">
                                    <f:selectItems value="#{empenhoControlador.classesCredor}"
                                                   var="cc"
                                                   itemValue="#{cc.id}"
                                                   itemLabel="#{cc}"/>
                                    <p:ajax event="change"
                                            process="@this"/>
                                </h:selectOneMenu>

                                <co:botao_informacao disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                     styleClass="mlef05"
                                                     descricao="Quando existir uma configuração para o &lt;b&gt;Tipo de Despesa Selecionada&lt;/b&gt;,&lt;br/&gt;
                                    as classes listadas são oriundas da configuração vigente  &lt;br/&gt;
                                    e caso não existir configuração, é listadas todas as classes da pessoa selecionada."/>
                            </h:panelGroup>

                            <h:outputText value="Obrigação a Pagar: "/>
                            <p:commandButton styleClass="padrao"
                                             id="novaObrigacaoPagar"
                                             update=":Formulario:tabGeral:panelObrigacaoPagar :Formulario:tabGeral:painelDesdobramento"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             value="Adicionar Obrigação a Pagar"
                                             process="@this"
                                             icon="ui-icon-circle-plus"
                                             actionListener="#{empenhoControlador.novaObrigacaoPagar()}"
                                             title="Clique para selecionar uma obrigação a pagar."
                                             disabled="#{empenhoControlador.isRegistroEditavel() or empenhoControlador.geradoPorSolicitacao}"/>

                            <h:outputText value="Pertence a Emenda Parlamentar? "/>
                            <p:selectBooleanCheckbox id="checkBocPertenceEmenda"
                                                     value="#{empenhoControlador.pertenceEmenda}"
                                                     disabled="#{!empenhoControlador.selecionado.emendas.isEmpty()}">
                                <p:ajax event="change" process="@this" update=":Formulario labelCodigoCO codigoCoSubConta"/>
                            </p:selectBooleanCheckbox>

                            <p:outputPanel columns="2" id="labelCodigoCO" rendered="#{empenhoControlador.renderizarCodigoCO()}">
                                <h:outputText value="Código CO: "/>
                            </p:outputPanel>
                            <h:panelGrid columns="2" id="codigoCoSubConta" rendered="#{empenhoControlador.renderizarCodigoCO()}">
                                <p:autoComplete queryDelay="1000"
                                                size="70"
                                                title="Informe o Código CO"
                                                value="#{empenhoControlador.selecionado.codigoCO}"
                                                completeMethod="#{empenhoControlador.completarCodigosCOs}"
                                                converter="#{codigoCOControlador.converterGenerico}"
                                                maxResults="10"
                                                forceSelection="true"
                                                var="cco"
                                                itemValue="#{cco.id}"
                                                itemLabel="#{cco}"/>

                                <co:botao_informacao styleClass="mlef05"
                                                     descricao="Busca os Códigos COs cadastrados na fonte de recursos do empenho."/>
                            </h:panelGrid>
                        </h:panelGrid>

                        <p:outputPanel rendered="#{empenhoControlador.pertenceEmenda}">
                            <p:accordionPanel id="painelEmenda"
                                              styleClass="mtop10">
                                <p:tab title="Emenda">
                                    <p:outputPanel id="opEmenda">
                                        <p:commandButton value="Novo"
                                                         icon="ui-icon-circle-plus"
                                                         actionListener="#{empenhoControlador.novoEmendaEmpenho()}"
                                                         rendered="#{empenhoControlador.emendaEmpenho eq null}"
                                                         update=":Formulario:tabGeral:painelEmenda:opEmenda"
                                                         process="@this"
                                                         id="btnNovoEmenda"
                                                         onstart="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         styleClass="mtop10 padrao"
                                                         disabled="#{!empenhoControlador.pertenceEmenda}"
                                                         title="Clique para adicionar uma nova emenda."/>

                                        <h:panelGrid columns="2" rendered="#{empenhoControlador.emendaEmpenho ne null}">
                                            <fc:outputLabelObrigatorio value="Emenda: "/>
                                            <h:panelGroup id="panelEmenda">
                                                <p:autoComplete queryDelay="1000"
                                                                title="Selecione uma emenda."
                                                                value="#{empenhoControlador.emendaEmpenho.emenda}"
                                                                converter="#{emendaControlador.converterGenerico}"
                                                                completeMethod="#{empenhoControlador.completarEmendas}"
                                                                var="e"
                                                                itemLabel="#{e.toStringAutoComplete()}"
                                                                itemValue="#{e.id}"
                                                                maxResults="10"
                                                                dropdown="true"
                                                                scrollHeight="200"
                                                                forceSelection="true"
                                                                size="70"
                                                                id="emenda"/>

                                                <co:botao_informacao styleClass="mlef05"
                                                                     descricao="Filtra de acordo com a Conta de Destinação de Recurso, Exercício e Unidade Orçamentária,
                                                         &lt;br/&gt;sendo necessário a emenda estar aprovada pela Câmara e Prefeitura."/>
                                            </h:panelGroup>

                                            <fc:outputLabelObrigatorio value="Valor: "/>
                                            <fc:inputMoeda value="#{empenhoControlador.emendaEmpenho.valor}"
                                                           title="Informe o Valor."/>

                                            <p:commandButton id="btnAddEmenda"
                                                             icon="ui-icon-check"
                                                             onstart="aguarde.show()"
                                                             oncomplete="aguarde.hide()"
                                                             styleClass="mtop10 padrao"
                                                             actionListener="#{empenhoControlador.adicionarEmendaEmpenho()}"
                                                             title="Clique para adicionar este registro."
                                                             update=":Formulario:tabGeral:painelEmenda:opEmenda :Formulario:tabGeral:checkBocPertenceEmenda :Formulario:tabGeral:fdOrc :Formulario:tabGeral:elementoDespesa"
                                                             process=":Formulario:tabGeral:painelEmenda:opEmenda @this"
                                                             value="Adicionar"/>

                                            <p:commandButton value="Cancelar"
                                                             icon="ui-icon-cancel"
                                                             actionListener="#{empenhoControlador.limparEmendaEmpenho()}"
                                                             update=":Formulario:tabGeral:painelEmenda:opEmenda"
                                                             process="@this"
                                                             onstart="aguarde.show()"
                                                             oncomplete="aguarde.hide()"
                                                             styleClass="mlef05 mtop10 padrao"
                                                             title="Clique para cancelar esta operação."/>
                                        </h:panelGrid>

                                        <p:dataTable id="tabelaEmenda"
                                                     value="#{empenhoControlador.selecionado.emendas}"
                                                     var="em"
                                                     styleClass="mtop02"
                                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                                     paginator="true"
                                                     rows="10"
                                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>EMENDAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                                     rowIndexVar="rowlx">
                                            <p:column headerText="Ação" style="width: 8%;text-align: center">
                                                <p:commandButton icon="ui-icon-pencil"
                                                                 onstart="aguarde.show()"
                                                                 oncomplete="aguarde.hide()"
                                                                 styleClass="mrig05"
                                                                 actionListener="#{empenhoControlador.editarEmendaEmpenho(em)}"
                                                                 title="Clique para alterar este registro."
                                                                 process="@this :Formulario:tabGeral:painelEmenda:opEmenda"
                                                                 update=":Formulario:tabGeral:painelEmenda:opEmenda"/>

                                                <p:commandButton
                                                    update=":Formulario:tabGeral:painelEmenda:tabelaEmenda :Formulario:tabGeral:checkBocPertenceEmenda :Formulario:tabGeral:fdOrc :Formulario:tabGeral:elementoDespesa"
                                                    process="@this"
                                                    actionListener="#{empenhoControlador.removerEmendaEmpenho(em)}"
                                                    title="Clique para remover este registro."
                                                    icon="ui-icon-trash"
                                                    onstart="aguarde.show()"
                                                    oncomplete="aguarde.hide()"
                                                    onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"/>
                                            </p:column>
                                            <p:column headerText="Emenda" styleClass="alinhamentoEsquerda">
                                                <h:outputText value="#{em.emenda.toStringAutoComplete()}"/>
                                            </p:column>
                                            <p:column headerText="Valor" styleClass="alinhamentoDireita">
                                                <h:outputText value="#{em.valor}">
                                                    <f:convertNumber type="currency"/>
                                                </h:outputText>
                                                <f:facet name="footer">
                                                    <div align="right">
                                                        <h:outputText
                                                            value="#{empenhoControlador.selecionado.valorTotalEmendas}"
                                                            converter="moneyConverter"/>
                                                    </div>
                                                </f:facet>
                                            </p:column>
                                        </p:dataTable>
                                    </p:outputPanel>
                                </p:tab>
                            </p:accordionPanel>
                        </p:outputPanel>

                        <p:outputPanel id="painelDesdobramento">
                            <p:panel id="painelDesdob"
                                     header="Detalhamento"
                                     rendered="#{empenhoControlador.empenhoObrigacaoPagar eq null and !empenhoControlador.selecionado.isEmpenhoDeObrigacaoPagar()}"
                                     styleClass="mtop10">

                                <p:commandButton value="Novo"
                                                 icon="ui-icon-circle-plus"
                                                 actionListener="#{empenhoControlador.novoDesdobramento()}"
                                                 rendered="#{empenhoControlador.desdobramento eq null}"
                                                 update=":Formulario:tabGeral:painelDesdob"
                                                 process="@this"
                                                 id="btnNovoDesdobramento"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 styleClass="mtop10 padrao"
                                                 disabled="#{empenhoControlador.getBloquearNovoDesdobramento()}"
                                                 title="Clique para adicionar um novo desdobramento."/>

                                <h:panelGrid columns="2" id="panelGridDesdobramento"
                                             rendered="#{empenhoControlador.desdobramento ne null}">
                                    <fc:outputLabelObrigatorio for="contaDesdobramento" value="Conta de Despesa: "/>
                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0">
                                        <p:autoComplete queryDelay="1000"
                                                        id="contaDesdobramento"
                                                        size="70"
                                                        title="Selecione a conta de despesa desdobrada filtrando pelo tipo da conta de despesa selecionada no empenho."
                                                        completeMethod="#{empenhoControlador.completarDesdobramento}"
                                                        converter="#{planoDeContasWizardControlador.converterConta}"
                                                        value="#{empenhoControlador.desdobramento.conta}"
                                                        disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                        var="cd"
                                                        styleClass="mrig03"
                                                        maxlength="50"
                                                        dropdown="true"
                                                        panelStyle="max-height: 250px"
                                                        itemValue="#{cd.id}"
                                                        itemLabel="#{cd}"/>
                                    </h:panelGrid>

                                    <fc:outputLabelObrigatorio value="Valor: "/>
                                    <p:outputPanel id="valorConta">
                                        <fc:inputMoeda value="#{empenhoControlador.desdobramento.valor}"
                                                       disable="#{empenhoControlador.isRegistroEditavel()}"
                                                       title="Informe o Valor da Conta de Despesa"/>
                                    </p:outputPanel>
                                </h:panelGrid>

                                <p:commandButton id="btnAddConta"
                                                 icon="ui-icon-check"
                                                 disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 styleClass="mtop10 padrao"
                                                 rendered="#{empenhoControlador.desdobramento ne null}"
                                                 actionListener="#{empenhoControlador.adicionarDesdobramento()}"
                                                 title="Clique para adicionar este registro."
                                                 update=":Formulario:tabGeral:painelDesdob :Formulario:tabGeral:gridHistorico"
                                                 process=":Formulario:tabGeral:painelDesdob @this"
                                                 value="Adicionar"/>

                                <p:commandButton value="Cancelar"
                                                 icon="ui-icon-cancel"
                                                 actionListener="#{empenhoControlador.cancelarDesdobramento()}"
                                                 rendered="#{empenhoControlador.desdobramento ne null}"
                                                 update=":Formulario:tabGeral:painelDesdob"
                                                 process="@this"
                                                 id="btnCancelarDesdobramento"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 styleClass="mlef05 mtop10 padrao"
                                                 title="Clique para cancelar esta operação."/>


                                <p:dataTable id="tabelaDesdobramento"
                                             value="#{empenhoControlador.selecionado.desdobramentos}"
                                             var="des"
                                             styleClass="mtop02"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>DETALHAMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Ação" style="width: 8%;text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         onstart="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         styleClass="mrig05"
                                                         disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                         actionListener="#{empenhoControlador.editarDesdobramento(des)}"
                                                         title="Clique para alterar este registro."
                                                         id="btEditarContaDesdobrada"
                                                         process="@this :Formulario:tabGeral:painelDesdob"
                                                         update=":Formulario:tabGeral:painelDesdob"/>

                                        <p:commandButton id="btnExcluirConta"
                                                         update=":Formulario:tabGeral:tabelaDesdobramento :Formulario:tabGeral:gridHistorico :Formulario:tabGeral:painelDesdob"
                                                         process="@this"
                                                         actionListener="#{empenhoControlador.removerDesdobramento(des)}"
                                                         title="Clique para remover este registro."
                                                         icon="ui-icon-trash"
                                                         onstart="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                         disabled="#{empenhoControlador.isRegistroEditavel()}"/>
                                    </p:column>
                                    <p:column headerText="Conta de Despesa" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{des.conta}"/>
                                    </p:column>
                                    <p:column headerText="Valor" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{des.valor}">
                                            <f:convertNumber type="currency"/>
                                        </h:outputText>
                                        <f:facet name="footer">
                                            <div align="right">
                                                <h:outputText id="totalDesd"
                                                              value="#{empenhoControlador.selecionado.valorTotalDesdobramentos}"
                                                              converter="moneyConverter"/>
                                            </div>
                                        </f:facet>
                                    </p:column>
                                    <p:column headerText="Saldo" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{des.saldo}">
                                            <f:convertNumber type="currency"/>
                                        </h:outputText>
                                        <f:facet name="footer">
                                            <div align="right">
                                                <h:outputText id="saldoTotalDesd"
                                                              value="#{empenhoControlador.selecionado.saldoTotalDesdobramentos}"
                                                              converter="moneyConverter"/>
                                            </div>
                                        </f:facet>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:outputPanel>

                        <p:outputPanel id="panelObrigacaoPagar">
                            <p:panel id="panelOB"
                                     rendered="#{empenhoControlador.empenhoObrigacaoPagar ne null or empenhoControlador.selecionado.isEmpenhoDeObrigacaoPagar()}"
                                     styleClass="mtop10 semBorda">

                                <p:tabView id="tabGeralObrigacao">
                                    <p:tab title="Empenho com Reconhecimento de Obrigação a Pagar">
                                        <h:panelGrid columns="3" id="gridObrigacao">
                                            <h:outputText value="Obrigação a Pagar: "/>
                                            <p:autoComplete queryDelay="1000"
                                                            value="#{empenhoControlador.empenhoObrigacaoPagar.obrigacaoAPagar}"
                                                            title="Selecione uma obrigação a pagar."
                                                            id="obrigacao-pagar"
                                                            panelStyle="max-height: 230px"
                                                            maxResults="50"
                                                            dropdown="true"
                                                            converter="#{obrigacaoAPagarControlador.converterGenerico}"
                                                            disabled="#{empenhoControlador.bloquearNovaObrigacao()}"
                                                            completeMethod="#{empenhoControlador.completarObrigacaoPagar}"
                                                            var="obrig"
                                                            size="70"
                                                            styleClass="mrig03"
                                                            itemValue="#{obrig.id}"
                                                            itemLabel="#{obrig}"/>

                                            <p:watermark value="Filtra por elemento de despesa e fonte do empenho."
                                                         for="obrigacao-pagar"/>
                                        </h:panelGrid>

                                        <p:commandButton styleClass="padrao mtop10"
                                                         update=":Formulario:tabGeral:panelObrigacaoPagar :Formulario:tabGeral:gridGeral"
                                                         onstart="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         value="Adicionar"
                                                         process="@this :Formulario:tabGeral:panelObrigacaoPagar :Formulario:tabGeral:gridGeral"
                                                         icon="ui-icon-check"
                                                         actionListener="#{empenhoControlador.adicionarObrigacaoPagar()}"
                                                         title="Clique para selecionar uma obrigação a pagar."
                                                         disabled="#{empenhoControlador.bloquearNovaObrigacao()}"/>

                                        <p:commandButton styleClass="padrao mtop10 mlef05"
                                                         id="cancelarObrigacaoPagar"
                                                         update=":Formulario:tabGeral:panelObrigacaoPagar"
                                                         oncomplete="aguarde.hide()"
                                                         value="Cancelar"
                                                         process="@this"
                                                         icon="ui-icon-cancel"
                                                         onclick="if (!confirm('Ao cancelar o reconhecimento de obrigação a pagar todos os dados inseridos do mesmo serão perdidos, deseja continuar?')) {return false; } else {aguarde.show();}"
                                                         actionListener="#{empenhoControlador.cancelarObrigacaoPagar()}"
                                                         title="Clique para selecionar uma obrigação a pagar."
                                                         disabled="#{empenhoControlador.bloquearNovaObrigacao()}"/>

                                        <p:dataTable id="tableObrigacao"
                                                     value="#{empenhoControlador.selecionado.obrigacoesPagar}"
                                                     var="op"
                                                     styleClass="mtop03"
                                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                                     paginator="true"
                                                     rows="10"
                                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>Obrigações a Pagar&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                                     rowIndexVar="rowlx">
                                            <p:column headerText="Remover" style="width: 5%;text-align: center">
                                                <p:commandButton id="btnRemoverObrigacao"
                                                                 update=":Formulario:tabGeral:panelObrigacaoPagar :Formulario:tabGeral:gridGeral"
                                                                 process="@this"
                                                                 actionListener="#{empenhoControlador.removerObrigacaoPagar(op)}"
                                                                 title="Clique para remover este registro."
                                                                 icon="ui-icon-trash"
                                                                 onstart="aguarde.show()"
                                                                 oncomplete="aguarde.hide()"
                                                                 onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                                 disabled="#{empenhoControlador.isRegistroEditavel() or empenhoControlador.desabilitarRemoverObrigacaoPagar()}"/>
                                            </p:column>
                                            <p:column headerText="Número" styleClass="alinhamentoDireita">
                                                <h:outputText value="#{op.obrigacaoAPagar.numero}"/>
                                            </p:column>
                                            <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                                <h:outputText value="#{op.obrigacaoAPagar.dataLancamento}">
                                                    <f:convertDateTime type="date"/>
                                                </h:outputText>
                                            </p:column>
                                            <p:column headerText="Elemento de Despesa" styleClass="alinhamentoEsquerda">
                                                <h:outputText value="#{op.obrigacaoAPagar.despesaORC.contaDeDespesa}"/>
                                            </p:column>
                                            <p:column headerText="Fonte de Recurso" styleClass="alinhamentoEsquerda">
                                                <h:outputText
                                                    value="#{op.obrigacaoAPagar.fonteDespesaORC.descricaoFonteDeRecurso}"/>
                                            </p:column>
                                            <p:column headerText="Valor" styleClass="alinhamentoDireita">
                                                <h:outputText value="#{op.obrigacaoAPagar.valor}">
                                                    <f:convertNumber type="currency"/>
                                                </h:outputText>
                                                <f:facet name="footer">
                                                    <div class="alinhamentoDireita">
                                                        <h:outputText
                                                            value="#{empenhoControlador.selecionado.totalObrigacaoPagar}">
                                                            <f:convertNumber type="currency"/>
                                                        </h:outputText>
                                                    </div>
                                                </f:facet>
                                            </p:column>
                                            <p:column headerText="Saldo" styleClass="alinhamentoDireita">
                                                <h:outputText value="#{op.obrigacaoAPagar.saldo}">
                                                    <f:convertNumber type="currency"/>
                                                </h:outputText>
                                                <f:facet name="footer">
                                                    <div class="alinhamentoDireita">
                                                        <h:outputText
                                                            value="#{empenhoControlador.selecionado.saldoTotalObrigacaoPagar}">
                                                            <f:convertNumber type="currency"/>
                                                        </h:outputText>
                                                    </div>
                                                </f:facet>
                                            </p:column>
                                        </p:dataTable>

                                        <hr/>
                                        <p:outputPanel id="painelDesdobObr">
                                            <p:commandButton id="btnNovaConta"
                                                             onstart="aguarde.show()"
                                                             oncomplete="aguarde.hide()"
                                                             icon="ui-icon-plus"
                                                             styleClass="padrao mtop10"
                                                             title="Clique para uma nova conta despesa desdrobrada"
                                                             disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                             rendered="#{empenhoControlador.desdobramento eq null}"
                                                             actionListener="#{empenhoControlador.novoDesdobramentoObrigacao()}"
                                                             process="@this"
                                                             update=":Formulario:tabGeral:panelObrigacaoPagar"
                                                             value="Novo"/>

                                            <table>
                                                <tr style="vertical-align: top">
                                                    <td style="width: 50%">
                                                        <h:panelGrid columns="2"
                                                                     id="gridDesdEmpenho"
                                                                     rendered="#{empenhoControlador.desdobramento ne null}">
                                                            <fc:outputLabelObrigatorio for="contaDespesa"
                                                                                       value="Conta de Despesa: "/>
                                                            <p:autoComplete queryDelay="1000"
                                                                            id="desdobramentoOp"
                                                                            size="70"
                                                                            title="Informe a conta de despesa desdobrada filtrando pela lista de obrigações a pagar."
                                                                            completeMethod="#{empenhoControlador.completarContaDespesaPorObrigacaoPagar}"
                                                                            converter="#{liquidacaoControlador.converterDesdobramentoObrigacao}"
                                                                            value="#{empenhoControlador.desdobramentoObrigacaoPagar}"
                                                                            disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                                            var="desdObrigacao"
                                                                            panelStyle="max-height: 250px; max-width: 700px"
                                                                            dropdown="true"
                                                                            maxlength="50"
                                                                            itemValue="#{desdObrigacao.id}"
                                                                            itemLabel="#{desdObrigacao.toStringAutoComplete()}">
                                                                <p:ajax event="itemSelect"
                                                                        process="@this"
                                                                        listener="#{empenhoControlador.definirValorDetalhamento()}"
                                                                        update="gridDesdObrigacao gridDesdEmpenho"/>
                                                            </p:autoComplete>

                                                            <fc:outputLabelObrigatorio value="Valor:"/>
                                                            <fc:inputMoeda
                                                                value="#{empenhoControlador.desdobramento.valor}"
                                                                id="valorConta"/>

                                                            <p:commandButton id="btnAddContaObr"
                                                                             onstart="aguarde.show()"
                                                                             oncomplete="aguarde.hide()"
                                                                             icon="ui-icon-check"
                                                                             styleClass="padrao mtop10"
                                                                             title="Clique para adicionar este registro."
                                                                             rendered="#{empenhoControlador.desdobramento ne null}"
                                                                             actionListener="#{empenhoControlador.adicionarDetalhamento()}"
                                                                             process=":Formulario:tabGeral:panelObrigacaoPagar @this"
                                                                             update=":Formulario:tabGeral:panelObrigacaoPagar :Formulario:tabGeral:valor"
                                                                             value="Adicionar"/>

                                                            <p:commandButton id="btnCancelarConta"
                                                                             onstart="aguarde.show()"
                                                                             oncomplete="aguarde.hide()"
                                                                             icon="ui-icon-cancel"
                                                                             styleClass="padrao mtop10"
                                                                             title="Clique para cancela a operação."
                                                                             rendered="#{empenhoControlador.desdobramento ne null}"
                                                                             actionListener="#{empenhoControlador.cancelarDesdobramentoObrigacao()}"
                                                                             process="@this"
                                                                             update=":Formulario:tabGeral:panelObrigacaoPagar"
                                                                             value="Cancelar"/>
                                                        </h:panelGrid>
                                                    </td>

                                                    <td style="width: 10%">

                                                    </td>

                                                    <td style="width: 50%">
                                                        <h:panelGrid columns="2"
                                                                     id="gridDesdObrigacao"
                                                                     rendered="#{empenhoControlador.desdobramento ne null}">
                                                            <p:dataTable
                                                                value="#{empenhoControlador.detalhamentosObrigacaoPagar}"
                                                                rowStyleClass="#{empenhoControlador.isMesmaContaDespesaPorObrigacaoPagar(desdObrigacao) ? 'fundo-amarelo-padrao' : ''}"
                                                                var="desdObrigacao">
                                                                <f:facet name="header">
                                                                    Detalhamentos da Obrigação a Pagar
                                                                </f:facet>
                                                                <p:column headerText="Conta"
                                                                          styleClass="alinhamentoEsquerda">
                                                                    <h:outputText value="#{desdObrigacao.conta}"/>
                                                                </p:column>
                                                                <p:column headerText="Valor"
                                                                          styleClass="alinhamentoDireita">
                                                                    <h:outputText value="#{desdObrigacao.valor}">
                                                                        <f:convertNumber type="currency"/>
                                                                    </h:outputText>
                                                                </p:column>
                                                                <p:column headerText="Saldo"
                                                                          styleClass="alinhamentoDireita">
                                                                    <h:outputText value="#{desdObrigacao.saldo}">
                                                                        <f:convertNumber type="currency"/>
                                                                    </h:outputText>
                                                                </p:column>
                                                            </p:dataTable>
                                                        </h:panelGrid>
                                                    </td>
                                                </tr>
                                            </table>

                                            <p:dataTable id="tableContas"
                                                         value="#{empenhoControlador.selecionado.desdobramentos}"
                                                         var="des"
                                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                                         paginator="true"
                                                         rows="10"
                                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>Detalhamentos da Despesa&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                                         rowIndexVar="rowlx">
                                                <p:column headerText="Ações" styleClass="alinhamentoCentralizado"
                                                          style="width: 8%">
                                                    <p:commandButton id="btnEditarConta"
                                                                     icon="ui-icon-pencil"
                                                                     onstart="aguarde.show()"
                                                                     oncomplete="aguarde.hide()"
                                                                     styleClass="mrig05"
                                                                     disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                                     title="Clique para editar este registro."
                                                                     update=":Formulario:tabGeral:panelObrigacaoPagar"
                                                                     process="@this"
                                                                     actionListener="#{empenhoControlador.editarDesdobramento(des)}"/>

                                                    <p:commandButton id="btnExcluirContaObr"
                                                                     icon="ui-icon-trash"
                                                                     onstart="aguarde.show()"
                                                                     oncomplete="aguarde.hide()"
                                                                     disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                                     title="Clique para remover este registro."
                                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                                     update=":Formulario:tabGeral:panelObrigacaoPagar :Formulario:tabGeral:gridHistorico"
                                                                     process=":Formulario:tabGeral:panelObrigacaoPagar @this"
                                                                     actionListener="#{empenhoControlador.removerDesdobramento(des)}"/>
                                                </p:column>
                                                <p:column headerText="Conta de Despesa"
                                                          styleClass="alinhamentoEsquerda">
                                                    <h:outputText
                                                        value="#{des.desdobramentoObrigacaoPagar.toStringAutoComplete()}"/>
                                                </p:column>
                                                <p:column headerText="Valor" styleClass="alinhamentoDireita">
                                                    <h:outputText value="#{des.valor}">
                                                        <f:convertNumber type="currency"/>
                                                    </h:outputText>
                                                    <f:facet name="footer">
                                                        <div align="right">
                                                            <h:outputText
                                                                value="#{empenhoControlador.selecionado.valorTotalDetalhamento}"
                                                                converter="#{empenhoControlador.moneyConverter}"/>
                                                        </div>
                                                    </f:facet>
                                                </p:column>
                                                <p:column headerText="Saldo" styleClass="alinhamentoDireita">
                                                    <h:outputText value="#{des.saldo}">
                                                        <f:convertNumber type="currency"/>
                                                    </h:outputText>
                                                    <f:facet name="footer">
                                                        <div align="right">
                                                            <h:outputText
                                                                value="#{empenhoControlador.selecionado.saldoTotalDetalhamento}"
                                                                converter="#{empenhoControlador.moneyConverter}"/>
                                                        </div>
                                                    </f:facet>
                                                </p:column>
                                            </p:dataTable>
                                        </p:outputPanel>
                                    </p:tab>
                                </p:tabView>
                            </p:panel>
                        </p:outputPanel>

                        <h:panelGrid columns="2" id="gridHistorico">
                            <h:outputLabel for="historicoContabil" value="Histórico Padrão: "
                                           style="margin-right: 45px"/>
                            <h:panelGroup>
                                <p:autoComplete queryDelay="1000" id="historicoContabil" size="70"
                                                title="Informe o Histórico Padrão"
                                                value="#{empenhoControlador.selecionado.historicoContabil}"
                                                completeMethod="#{empenhoControlador.completarHistoricoContabil}"
                                                converter="#{historicoContabilControlador.converterGenerico}"
                                                maxResults="10"
                                                disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                forceSelection="true" var="hc" itemValue="#{hc.id}"
                                                itemLabel="Número: #{hc.toStringAutoComplete()}">
                                    <p:ajax event="itemSelect" update="@this complementoHistorico"
                                            listener="#{empenhoControlador.copiarHistoricoUsuario()}"/>
                                </p:autoComplete>

                                <h:commandLink actionListener="#{empenhoControlador.navegarParaHistoricoContabil}"
                                               target="_blank">
                                    <p:commandButton icon="ui-icon-circle-plus"
                                                     disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                     styleClass="botao_azul icone_branco mlef05"
                                                     ajax="false"
                                                     title="Clique para inserir um novo registro"/>
                                </h:commandLink>
                            </h:panelGroup>

                            <fc:outputLabelObrigatorio for="complementoHistorico" value="Histórico: "/>
                            <h:panelGrid columns="2">
                                <p:inputTextarea id="complementoHistorico" title="Informe o Histórico"
                                                 value="#{empenhoControlador.selecionado.complementoHistorico}"
                                                 cols="70" maxlength="3000"
                                                 style="margin-left: -3px"
                                                 autoResize="true" counterTemplate="{0} Caracteres Restantes."
                                                 counter="counter"/>
                                <h:outputText id="counter"/>
                            </h:panelGrid>

                            <fc:outputLabelObrigatorio for="valor" value="Valor: "/>
                            <p:inputText title="Informe o Valor do Empenho"
                                         id="valor"
                                         maxlength="70" size="20"
                                         style="text-align: right"
                                         onkeydown="mascaraMonetaria(this);"
                                         converter="#{empenhoControlador.moneyConverter}"
                                         disabled="#{empenhoControlador.isRegistroEditavel()}"
                                         readonly="#{empenhoControlador.bloquearValor()}"
                                         validator="#{empenhoControlador.validaSaldoFonteDespesa}"
                                         value="#{empenhoControlador.selecionado.valor}">
                                <p:ajax event="blur"
                                        update="pInfo valor"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"/>
                            </p:inputText>

                            <p:spacer/>
                            <p:outputPanel id="pInfo">
                                <h:panelGrid columns="6">
                                    <h:outputText value="Saldo Anterior:"/>
                                    <h:outputText title="Saldo Anterior"
                                                  id="saldoFonte"
                                                  converter="#{empenhoControlador.moneyConverter}"
                                                  value="#{empenhoControlador.calculaSaldoAnterior()}"
                                                  style="font-weight: bold; margin-right: 20px"/>

                                    <h:outputText value="Saldo Atual:"/>
                                    <h:outputText title="Saldo Posterior"
                                                  id="saldoRealFonte"
                                                  converter="#{empenhoControlador.moneyConverter}"
                                                  value="#{empenhoControlador.calculaSaldoAtual()}"
                                                  style="font-weight: bold;  margin-right: 20px"/>

                                    <h:outputText value="Saldo de Cota (Grupo Orçamentário):"/>
                                    <h:outputText title="Saldo da Cota Orçamentaria"
                                                  id="saldoCota"
                                                  converter="#{empenhoControlador.moneyConverter}"
                                                  value="#{empenhoControlador.saldoCotaOrcamentaria}"
                                                  style="font-weight: bold"/>
                                </h:panelGrid>
                            </p:outputPanel>
                        </h:panelGrid>
                    </p:tab>

                    <p:tab title="Estorno de #{empenhoControlador.tituloEmpenho}">
                        <p:dataTable id="estornoEmp"
                                     value="#{empenhoControlador.empenhoEstornos}"
                                     var="est"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     styleClass="mtop05"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>ESTORNOS DE #{empenhoControlador.tituloEmpenho}&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Número" styleClass="alinhamentoDireita">
                                <h:outputText value="#{est.numero}"/>
                            </p:column>
                            <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{est.dataEstorno}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                <h:outputText value="#{est.valor}" converter="#{empenhoControlador.moneyConverter}"/>
                            </p:column>
                            <f:facet name="footer">
                                <div align="right">
                                    <h:outputText value="Total: "/>
                                    <h:outputText value="#{empenhoControlador.calculaEstornosEmpenhos}"
                                                  id="totalEstEmp"
                                                  converter="#{empenhoControlador.moneyConverter}"/>
                                </div>
                            </f:facet>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="#{empenhoControlador.tituloLiquidacao}">
                        <p:dataTable id="liquidacoes"
                                     value="#{empenhoControlador.selecionado.liquidacoes}"
                                     var="li"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     styleClass="mtop05"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>#{empenhoControlador.tituloLiquidacao}&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Número" styleClass="alinhamentoDireita">
                                <h:outputText value="#{li.numero}"/>
                            </p:column>
                            <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{li.dataLiquidacao}">
                                    <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Pessoa" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{li.empenho.fornecedor.nome}"/>
                            </p:column>
                            <p:column headerText="Usuário" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{li.usuarioSistema}"/>
                            </p:column>
                            <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                <h:outputText value="#{li.valor}" converter="#{empenhoControlador.moneyConverter}"/>
                            </p:column>
                            <f:facet name="footer">
                                <div align="right">
                                    <h:outputText value="Total: "/>
                                    <h:outputText value="#{empenhoControlador.calculaLiquidacoes}"
                                                  converter="#{empenhoControlador.moneyConverter}"/>
                                </div>
                            </f:facet>
                        </p:dataTable>

                        <p:dataTable id="tabEstLiqui"
                                     value="#{empenhoControlador.liquidacaoEstornos}"
                                     var="estLi"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     styleClass="mtop20"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>ESTORNOS DE #{empenhoControlador.tituloLiquidacao}&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Número" styleClass="alinhamentoDireita">
                                <h:outputText value="#{estLi.numero}"/>
                            </p:column>
                            <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{estLi.dataEstorno}">
                                    <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Número da #{empenhoControlador.tituloLiquidacao}"
                                      styleClass="alinhamentoDireita">
                                <h:outputText value="#{estLi.liquidacao.numero}"/>
                            </p:column>
                            <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                <h:outputText value="#{estLi.valor}" converter="#{empenhoControlador.moneyConverter}"/>
                            </p:column>
                            <f:facet name="footer">
                                <div align="right">
                                    <h:outputText value="Total: "/>
                                    <h:outputText value="#{empenhoControlador.calculaEstornosLiquidacoes}"
                                                  id="totalEstL"
                                                  converter="#{empenhoControlador.moneyConverter}"/>
                                </div>
                            </f:facet>
                        </p:dataTable>
                        <br/>
                        <h:outputText value="Saldo Liquidado:"/>
                        <p:spacer width="5"/>
                        <h:outputText id="tLiqui"
                                      styleClass="negrito"
                                      value="#{empenhoControlador.calculaValorLiquidado}"
                                      converter="#{empenhoControlador.moneyConverter}"/>
                    </p:tab>

                    <p:tab title="#{empenhoControlador.tituloPagamento}">
                        <p:dataTable id="pagamentos"
                                     value="#{empenhoControlador.pagamentos}"
                                     var="pag"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     styleClass="mtop10"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>#{empenhoControlador.tituloPagamento}&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{pag.dataPagamento}">
                                    <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Número" styleClass="alinhamentoDireita">
                                <h:outputText value="#{pag.numeroPagamento}"/>
                            </p:column>
                            <p:column headerText="#{empenhoControlador.tituloLiquidacao}"
                                      styleClass="alinhamentoDireita">
                                <h:outputText value="#{pag.liquidacao}"/>
                            </p:column>
                            <p:column headerText="Conta Financeira" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{pag.subConta.toStringAutoCompleteContaFinanceira()}"/>
                            </p:column>
                            <p:column headerText="Usuário" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{pag.usuarioSistema.pessoaFisica.nome}"/>
                            </p:column>
                            <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                <h:outputText value="#{pag.valor}" converter="#{empenhoControlador.moneyConverter}"/>
                            </p:column>
                            <f:facet name="footer">
                                <div align="right">
                                    <h:outputText value="Total: "/>
                                    <h:outputText value="#{empenhoControlador.calculaPagamentos}"
                                                  id="totalP"
                                                  converter="#{empenhoControlador.moneyConverter}"/>
                                </div>
                            </f:facet>
                        </p:dataTable>

                        <p:dataTable id="tabEstPagtos"
                                     value="#{empenhoControlador.pagamentoEstornos}"
                                     var="estP"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     styleClass="mtop20"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE #{empenhoControlador.tituloPagamento}&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{estP.dataEstorno}">
                                    <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Número" styleClass="alinhamentoDireita">
                                <h:outputText value="#{estP.numero}"/>
                            </p:column>
                            <p:column headerText="#{empenhoControlador.tituloPagamento}"
                                      styleClass="alinhamentoDireita">
                                <h:outputText value="#{estP.pagamento.numeroPagamento}"/>
                            </p:column>
                            <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                <h:outputText value="#{estP.valor}" converter="#{empenhoControlador.moneyConverter}"/>
                            </p:column>
                            <f:facet name="footer">
                                <div align="right">
                                    <h:outputText value="Total: "/>
                                    <h:outputText value="#{empenhoControlador.calculaEstornosPagamentos}"
                                                  id="totalEstPag"
                                                  converter="#{empenhoControlador.moneyConverter}"
                                                  readonly="true"/>
                                </div>
                            </f:facet>
                        </p:dataTable>
                        <br/>
                        <h:outputText value="Saldo Pago: "/>
                        <h:outputText title="Total Pago" id="tPag"
                                      styleClass="negrito"
                                      value="#{empenhoControlador.calculaValorPago}"
                                      converter="#{empenhoControlador.moneyConverter}"/>
                    </p:tab>

                    <p:tab id="tabIntegracao" title="Integração">
                        <p:outputPanel id="panelIntegracao">
                            <h:panelGrid columns="2"
                                         rendered="#{empenhoControlador.selecionado.tipoContaDespesa ne null}"
                                         id="gridTipos">
                                <h:outputText value="Tipo de Conta de Despesa: "
                                              rendered="#{empenhoControlador.selecionado.despesaORC.id ne null}"
                                              styleClass="negrito"/>
                                <h:outputText value="#{empenhoControlador.selecionado.tipoContaDespesa.descricao}"
                                              rendered="#{empenhoControlador.selecionado.despesaORC.id ne null}"
                                              styleClass="azulnegrito"/>

                                <h:outputText value="SubTipo Conta de Despesa: "
                                              rendered="#{empenhoControlador.selecionado.despesaORC.id ne null and empenhoControlador.mostrarPainelIntegracaoDividaPublica()}"
                                              styleClass="negrito"/>
                                <h:outputText value="#{empenhoControlador.selecionado.subTipoDespesa.descricao}"
                                              rendered="#{empenhoControlador.selecionado.despesaORC.id ne null and empenhoControlador.mostrarPainelIntegracaoDividaPublica()}"
                                              styleClass="azulnegrito"/>

                                <h:outputText value="Tipo de Fonte de Recursos: "
                                              rendered="#{empenhoControlador.selecionado.fonteDespesaORC ne null}"
                                              styleClass="negrito"/>
                                <h:outputText
                                    value="#{empenhoControlador.fonteRecursoSelecionada.tipoFonteRecurso.descricao}"
                                    rendered="#{empenhoControlador.selecionado.fonteDespesaORC ne null}"
                                    styleClass="azulnegrito"/>

                                <h:outputText value="Execução da Solicitação de Empenho: "
                                              rendered="#{empenhoControlador.selecionado.solicitacaoEmpenho ne null and empenhoControlador.integracaoContabilAdministrativo.execucaoSolicitacaoEmpenho ne null}"
                                              styleClass="negrito"/>
                                <h:outputText
                                    value="#{empenhoControlador.integracaoContabilAdministrativo.execucaoSolicitacaoEmpenho}"
                                    rendered="#{empenhoControlador.selecionado.solicitacaoEmpenho ne null and empenhoControlador.integracaoContabilAdministrativo.execucaoSolicitacaoEmpenho ne null}"
                                    styleClass="azulnegrito"/>

                                <h:outputText value="Solicitação de Empenho: "
                                              rendered="#{empenhoControlador.selecionado.solicitacaoEmpenho ne null}"
                                              styleClass="negrito"/>
                                <h:panelGroup>
                                    <h:commandLink title="Redirecionar para origem da solicitação de empenho."
                                                   target="_blank"
                                                   id="btNavegar"
                                                   styleClass="negrito"
                                                   rendered="#{empenhoControlador.selecionado.solicitacaoEmpenho ne null and !empty empenhoControlador.integracaoContabilAdministrativo.linkRedirecionarExecucaoSolicitacaoEmp}"
                                                   style="text-decoration: none; margin-bottom: 0;"
                                                   actionListener="#{empenhoControlador.redirecionarParaOrigemSolicitacaoEmpenho()}">

                                        <h:panelGrid columns="1">
                                            <h:outputText value="#{empenhoControlador.selecionado.solicitacaoEmpenho}"
                                                          styleClass="azulnegrito"/>
                                        </h:panelGrid>
                                    </h:commandLink>

                                    <h:outputText value="#{empenhoControlador.selecionado.solicitacaoEmpenho}"
                                                  rendered="#{empenhoControlador.selecionado.solicitacaoEmpenho ne null and empty empenhoControlador.integracaoContabilAdministrativo.linkRedirecionarExecucaoSolicitacaoEmp}"
                                                  styleClass="negrito"/>
                                </h:panelGroup>
                            </h:panelGrid>

                            <hr class="mbot05"/>
                            <h:panelGrid columns="2">
                                <h:outputText value="Dívida Pública: "
                                              rendered="#{empenhoControlador.mostrarPainelIntegracaoDividaPublica()}"/>
                                <h:outputText value="Precatórios: "
                                              rendered="#{empenhoControlador.mostraPainelIntegracaoPrecatorios()}"/>
                                <h:panelGrid columns="4"
                                             rendered="#{empenhoControlador.mostrarPainelIntegracaoDividaPublica() or empenhoControlador.mostraPainelIntegracaoPrecatorios()}">

                                    <p:autoComplete queryDelay="1000" id="dividaPublica"
                                                    size="70"
                                                    title="Informe a Dívida Pública"
                                                    value="#{empenhoControlador.selecionado.dividaPublica}"
                                                    disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                    completeMethod="#{empenhoControlador.completarDividaPublica}"
                                                    converter="#{dividaPublicaControlador.converterGenerico}"
                                                    maxResults="10"
                                                    rendered="#{empenhoControlador.mostrarPainelIntegracaoDividaPublica() or empenhoControlador.mostraPainelIntegracaoPrecatorios()}"
                                                    var="dp"
                                                    itemValue="#{dp.id}"
                                                    itemLabel="#{dp.toString()}">
                                        <p:ajax event="itemSelect" update="compCamposDividaPublica"/>
                                    </p:autoComplete>

                                    <p:outputPanel id="compCamposDividaPublica"
                                                   rendered="#{empenhoControlador.mostrarPainelIntegracaoDividaPublica() or empenhoControlador.mostraPainelIntegracaoPrecatorios()}">
                                        <fc:visualizarCampos
                                            objeto="#{empenhoControlador.selecionado.dividaPublica}"/>
                                    </p:outputPanel>

                                    <p:commandButton styleClass="botao_azul icone_branco"
                                                     update=":FormularioPesquisaGenerica"
                                                     disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                     title="Clique para consultar no cadastro de dívida pública."
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide();dialog.show()"
                                                     rendered="#{empenhoControlador.mostrarPainelIntegracaoDividaPublica() or empenhoControlador.mostraPainelIntegracaoPrecatorios()}"
                                                     actionListener="#{empenhoControlador.atribuirObjetoPesquisa('DividaPublica', false)}"
                                                     image="ui-icon-search"/>
                                </h:panelGrid>

                                <h:outputText value="Parcela da Dívida Pública: "
                                              rendered="#{empenhoControlador.mostrarPainelIntegracaoDividaPublica()}"/>
                                <h:panelGrid columns="4"
                                             rendered="#{empenhoControlador.mostrarPainelIntegracaoDividaPublica()}">

                                    <p:autoComplete queryDelay="1000" id="parcDivida"
                                                    size="70"
                                                    title="Informe a parcela da dívida pública."
                                                    value="#{empenhoControlador.selecionado.parcelaDividaPublica}"
                                                    disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                    completeMethod="#{empenhoControlador.completarParcelaDividaPublica()}"
                                                    converter="#{empenhoControlador.converterGenerico}"
                                                    maxResults="10"
                                                    rendered="#{empenhoControlador.mostrarPainelIntegracaoDividaPublica()}"
                                                    forceSelection="true"
                                                    var="parc"
                                                    itemValue="#{parc.id}"
                                                    itemLabel="#{parc}">
                                        <p:ajax event="itemSelect" update="objetoParcelaDivida"/>
                                    </p:autoComplete>

                                    <p:outputPanel id="objetoParcelaDivida"
                                                   rendered="#{empenhoControlador.mostrarPainelIntegracaoDividaPublica()}">
                                        <fc:visualizarCampos
                                            objeto="#{empenhoControlador.selecionado.parcelaDividaPublica}"
                                        />
                                    </p:outputPanel>
                                </h:panelGrid>

                                <h:outputText value="Convênio De Despesa:"
                                              rendered="#{empenhoControlador.mostrarPanelIntegracaoConvenioDespesa()}"/>
                                <h:panelGrid columns="4"
                                             rendered="#{empenhoControlador.mostrarPanelIntegracaoConvenioDespesa()}">
                                    <p:autoComplete queryDelay="1000" id="convenioDespesa"
                                                    size="70"
                                                    title="Informe o Convênio De Despesa"
                                                    value="#{empenhoControlador.selecionado.convenioDespesa}"
                                                    completeMethod="#{empenhoControlador.completarConvenioDespesa}"
                                                    disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                    converter="#{convenioDespesaControlador.converterGenerico}"
                                                    maxResults="10"
                                                    forceSelection="true" var="cd" itemValue="#{cd.id}"
                                                    itemLabel="#{cd}">
                                        <p:ajax event="itemSelect" update="compCamposConvenioDespesa"/>
                                    </p:autoComplete>

                                    <p:outputPanel id="compCamposConvenioDespesa">
                                        <fc:visualizarCampos
                                            objeto="#{empenhoControlador.selecionado.convenioDespesa}"
                                        />
                                    </p:outputPanel>

                                    <p:commandButton styleClass="botao_azul icone_branco"
                                                     update=":FormularioPesquisaGenerica"
                                                     disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                     title="Clique para Consultar no Cadastro de Convênio de Despesa"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide();dialog.show()"
                                                     actionListener="#{empenhoControlador.setarObjetoPesquisa('ConvenioDespesa')}"
                                                     image="ui-icon-search"/>
                                </h:panelGrid>

                                <h:outputText value="Convênio de Receita:"
                                              rendered="#{empenhoControlador.mostrarPainelIntegracaoConvenioReceita()}"/>
                                <h:panelGrid columns="4"
                                             rendered="#{empenhoControlador.mostrarPainelIntegracaoConvenioReceita()}">
                                    <p:autoComplete queryDelay="1000"
                                                    id="convenioReceita"
                                                    size="70"
                                                    dropdown="true"
                                                    panelStyle="max-width: 800px;max-height: 250px"
                                                    title="Informe o convênio de receita."
                                                    value="#{empenhoControlador.selecionado.convenioReceita}"
                                                    completeMethod="#{empenhoControlador.completarConvenioReceita}"
                                                    converter="#{convenioReceitaControlador.converterGenerico}"
                                                    disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                    maxResults="50"
                                                    forceSelection="true"
                                                    var="cr"
                                                    itemValue="#{cr.id}"
                                                    itemLabel="#{cr.toStringAutoComplete()}">
                                        <p:ajax event="itemSelect"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                update="compCamposConvenioReceita"/>
                                    </p:autoComplete>

                                    <p:outputPanel id="compCamposConvenioReceita">
                                        <fc:visualizarCampos
                                            objeto="#{empenhoControlador.selecionado.convenioReceita}"
                                        />
                                    </p:outputPanel>

                                    <p:commandButton styleClass="botao_azul icone_branco"
                                                     update=":FormularioPesquisaGenerica"
                                                     disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                     title="Clique para consultar no cadastro de convênio de receita."
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide();dialog.show()"
                                                     actionListener="#{empenhoControlador.setarObjetoPesquisa('ConvenioReceita')}"
                                                     icon="ui-icon-search"/>
                                </h:panelGrid>


                                <h:outputText value="Operação de Crédito:"
                                              rendered="#{empenhoControlador.mostraPainelIntegracaoOperacaoCredito()}"/>
                                <h:panelGrid columns="4"
                                             rendered="#{empenhoControlador.mostraPainelIntegracaoOperacaoCredito()}">
                                    <p:autoComplete queryDelay="1000" id="operacaoDeCredito" size="70"
                                                    title="Informe a Operação de Crédito"
                                                    value="#{empenhoControlador.selecionado.operacaoDeCredito}"
                                                    completeMethod="#{empenhoControlador.completarOperacaoCredito}"
                                                    converter="#{dividaPublicaControlador.converterGenerico}"
                                                    disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                    maxResults="10"
                                                    var="operCred"
                                                    itemValue="#{operCred.id}"
                                                    itemLabel="#{operCred.toString()}">
                                        <p:ajax event="itemSelect" update="compCamposOpCredito"/>
                                    </p:autoComplete>

                                    <p:outputPanel id="compCamposOpCredito">
                                        <fc:visualizarCampos
                                            objeto="#{empenhoControlador.selecionado.operacaoDeCredito}"
                                        />
                                    </p:outputPanel>

                                    <p:commandButton styleClass="botao_azul icone_branco"
                                                     update=":FormularioPesquisaGenerica"
                                                     disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                     oncomplete="dialog.show()"
                                                     title="Clique para Consultar no Cadastro de Operação de Crédito"
                                                     actionListener="#{empenhoControlador.atribuirObjetoPesquisa('DividaPublica', true)}"
                                                     image="ui-icon-search">
                                    </p:commandButton>
                                </h:panelGrid>

                                <h:outputText value="Suprimento de Fundo:"
                                              rendered="#{empenhoControlador.mostraPainelIntegracaoSuprimentoFundo()}"/>
                                <h:panelGrid columns="4"
                                             rendered="#{empenhoControlador.mostraPainelIntegracaoSuprimentoFundo()}">
                                    <p:autoComplete queryDelay="1000"
                                                    id="suprimentoFundo"
                                                    size="70"
                                                    title="Informe o suprimento de fundo."
                                                    value="#{empenhoControlador.selecionado.propostaConcessaoDiaria}"
                                                    completeMethod="#{empenhoControlador.completarSuprimentoFundo}"
                                                    disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                    converter="#{propostaConcessaoDiariaControlador.converterGenerico}"
                                                    maxResults="10"
                                                    var="dp"
                                                    itemValue="#{dp.id}"
                                                    itemLabel="#{dp}">
                                        <p:ajax event="itemSelect" update="compCamposSupriFundo"/>
                                    </p:autoComplete>

                                    <p:outputPanel id="compCamposSupriFundo">
                                        <fc:visualizarCampos
                                            objeto="#{empenhoControlador.selecionado.propostaConcessaoDiaria}"
                                        />
                                    </p:outputPanel>

                                    <p:commandButton styleClass="botao_azul icone_branco"
                                                     update=":FormularioPesquisaGenerica"
                                                     disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide();dialog.show()"
                                                     title="Clique para Consultar no Cadastro de Suprimento de Fundo"
                                                     actionListener="#{empenhoControlador.setarObjetoPesquisa('PropostaConcessaoDiaria')}"
                                                     image="ui-icon-search"/>
                                </h:panelGrid>


                                <h:outputText value="Diária de Campo:"
                                              rendered="#{empenhoControlador.mostraPainelIntegracaoDiariaCampo()}"/>
                                <h:panelGrid columns="4"
                                             rendered="#{empenhoControlador.mostraPainelIntegracaoDiariaCampo()}">
                                    <p:autoComplete queryDelay="1000"
                                                    id="diariaCampo"
                                                    size="70"
                                                    title="Informe a diária de campo."
                                                    disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                    value="#{empenhoControlador.selecionado.propostaConcessaoDiaria}"
                                                    completeMethod="#{empenhoControlador.completarConcessaoDiariaCampo}"
                                                    converter="#{propostaConcessaoDiariaControlador.converterGenerico}"
                                                    maxResults="10"
                                                    var="dp"
                                                    itemValue="#{dp.id}"
                                                    itemLabel="#{dp}">
                                        <p:ajax event="itemSelect" update="compCamposDiariaCampo"/>
                                    </p:autoComplete>

                                    <p:outputPanel id="compCamposDiariaCampo">
                                        <fc:visualizarCampos
                                            objeto="#{empenhoControlador.selecionado.propostaConcessaoDiaria}"
                                        />
                                    </p:outputPanel>

                                    <p:commandButton styleClass="botao_azul icone_branco"
                                                     update=":FormularioPesquisaGenerica"
                                                     disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                     title="Clique para Consultar no Cadastro de Diária de Campo"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide();dialog.show()"
                                                     actionListener="#{empenhoControlador.setarObjetoPesquisa('PropostaConcessaoDiaria')}"
                                                     image="ui-icon-search"/>
                                </h:panelGrid>

                                <h:outputText value="Diária Civil:"
                                              rendered="#{empenhoControlador.mostraPainelIntegracaoDiariaCivil()}"/>
                                <h:panelGrid columns="4"
                                             rendered="#{empenhoControlador.mostraPainelIntegracaoDiariaCivil()}">
                                    <p:autoComplete queryDelay="1000"
                                                    id="diaria"
                                                    size="70"
                                                    title="Informe a concessão de diária civil."
                                                    value="#{empenhoControlador.selecionado.propostaConcessaoDiaria}"
                                                    completeMethod="#{empenhoControlador.completarConcessaoDiaria}"
                                                    disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                    converter="#{propostaConcessaoDiariaControlador.converterGenerico}"
                                                    maxResults="10"
                                                    var="dp"
                                                    itemValue="#{dp.id}"
                                                    itemLabel="#{dp}">
                                        <p:ajax event="itemSelect"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                update="compCamposDiariaCampoCivil"/>
                                    </p:autoComplete>

                                    <p:outputPanel id="compCamposDiariaCampoCivil">
                                        <fc:visualizarCampos
                                            objeto="#{empenhoControlador.selecionado.propostaConcessaoDiaria}"
                                        />
                                    </p:outputPanel>

                                    <p:commandButton styleClass="botao_azul icone_branco"
                                                     disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                     update=":FormularioPesquisaGenerica"
                                                     title="Clique para Consultar no Cadastro de Diária de Campo Cívil"
                                                     oncomplete="dialog.show()"
                                                     actionListener="#{empenhoControlador.setarObjetoPesquisa('PropostaConcessaoDiaria')}"
                                                     image="ui-icon-search"/>
                                </h:panelGrid>

                                <h:outputText value="Mês:"
                                              rendered="#{empenhoControlador.mostraPainelIntegracaoFolhaPagamento()}"/>
                                <h:outputText
                                    value="#{empenhoControlador.selecionado.folhaDePagamento.mes.descricao}"
                                    styleClass="negrito"
                                    rendered="#{empenhoControlador.mostraPainelIntegracaoFolhaPagamento()}"/>

                                <h:outputText value="Ano:"
                                              rendered="#{empenhoControlador.mostraPainelIntegracaoFolhaPagamento()}"/>
                                <h:outputText value="#{empenhoControlador.selecionado.folhaDePagamento.ano}"
                                              styleClass="negrito"
                                              rendered="#{empenhoControlador.mostraPainelIntegracaoFolhaPagamento()}"/>

                                <h:outputText value="Tipo de Folha:"
                                              rendered="#{empenhoControlador.mostraPainelIntegracaoFolhaPagamento()}"/>
                                <h:outputText
                                    value="#{empenhoControlador.selecionado.folhaDePagamento.tipoFolhaDePagamento.descricao}"
                                    styleClass="negrito"
                                    rendered="#{empenhoControlador.mostraPainelIntegracaoFolhaPagamento()}"/>

                                <h:outputText value="Usuário responsável:"
                                              rendered="#{empenhoControlador.mostraPainelIntegracaoFolhaPagamento()}"/>
                                <h:outputText
                                    value="#{empenhoControlador.selecionado.usuarioSistema.toStringAutoComplete()}"
                                    styleClass="negrito"
                                    rendered="#{empenhoControlador.mostraPainelIntegracaoFolhaPagamento()}"/>
                            </h:panelGrid>

                            <h:panelGrid columns="2">
                                <h:outputText value="Reconhecimento de Dívida do Exercício: "
                                              styleClass="negrito"
                                              rendered="#{empenhoControlador.selecionado.reconhecimentoDivida ne null}"/>
                                <h:commandLink title="Redirecionar para reconhecimento de dívida."
                                               target="_blank"
                                               styleClass="negrito"
                                               rendered="#{empenhoControlador.selecionado.reconhecimentoDivida ne null}"
                                               style="text-decoration: none; margin-bottom: 0;"
                                               actionListener="#{empenhoControlador.redirecionarParaReconhecimentoDivida()}">
                                    <h:panelGrid columns="1">
                                        <h:outputText value="#{empenhoControlador.selecionado.reconhecimentoDivida}"
                                                      styleClass="azulnegrito"/>
                                    </h:panelGrid>
                                </h:commandLink>
                            </h:panelGrid>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Solicitações" rendered="#{empenhoControlador.isCategoriaOrcamentariaNormal()}">
                        <p:dataTable id="tableSolicPend"
                                     value="#{empenhoControlador.solicitacoesPendentes}"
                                     var="sp"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     styleClass="mtop05"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>SOLICITAÇÕES PENDENTES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">
                            <p:column headerText="Empenhar" style="text-align: center; width: 5%">
                                <p:commandButton id="btnEmpenhar"
                                                 disabled="#{empenhoControlador.isRegistroEditavel()}"
                                                 actionListener="#{empenhoControlador.empenharSolicitacao}"
                                                 update=":Formulario:panelGeral"
                                                 process="@this"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 title="Clique para empenhar a solicitação."
                                                 icon="ui-icon-blue-document-copy">
                                    <f:attribute id="empenhar" name="empenhar" value="#{sp}"/>
                                </p:commandButton>
                            </p:column>

                            <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{sp.dataSolicitacao}">
                                    <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Complemento Histórico" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{sp.complementoHistorico}"/>
                            </p:column>
                            <p:column headerText="Fornecedor" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{sp.fornecedor.nome}"/>
                            </p:column>
                            <p:column headerText="Classe" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{sp.classeCredor}"/>
                            </p:column>
                            <p:column headerText="Despesa" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{sp.despesaORC}"/>
                            </p:column>
                            <p:column headerText="Unidade Organizacional" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{sp.unidadeOrganizacional}"/>
                            </p:column>
                            <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                <h:outputText value="#{sp.valor}" converter="#{empenhoControlador.moneyConverter}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Origem RP"
                           rendered="#{empenhoControlador.operacaoEditar and empenhoControlador.selecionado.empenho ne null}">
                        <co:ver-execucao-orc-por-empenho empenho="#{empenhoControlador.selecionado.empenho}"/>
                    </p:tab>

                    <p:tab title="Restos a Pagar"
                           rendered="#{empenhoControlador.operacaoEditar and empenhoControlador.empenhoDeRP ne null}">
                        <co:ver-execucao-orc-por-empenho empenho="#{empenhoControlador.empenhoDeRP}"/>
                    </p:tab>
                </p:tabView>
            </p:outputPanel>

            <p:commandButton value="Salvar"
                             id="cbSalvar"
                             styleClass="mtop10 mrig05 prioritario"
                             style="height: 30px;"
                             icon="ui-icon-disk"
                             title="Clique para salvar o registro"
                             actionListener="#{empenhoControlador.salvar()}"
                             onclick="aguarde.show()"/>

            <p:commandButton value="Cancelar"
                             id="cbCancelar"
                             style="height: 30px;"
                             styleClass="mtop10"
                             icon="ui-icon-cancel"
                             onclick="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             title="Clique para cancelar e retornar a página anterior"
                             actionListener="#{empenhoControlador.cancelar()}"
                             immediate="true"/>

            <fc:botaoTargetBlank label="Imprimir Nota"
                                 actionListener="#{empenhoControlador.gerarNotaOrcamentaria(false)}"
                                 rendered="#{empenhoControlador.isOperacaoEditar()}"
                                 imprimeNoDialog="true" update="@this"
                                 styleClass="mtop10 mrig05"
                                 style="height: 30px"
                                 icon="ui-icon-print"
                                 title="Clique para imprimir a nota de empenho."/>

            <p:commandButton value="Download Nota"
                             title="Clique para fazer o download em pdf da nota de empenho."
                             ajax="false"
                             icon="ui-icon-arrowthick-1-s"
                             styleClass="mtop10 mrig05"
                             rendered="#{empenhoControlador.isOperacaoEditar()}">
                <p:fileDownload value="#{empenhoControlador.gerarNotaOrcamentaria(true)}"/>
            </p:commandButton>
        </h:form>

        <p:dialog widgetVar="DialogPesquisarPessoa"
                  modal="true"
                  width="800"
                  height="500"
                  closable="true"
                  resizable="false"
                  position="center"
                  style="position: fixed !important;">
            <h:form id="FormularioPesquisarPessoa">
                <p:outputPanel rendered="#{empenhoControlador.selecionado ne null}">
                    <fc:pesquisaGenerico
                        selecionar="#{empenhoControlador.selecionarObjetoPesquisaGenerico}"
                        updateSelecionarTabela=":Formulario:tabGeral:gridGeral"
                        id="componentePesquisaGenerico"
                        nomeDaClasse="Pessoa"
                        guardarNaSessao="false"
                        actionSelecionar="#{empenhoControlador.caminhoVisualizar()}"
                        novo="#{pessoaTributarioControlador.novaPessoaFisica()}"
                        caminhoAtual="listatributario"
                        caminhoControlador="#{pessoaTributarioControlador.caminho}"
                        mostrarBotaoNovo="false"
                        mostrarBotaoImprimirRelatorioTabela="false"
                        mostrarHistorico="false"
                        utilizarTabelaPessoa="true"
                        mostrarOrdenacao="false"
                        iconmSelecionar="check-icon.png"
                        mostrarBotaoImprimirRelatorioUnicoRegistro="false"
                        pretty="true"
                        dialog="true"
                        mostrarBotaoEditarConfiguracaoRelatorio="false"
                        meuControlador="#{pessoaPesquisaGenerico}"
                        pesquisaNoEnter="false"/>
                </p:outputPanel>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dialog"
                  modal="true"
                  resizable="false"
                  closable="true"
                  position="center"
                  style="position: fixed !important;"
                  width="800"
                  height="500">
            <h:form id="FormularioPesquisaGenerica">
                <p:outputPanel rendered="#{empenhoControlador.classePesquisaGenerica ne null}">
                    <fc:pesquisaGenerico id="lista"
                                         caminhoAtual="edita"
                                         caminhoControlador="#{empenhoControlador.caminho}"
                                         nomeDaClasse="#{empenhoControlador.classePesquisaGenerica}"
                                         dialog="true"
                                         pretty="true"
                                         guardarNaSessao="false"
                                         iconmSelecionar="check-icon.png"
                                         novo="#{empenhoControlador.novo()}"
                                         selecionar="#{empenhoControlador.selecionarObjetoPesquisaGenerico}"
                                         mostrarHistorico="false"
                                         mostrarBotaoNovo="false"
                                         mostrarOrdenacao="false"
                                         updateSelecionarTabela="@form"
                                         meuControlador="#{empenhoObjetoPesquisaControlador}"
                                         pesquisaNoEnter="false"/>
                </p:outputPanel>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
</html>
