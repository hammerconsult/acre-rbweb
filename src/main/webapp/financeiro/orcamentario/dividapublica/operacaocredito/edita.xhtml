<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:co="http://java.sun.com/jsf/composite/components/contabil"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">

            <p:remoteCommand name="limparClassePessoa"
                             process="@this"
                             update=":Formulario:tabViewGeral:classeCredor">
                <f:setPropertyActionListener value="#{null}"
                                             target="#{operacaoCreditoControlador.selecionado.pessoa}"/>

                <f:setPropertyActionListener value="#{null}"
                                             target="#{operacaoCreditoControlador.selecionado.classeCredor}"/>
            </p:remoteCommand>

            <fc:cabecalhoPretty controlador="#{operacaoCreditoControlador}"
                                origem="#{operacaoCreditoControlador.caminhoPadrao}listar/"/>

            <p:panel header="Cadastro de Operação de Crédito" id="painelPrincipal">

                <p:tabView id="tabViewGeral" styleClass="mtop05">
                    <p:tab id="tabGeral" title="Operação de Crédito">
                        <h:panelGrid columns="2" id="panelGridGeral">
                            <h:outputText value="Número: "/>
                            <p:inputText id="numero" size="21"
                                         value="#{operacaoCreditoControlador.selecionado.numero}"
                                         disabled="true"
                                         title="Número é Gerado automaticamento pelo Sistema ao salvar o registro."
                                         readonly="true">
                                <p:watermark value="Gerado Automaticamente" for="numero"/>
                            </p:inputText>

                            <fc:outputLabelObrigatorio value="Nome da Dívida: "/>
                            <p:inputText id="nome-divida"
                                         title="Digite o nome da dívida."
                                         value="#{operacaoCreditoControlador.selecionado.nomeDivida}"
                                         maxlength="255"
                                         size="70"/>

                            <fc:outputLabelObrigatorio for="categoria" value="Natureza da Dívida: "/>
                            <h:panelGroup>
                                <p:autoComplete queryDelay="1000" id="categoria" var="cat" size="70"
                                                itemLabel="#{cat}" itemValue="#{cat.id}"
                                                maxResults="10"
                                                styleClass="mrig05"
                                                completeMethod="#{operacaoCreditoControlador.completaOperCredito}"
                                                value="#{operacaoCreditoControlador.selecionado.categoriaDividaPublica}"
                                                validator="#{operacaoCreditoControlador.validaCategoriaConta}"
                                                converter="#{operacaoCreditoControlador.converterCategoria}"
                                                onkeyup="keyUpEsconderCampo(this, 'tipoNatureza')"
                                                title="Selecione uma Natureza da Dívida Publica do Tipo de OPERAÇÃO DE CRÉDITO.">
                                    <p:ajax event="itemSelect" update="tipoNatureza"/>
                                </p:autoComplete>

                                <fc:novoParente destino="#{categoriaDividaPublicaControlador.caminhoPadrao}novo/"
                                                origem="#{operacaoCreditoControlador.caminhoPadrao}novo/"
                                                selecionado="#{operacaoCreditoControlador.selecionado}"/>
                            </h:panelGroup>

                            <h:outputText value="Tipo da Natureza: "/>
                            <h:outputText id="tipoNatureza"
                                          value="#{operacaoCreditoControlador.selecionado.categoriaDividaPublica.naturezaDividaPublica.descricao}"
                                          styleClass="negrito"/>

                            <fc:outputLabelObrigatorio for="numProcesso" value="Número do Contrato: "/>
                            <p:inputText id="numProcesso" title="Informe a número do Contrato"
                                         value="#{operacaoCreditoControlador.selecionado.numeroDocContProc}"
                                         maxlength="30"/>

                            <h:outputText value="Número Antigo: "/>
                            <p:inputText id="numAntigo" title="Informe o Número Antigo da Operação de Crédito"
                                         onkeyup="mascara(this, soNumeros)"
                                         value="#{operacaoCreditoControlador.selecionado.numeroAntigo}"/>

                            <fc:outputLabelObrigatorio value="Exercício: "/>
                            <p:autoComplete queryDelay="1000"
                                            value="#{operacaoCreditoControlador.selecionado.exercicio}"
                                            completeMethod="#{operacaoCreditoControlador.completaExercicio}"
                                            var="exercicio"
                                            title="Selecione o Exercício da Operação de Crédito"
                                            itemValue="#{exercicio.id}"
                                            itemLabel="#{exercicio.ano}"
                                            maxResults="10"
                                            converter="#{operacaoCreditoControlador.converterExercicio}"/>

                            <fc:outputLabelObrigatorio for="pessoa" value="Pessoa: "/>
                            <h:panelGroup>
                                <p:autoComplete queryDelay="1000" id="pessoa"
                                                size="70"
                                                title="Informe a Pessoa"
                                                maxResults="10"
                                                styleClass="mrig05"
                                                value="#{operacaoCreditoControlador.selecionado.pessoa}"
                                                completeMethod="#{operacaoCreditoControlador.completaPessoa}"
                                                converter="#{operacaoCreditoControlador.converterPessoa}"
                                                forceSelection="true"
                                                var="pe"
                                                onkeyup="if(keyUpCampoVazio(this)){limparClassePessoa();}"
                                                itemValue="#{pe.id}"
                                                itemLabel="#{pe} (#{pe.situacaoCadastralPessoa})">
                                    <p:ajax event="itemSelect"
                                            process="@this"
                                            update=":Formulario:tabViewGeral:classeCredor"
                                            listener="#{operacaoCreditoControlador.validaClasseDapessoaSelecionada()}"/>
                                </p:autoComplete>


                                <p:commandButton icon="ui-icon-search"
                                                 title="Clique para consultar as pessoas."
                                                 onstart="aguarde.show()"
                                                 styleClass="mrig05"
                                                 oncomplete="dialogPesquisarPessoa.show();aguarde.hide()"
                                                 update=":FormularioPesquisarPessoa"
                                                 process=":FormularioPesquisarPessoa"/>

                                <fc:novoParente destino="#{pessoaContabilControlador.retornaCaminhoPadraoPF()}novo/"
                                                origem="#{operacaoCreditoControlador.caminhoPadrao}novo/"
                                                label="PF"
                                                selecionado="#{operacaoCreditoControlador.selecionado}"/>

                                <p:spacer width="4"/>
                                <fc:novoParente destino="#{pessoaContabilControlador.retornaCaminhoPadraoPJ()}novo/"
                                                origem="#{operacaoCreditoControlador.caminhoPadrao}novo/"
                                                label="PJ"
                                                selecionado="#{operacaoCreditoControlador.selecionado}"/>
                            </h:panelGroup>

                            <fc:outputLabelObrigatorio for="classeCredor" id="classe" value="Classe: "/>
                            <p:autoComplete queryDelay="1000" id="classeCredor"
                                            size="70"
                                            title="Informe a Classe"
                                            disabled="#{operacaoCreditoControlador.selecionado.pessoa eq null}"
                                            value="#{operacaoCreditoControlador.selecionado.classeCredor}"
                                            completeMethod="#{operacaoCreditoControlador.completaClasseCredor}"
                                            converter="#{operacaoCreditoControlador.converterClasseCredor}"
                                            forceSelection="true" var="classe" itemValue="#{classe.id}"
                                            itemLabel="#{classe}">

                            </p:autoComplete>

                            <fc:outputLabelObrigatorio for="classeCredorJuros" value="Classe para Juros: "/>
                            <p:autoComplete queryDelay="1000" id="classeCredorJuros"
                                            size="70"
                                            title="Informe a Classe"
                                            disabled="#{operacaoCreditoControlador.selecionado.pessoa eq null}"
                                            value="#{operacaoCreditoControlador.selecionado.classeCredorJuros}"
                                            completeMethod="#{operacaoCreditoControlador.completaClasseCredor}"
                                            converter="#{operacaoCreditoControlador.converterClasseCredorJuros}"
                                            var="classeJuros"
                                            itemValue="#{classeJuros.id}" itemLabel="#{classeJuros}">

                            </p:autoComplete>

                            <fc:outputLabelObrigatorio for="classeCredorOutros" value="Classe para Outros Encargos: "/>
                            <p:autoComplete queryDelay="1000" id="classeCredorOutros"
                                            size="70"
                                            title="Informe a Classe"
                                            disabled="#{operacaoCreditoControlador.selecionado.pessoa eq null}"
                                            value="#{operacaoCreditoControlador.selecionado.classeCredorOutros}"
                                            completeMethod="#{operacaoCreditoControlador.completaClasseCredor}"
                                            converter="#{operacaoCreditoControlador.converterClasseCredorOutros}"
                                            var="classeOutros"
                                            itemValue="#{classeOutros.id}" itemLabel="#{classeOutros}">

                            </p:autoComplete>

                            <fc:outputLabelObrigatorio for="moeda" value="Moeda: "/>
                            <p:autoComplete queryDelay="1000"
                                            value="#{operacaoCreditoControlador.selecionado.indicadorEconomico}"
                                            id="moeda"
                                            title="Informe a Moeda" size="70"
                                            completeMethod="#{operacaoCreditoControlador.completaIndicadorEconomicoMoeda}"
                                            converter="#{operacaoCreditoControlador.converterIndicadorEconomico}"
                                            forceSelection="true" var="moed"
                                            itemValue="#{moed.id}"
                                            itemLabel="#{moed}"
                                            maxResults="10"/>

                            <fc:outputLabelObrigatorio for="index" value="Indexador: "/>
                            <h:panelGroup>
                                <p:autoComplete queryDelay="1000"
                                                value="#{operacaoCreditoControlador.selecionado.indicadorPercentual}"
                                                id="index"
                                                title="Informe um Indexador."
                                                size="70"
                                                styleClass="mrig05"
                                                completeMethod="#{operacaoCreditoControlador.completaIndicadorEconomicoPercentual}"
                                                converter="#{operacaoCreditoControlador.converterIndicadorEconomico}"
                                                forceSelection="true"
                                                var="ind"
                                                itemValue="#{ind.id}"
                                                itemLabel="#{ind}"
                                                maxResults="10"/>

                                <p:commandButton icon="ui-icon-circle-plus"
                                                 onclick="window.open('#{request.contextPath}/indicador-economico/novo/?sessao=true', '_blank')"
                                                 update="@this"
                                                 title="Clique para inserir um novo registro."
                                                 process="@this"/>
                            </h:panelGroup>


                            <fc:outputLabelObrigatorio for="dtHomologacao" value="Data da Contratação: "/>
                            <p:calendar value="#{operacaoCreditoControlador.selecionado.dataHomologacao}"
                                        id="dtHomologacao"
                                        onkeyup="mascara(this, mdata)"
                                        title="Informe a Data de Contratação"
                                        pattern="dd/MM/yyyy"
                                        navigator="true"/>


                            <fc:outputLabelObrigatorio value="Data Inicial: "/>
                            <p:calendar value="#{operacaoCreditoControlador.selecionado.dataInicio}"
                                        id="dtPagamentoInicial"
                                        title="Informe a data do pagamento inicial."
                                        pattern="MM/yyyy"
                                        navigator="true"
                                        onkeyup="mascara(this, mMesAno)">
                                <p:ajax event="blur" listener="#{operacaoCreditoControlador.setaDataInicio}"
                                        update=":Formulario:tabViewGeral:qtdMeses :Formulario:tabViewGeral:gridParcelamento"/>
                                <p:ajax event="dateSelect"
                                        listener="#{operacaoCreditoControlador.setaDataInicioDateSelect}"
                                        immediate="tue"
                                        update=":Formulario:tabViewGeral:qtdMeses :Formulario:tabViewGeral:gridParcelamento"/>
                            </p:calendar>

                            <fc:outputLabelObrigatorio value="Data Final: "/>
                            <p:calendar value="#{operacaoCreditoControlador.selecionado.dataFim}"
                                        id="dtPagamentoFinal"
                                        title="Informe a data do pagamento final."
                                        pattern="MM/yyyy"
                                        navigator="true"
                                        onkeyup="mascara(this, mMesAno)">
                                <p:ajax event="blur" listener="#{operacaoCreditoControlador.setaDataFim}"
                                        immediate="tue"
                                        update=":Formulario:tabViewGeral:qtdMeses :Formulario:tabViewGeral:gridParcelamento"/>
                                <p:ajax event="dateSelect"
                                        listener="#{operacaoCreditoControlador.setaDataFimDateSelect}" immediate="tue"
                                        update=":Formulario:tabViewGeral:qtdMeses :Formulario:tabViewGeral:gridParcelamento"/>
                            </p:calendar>

                            <fc:outputLabelObrigatorio for="period" value="Periodicidade do Pagamento: "/>
                            <p:autoComplete queryDelay="1000"
                                            value="#{operacaoCreditoControlador.selecionado.periodicidade}"
                                            id="period"
                                            title="Informe a Periodicidade do Pagamento" size="70"
                                            completeMethod="#{operacaoCreditoControlador.completaPeriodicidade}"
                                            converter="#{operacaoCreditoControlador.converterPeriodicidade}"
                                            forceSelection="true" var="perio" itemValue="#{perio.id}"
                                            itemLabel="#{perio.descricao}"
                                            maxResults="10"/>

                            <h:outputText value="Quantidade de Meses: "/>
                            <p:inputText value="#{operacaoCreditoControlador.selecionado.quantidadeMeses}"
                                         id="qtdMeses"
                                         readonly="true"/>

                            <h:outputText value="Garantias: " style="margin-right: 105px"/>
                            <p:inputText value="#{operacaoCreditoControlador.selecionado.garantias}" size="70"
                                         title="Informe a Garantias do Operação de Crédito"/>

                            <fc:outputLabelObrigatorio value="Finalidade do Crédito: "/>
                            <h:panelGrid columns="2">
                                <p:inputTextarea value="#{operacaoCreditoControlador.selecionado.descricaoDivida}"
                                                 id="descricao"
                                                 style="margin-left: -4px"
                                                 title="Informe a Finalidade do Crédito"
                                                 cols="70" maxlength="3000"
                                                 autoResize="true" counterTemplate="{0} Caracteres Restantes."
                                                 counter="counter"/>
                                <h:outputText id="counter"/>
                            </h:panelGrid>

                            <h:outputText value="Taxa de Administração: "/>
                            <h:panelGrid columns="2">
                                <p:inputText value="#{operacaoCreditoControlador.selecionado.taxaAdministracao}"
                                             id="taxaAdministracao"
                                             title="Informe a Taxa de Administração(%) da Operação de Crédito."
                                             style="margin-left: -4px"
                                             size="10"
                                             converter="porcentagemConverter"/>
                            </h:panelGrid>

                            <h:outputText value="Taxa de Risco: "/>
                            <h:panelGrid columns="2">
                                <p:inputText value="#{operacaoCreditoControlador.selecionado.taxaRisco}" id="taxaRisco"
                                             title="Informe a Taxa de Risco(%) do Operação de Crédito"
                                             style="margin-left: -4px"
                                             converter="porcentagemConverter"
                                             size="10"/>
                            </h:panelGrid>

                            <fc:outputLabelObrigatorio for="taxaJuros" value="Taxa de Juros: "/>
                            <h:panelGrid columns="2">
                                <p:inputText value="#{operacaoCreditoControlador.selecionado.taxaJuros}"
                                             id="taxaJuros"
                                             title="Informe a Taxa de Juros(%) do Operação de Crédito"
                                             style="margin-left: -4px"
                                             converter="porcentagemConverter"
                                             size="10">
                                    <p:ajax event="blur"
                                            listener="#{operacaoCreditoControlador.setaTaxaJuros}"
                                            update=":Formulario:tabViewGeral:gridParcelamento"/>
                                </p:inputText>
                            </h:panelGrid>

                            <fc:outputLabelObrigatorio for="valor" value="Valor Original do Contrato: "/>
                            <p:inputText value="#{operacaoCreditoControlador.selecionado.valorNominal}"
                                         disable="#{operacaoCreditoControlador.selecionado.id ne null}"
                                         id="valor"
                                         styleClass="alinhamentoDireita"
                                         onkeydown="mascaraMonetaria(this);"
                                         converter="#{operacaoCreditoControlador.moneyConverter}"
                                         title="Informe o Valor Original do Contrato.">
                                <p:ajax event="blur" listener="#{operacaoCreditoControlador.setaValorDivida}"
                                        update=":Formulario:tabViewGeral:gridParcelamento"/>
                            </p:inputText>

                            <fc:outputLabelObrigatorio for="contraPartida" value="Valor da Contrapartida: "/>
                            <p:inputText value="#{operacaoCreditoControlador.selecionado.contraPartida}"
                                         disable="#{operacaoCreditoControlador.selecionado.id ne null}"
                                         id="contraPartida"
                                         onkeydown="mascaraMonetaria(this);"
                                         styleClass="alinhamentoDireita"
                                         converter="#{operacaoCreditoControlador.moneyConverter}"
                                         title="Informe o Valor de Contra Partida"/>

                            <h:outputText value="Saldo do Movimento: "
                                          rendered="#{operacaoCreditoControlador.selecionado.saldo ne null}"/>
                            <h:outputText value="#{operacaoCreditoControlador.selecionado.saldo}"
                                          rendered="#{operacaoCreditoControlador.selecionado.saldo ne null}"
                                          converter="#{operacaoCreditoControlador.moneyConverter}"
                                          styleClass="negrito"/>
                        </h:panelGrid>

                        <p:panel styleClass="mtop05">

                            <co:titulo-panel titulo="Ato Legal"/>
                            <h:panelGrid columns="4">
                                <fc:outputLabelObrigatorio for="atoLegal" value="Ato Legal:"/>
                                <p:autoComplete queryDelay="1000" id="atoLegal"
                                                completeMethod="#{operacaoCreditoControlador.completaAtoLegal}"
                                                forceSelection="true"
                                                styleClass="mrig02"
                                                var="ato"
                                                maxResults="10"
                                                itemValue="#{ato.id}"
                                                itemLabel="#{ato.toString()}"
                                                value="#{operacaoCreditoControlador.atoLegal}"
                                                size="70"
                                                converter="#{operacaoCreditoControlador.converterAtoLegal}"
                                                title="Informe o ato legal."/>

                                <fc:novoParente destino="#{atoLegalControlador.caminhoPadrao}novo/"
                                                origem="#{operacaoCreditoControlador.caminhoPadrao}novo/"
                                                selecionado="#{operacaoCreditoControlador.selecionado}"
                                />
                            </h:panelGrid>

                            <h:panelGrid columns="2" styleClass="mtop10">
                                <p:commandButton value="Adicionar"
                                                 icon="ui-icon-circle-plus"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 styleClass="padrao"
                                                 actionListener="#{operacaoCreditoControlador.adicionarAtoLegal()}"
                                                 title="Clique para adicionar o registro na lista."
                                                 update=":Formulario:tabViewGeral:atoLegal :Formulario:tabViewGeral:tabela"/>
                            </h:panelGrid>

                            <p:dataTable value="#{operacaoCreditoControlador.selecionado.atosLegais}"
                                         var="divPubAtoLegal"
                                         id="tabela"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop01"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ATOS LEGAIS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ação" style="text-align: center; width: 5%">
                                    <p:commandButton icon="ui-icon-trash"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     title="Clique para remover este registro."
                                                     process="@this"
                                                     disabled="#{operacaoCreditoControlador.obrigaInformarAtoLegal}"
                                                     actionListener="#{operacaoCreditoControlador.removerAtoLegal(divPubAtoLegal)}"
                                                     update=":Formulario:tabViewGeral:tabela"/>
                                </p:column>
                                <p:column headerText="Número"
                                          styleClass="alinhamentoDireita">
                                    <h:outputText value="#{divPubAtoLegal.atoLegal.numero}"/>
                                </p:column>
                                <p:column headerText="Ato Legal"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{divPubAtoLegal.atoLegal.nome}"/>
                                </p:column>
                                <p:column headerText="Tipo de Ato Legal"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{divPubAtoLegal.atoLegal.tipoAtoLegal.descricao}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panel id="panelContaReceita" styleClass="mtop10">

                            <co:titulo-panel titulo="Receita Realizada"/>
                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Conta de Receita: " for="contaReceita"/>
                                <p:autoComplete queryDelay="1000" id="contaReceita"
                                                completeMethod="#{operacaoCreditoControlador.completaContaReceita}"
                                                forceSelection="true"
                                                var="contaReceita"
                                                maxResults="10"
                                                itemValue="#{contaReceita.id}"
                                                itemLabel="#{contaReceita}"
                                                value="#{operacaoCreditoControlador.contaReceita}"
                                                size="70"
                                                converter="#{operacaoCreditoControlador.converterContaReceita}"
                                                title="Informe a Conta de Receita Filtrando por Exercício Logado."/>
                            </h:panelGrid>

                            <h:panelGrid columns="2" styleClass="mtop05">
                                <p:commandButton value="Adicionar"
                                                 icon="ui-icon-circle-plus"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 styleClass="padrao mtop10"
                                                 title="Clique para Adicionar o Exercício e a Conta de Receita na Lista"
                                                 actionListener="#{operacaoCreditoControlador.adicionarContaReceita()}"
                                                 update=":Formulario:tabViewGeral:panelContaReceita"/>
                            </h:panelGrid>

                            <p:dataTable value="#{operacaoCreditoControlador.selecionado.contasReceitas}"
                                         var="divContaReceita"
                                         id="tabelaDeContaDeReceitas"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop01"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>RECEITAS REALIZADAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ação" style="text-align: center; width: 15px">
                                    <p:commandButton icon="ui-icon-trash"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     title="Clique para remover este registro."
                                                     process="@this"
                                                     actionListener="#{operacaoCreditoControlador.removerContaReceita(divContaReceita)}"
                                                     update=":Formulario:tabViewGeral:tabelaDeContaDeReceitas"/>
                                </p:column>
                                <p:column headerText="Exercício"
                                          styleClass="alinhamentoDireita">
                                    <h:outputText value="#{divContaReceita.exercicio.ano}"/>
                                </p:column>
                                <p:column headerText="Conta de Receita"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{divContaReceita.contaReceita}"/>
                                </p:column>
                                <p:column headerText="Tipo de Conta de Receita"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{divContaReceita.contaReceita.tiposCredito.descricao}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>


                    <p:tab title="Parcelamento" id="tabParcelamento">

                        <co:mensagem
                            mensagem="Devido a casos de arredondamento de valores, o valor da diferença entre as parcelas será adicionado automaticamente na última parcela."
                            styleClass="mtop05"/>

                        <h:panelGrid columns="4" id="gridParcelamento" styleClass="mtop10">
                            <fc:outputLabelObrigatorio value="Data da Parcela: "/>
                            <p:calendar value="#{operacaoCreditoControlador.parcelaDividaPublicaAux.dataParcela}"
                                        pattern="MM/yyyy" title="Informe a Data da Parcela"
                                        navigator="true" id="dataParcela" onkeyup="mascara(this, mMesAno)"
                                        style="margin-right: 80px"/>

                            <h:outputText value="Valor da Dívida: "/>
                            <h:outputText value="#{operacaoCreditoControlador.selecionado.valorNominal}"
                                          converter="#{operacaoCreditoControlador.moneyConverter}"
                                          style="font-weight: bold"/>

                            <fc:outputLabelObrigatorio value="Saldo Devedor: "/>
                            <fc:inputMoeda value="#{operacaoCreditoControlador.parcelaDividaPublicaAux.saldo}"
                                           title="Informe o Saldo devedor"
                                           id="saldoDevedor"/>

                            <h:outputText value="Prazo: "/>
                            <h:outputText value="#{operacaoCreditoControlador.selecionado.quantidadeMeses}"
                                          rendered="#{operacaoCreditoControlador.selecionado.quantidadeMeses ne null}"
                                          style="font-weight: bold"/>
                            <h:outputText value="0"
                                          rendered="#{operacaoCreditoControlador.selecionado.quantidadeMeses eq null}"
                                          style="font-weight: bold"/>

                            <h:outputText value="Valor de Juros: " style="margin-right: 45px"/>
                            <fc:inputMoeda value="#{operacaoCreditoControlador.parcelaDividaPublicaAux.valorJuros}"
                                           title="Informe o Valor do Juros"
                                           id="valorJuros"/>

                            <h:outputText value="Carência: "/>
                            <p:inputText value="#{operacaoCreditoControlador.carencia}"
                                         title="Informe a Carência (Em mêses)"
                                         id="carencia"/>

                            <fc:outputLabelObrigatorio value="Valor Amortizado: "/>
                            <fc:inputMoeda value="#{operacaoCreditoControlador.parcelaDividaPublicaAux.valorAmortizado}"
                                           title="Informe o Valor Amortizado"
                                           id="valorAmortizacao"/>

                            <h:outputText value="Multa: "/>
                            <fc:inputMoeda value="#{operacaoCreditoControlador.parcelaDividaPublica.multa}"/>

                            <h:outputText/>
                            <h:outputText/>

                            <h:outputText value="Outros Encargos: "/>
                            <fc:inputMoeda value="#{operacaoCreditoControlador.parcelaDividaPublica.outrosEncargos}"/>

                            <h:outputText/>
                            <h:outputText/>

                            <h:outputText value="Taxa de Juros(% a.a.): "/>
                            <h:outputText value="#{operacaoCreditoControlador.taxaJuros}"
                                          converter="porcentagemConverter"
                                          style="font-weight: bold"/>

                            <p:commandButton value="Adicionar Parcela"
                                             actionListener="#{operacaoCreditoControlador.adicionaParcela()}"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao mtop20"
                                             process=":Formulario:tabViewGeral:gridParcelamento :Formulario:tabViewGeral:tabelaParcelas"
                                             title="Clique para adicionar uma parcela ao parcelamento."
                                             update=":Formulario:tabViewGeral:gridParcelamento :Formulario:tabViewGeral:tabelaParcelas"
                                             icon="ui-icon-circle-plus"
                                             id="addParcela"/>
                            <p:spacer/>

                            <p:commandButton value="Gerar Parcelas"
                                             actionListener="#{operacaoCreditoControlador.geraParcelas()}"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             title="Clique para gerar o parcelamento da dívida."
                                             styleClass="padrao mtop20"
                                             update=":Formulario:tabViewGeral:gridParcelamento :Formulario:tabViewGeral:tabelaParcelas :Formulario:tabViewGeral:removerParcelas"
                                             process=":Formulario:tabViewGeral:gridParcelamento :Formulario:tabViewGeral:tabelaParcelas :Formulario:tabViewGeral:removerParcelas"
                                             icon="ui-icon-calculator"
                                             id="gerarParcelas"/>

                            <p:commandButton value="Remover Todas Parcelas"
                                             actionListener="#{operacaoCreditoControlador.removerTodasParcelas()}"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             disabled="#{empty operacaoCreditoControlador.selecionado.parcelas}"
                                             title="Clique para remover todas as parcelas adicionadas."
                                             styleClass="padrao mtop20"
                                             update=":Formulario:tabViewGeral:gridParcelamento :Formulario:tabViewGeral:tabelaParcelas @this"
                                             onclick="if (!confirm('Tem certeza que deseja remover todas as parcelas?')) {return false; } else {aguarde.show();}"
                                             process="@this"
                                             icon="ui-icon-trash"
                                             id="removerParcelas"/>
                        </h:panelGrid>

                        <p:dataTable value="#{operacaoCreditoControlador.selecionado.parcelas}"
                                     var="par"
                                     id="tabelaParcelas"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     styleClass="mtop01"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>PARCELAMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">

                            <p:column headerText="Ações" style="width: 7%; text-align: center">
                                <p:commandButton id="btnRemoveParcelas"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="@this"
                                                 onclick="if (!confirm('Tem certeza que deseja remover esta parcela?')) {return false; } else {aguarde.show();}"
                                                 title="Clique para remover a parcela."
                                                 icon="ui-icon-trash"
                                                 actionListener="#{operacaoCreditoControlador.removeParcelas(par)}"
                                                 update=":Formulario:tabViewGeral:tabelaParcelas">
                                </p:commandButton>
                                <p:commandButton oncomplete="dialogAltParcela.show();aguarde.hide()"
                                                 onstart="aguarde.show()"
                                                 process="@this"
                                                 styleClass="mlef05"
                                                 title="Clique para editr esta parcela."
                                                 update=":formDialogAltParcela"
                                                 actionListener="#{operacaoCreditoControlador.alteraParcelasTabela(par)}"
                                                 icon="ui-icon-pencil">
                                </p:commandButton>
                            </p:column>
                            <p:column headerText="Mês / Ano" styleClass="alinhamentoDireita">
                                <h:outputText value="#{par.dataParcela}">
                                    <f:convertDateTime pattern="MM/yy"/>
                                </h:outputText>
                            </p:column>

                            <p:column headerText="Saldo (R$)" styleClass="alinhamentoDireita">
                                <h:outputText value="#{par.saldo}">
                                    <f:convertNumber type="currency"/>
                                </h:outputText>
                            </p:column>

                            <p:column headerText="Valor de Juros (R$)" styleClass="alinhamentoDireita">
                                <h:outputText value="#{par.valorJuros}">
                                    <f:convertNumber type="currency"/>
                                </h:outputText>
                                <f:facet name="footer">
                                    <h:outputText value="#{operacaoCreditoControlador.totalJuros}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </f:facet>
                            </p:column>

                            <p:column headerText="Valor de Amortização (R$)" styleClass="alinhamentoDireita">
                                <h:outputText value="#{par.valorAmortizado}">
                                    <f:convertNumber type="currency"/>
                                </h:outputText>
                                <f:facet name="footer">
                                    <h:outputText value="#{operacaoCreditoControlador.totalAmortizacao}"
                                                  converter="converterBigDecimal2Casas"
                                                  id="valorA">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </f:facet>
                            </p:column>

                            <p:column headerText="Parcela (R$)" styleClass="alinhamentoDireita">
                                <h:outputText value="#{par.valorPrestacao}">
                                    <f:convertNumber type="currency"/>
                                </h:outputText>
                                <f:facet name="footer">
                                    <h:outputText value="#{operacaoCreditoControlador.totalPrestacao}"
                                                  id="totalPrestacao">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </f:facet>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab id="liberacaoRecurso" title="Liberação de Recurso">

                        <p:panel styleClass="mtop05">
                            <h:panelGrid columns="2" id="gridLibRecurso" styleClass="mtop05">
                                <h:outputText value="Número: " style="margin-right: 60px"/>
                                <p:inputText value="#{operacaoCreditoControlador.liberacaoRecurso.numeroLiberacao}"
                                             id="numeroLiberacao"/>

                                <h:outputText value="Data: "/>
                                <p:calendar value="#{operacaoCreditoControlador.liberacaoRecurso.dataLiberacao}"
                                            title="Informe a data para liberação de recursos."
                                            pattern="dd/MM/yyyy"
                                            onkeyup="mascara(this, mdata)"
                                            id="dataLiberacao"/>

                                <h:outputText value="Valor Liberado: "/>
                                <fc:inputMoeda id="valorLiberado"
                                               value="#{operacaoCreditoControlador.liberacaoRecurso.valorLiberado}"
                                               title="Informe o valor liberado."/>

                                <h:outputText value="Valor a Liberar: "/>
                                <fc:inputMoeda id="valorLiberar"
                                               value="#{operacaoCreditoControlador.liberacaoRecurso.valorLiberar}"
                                               title="Informe o valor a liberar."/>

                                <h:outputText value="Valor de Juros a Liberar: "/>
                                <fc:inputMoeda id="valorJurosLiberar"
                                               value="#{operacaoCreditoControlador.liberacaoRecurso.valorJurosLiberar}"
                                               title="Informe o valor de juros a liberar."/>

                                <h:outputText value="Valor de Outros Encargos a Liberar: "  style="margin-right: 20px"/>
                                <fc:inputMoeda id="valorOutrosEncargosLiberar"

                                               value="#{operacaoCreditoControlador.liberacaoRecurso.valorOutrosEncargosLiberar}"
                                               title="Informe outros encargos a liberar."/>

                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             icon="ui-icon-circle-plus"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao mtop10"
                                             title="Clique para adicionar a liberação de recursos."
                                             actionListener="#{operacaoCreditoControlador.adicionarLiberacaoRecurso()}"
                                             update=":Formulario:tabViewGeral:tabelaLiberacoes :Formulario:tabViewGeral:gridLibRecurso"/>

                            <p:dataTable value="#{operacaoCreditoControlador.selecionado.liberacaoRecursos}"
                                         var="lib"
                                         id="tabelaLiberacoes"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop02"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>LIBERAÇÕES DE RECURSOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ações" style="text-align: center; width: 5%">
                                    <p:commandButton
                                        actionListener="#{operacaoCreditoControlador.removerLiberacaoRecurso(lib)}"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        process="@this"
                                        styleClass="mrig05"
                                        onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                        title="Clique para remover este registro."
                                        icon="ui-icon-trash"
                                        update=":Formulario:tabViewGeral:tabelaLiberacoes">
                                    </p:commandButton>
                                    <p:commandButton
                                        actionListener="#{operacaoCreditoControlador.editarLiberacaoRecurso(lib)}"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        title="Clique para editar este registro."
                                        icon="ui-icon-pencil"
                                        update=":Formulario:tabViewGeral:tabelaLiberacoes :Formulario:tabViewGeral:gridLibRecurso">
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Número" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{lib.numeroLiberacao}"/>
                                </p:column>
                                <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{lib.dataLiberacao}">
                                        <f:convertDateTime type="date"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor Liberado (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{lib.valorLiberado}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor de Juros a Liberar (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{lib.valorJurosLiberar}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor de Outros Encargos a Liberar (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{lib.valorOutrosEncargosLiberar}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor a Liberar (R$)" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{lib.valorLiberar}">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>

                    <p:tab title="Unidade Orçamentária">

                        <p:panel styleClass="mtop05">
                            <h:panelGrid columns="2" id="gridUnidade" styleClass="mtop05" cellspacing="0">
                                <fc:outputLabelObrigatorio value="Exercício: "/>
                                <p:inputMask id="exercicioUnidade"
                                             mask="9999"
                                             converter="#{exercicioControlador.converterExercicio}"
                                             value="#{operacaoCreditoControlador.unidadeDividaPublica.exercicio}"
                                             maxlength="4"
                                             title="Informe o exercício.">
                                    <p:ajax event="blur"
                                            process="@this"/>
                                    <p:ajax event="change"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"/>
                                </p:inputMask>

                                <fc:outputLabelObrigatorio value="Unidade Orçamentária:"/>
                                <p:autoComplete queryDelay="1000" id="unidade"
                                                value="#{operacaoCreditoControlador.unidadeDividaPublica.hierarquiaOrganizacional}"
                                                title="Informe a Unidade Orçamentária"
                                                maxResults="10"
                                                size="70" var="hierarquiaOrg"
                                                itemValue="#{hierarquiaOrg}" itemLabel="#{hierarquiaOrg}"
                                                converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                                completeMethod="#{operacaoCreditoControlador.completarHierarquiaOrganizacional}"/>

                                <p:commandButton value="Adicionar"
                                                 icon="ui-icon-circle-plus"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 styleClass="padrao mtop10"
                                                 process=":Formulario:tabViewGeral:tabelaUnidades :Formulario:tabViewGeral:gridUnidade :Formulario:tabViewGeral:gridCotFin"
                                                 title="Clique para Adicionar a Unidade Orçamentária"
                                                 actionListener="#{operacaoCreditoControlador.adicionarUnidadeOrganizacional()}"
                                                 update=":Formulario:tabViewGeral:tabelaUnidades :Formulario:tabViewGeral:gridUnidade :Formulario:tabViewGeral:gridCotFin"/>
                            </h:panelGrid>

                            <p:dataTable value="#{operacaoCreditoControlador.selecionado.unidades}"
                                         var="uni"
                                         id="tabelaUnidades"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop01"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>UNIDADES ORÇAMENTÁRIAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ação" style="text-align: center; width: 8%">
                                    <p:commandButton
                                        actionListener="#{operacaoCreditoControlador.editarUnidadeOrganizacional(uni)}"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        styleClass="mrig05"
                                        title="Clique para editar este registro."
                                        icon="ui-icon-pencil"
                                        id="btnEditarCotaFin"
                                        update=":Formulario:tabViewGeral:tabelaUnidades :Formulario:tabViewGeral:gridUnidade">
                                    </p:commandButton>
                                    <p:commandButton actionListener="#{operacaoCreditoControlador.removerUnidade(uni)}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     onclick="if (!confirm('Tem certeza que deseja remover esta parcela?')) {return false; } else {aguarde.show();}"
                                                     title="Clique para remover este registro."
                                                     icon="ui-icon-trash"
                                                     update=":Formulario:tabViewGeral:tabelaUnidades :Formulario:tabViewGeral:gridCotFin">
                                        <f:attribute name="removeUni" value="#{uni}"/>
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Exercício" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{uni.exercicio}"/>
                                </p:column>
                                <p:column headerText="Unidade Orçamentária" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{uni.hierarquiaOrganizacional}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>

                    <p:tab title="Conta Financeira">

                        <p:panel styleClass="mtop05" id="panelContaFinanc">
                            <h:panelGrid columns="2" id="gridCotFin">
                                <fc:outputLabelObrigatorio value="Exercício: "/>
                                <p:inputMask id="itemExer"
                                             mask="9999"
                                             converter="#{exercicioControlador.converterExercicio}"
                                             value="#{operacaoCreditoControlador.subContaDividaPublica.exercicio}"
                                             maxlength="4"
                                             title="Informe o exercício.">
                                    <p:ajax event="change"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            update="autocompleteSubConta contaDestinacao"
                                            listener="#{operacaoCreditoControlador.limparSubContaAndFonte()}"/>
                                </p:inputMask>

                                <fc:outputLabelObrigatorio value="Conta Financeira: "/>
                                <p:autoComplete queryDelay="1000" id="autocompleteSubConta"
                                                var="sub"
                                                itemValue="#{sub.id}"
                                                itemLabel="#{sub.toStringAutoCompleteContaFinanceira()}"
                                                size="70"
                                                maxResults="10"
                                                forceSelection="true"
                                                title="Informe uma conta financeira."
                                                converter="#{operacaoCreditoControlador.converterSubConta}"
                                                completeMethod="#{operacaoCreditoControlador.completaContaFinanceira}"
                                                value="#{operacaoCreditoControlador.subContaDividaPublica.subConta}">
                                    <p:ajax event="itemSelect" update="contaDestinacao" process="@this"
                                            listener="#{operacaoCreditoControlador.limparFonte()}"/>
                                </p:autoComplete>

                                <fc:outputLabelObrigatorio value="Conta de Destinação de Recurso: "/>
                                <p:autoComplete queryDelay="1000"
                                                id="contaDestinacao"
                                                title="Selecione uma conta de destinação de recursos."
                                                completeMethod="#{operacaoCreditoControlador.completarContasDeDestinacao}"
                                                value="#{operacaoCreditoControlador.subContaDividaPublica.contaDeDestinacao}"
                                                var="contaD"
                                                size="70"
                                                dropdown="true"
                                                panelStyle="max-height: 250px"
                                                itemLabel="#{contaD}"
                                                itemValue="#{contaD.id}"
                                                forceSelection="true"
                                                converter="#{planoDeContasWizardControlador.converterConta}"
                                                maxResults="10"/>

                                <fc:outputLabelObrigatorio value="Tipo de Validação: "/>
                                <h:selectOneMenu title="Selecione o tipo de validação" id="tipoValidacao"
                                                 value="#{operacaoCreditoControlador.subContaDividaPublica.tipoValidacao}">
                                    <f:selectItems value="#{operacaoCreditoControlador.tiposDeValidacao}"/>
                                </h:selectOneMenu>
                            </h:panelGrid>

                            <p:commandButton value="Adicionar"
                                             icon="ui-icon-circle-plus"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="padrao mtop10 mbot10"
                                             actionListener="#{operacaoCreditoControlador.adicionarContaFinanceira()}"
                                             update=":Formulario:tabViewGeral:tabelaContas :Formulario:tabViewGeral:gridCotFin"/>

                            <p:dataTable value="#{operacaoCreditoControlador.selecionado.contasFinanceiras}"
                                         var="con"
                                         id="tabelaContas"
                                         rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         paginator="true"
                                         styleClass="mtop01"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>CONTAS FINANCEIRAS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         emptyMessage="Não foram localizados registros para serem apresentados."
                                         rowIndexVar="rowlx">

                                <p:column headerText="Ações" style="text-align: center; width: 7%">
                                    <p:commandButton actionListener="#{operacaoCreditoControlador.removeSubConta(con)}"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     process="@this"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     title="Clique para remover este registro."
                                                     icon="ui-icon-trash"
                                                     styleClass="mrig05"
                                                     id="btnRemoveCotaFin"
                                                     update=":Formulario:tabViewGeral:tabelaContas :Formulario:tabViewGeral:tabelaUnidades">
                                    </p:commandButton>

                                    <p:commandButton
                                        actionListener="#{operacaoCreditoControlador.editarContaFinanceira(con)}"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        title="Clique para editar este registro."
                                        icon="ui-icon-pencil"
                                        id="btnEditarCotaFin"
                                        update=":Formulario:tabViewGeral:tabelaContas :Formulario:tabViewGeral:gridCotFin">
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Exercício" styleClass="alinhamentoDireita">
                                    <h:outputText value="#{con.exercicio}"/>
                                </p:column>
                                <p:column headerText="Conta Bancária" styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{con.subConta.contaBancariaEntidade.toStringBancoAgenciaContaDescricao()}"/>
                                </p:column>
                                <p:column headerText="Conta Financeira" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{con.subConta.toStringAutoCompleteContaFinanceira()}"/>
                                </p:column>
                                <p:column headerText="Tipo de Recurso" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{con.subConta.tipoRecursoSubConta.descricao}"/>
                                </p:column>
                                <p:column headerText="Conta de Destinação de Recurso" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{con.contaDeDestinacao.toString()}"/>
                                </p:column>
                                <p:column headerText="Tipo de Validação" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{con.tipoValidacao.descricao}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>


                    <p:tab title="Anexar Documento" id="tab2">

                        <p:commandButton id="anexarArquivo"
                                         title="Clique para anexar um documento a operação de crédito."
                                         oncomplete="aguarde.hide()"
                                         icon="ui-icon-folder-open"
                                         value="Anexar"
                                         update=":formularioUpload"
                                         styleClass="padrao mtop05"
                                         onclick="aguarde.show();dialogArquivo.show();"/>

                        <p:dataTable id="tabelaArquivos"
                                     value="#{operacaoCreditoControlador.selecionado.arquvios}"
                                     var="arq"
                                     rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     paginator="true"
                                     styleClass="mtop03"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>DOCUMENTOS ANEXADOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     emptyMessage="Não foram localizados registros para serem apresentados."
                                     rowIndexVar="rowlx">

                            <p:column headerText="Ações" style="text-align: center; width: 10%">
                                <p:commandButton id="btnRemoveArquivo"
                                                 title="Clique para remover este arquivo."
                                                 icon="ui-icon-trash"
                                                 onstart="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="@this"
                                                 actionListener="#{operacaoCreditoControlador.removerArquivo(arq)}"
                                                 onclick="if (!confirm('Tem certeza que deseja remover este arquivo?')) {return false; } else {aguarde.show();}"
                                                 update=":Formulario:tabViewGeral:tabelaArquivos"/>


                                <fc:botaoTargetBlank
                                    imprimeNoDialog="#{true}"
                                    update="@this"
                                    process="@this"
                                    actionListener="#{operacaoCreditoControlador.redirecionarVerArquivo(arq)}"
                                    style="width: 25px!important;min-width: 25px!important;height: 25px!important;min-height: 25px!important;"
                                    title="Clique para visualizar o documento em nova aba."
                                    styleClass="mlef05"
                                    rendered="#{true}"
                                    icon="ui-icon-search"/>

                                <p:commandButton id="bt_informacao"
                                                 rendered="#{arq.arquivo.id eq null}"
                                                 icon="ui-icon-info"
                                                 styleClass="trintaLarguraTrintaAltura mlef05"/>

                                <p:overlayPanel for="bt_informacao"
                                                showEvent="mouseover"
                                                hideEvent="mouseout"
                                                style="z-index: 999999999999999999!important;position: fixed!important;border : solid black 1px">
                                    <h:outputText
                                        value="Para visualizar o arquivo anexado é necessário que o mesmo esteja salvo junto ao cadastro de Operação de Crédito."
                                        escape="false"/>
                                </p:overlayPanel>
                            </p:column>
                            <p:column headerText="Documento" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{arq.arquivo.nome}"/>
                            </p:column>

                            <p:column headerText="Tamanho" style="width: 300px" styleClass="alinhamentoDireita">
                                <h:outputText value="#{arq.arquivo.tamanho} Kb"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab id="tab4" title="Execução Orçamentária">
                        <p:tabView id="tabViewExecucao">
                            <p:tab id="tabEmpenho" title="Empenho">
                                <p:dataTable id="tabelaEmpenho"
                                             value="#{operacaoCreditoControlador.listaEmpenhos}"
                                             var="e"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>EMPENHOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{e.dataEmpenho}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{e.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{e.valor}"
                                                      converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText value="#{operacaoCreditoControlador.somaEmpenhos}"
                                                          converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>
                            <p:tab id="tabEmpenhoEstorno" title="Estorno de Empenho">
                                <p:dataTable id="tabelaEmpenhoEstorno"
                                             value="#{operacaoCreditoControlador.listaEmpenhoEstorno}"
                                             var="e"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNO DE EMPENHOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{e.dataEstorno}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{e.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{e.valor}"
                                                      converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText value="#{operacaoCreditoControlador.somaEstornoEmpenhos}"
                                                          converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>
                            <p:tab id="tabLiquidacao" title="Liquidação">
                                <p:dataTable id="tabelaLiquidacao"
                                             value="#{operacaoCreditoControlador.listaLiquidacao}"
                                             var="l"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>LIQUIDAÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{l.dataLiquidacao}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.valor}"
                                                      converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText value="#{operacaoCreditoControlador.somaLiquidacoes}"
                                                          converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabLiquidacaoEstorno" title="Estorno de Liquidação">
                                <p:dataTable id="tabelaLiquidacaoEstorno"
                                             value="#{operacaoCreditoControlador.listaLiquidacaoEstorno}"
                                             var="l"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNO DE LIQUIDAÇÕES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{l.dataEstorno}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$) " styleClass="alinhamentoDireita">
                                        <h:outputText value="#{l.valor}"
                                                      converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText value="#{operacaoCreditoControlador.somaEstornoLiquidacoes}"
                                                          converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabPagamento" title="Pagamento">
                                <p:dataTable id="tabelaPagamento"
                                             value="#{operacaoCreditoControlador.listaPagamento}"
                                             var="p"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>PAGAMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{p.dataPagamento}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.numeroPagamento}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.valor}"
                                                      converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText value="#{operacaoCreditoControlador.somaPagamentos}"
                                                          converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabPagamentoEstorno" title="Estorno de Pagamento">
                                <p:dataTable id="tabelaPagamentoEstorno"
                                             value="#{operacaoCreditoControlador.listaPagamentoEstorno}"
                                             var="p"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNO DE PAGAMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{p.dataEstorno}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.numero}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{p.valor}"
                                                      converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText value="#{operacaoCreditoControlador.somaEstornoPagamentos}"
                                                          converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabMovimento" title="Movimento da Dívida Pública">
                                <p:dataTable id="tabelaMovimento"
                                             value="#{operacaoCreditoControlador.listaMovimentoDividaPublica}"
                                             var="mov"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>MOVIMENTOS DA DÍVIDA PÚBLICA&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{mov.data}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{mov.numero}"/>
                                    </p:column>
                                    <p:column headerText="Operação" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{mov.operacaoMovimentoDividaPublica.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{mov.valor}"
                                                      converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText
                                                value="#{operacaoCreditoControlador.somaMovimentoDividaPublica}"
                                                converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="tabEstornoMovimento" title="Estorno de Movimento da Dívida Pública">
                                <p:dataTable id="tabelaEstornoMovimento"
                                             value="#{operacaoCreditoControlador.listaMovimentoDividaPublicaEstorno}"
                                             var="mov"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>ESTORNOS DE MOVIMENTOS DA DÍVIDA PÚBLICA&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Data" styleClass="alinhamentoCentralizado">
                                        <h:outputText value="#{mov.data}">
                                            <f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Número" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{mov.numero}"/>
                                    </p:column>
                                    <p:column headerText="Operação" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{mov.operacaoMovimentoDividaPublica.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Valor (R$)" styleClass="alinhamentoDireita">
                                        <h:outputText value="#{mov.valor}"
                                                      converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                    </p:column>
                                    <f:facet name="footer">
                                        <div style="text-align: right">
                                            <h:outputText value="Total: " styleClass="mlef05"/>
                                            <h:outputText
                                                value="#{operacaoCreditoControlador.somaMovimentoDividaPublicaEstorno}"
                                                converter="#{operacaoCreditoControlador.moneyConverter}"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>
                        </p:tabView>

                        <h:panelGrid columns="2" styleClass="mtop10">
                            <h:outputText value="Total Pago Principal: "/>
                            <h:outputText value="#{operacaoCreditoControlador.calculaPagamentosComValorPrincipal}"
                                          styleClass="negrito"
                                          converter="#{operacaoCreditoControlador.moneyConverter}"/>

                            <h:outputText value="Total Pago de Juros: "/>
                            <h:outputText value="#{operacaoCreditoControlador.calculaPagamentosComValorJuros}"
                                          styleClass="negrito"
                                          converter="#{operacaoCreditoControlador.moneyConverter}"/>

                            <h:outputText value="Total Pago de Outros Encargos: "/>
                            <h:outputText value="#{operacaoCreditoControlador.calculaPagamentosComOutrosEncargos}"
                                          styleClass="negrito"
                                          converter="#{operacaoCreditoControlador.moneyConverter}"/>

                        </h:panelGrid>
                    </p:tab>
                </p:tabView>
            </p:panel>
            <fc:rodapePretty controlador="#{operacaoCreditoControlador}"/>
        </h:form>

        <p:dialog widgetVar="dialogPesquisarPessoa"
                  modal="true"
                  width="1000"
                  position="center"
                  style="position: fixed!important;"
                  closable="true"
                  resizable="false"
                  height="550">
            <h:form id="FormularioPesquisarPessoa">
                <p:panel>
                    <p:outputPanel rendered="#{operacaoCreditoControlador.selecionado ne null}">
                        <fc:pesquisaGenerico
                            selecionar="#{operacaoCreditoControlador.setarPessoa}"
                            updateSelecionarTabela=":Formulario:tabViewGeral:pessoa"
                            id="componentePesquisaGenerico"
                            nomeDaClasse="Pessoa"
                            guardarNaSessao="false"
                            actionSelecionar="#{operacaoCreditoControlador.caminhoVisualizar()}"
                            novo="#{pessoaTributarioControlador.novaPessoaFisica()}"
                            caminhoAtual="listatributario"
                            caminhoControlador="#{pessoaTributarioControlador.caminho}"
                            mostrarBotaoNovo="false"
                            mostrarBotaoImprimirRelatorioTabela="false"
                            mostrarHistorico="false"
                            utilizarTabelaPessoa="true"
                            pesquisaNoEnter="false"
                            mostrarOrdenacao="false"
                            iconmSelecionar="check-icon.png"
                            mostrarBotaoImprimirRelatorioUnicoRegistro="false"
                            pretty="true"
                            dialog="true"
                            mostrarBotaoEditarConfiguracaoRelatorio="false"
                            meuControlador="#{pessoaPesquisaGenerico}"/>
                    </p:outputPanel>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog modal="true"
                  id="dialogUpload"
                  widgetVar="dialogArquivo"
                  dynamic="true"
                  showHeader="false"
                  position="center"
                  style="position: fixed!important;"
                  closable="false"
                  resizable="false">

            <h:form id="formularioUpload">
                <p:panel header="Upload de Arquivos" id="panelArquivo" styleClass="mtop05" style="width: 600px">
                    <h:panelGrid id="panelUpload" width="580">
                        <p:fileUpload fileUploadListener="#{operacaoCreditoControlador.uploadArquivos}"
                                      mode="advanced"
                                      update=":Formulario:tabViewGeral:tabelaArquivos"
                                      cancelLabel="Cancelar"
                                      uploadLabel="Enviar"
                                      styleClass="mtop05"
                                      label="Selecionar Arquivo"
                                      multiple="true"
                                      sizeLimit="15728640"
                                      id="botaoSelecionar"
                                      auto="true"
                                      allowTypes="/(\.|\/)(pdf)$/"
                                      invalidFileMessage="Extensão de arquivo inválida!"
                                      invalidSizeMessage="Tamanho do arquivo não suportador. O tamanho do arquivo suportado é de 10Mb."/>

                        <p:commandButton id="fecharAnexo"
                                         value="Fechar"
                                         process="@this"
                                         styleClass="padrao mtop20"
                                         onclick="dialogArquivo.hide();aguarde.show();"
                                         oncomplete="aguarde.hide()"
                                         title="Clique para fechar a janela."
                                         icon="ui-icon-close"/>
                    </h:panelGrid>
                </p:panel>
            </h:form>
        </p:dialog>


        <p:dialog modal="true"
                  widgetVar="dialogAltParcela"
                  closable="false"
                  resizable="false"
                  dynamic="true"
                  showHeader="false"
                  position="center"
                  style="position: fixed!important;"
                  id="dialogParcela"
                  width="500">

            <h:form id="formDialogAltParcela">
                <p:panel header="Alterar Valores da Parcela" styleClass="mtop05">
                    <h:panelGrid columns="2">

                        <h:outputText value="Data do Parcelamento: " style="margin-right: 20px"/>
                        <p:calendar value="#{operacaoCreditoControlador.parcelaDividaPublica.dataParcela}"
                                    pattern="MM/yyyy"
                                    title="Informe a Data de início do parcelamento" navigator="true" id="dataInicio"
                                    onkeyup="mascara(this, mMesAno)"/>

                        <h:outputText value="Valor de Amortização: "/>
                        <fc:inputMoeda value="#{operacaoCreditoControlador.parcelaDividaPublica.valorAmortizado}"
                                       title="Informe o valor de amortização" id="valorAmortizacao"/>

                        <h:outputText value="Valor de Juros: "/>
                        <fc:inputMoeda value="#{operacaoCreditoControlador.parcelaDividaPublica.valorJuros}"
                                       title="Informe o valor de juros" id="valorJuros"/>

                        <h:outputText value="Valor da Prestação: "/>
                        <h:outputText value="#{operacaoCreditoControlador.parcelaDividaPublica.valorPrestacao}"
                                      styleClass="negrito">
                            <f:convertNumber type="currency"/>
                        </h:outputText>

                        <h:outputText value="Saldo: "/>
                        <h:outputText value="#{operacaoCreditoControlador.parcelaDividaPublica.saldo}"
                                      styleClass="negrito">
                            <f:convertNumber type="currency"/>
                        </h:outputText>
                    </h:panelGrid>

                    <h:panelGrid columns="4" styleClass="mtop20">
                        <p:commandButton value="Confirmar"
                                         title="Clique para confirmar a alteração."
                                         icon="ui-icon-check"
                                         styleClass="padrao mrig05"
                                         onstart="aguarde.show()"
                                         oncomplete="aguarde.hide()"
                                         update=":Formulario:tabViewGeral:tabelaParcelas"
                                         actionListener="#{operacaoCreditoControlador.calculaSaldoDialog()}"/>

                        <p:commandButton value="Fechar"
                                         icon="ui-icon-circle-close"
                                         onstart="aguarde.show()"
                                         process="@this"
                                         styleClass="padrao"
                                         title="Clique para fechar a janela."
                                         update=":Formulario:tabViewGeral:tabelaParcelas"
                                         oncomplete="dialogAltParcela.hide();aguarde.hide()"/>
                    </h:panelGrid>
                </p:panel>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
</html>
