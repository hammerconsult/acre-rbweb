<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:co="http://java.sun.com/jsf/composite/components/contabil"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <p:panel header="Fechamento, apuração e Abertura de Exercício" styleClass="mtop10">
                <h:panelGrid columns="2">
                    <fc:outputLabelObrigatorio value="Data: "/>
                    <p:calendar id="data"
                                disabled="true"
                                value="#{aberturaFechamentoExercicioControlador.selecionado.dataGeracao}"
                                onkeyup="mascara(this, mdata)"
                                size="10"
                                readonly="true"
                                pattern="dd/MM/yyyy" locale="pt_BR" navigator="true"/>

                    <fc:outputLabelObrigatorio value="Exercício: "/>
                    <h:outputText value="#{aberturaFechamentoExercicioControlador.selecionado.exercicio}"
                                  styleClass="negrito"/>

                    <fc:outputLabelObrigatorio value="Descrição: "/>
                    <h:panelGrid columns="2">
                        <p:inputTextarea value="#{aberturaFechamentoExercicioControlador.selecionado.descricao}"
                                         maxlength="255"
                                         cols="50"
                                         rows="5"
                                         counter="counter"
                                         counterTemplate="{0} Caracteres Restantes"/>
                        <h:outputText id="counter"/>
                    </h:panelGrid>
                </h:panelGrid>
                <p:panel styleClass="mtop10">
                    <co:titulo-panel titulo="Unidade Orçamentária"/>
                    <fc:pesquisaUnidadeOrganizacional tipoHierarquia="ORCAMENTARIA"
                                                      listaDeHierarquias="#{aberturaFechamentoExercicioControlador.listaUnidades}"
                                                      habilitaUnidadeGestora="false"
                                                      apenasOrgaoUnidadeUsuarioLogado="true"
                                                      unidadeGestora="#{aberturaFechamentoExercicioControlador.unidadeGestora}"/>

                </p:panel>

                <p:panel rendered="#{aberturaFechamentoExercicioControlador.selecionado.id eq null}"
                         styleClass="mtop10">
                    <co:titulo-panel titulo="Pesquisar Por"/>
                    <h:panelGrid columns="5" style="width: 100%;">
                        <h:panelGrid columns="2">
                            <h:outputLabel value="Apuração?" for="apuracao"/>
                            <p:selectBooleanCheckbox
                                value="#{aberturaFechamentoExercicioControlador.pesquisarPorApuracao}"
                                id="apuracao"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <h:outputLabel value="Encerramento?" for="encerramento"/>
                            <p:selectBooleanCheckbox
                                value="#{aberturaFechamentoExercicioControlador.pesquisarPorEncerramento}"
                                id="encerramento"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <h:outputLabel value="Plano de Contas?" for="planoDeContas"/>
                            <p:selectBooleanCheckbox
                                value="#{aberturaFechamentoExercicioControlador.pesquisarPorPlanoDeContas}"
                                id="planoDeContas"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2" id="gridSaldos">
                            <h:outputLabel value="Transportes?" for="saldo"/>
                            <p:selectBooleanCheckbox
                                value="#{aberturaFechamentoExercicioControlador.pesquisarPorTransporteDeSaldo}"
                                id="saldo">
                                <p:ajax event="valueChange" update=":Formulario:gridSaldos"/>
                            </p:selectBooleanCheckbox>

                            <h:panelGrid columns="2"
                                         rendered="#{aberturaFechamentoExercicioControlador.pesquisarPorTransporteDeSaldo}">
                                <h:outputLabel value="Saldo Contábil?" for="saldoContabil"/>
                                <p:selectBooleanCheckbox
                                    id="saldoContabil"
                                    value="#{aberturaFechamentoExercicioControlador.pesquisarPorTransporteDeSaldoContabil}"/>

                                <h:outputLabel value="Saldo Financeiro?" for="saldoFinanceiro"/>
                                <p:selectBooleanCheckbox
                                    id="saldoFinanceiro"
                                    value="#{aberturaFechamentoExercicioControlador.pesquisarPorTransporteDeSaldoFinanceiro}"/>

                                <h:outputLabel value="Saldo Créditos a Receber?" for="saldoCreditoreceber"/>
                                <p:selectBooleanCheckbox
                                    id="saldoCreditoreceber"
                                    value="#{aberturaFechamentoExercicioControlador.pesquisarPorTransporteDeSaldoCreditoReceber}"/>


                                <h:outputLabel value="Saldo Dívida Ativa?" for="saldoDividaAtiva"/>
                                <p:selectBooleanCheckbox
                                    id="saldoDividaAtiva"
                                    value="#{aberturaFechamentoExercicioControlador.pesquisarPorTransporteDeSaldoDividaAtiva}"/>

                                <h:outputLabel value="Saldo Extraorçamentário?" for="saldoExtra"/>
                                <p:selectBooleanCheckbox
                                    id="saldoExtra"
                                    value="#{aberturaFechamentoExercicioControlador.pesquisarPorTransporteDeSaldoExtra}"/>

                                <h:outputLabel value="Saldo Dívida Pública?" for="saldoDividaPublica"/>
                                <p:selectBooleanCheckbox
                                    id="saldoDividaPublica"
                                    value="#{aberturaFechamentoExercicioControlador.pesquisarPorTransporteDeSaldoDividaPublica}"/>

                                <h:outputLabel value="Receita Extraorçamentária?" for="recExtra"/>
                                <p:selectBooleanCheckbox
                                    id="recExtra"
                                    value="#{aberturaFechamentoExercicioControlador.pesquisarPorTransporteDeReceitaExtra}"/>

                                <h:outputLabel value="Saldo de Conta Auxiliar?" for="saldoAux"/>
                                <p:selectBooleanCheckbox
                                    id="saldoAux"
                                    value="#{aberturaFechamentoExercicioControlador.pesquisarPorTransporteDeContaAuxiliar}"/>
                            </h:panelGrid>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <h:outputLabel value="Abertura?" for="abertura"/>
                            <p:selectBooleanCheckbox
                                value="#{aberturaFechamentoExercicioControlador.pesquisarPorAbertura}"
                                id="abertura"/>
                        </h:panelGrid>

                    </h:panelGrid>

                    <p:commandButton value="Pesquisar"
                                     actionListener="#{aberturaFechamentoExercicioControlador.recuperarInformacoes()}"
                                     title="Clique para Pesquisar e Recuperar Todos os registros"
                                     icon="ui-icon-search"
                                     update=":Formulario"

                                     styleClass="mtop10"
                                     style="height: 30px;"

                                     onclick="statusDialog.show();"
                                     oncomplete="statusDialog.hide();"/>
                </p:panel>

                <p:tabView styleClass="mtop10" id="tabGeral">
                    <p:tab title="Apuração">
                        <p:tabView id="apuracao">
                            <p:tab title="Prescrição">

                                <p:tabView styleClass="mtop10" id="tabPrescricao">
                                    <p:tab title="Processados">
                                        <fc:tabela-selecionar-generica tituloTabela="PROCESSADOS"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.prescricaoEmpenhos}"/>

                                    </p:tab>
                                    <p:tab title="Não-Processados">
                                        <fc:tabela-selecionar-generica tituloTabela="NÃO PROCESSADOS"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.prescricaoEmpenhosNaoProcessados}"/>
                                    </p:tab>
                                </p:tabView>
                            </p:tab>
                            <p:tab title="Inscrição">

                                <p:tabView styleClass="mtop10" id="tabInscricao">
                                    <p:tab title="Processados">
                                        <fc:tabela-selecionar-generica tituloTabela="PROCESSADOS"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.inscricaoEmpenhos}"/>
                                    </p:tab>
                                    <p:tab title="Não-Processados">
                                        <fc:tabela-selecionar-generica tituloTabela="NÃO PROCESSADOS"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.inscricaoEmpenhosNaoProcessado}"/>
                                    </p:tab>
                                </p:tabView>
                            </p:tab>
                            <p:tab title="Obrigação a Pagar">
                                <fc:tabela-selecionar-generica tituloTabela="OBRIGAÇÃO A PAGAR"
                                                               superLista="#{aberturaFechamentoExercicioControlador.obrigacoesAPagar}"/>
                            </p:tab>
                        </p:tabView>
                    </p:tab>

                    <p:tab title="Encerramento">
                        <p:tabView id="encerramento">
                            <p:tab title="Execução da Receita">
                                <p:tabView id="receita">
                                    <p:tab title="Receita à Realizar">
                                        <fc:tabela-selecionar-generica tituloTabela="RECEITA À REALIZAR"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.receitasARealizar}"/>
                                    </p:tab>
                                    <p:tab title="Reestimativa">
                                        <fc:tabela-selecionar-generica tituloTabela="REESTIMATIVA"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.reestimativas}"/>
                                    </p:tab>
                                    <p:tab title="Dedução da Previsão Inicial da Receita">
                                        <fc:tabela-selecionar-generica tituloTabela="DEDUÇÕES"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.deducoesIniciais}"/>
                                    </p:tab>
                                    <p:tab title="Dedução da Receita Realizada">
                                        <fc:tabela-selecionar-generica tituloTabela="DEDUÇÕES"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.deducoesReceitaRealizada}"/>
                                    </p:tab>
                                    <p:tab title="Receita Realizada">
                                        <fc:tabela-selecionar-generica tituloTabela="RECEITAS REALIZADAS"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.receitaRealizada}"/>
                                    </p:tab>
                                </p:tabView>
                            </p:tab>
                            <p:tab title="Execução da Despesa">
                                <p:tabView>
                                    <p:tab title="Crédito Disponível">
                                        <fc:tabela-selecionar-generica tituloTabela="CRÉDITO DISPONÍVEL"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.creditosDisponiveis}"/>
                                    </p:tab>
                                    <p:tab title="Crédito Adicional - Suplementar">
                                        <fc:tabela-selecionar-generica tituloTabela="CRÉDITO ADICIONAL - SUPLEMENTAR"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.creditosAdicionaisSuplementares}"/>
                                    </p:tab>
                                    <p:tab title="Crédito Adicional - Especial">
                                        <fc:tabela-selecionar-generica tituloTabela="CRÉDITO ADICIONAL - ESPECIAL"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.creditosAdicionaisEspecial}"/>
                                    </p:tab>
                                    <p:tab title="Crédito Adicional - Extraordinário">
                                        <fc:tabela-selecionar-generica tituloTabela="CRÉDITO ADICIONAL - EXTRAORDINÁRIO"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.creditosAdicionaisExtraordinario}"/>
                                    </p:tab>
                                    <p:tab title="Cancelamento de Dotações">
                                        <fc:tabela-selecionar-generica tituloTabela="CANCELAMENTO DE DOTAÇÕES"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.anulacaoDotacao}"/>
                                    </p:tab>
                                    <p:tab title="Crédito Adicional por Superávit Financeiro">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="CRÉDITO ADICIONAL POR SUPERÁVIT FINANCEIRO"
                                            superLista="#{aberturaFechamentoExercicioControlador.cretitosAdicionaisPorSuperavitFinanceira}"/>
                                    </p:tab>
                                    <p:tab title="Crédito Adicional por Excesso de Arrecadação">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="CRÉDITO ADICIONAL POR EXCESSO DE ARRECADAÇÃO"
                                            superLista="#{aberturaFechamentoExercicioControlador.cretitosAdicionaisPorExcessoDeArrecadacao}"/>
                                    </p:tab>
                                    <p:tab title="Crédito Adicional por Anulação de Dotação">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="CRÉDITO ADICIONAL POR ANULAÇÃO DE DOTAÇÃO"
                                            superLista="#{aberturaFechamentoExercicioControlador.cretitosAdicionaisPorAnulacaoDeDotacao}"/>
                                    </p:tab>
                                    <p:tab title="Crédito Adicional por Operações de Créditos">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="CRÉDITO ADICIONAL POR OPERAÇÕES DE CRÉDITOS"
                                            superLista="#{aberturaFechamentoExercicioControlador.cretitosAdicionaisPorOperacaoDeCredito}"/>
                                    </p:tab>
                                    <p:tab title="Crédito Adicional por Reserva de Contigência">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="CRÉDITO ADICIONAL POR RESERVA DE CONTIGÊNCIA"
                                            superLista="#{aberturaFechamentoExercicioControlador.cretitosAdicionaisPorReservaDeContigencia}"/>
                                    </p:tab>
                                    <p:tab title="Crédito Adicional por Anulação de Créditos">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="CRÉDITO ADICIONAL POR ANULAÇÃO DE CRÉDITOS"
                                            superLista="#{aberturaFechamentoExercicioControlador.cretitosAdicionaisPorAnulacaoDeCredito}"/>
                                    </p:tab>
                                    <p:tab title="Empenhos à Liquidar Inscritos em Restos à Pagar Não Processados">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="EMPENHOS A LIQUIDAR INSCRITOS EM RESTOS A PAGAR NAO PROCESSADOS."
                                            superLista="#{aberturaFechamentoExercicioControlador.empenhosALiquidarInscritosRestoAPagarNaoProcessados}"/>
                                    </p:tab>
                                    <p:tab title="Empenhos Liquidados Inscritos em Restos à Pagar Processados">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="EMPENHOS LIQUIDADOS INSCRITOS EM RESTOS A PAGAR PROCESSADOS."
                                            superLista="#{aberturaFechamentoExercicioControlador.empenhosLiquidadosInscritosRestoAPagarProcessados}"/>
                                    </p:tab>
                                    <p:tab title="Crédito Empenhado - Pago">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="CRÉDITO EMPENHADO - PAGO."
                                            superLista="#{aberturaFechamentoExercicioControlador.empenhosCreditoEmpenhadoPago}"/>
                                    </p:tab>
                                </p:tabView>
                            </p:tab>
                            <p:tab title="Execução de Restos a Pagar">
                                <p:tabView>
                                    <p:tab title="Total Pago dos Restos a Pagar Processados Inscritos">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="TOTAL PAGO DOS RESTOS A PAGAR PROCESSADOS INSCRITOS."
                                            superLista="#{aberturaFechamentoExercicioControlador.pagoDosRestosAPagarProcessados}"/>
                                    </p:tab>
                                    <p:tab title="Total Pago dos Restos a Pagar Não Processados Inscritos">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="TOTAL PAGO DOS RESTOS A PAGAR NÃO PROCESSADOS INSCRITOS."
                                            superLista="#{aberturaFechamentoExercicioControlador.pagoDosRestosAPagarNaoProcessados}"/>
                                    </p:tab>
                                    <p:tab title="Total Cancelado dos Restos a Pagar Processados Inscritos">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="TOTAL CANCELADO DOS RESTOS A PAGAR PROCESSADOS INSCRITOS."
                                            superLista="#{aberturaFechamentoExercicioControlador.canceladoDosRestosAPagarProcessados}"/>
                                    </p:tab>
                                    <p:tab title="Total Cancelado dos Restos a Pagar Não Processados Inscritos">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="TOTAL CANCELADO DOS RESTOS A PAGAR NÃO PROCESSADOS INSCRITOS."
                                            superLista="#{aberturaFechamentoExercicioControlador.canceladoDosRestosAPagarNaoProcessados}"/>
                                    </p:tab>
                                </p:tabView>
                            </p:tab>
                            <p:tab title="Execução de Disponibilidade por Destinação de Recurso">
                                <fc:tabela-selecionar-generica
                                    tituloTabela="EXECUÇÃO DE DISPONIBILIDADE POR DESTINAÇÃO DE RECURSO."
                                    superLista="#{aberturaFechamentoExercicioControlador.destinacaoDeRecurso}"/>
                            </p:tab>
                            <p:tab title="Resultado Diminutivo do Exercício">
                                <fc:tabela-selecionar-generica tituloTabela="RESULTADO DIMINUTIVO DO EXERCÍCIO."
                                                               superLista="#{aberturaFechamentoExercicioControlador.resultadoDiminutivoExercicio}"/>
                            </p:tab>
                            <p:tab title="Resultado Aumentativo do Exercício">
                                <fc:tabela-selecionar-generica tituloTabela="RESULTADO AUMENTATIVO DO EXERCÍCIO."
                                                               superLista="#{aberturaFechamentoExercicioControlador.resultadoAumentativoExercicio}"/>
                            </p:tab>
                        </p:tabView>
                    </p:tab>

                    <p:tab title="Duplicar Plano de Contas">
                        <fc:tabela-selecionar-generica tituloTabela="DUPLICAR PLANO DE CONTAS."
                                                       superLista="#{aberturaFechamentoExercicioControlador.planoDeContas}"/>
                    </p:tab>

                    <p:tab title="Transportes">
                        <p:tabView styleClass="mtop10" id="tabTransporteDeSaldo">
                            <p:tab title="Contábil">
                                <fc:tabela-selecionar-generica tituloTabela="TRANSPORTE DE SALDO CONTÁBIL"
                                                               superLista="#{aberturaFechamentoExercicioControlador.transporteDeSaldo}"/>
                            </p:tab>
                            <p:tab title="Financeiro">
                                <p:dataTable id="tabelaDeRegistros"
                                             value="#{aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro}"
                                             var="fin"
                                             rowStyleClass="#{fin.erroDuranteProcessamento ? 'fundo-vermelho-medio' : empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula> TRANSPORTE DE SALDO FINANCEIRO &lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx"
                                             rowKey="#{fin}">

                                    <p:column style="width:4%;text-align: center" headerText="Ações">
                                        <f:facet name="header">
                                            <p:commandButton
                                                actionListener="#{aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro.removerTodas()}"
                                                icon="ui-icon-check"
                                                id="btnRemoverTodas"
                                                onclick="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                title="Clique para remover todos"
                                                update=":Formulario:tabGeral:tabTransporteDeSaldo:tabelaDeRegistros"
                                                process="@this"
                                                rendered="#{aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro.todasAdicionadas()}"
                                                styleClass="vinteLarguraVinteAltura botao_verde icone_branco"/>

                                            <p:commandButton
                                                actionListener="#{aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro.adicionarTodas()}"
                                                icon="ui-icon-none"
                                                id="btnAdicionarTodas"
                                                onclick="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                rendered="#{!aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro.todasAdicionadas()}"
                                                title="Clique para adicionar todos."
                                                update=":Formulario:tabGeral:tabTransporteDeSaldo:tabelaDeRegistros"
                                                process="@this"
                                                styleClass="vinteLarguraVinteAltura botao_vermelho icone_branco"/>
                                        </f:facet>
                                        <p:commandButton
                                            actionListener="#{aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro.remover(fin)}"
                                            icon="ui-icon-check"
                                            id="btnRemover"
                                            onclick="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            title=" "
                                            rendered="#{aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro.jaFoiAdicionado(fin)}"
                                            update=":Formulario:tabGeral:tabTransporteDeSaldo:tabelaDeRegistros"
                                            process="@this"
                                            styleClass="vinteLarguraVinteAltura botao_verde icone_branco"/>

                                        <p:commandButton
                                            actionListener="#{aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro.adicionar(fin)}"
                                            icon="ui-icon-none"
                                            id="btnAdicionar"
                                            onclick="aguarde.show()"
                                            rendered="#{!aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro.jaFoiAdicionado(fin)}"
                                            oncomplete="aguarde.hide()"
                                            title=" "
                                            process="@this"
                                            update=":Formulario:tabGeral:tabTransporteDeSaldo:tabelaDeRegistros"
                                            styleClass="vinteLarguraVinteAltura botao_vermelho icone_branco"/>
                                    </p:column>
                                    <p:column headerText="Mensagem">
                                        <p:rowToggler rendered="#{fin.erroDuranteProcessamento}"/>

                                    </p:column>
                                    <c:forEach
                                        items="#{utilBean.getCamposDoSelecionado(aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro.getClasse())}"
                                        var="campo">
                                        <p:column headerText="#{utilBean.obterLabelCampo(campo)}"
                                                  filterBy="#{utilBean.obterConteudoCampo(campo,fin)}"
                                                  sortBy="#{utilBean.obterConteudoCampo(campo,fin)}"
                                                  filterMatchMode="contains"
                                                  styleClass="#{utilBean.isCampoMonetario(campo) ? 'alinhamentoDireita' : 'alinhamentoCentralizado'}">
                                            <h:outputText value="#{utilBean.obterConteudoCampo(campo,fin)}"/>

                                            <f:facet name="footer">
                                                <h:panelGrid columns="1"
                                                             rendered="#{utilBean.isCampoMonetario(campo)}">

                                                    <h:outputText
                                                        value="#{utilBean.getValorTotalPorCampo(campo,aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro.getObjetos())}"
                                                        styleClass="negrito"
                                                        converter="moneyConverter"/>

                                                    <h:outputText
                                                        value="#{utilBean.getValorTotalPorCampo(campo, aberturaFechamentoExercicioControlador.transporteDeSaldoFinanceiro)}"
                                                        styleClass="negrito"
                                                        converter="moneyConverter"/>
                                                </h:panelGrid>
                                            </f:facet>
                                        </p:column>
                                    </c:forEach>
                                    <p:rowExpansion>
                                        <h:outputText value="#{fin.mensagemDeErro}" styleClass="negrito"/>
                                    </p:rowExpansion>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="Créditos a Receber">
                                <fc:tabela-selecionar-generica tituloTabela="TRANSPORTE DE SALDO CRÉDITOS A RECEBER"
                                                               superLista="#{aberturaFechamentoExercicioControlador.transporteDeSaldoCreditoReceber}"/>
                            </p:tab>
                            <p:tab title="Dívida Ativa">
                                <fc:tabela-selecionar-generica tituloTabela="TRANSPORTE DE SALDO DÍVIDA ATIVA"
                                                               superLista="#{aberturaFechamentoExercicioControlador.transporteDeSaldoDividaAtiva}"/>
                            </p:tab>
                            <p:tab title="Extra Orçamentário">
                                <fc:tabela-selecionar-generica tituloTabela="TRANSPORTE DE SALDO EXTRA ORÇAMENTÁRIO"
                                                               superLista="#{aberturaFechamentoExercicioControlador.transporteDeSaldoExtra}"/>
                            </p:tab>
                            <p:tab title="Dívida Pública">
                                <fc:tabela-selecionar-generica tituloTabela="TRANSPORTE DE SALDO DA DÍVIDA PÚBLICA"
                                                               superLista="#{aberturaFechamentoExercicioControlador.transporteDeSaldoDividaPublica}"/>
                            </p:tab>
                            <p:tab title="Receita Extraorçamentária">
                                <fc:tabela-selecionar-generica tituloTabela="RECEITAS EXTRAORÇAMENTÁRIAS"
                                                               superLista="#{aberturaFechamentoExercicioControlador.receitasExtras}"/>
                            </p:tab>
                            <p:tab title="Auxiliar Detalhada">
                                <fc:tabela-selecionar-generica
                                    tituloTabela="TRANSPORTE DE SALDO AUXILIAR - SICONFI"
                                    superLista="#{aberturaFechamentoExercicioControlador.transporteDeSaldoDeContasAuxiliares}"/>
                            </p:tab>
                        </p:tabView>
                    </p:tab>

                    <p:tab title="Abertura">

                        <p:tabView styleClass="mtop10" id="tabInscricaoAbertura">
                            <p:tab title="Processados">
                                <fc:tabela-selecionar-generica tituloTabela="PROCESSADOS"
                                                               superLista="#{aberturaFechamentoExercicioControlador.inscricaoRestoPagarProcessados}"/>
                            </p:tab>
                            <p:tab title="Não-Processados">
                                <fc:tabela-selecionar-generica tituloTabela="NÃO PROCESSADOS"
                                                               superLista="#{aberturaFechamentoExercicioControlador.inscricaoRestoPagarNaoProcessados}"/>
                            </p:tab>
                            <p:tab title="Transferência do Resultado">
                                <p:tabView styleClass="mtop10" id="tabTransfResultadoPublicoPrivado">
                                    <p:tab title="Público">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="TRANSFERÊNCIA DO RESULTADO - PÚBLICO"
                                            superLista="#{aberturaFechamentoExercicioControlador.transferenciaResultadoPublico}"/>
                                    </p:tab>
                                    <p:tab title="Privado">
                                        <fc:tabela-selecionar-generica
                                            tituloTabela="TRANSFERÊNCIA DE RESULTADO - PRIVADO"
                                            superLista="#{aberturaFechamentoExercicioControlador.transferenciaResultadoPrivado}"/>
                                    </p:tab>
                                </p:tabView>
                            </p:tab>
                            <p:tab title="Transferência de Ajustes">
                                <p:tabView styleClass="mtop10" id="tabTransfAjustePublicoPrivado">
                                    <p:tab title="Público">
                                        <fc:tabela-selecionar-generica tituloTabela="TRANSFERÊNCIA DE AJUSTES - PÚBLICO"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.transferenciaAjustesPublico}"/>
                                    </p:tab>
                                    <p:tab title="Privado">
                                        <fc:tabela-selecionar-generica tituloTabela="TRANSFERÊNCIA DE AJUSTES - PRIVADO"
                                                                       superLista="#{aberturaFechamentoExercicioControlador.transferenciaAjustesPrivado}"/>
                                    </p:tab>
                                </p:tabView>
                            </p:tab>
                        </p:tabView>
                    </p:tab>
                </p:tabView>

                <h:panelGrid columns="4">
                    <p:commandButton value="Salvar"
                                     actionListener="#{aberturaFechamentoExercicioControlador.salvarEncerramento()}"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide();"
                                     icon="ui-icon-disk"
                                     title="Clique para salvar o encerramento."
                                     style="height: 30px;"
                                     styleClass="mtop10 prioritario"
                                     update=":Formulario"/>

                    <p:commandButton value="Voltar"
                                     id="cbCancelar"
                                     style="height: 30px;"
                                     styleClass="mtop10 mlef05"
                                     icon="ui-icon-cancel"
                                     onclick="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     title="Clique para cancelar e retornar a página anterior"
                                     actionListener="#{aberturaFechamentoExercicioControlador.cancelar()}"
                                     immediate="true"/>

                </h:panelGrid>

                <p:poll interval="1"
                        widgetVar="poll"
                        listener="#{aberturaFechamentoExercicioControlador.finalizarBarraProgressao()}"
                        update=":formDialogProgressBar:panelBarra"
                        stop="#{!aberturaFechamentoExercicioControlador.assistenteAberturaFechamentoExercicio.barraProgressoItens.calculando}"
                        autoStart="false"/>
            </p:panel>
        </h:form>


        <p:dialog widgetVar="dialogProgressBar"
                  width="800"
                  closable="false"
                  showHeader="false"
                  modal="true"
                  hideEffect="clip"
                  resizable="false"
                  position="center"
                  dynamic="true">
            <h:form id="formDialogProgressBar">
                <div class="alert alert-success centralizado mtop05">
                    <strong>Aguarde, </strong> o processo de abertura e encerramento de exercício está sendo executado...
                </div>

                <p:panel style="text-align: center; width: 100%; border: 0px;"
                         visible="#{aberturaFechamentoExercicioControlador.assistenteAberturaFechamentoExercicio.barraProgressoItens.calculando}"
                         id="panelBarra">

                    <h:outputText
                        value="#{aberturaFechamentoExercicioControlador.assistenteAberturaFechamentoExercicio.barraProgressoItens.mensagens}"
                        escape="false"/>

                    <br/>
                    <h:outputText
                        value="Total: #{aberturaFechamentoExercicioControlador.assistenteAberturaFechamentoExercicio.barraProgressoItens.total}"
                        styleClass="negrito"/>
                    <br/>
                    <h:outputText
                        value="Processados: #{aberturaFechamentoExercicioControlador.assistenteAberturaFechamentoExercicio.barraProgressoItens.processados}"
                        styleClass="negrito"/>


                    <div class="progress progress-striped active" id="barraProgresso">
                        <div class="bar"
                             style="width: #{aberturaFechamentoExercicioControlador.assistenteAberturaFechamentoExercicio.barraProgressoItens.porcentagemDoCalculo}%;">
                            <h:outputText
                                value="#{aberturaFechamentoExercicioControlador.assistenteAberturaFechamentoExercicio.barraProgressoItens.porcentagemDoCalculo}"
                                styleClass="negrito">
                                <f:convertNumber type="number" maxFractionDigits="2"/>
                            </h:outputText>
                            <h:outputText value="%"/>
                        </div>
                    </div>


                    <br/>
                    <h:outputText
                        value="Tempo Decorrido: #{aberturaFechamentoExercicioControlador.assistenteAberturaFechamentoExercicio.barraProgressoItens.tempoDecorrido}"
                        styleClass="negrito"/>

                    <br/>
                    <h:outputText
                        value="Tempo Estimado: #{aberturaFechamentoExercicioControlador.assistenteAberturaFechamentoExercicio.barraProgressoItens.tempoEstimado}"
                        styleClass="negrito"/>

                    <br/>
                    <p:commandButton icon="ui-icon-cancel"
                                     styleClass="operacao prioritario"
                                     value="Abortar"
                                     update="@this"
                                     process="@this"
                                     immediate="true"
                                     rendered="#{aberturaFechamentoExercicioControlador.assistenteAberturaFechamentoExercicio.barraProgressoItens.calculando}"
                                     actionListener="#{aberturaFechamentoExercicioControlador.abortar()}"/>
                </p:panel>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
