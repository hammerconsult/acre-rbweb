<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
>
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">

        <script type="text/javascript">
            var timer;

            function getElement(id) {
                return document.getElementById(id);
            }

            var timerPesquisa;

            function iniciarFuture() {
                $("#dlgProcesso").modal({backdrop: 'static', keyboard: false});
                $("#dlgProcesso").modal('show');
                timerPesquisa = setInterval(function () {
                    consultarAndamentoFuture();
                }, 1000);
            }

            function terminarFuture() {
                clearInterval(timerPesquisa);
                $("#dlgProcesso").modal('hide');
                aguarde.show();
                finalizarFuture();
            }

            function openDialog(id) {
                $(id).modal({backdrop: 'static', keyboard: false});
                $(id).modal('show');
            }

            function closeDialog(id) {
                $(id).modal('hide');
            }

        </script>

        <h:form id="Formulario">
            <p:remoteCommand
                update=":form-future"
                actionListener="#{correcaoDadosAdministrativoControlador.acompanharFuture}"
                name="consultarAndamentoFuture"/>

            <p:remoteCommand
                oncomplete="aguarde.hide()"
                actionListener="#{correcaoDadosAdministrativoControlador.finalizarFuture}"
                name="finalizarFuture"/>

            <p:panel header="Rotinas Ajuste Administrativo" id="panelPrincipal">
                <p:tabView id="tabGeral">
                    <p:tab title="Bloqueio Singleton">
                        <p:tabView>
                            <p:tab title="Classes">
                                <p:commandButton title="Clique para reiniciar o singleton"
                                                 value="Reiniciar"
                                                 icon="ui-icon-power"
                                                 styleClass="mtop10 mrig05 operacao"
                                                 update=":Formulario"
                                                 process="@this"
                                                 actionListener="#{correcaoDadosAdministrativoControlador.reinicarSingletonBloqueioClass()}"/>

                                <p:dataTable id="tabelaMovimentos"
                                             value="#{correcaoDadosAdministrativoControlador.movimentosBloqueados}"
                                             var="classe"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>MOVIMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Remover" styleClass="alinhamentoCentralizado"
                                              style="width: 5%">
                                        <p:commandButton icon="ui-icon-trash"
                                                         styleClass="mtop05 vinteLarguraVinteAltura"
                                                         onstart="aguarde.show()"
                                                         process="@this"
                                                         update="tabelaMovimentos"
                                                         actionListener="#{correcaoDadosAdministrativoControlador.resetarBloqueioPorUnidade(classe)}"
                                                         oncomplete="aguarde.hide()"/>
                                    </p:column>
                                    <p:column style="width:16px" headerText="Unidades">
                                        <p:rowToggler/>
                                    </p:column>
                                    <p:column headerText="Classe" styleClass="alinhamentoEsquerda">
                                        <h:outputText
                                            value="#{correcaoDadosAdministrativoControlador.buscarNomeDaClasse(classe)}"/>
                                    </p:column>
                                    <p:rowExpansion>
                                        <p:dataTable id="unidadesBloqueadas"
                                                     value="#{correcaoDadosAdministrativoControlador.getUnidadesBloqueadas(classe)}"
                                                     var="unidade">
                                            <p:column headerText="Unidade" styleClass="alinhamentoEsquerda">
                                                <h:outputText value="#{unidade.descricao}"/>
                                            </p:column>
                                        </p:dataTable>
                                    </p:rowExpansion>
                                </p:dataTable>
                            </p:tab>

                            <p:tab title="Bens">
                                <p:commandButton title="Clique para reiniciar o singleton"
                                                 value="Reiniciar"
                                                 icon="ui-icon-power"
                                                 styleClass="mtop10 mrig05 operacao"
                                                 update=":Formulario"
                                                 process="@this"
                                                 actionListener="#{correcaoDadosAdministrativoControlador.resetarBloqueioBens()}"/>

                                <p:dataTable id="tabelaBensBloqueado"
                                             value="#{correcaoDadosAdministrativoControlador.bensBloqueados}"
                                             var="BemBloq"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>MOVIMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Remover" styleClass="alinhamentoCentralizado"
                                              style="width: 5%">
                                        <p:commandButton icon="ui-icon-trash"
                                                         styleClass="mtop05 vinteLarguraVinteAltura"
                                                         onstart="aguarde.show()"
                                                         process="@this"
                                                         update="tabelaBensBloqueado"
                                                         actionListener="#{correcaoDadosAdministrativoControlador.resetarBloqueioBens(BemBloq)}"
                                                         oncomplete="aguarde.hide()"/>
                                    </p:column>
                                    <p:column headerText="Bem" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{BemBloq}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab title="Unidades Contrato">
                                <p:commandButton title="Clique para reiniciar o singleton"
                                                 value="Reiniciar"
                                                 icon="ui-icon-power"
                                                 styleClass="mtop10 mrig05 operacao"
                                                 update=":Formulario"
                                                 process="@this"
                                                 actionListener="#{correcaoDadosAdministrativoControlador.reiniciarSingletonUnidadeContrato()}"/>

                                <p:dataTable id="tabelaUnidCont"
                                             value="#{correcaoDadosAdministrativoControlador.unidadesContrato}"
                                             var="uniCont"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>MOVIMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Remover" styleClass="alinhamentoCentralizado"
                                              style="width: 5%">
                                        <p:commandButton icon="ui-icon-trash"
                                                         styleClass="mtop05 vinteLarguraVinteAltura"
                                                         onstart="aguarde.show()"
                                                         process="@this"
                                                         update="tabelaUnidCont"
                                                         actionListener="#{correcaoDadosAdministrativoControlador.removerUnidadeContratoSingleton(uniCont)}"
                                                         oncomplete="aguarde.hide()"/>
                                    </p:column>
                                    <p:column headerText="Unidade" styleClass="alinhamentoEsquerda">
                                        <fc:codigo-descricao-hierarquia
                                            dataMovimento="#{correcaoDadosAdministrativoControlador.dataOperacao}"
                                            tipoHierarquia="ADMINISTRATIVA"
                                            unidadeOrganizacional="#{uniCont}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab title="Saída Requisição Material">
                                <p:commandButton title="Clique para reiniciar o singleton"
                                                 value="Reiniciar"
                                                 icon="ui-icon-power"
                                                 styleClass="mtop10 mrig05 operacao"
                                                 update=":Formulario"
                                                 process="@this"
                                                 actionListener="#{correcaoDadosAdministrativoControlador.reiniciarSingletonSaidaRequisicaoMaterial()}"/>

                                <p:dataTable id="tabelaSaidaReqMat"
                                             value="#{correcaoDadosAdministrativoControlador.requisicoesMateriais}"
                                             var="reqMat"
                                             rowStyleClass="#{empty rowlx or rowlx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                             paginator="true"
                                             styleClass="mtop10"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10' maiuscula>MOVIMENTOS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                             emptyMessage="Não foram localizados registros para serem apresentados."
                                             rowIndexVar="rowlx">
                                    <p:column headerText="Remover" styleClass="alinhamentoCentralizado"
                                              style="width: 5%">
                                        <p:commandButton icon="ui-icon-trash"
                                                         styleClass="mtop05 vinteLarguraVinteAltura"
                                                         onstart="aguarde.show()"
                                                         process="@this"
                                                         update="tabelaSaidaReqMat"
                                                         actionListener="#{correcaoDadosAdministrativoControlador.removerRequisicaoMaterialSingleton(reqMat)}"
                                                         oncomplete="aguarde.hide()"/>
                                    </p:column>
                                    <p:column headerText="Requisição de Material" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{reqMat}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                        </p:tabView>
                    </p:tab>

                    <p:tab title="Remover Evento Duplicado de Transferência">
                        <p:outputPanel id="panelTransferencia">
                            <h:panelGrid columns="3">
                                <h:outputLabel value="Efetivação de Transferência: "/>
                                <p:autoComplete queryDelay="1000"
                                                value="#{correcaoDadosAdministrativoControlador.efetivacaoTransferencia}"
                                                completeMethod="#{correcaoDadosAdministrativoControlador.completarEfetivacaoTransferencia}"
                                                converter="#{loteEfetivacaoTransferenciaBemControlador.converterGenerico}"
                                                var="efet"
                                                size="70"
                                                dropdown="true"
                                                panelStyle="max-height: 230px;max-width: 800px"
                                                itemLabel="#{efet}"
                                                itemValue="#{efet.id}"
                                                maxResults="50">
                                    <p:ajax event="itemSelect"
                                            update="panelVerTransferencia"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            process="@this"/>
                                </p:autoComplete>

                                <p:outputPanel id="panelVerTransferencia">
                                    <fc:botaoTargetBlank style="height: 25px; width: 25px"
                                                         styleClass="mlef05"
                                                         icon="ui-icon-search"
                                                         disabled="#{correcaoDadosAdministrativoControlador.efetivacaoTransferencia eq null}"
                                                         actionListener="#{loteEfetivacaoTransferenciaBemControlador.redirecionarParaEfetivacaoTransferenciaBemMovel(correcaoDadosAdministrativoControlador.efetivacaoTransferencia)}"/>
                                </p:outputPanel>
                            </h:panelGrid>

                            <p:commandButton value="Consultar Bens"
                                             icon="ui-icon-check"
                                             styleClass="mtop10 operacao prioritario"
                                             onstart="aguarde.show()"
                                             update=":Formulario:tabGeral:panelTransferencia"
                                             process=":Formulario:tabGeral:panelTransferencia"
                                             actionListener="#{correcaoDadosAdministrativoControlador.consultarBensEfetivacaoTransferencia()}"
                                             oncomplete="aguarde.hide()"/>

                            <p:dataTable
                                id="bensTransferencia"
                                value="#{correcaoDadosAdministrativoControlador.selecionado.bens}"
                                var="bemTransf"
                                styleClass="mtop10"
                                rowIndexVar="rowIx"
                                rowStyleClass="#{bemTransf eq correcaoDadosAdministrativoControlador.bemEfetivacaoTransferencia ? 'fundo-verde' : ''}"
                                emptyMessage="Não foram localizados registros para serem apresentados"
                                paginator="true"
                                rows="10"
                                rowsPerPageTemplate="100,200,300"
                                currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Bens&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

                                <p:column style="width:2px" headerText="Evento Bem"
                                          styleClass="alinhamentoCentralizado">
                                    <p:commandButton icon="ui-icon-search"
                                                     styleClass="vinteLarguraVinteAltura"
                                                     onstart="aguarde.show()"
                                                     process="@this"
                                                     update=":formInfoTransf bensTransferencia"
                                                     actionListener="#{correcaoDadosAdministrativoControlador.recuperarEventoBem(bemTransf)}"
                                                     oncomplete="aguarde.hide();dlgTransferencia.show()"/>
                                </p:column>
                                <p:column headerText="Id Bem" style=" text-align: left">
                                    <h:outputText value="#{bemTransf.id}"/>
                                </p:column>
                                <p:column headerText="Registro" style=" text-align: left">
                                    <h:outputText value="#{bemTransf.identificacao}"/>
                                </p:column>
                                <p:column headerText="Descrição" style=" text-align: left">
                                    <h:outputText value="#{bemTransf.descricao}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Atualizar Item Documento Fiscal">
                        <p:commandButton value="Atualizar Valor Liquidado do Documento Fiscal"
                                         icon="ui-icon-check"
                                         styleClass="mtop10 operacao"
                                         onstart="aguarde.show()"
                                         process="@form"
                                         actionListener="#{correcaoDadosAdministrativoControlador.atualizarValorLiquidadoItemDocumentoFiscal()}"
                                         oncomplete="aguarde.hide()"/>

                        <p:dataTable
                            value="#{correcaoDadosAdministrativoControlador.selecionado.itensDocumentoEntrada}"
                            var="itemDoc"
                            styleClass="mbot10"
                            rowIndexVar="rowIx"
                            emptyMessage="Não foram localizados registros para serem apresentados"
                            paginator="true"
                            rows="10"
                            paginatorPosition="top"
                            rowsPerPageTemplate="100,200,300"
                            currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                            paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Itens&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
                            <p:column headerText="Material" style=" text-align: left">
                                <h:outputText
                                    value="#{itemDoc.itemDoctoItemEntrada.itemEntradaMaterial.material.codigo}"/>
                            </p:column>
                            <p:column headerText="Situação" style=" text-align: left">
                                <h:outputText value="#{itemDoc.itemDoctoItemEntrada.situacao.descricao}"/>
                            </p:column>
                            <p:column headerText="Valor Item" style=" text-align: left">
                                <h:outputText value="#{itemDoc.itemDoctoItemEntrada.itemEntradaMaterial.valorTotal}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Valor Liquidado" style=" text-align: left">
                                <h:outputText value="#{itemDoc.itemDoctoItemEntrada.valorLiquidado}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Id - Número Documento" style=" text-align: left">
                                <h:outputText
                                    value="#{itemDoc.itemDoctoItemEntrada.doctoFiscalEntradaCompra.doctoFiscalLiquidacao.id}
                                                    - #{itemDoc.itemDoctoItemEntrada.doctoFiscalEntradaCompra.doctoFiscalLiquidacao.numero}"/>
                            </p:column>
                            <p:column headerText="Total Liquidado do Documento" style=" text-align: left">
                                <h:outputText value="#{itemDoc.valorLiquidadoDocumento}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Inserir Efetivação Material">
                        <p:commandButton value="Inserir Efetivação Material"
                                         icon="ui-icon-check"
                                         styleClass="mtop10 operacao"
                                         onstart="aguarde.show()"
                                         process="@form"
                                         actionListener="#{correcaoDadosAdministrativoControlador.inserirEfetivacaoMaterial()}"
                                         oncomplete="aguarde.hide()"/>

                    </p:tab>


                    <p:tab title="Reprocessar Movimentos Alteração Contratual">
                        <h:panelGrid columns="3" id="grid-alteracao">
                            <h:outputLabel value="Alteração Contratual: "/>
                            <p:autoComplete queryDelay="1000"
                                            value="#{correcaoDadosAdministrativoControlador.selecionado.alteracaoContratual}"
                                            completeMethod="#{correcaoDadosAdministrativoControlador.completarAlteracaoContratual}"
                                            converter="#{alteracaoContratualContratoControlador.converterGenerico}"
                                            var="ac"
                                            size="70"
                                            dropdown="true"
                                            panelStyle="max-height: 230px;max-width: 800px"
                                            itemLabel="#{ac}"
                                            itemValue="#{ac.id}"
                                            maxResults="50">
                                <p:ajax event="itemSelect"
                                        update=":Formulario:tabGeral:tabela-alteracoes"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        listener="#{correcaoDadosAdministrativoControlador.listenerAlteracaoContratual()}"
                                        process=":Formulario:tabGeral:grid-alteracao @this"/>
                            </p:autoComplete>
                        </h:panelGrid>

                        <p:commandButton value="Reprocessar"
                                         icon="ui-icon-check"
                                         styleClass="mtop10 operacao prioritario"
                                         onstart="aguarde.show()"
                                         update=":Formulario:tabGeral:tabela-alteracoes"
                                         process=":Formulario:tabGeral:grid-alteracao @this"
                                         actionListener="#{correcaoDadosAdministrativoControlador.reprocessarAlteracaoContratual()}"
                                         oncomplete="aguarde.hide()"/>

                        <p:dataTable
                            id="tabela-alteracoes"
                            value="#{correcaoDadosAdministrativoControlador.selecionado.alteracoesContratuais}"
                            var="alt"
                            styleClass="mtop10"
                            rowIndexVar="rowIx"
                            emptyMessage="Não foram localizados registros para serem apresentados"
                            paginator="true"
                            rows="10"
                            rowsPerPageTemplate="100,200,300"
                            currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                            paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Bens&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
                            <p:column headerText="Tipo" style=" text-align: left">
                                <h:outputText value="#{alt.tipoAlteracaoContratual.descricao}"/>
                            </p:column>
                            <p:column headerText="Número" style=" text-align: left">
                                <h:outputText value="#{alt.numero} / #{alt.numeroAnoTermo}"/>
                            </p:column>
                            <p:column>
                                <p:commandButton icon="ui-icon-check"
                                                 value="Unificar Movimentos"
                                                 styleClass="mtop10 operacao prioritario"
                                                 onstart="aguarde.show()"
                                                 update=":Formulario:tabGeral:tabela-alteracoes"
                                                 process="@this"
                                                 actionListener="#{correcaoDadosAdministrativoControlador.unificarMovimentoAlteracaoContratual(alt)}"
                                                 oncomplete="aguarde.hide()"/>
                            </p:column>
                            <p:column headerText="Movimentos" style=" text-align: left">
                                <p:dataTable value="#{alt.movimentos}"
                                             var="mov">
                                    <p:column headerText="Operação" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{mov.operacao.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Finalidade" styleClass="alinhamentoEsquerda">
                                        <h:outputText value="#{mov.finalidade.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Variação" styleClass="alinhamentoEsquerda">
                                        <h:outputText
                                            value="#{utilBean.converterBooleanSimOuNao(mov.valorVariacaoContrato)}"/>
                                    </p:column>

                                    <p:column headerText="Vigência" styleClass="alinhamentoEsquerda">
                                        <h:panelGrid columns="2"
                                                     rendered="#{mov.inicioVigencia ne null}">
                                            <h:outputText
                                                value="Início de Vigência:"/>
                                            <h:outputText
                                                value="#{mov.inicioVigencia}">
                                                <f:convertDateTime type="date"/>
                                            </h:outputText>

                                            <h:outputText
                                                value="Término de Vigência:"/>
                                            <h:outputText
                                                value="#{mov.terminoVigencia}">
                                                <f:convertDateTime type="date"/>
                                            </h:outputText>
                                        </h:panelGrid>
                                    </p:column>

                                    <p:column headerText="Execução" styleClass="alinhamentoEsquerda">
                                        <h:panelGrid columns="2"
                                                     rendered="#{mov.inicioExecucao ne null}">
                                            <h:outputText
                                                value="Início de Execução:"/>
                                            <h:outputText
                                                value="#{mov.inicioExecucao}">
                                                <f:convertDateTime type="date"/>
                                            </h:outputText>

                                            <h:outputText
                                                value="Término de Execução:"/>
                                            <h:outputText
                                                value="#{mov.terminoExecucao}">
                                                <f:convertDateTime type="date"/>
                                            </h:outputText>
                                        </h:panelGrid>
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                        </p:dataTable>
                    </p:tab>


                    <p:tab title="Reprocessar Contratos">
                        <p:commandButton value="Reprocessar Contratos"
                                         icon="ui-icon-check"
                                         styleClass="mtop10 operacao prioritario"
                                         onstart="aguarde.show()"
                                         update=":Formulario:tabGeral:tabela-alteracoes"
                                         process=":Formulario:tabGeral:grid-alteracao @this"
                                         actionListener="#{correcaoDadosAdministrativoControlador.reprocessarContratos()}"
                                         oncomplete="aguarde.hide()"/>
                    </p:tab>

                </p:tabView>
            </p:panel>
        </h:form>

        <p:dialog widgetVar="dlgTransferencia"
                  showHeader="false"
                  modal="true"
                  dynamic="true"
                  width="1100"
                  position="center"
                  style="position: fixed !important;"
                  resizable="false">
            <h:form id="formInfoTransf">
                <h:outputText value="Bem: " style="font-size: 12px"/>
                <h:outputText value="#{correcaoDadosAdministrativoControlador.bemEfetivacaoTransferencia}"
                              style="font-size: 12px"
                              styleClass="azulnegrito"/>

                <p:dataTable id="tablebensparatransferir"
                             value="#{correcaoDadosAdministrativoControlador.bemEfetivacaoTransferencia.eventosBem}"
                             var="evTransf"
                             style="overflow: scroll;  width: auto; height: 400px"
                             rowStyleClass="#{correcaoDadosAdministrativoControlador.isEventoTransferencia(evTransf) ? 'fundo-amarelo-padrao' : 'fundo-verde'}"
                             styleClass="mtop10"
                             rowIndexVar="rowIx"
                             emptyMessage="Não foram localizados registros para serem apresentados"
                             paginator="true"
                             rows="100"
                             rowsPerPageTemplate="100,200,300"
                             currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                             paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Eventos do Bem&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

                    <p:column headerText="Remover" styleClass="alinhamentoCentralizado">
                        <p:commandButton icon="ui-icon-trash"
                                         styleClass="mtop05 vinteLarguraVinteAltura"
                                         onstart="aguarde.show()"
                                         process="@this"
                                         update=":formInfoTransf:tablebensparatransferir"
                                         disabled="#{correcaoDadosAdministrativoControlador.isMesmoEventoConcedido(evTransf)}"
                                         rendered="#{correcaoDadosAdministrativoControlador.isEventoTransferencia(evTransf)}"
                                         actionListener="#{correcaoDadosAdministrativoControlador.removerEventoBem(evTransf)}"
                                         oncomplete="aguarde.hide()"/>
                    </p:column>
                    <p:column headerText="Evento" styleClass="alinhamentoEsquerda">
                        <h:outputText value="#{evTransf.id}"/>
                    </p:column>
                    <p:column headerText="Data Operação" styleClass="alinhamentoEsquerda">
                        <h:outputText value="#{evTransf.dataOperacao}">
                            <f:convertDateTime type="both"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Operação" styleClass="alinhamentoEsquerda">
                        <h:outputText value="#{evTransf.tipoEventoBem.descricao}"/>
                    </p:column>
                    <p:column headerText="Situação" styleClass="alinhamentoEsquerda">
                        <h:outputText value="#{evTransf.situacaoEventoBem.descricao}"/>
                    </p:column>
                </p:dataTable>

                <div style="text-align: center;">
                    <p:commandButton value="Confirmar"
                                     icon="ui-icon-check"
                                     styleClass="mtop05 mrig05 padrao"
                                     onstart="aguarde.show()"
                                     process="@this"
                                     update=":Formulario:tabGeral:panelTransferencia"
                                     actionListener="#{correcaoDadosAdministrativoControlador.confirmarEventosRemovidos}"
                                     oncomplete="aguarde.hide()"/>

                    <p:commandButton value="Fechar"
                                     title="Clique para fechar a janela."
                                     icon="ui-icon-close"
                                     styleClass="mtop05 padrao"
                                     onstart="aguarde.show()"
                                     process="@none"
                                     update="@this"
                                     oncomplete="aguarde.hide();dlgTransferencia.hide()"/>
                </div>
            </h:form>
        </p:dialog>


        <div id="dlgProcesso" class="modal hide fade">
            <div class="modal-header alert-info" style="text-align: center">
                <div class="centralizado ">
                    <strong>Processando</strong>
                </div>
            </div>
            <h:form id="form-future">
                <div class="modal-body" style="text-align: center">
                    <h:outputText
                        value="#{correcaoDadosAdministrativoControlador.selecionado.assistenteBarraProgresso.descricaoProcesso}"/>
                    <br/>
                    <div
                        style="#{correcaoDadosAdministrativoControlador.selecionado.assistenteBarraProgresso.total == 0 ? 'display: block' : 'display: none'}">
                        <h:graphicImage
                            value="#{facesContext.externalContext.requestContextPath}/img/ajaxloading.gif"
                            styleClass="mtop05 mlef05"/>
                    </div>

                    <div
                        style="#{correcaoDadosAdministrativoControlador.selecionado.assistenteBarraProgresso.total > 0 ? 'display: block' : 'display: none'}">
                        <h:outputText
                            value="#{correcaoDadosAdministrativoControlador.selecionado.assistenteBarraProgresso.porcentagemDoCalculo}">
                            <f:convertNumber type="number"
                                             maxIntegerDigits="5"
                                             maxFractionDigits="0"/>
                        </h:outputText>%

                        <div class="progress progress-striped active"
                             style="display: block">
                            <div class="bar"
                                 style="width: #{correcaoDadosAdministrativoControlador.selecionado.assistenteBarraProgresso.porcentagemDoCalculo}%;"></div>
                        </div>
                    </div>

                    <br/>
                    <div align="center"
                         style="display: block">
                        <h:outputText
                            value="Tempo Decorrido #{correcaoDadosAdministrativoControlador.selecionado.assistenteBarraProgresso.tempoDecorrido}"/>
                        <br/>
                        <h:outputText
                            value="Tempo Estimado #{correcaoDadosAdministrativoControlador.selecionado.assistenteBarraProgresso.tempoEstimado}"/>
                    </div>
                </div>
            </h:form>
        </div>

    </ui:define>
</ui:composition>
</html>
