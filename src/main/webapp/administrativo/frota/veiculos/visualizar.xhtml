<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:adm="http://java.sun.com/jsf/composite/components/administrativo"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">
            <p:panel header="Detalhes do Veículo">
                <p:tabView id="tabview-geral" styleClass="mtop05">
                    <p:tab title="Dados do Veículo">
                        <h:panelGrid columns="2">
                            <h:outputLabel for="hierarquia" value="Órgão/Entidade/Fundo Vigente:"/>
                            <h:outputText value="#{veiculoControlador.selecionado.hierarquiaOrganizacional}"
                                          id="hierarquia"
                                          styleClass="negrito"/>

                            <h:outputLabel for="hierarquiaResp" value="Unidade Organizacional Responsável: "/>
                            <h:outputText value="#{veiculoControlador.selecionado.hierarquiaOrganizacionalResponsavel}"
                                          id="hierarquiaResp"
                                          styleClass="negrito"/>

                            <h:outputText value="Identificação: "/>
                            <h:outputText value="#{veiculoControlador.selecionado.identificacao}"
                                          styleClass="negrito"/>

                            <h:outputText value="Cedido: "/>
                            <h:outputText value="#{veiculoControlador.selecionado.cedido ? 'Sim' : 'Não'}"
                                          styleClass="negrito"/>

                            <h:outputText value="Cedido Por: "
                                          rendered="#{veiculoControlador.selecionado.cedido}"/>
                            <h:outputText value="#{veiculoControlador.selecionado.cedidoPor}"
                                          rendered="#{veiculoControlador.selecionado.cedido}"
                                          styleClass="negrito"/>

                            <h:outputLabel for="categoriaVeiculo" value="Categoria: "/>
                            <h:outputText value="#{veiculoControlador.selecionado.categoria.descricao}"
                                          id="categoriaVeiculo"
                                          styleClass="negrito"/>

                            <h:outputLabel value="Tipo de Frota:"/>
                            <h:outputLabel value="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.descricao}"
                                           styleClass="negrito"/>
                            <h:outputLabel for="descricaoCedido" value="Descrição: "
                                           rendered="#{veiculoControlador.selecionado.cedido}"/>
                            <h:outputText value="#{veiculoControlador.selecionado.descricao}"
                                          rendered="#{veiculoControlador.selecionado.cedido}"
                                          id="descricaoCedido"
                                          styleClass="negrito"/>

                            <h:outputLabel value="Tipo Caminhão: "
                                           rendered="#{veiculoControlador.selecionado.categoria eq 'CAMINHAO'}"/>
                            <h:outputText value="#{veiculoControlador.selecionado.tipoCaminhao.descricao}"
                                          styleClass="negrito"
                                          rendered="#{veiculoControlador.selecionado.categoria eq 'CAMINHAO'}"/>

                            <h:outputLabel value="Contrato:"
                                           rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'ALUGADO'}"/>
                            <h:outputLabel value="#{veiculoControlador.selecionado.contrato}"
                                           rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'ALUGADO'}"
                                           styleClass="negrito"/>

                            <h:outputText value="Objeto: "
                                          rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'ALUGADO'}"/>
                            <h:outputText value="#{veiculoControlador.selecionado.contrato.objeto}"
                                          rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'ALUGADO'}"/>

                            <h:outputText value="Data do Contrato: "
                                          rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'ALUGADO'}"/>
                            <h:outputText value="#{veiculoControlador.selecionado.contrato.inicioVigencia}"
                                          rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'ALUGADO'}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputText value="Validade do Contrato: "
                                          rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'ALUGADO'}"/>
                            <h:outputText value="#{veiculoControlador.selecionado.contrato.terminoVigencia}"
                                          rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'ALUGADO'}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputText value="Descrição:"
                                          rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'ALUGADO'}"/>
                            <h:outputText id="descricao"
                                          rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'ALUGADO'}"
                                          value="#{veiculoControlador.selecionado.descricao}"
                                          styleClass="negrito"/>
                            <h:outputLabel for="bem"
                                           value="Bem Patrimonial:"
                                           rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'PROPRIO'}"/>
                            <h:panelGroup
                                rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'PROPRIO'}">

                                <adm:detalhes-do-bem bem="#{veiculoControlador.selecionado.bem}"/>

                                <h:outputText value="#{veiculoControlador.selecionado.bem}" id="bem"
                                              styleClass="negrito"/>

                            </h:panelGroup>

                            <h:outputLabel for="dataAquisicao" value="Data de Aquisição:"
                                           rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'PROPRIO'}"/>
                            <h:outputLabel id="dataAquisicao"
                                           value="#{veiculoControlador.selecionado.dataAquisicao}"
                                           rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'PROPRIO'}"
                                           styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputLabel>

                            <h:outputLabel for="marca" value="Marca:"
                                           rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'PROPRIO'}"/>
                            <h:outputLabel id="marca"
                                           rendered="#{veiculoControlador.selecionado.tipoAquisicaoObjetoFrota.name() eq 'PROPRIO'}"
                                           value="#{veiculoControlador.selecionado.bem.marca}" styleClass="negrito"/>

                            <h:outputLabel for="placa" value="Placa:"/>
                            <h:outputLabel id="placa" style="text-transform: uppercase"
                                           value="#{veiculoControlador.selecionado.placa}" styleClass="negrito"/>

                            <h:outputLabel for="anoFabricacao" value="Ano de Fabricação:"/>
                            <h:outputText value="#{veiculoControlador.selecionado.anoFabricacao}"
                                          id="anoFabricacao"
                                          styleClass="negrito"/>

                            <h:outputLabel for="cor" value="Cor:"/>
                            <h:outputText value="#{veiculoControlador.selecionado.cor.descricao}"
                                          id="cor"
                                          styleClass="negrito"/>

                            <h:outputLabel for="kmAquisicao" value="Km Aquisição/Contratação:"/>
                            <h:outputText value="#{veiculoControlador.selecionado.kmAquisicao}"
                                          id="kmAquisicao"
                                          styleClass="negrito">
                                <f:convertNumber pattern="###,##0.00"/>
                            </h:outputText>

                            <h:outputLabel for="kmAtual" value="Km Atual Inicial:"/>
                            <h:panelGroup>
                                <h:outputText value="#{veiculoControlador.selecionado.kmAtual}"
                                              id="kmCadastro"
                                              styleClass="negrito">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                                <h:outputText value="Km atual no ato do cadastro do veículo" styleClass="azul mlef10"/>
                            </h:panelGroup>

                            <h:outputLabel for="kmAtual" value="Km Atual:"/>
                            <h:panelGroup>
                                <h:outputText value="#{veiculoControlador.selecionado.kmPercorrido.kmAtual}"
                                              id="kmAtual"
                                              styleClass="negrito">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                                <h:outputText
                                    value="km atual atualizado conforme movimentos do veículo"
                                    styleClass="azul mlef10"/>
                            </h:panelGroup>


                            <h:outputText value="Data Final Garantia:"/>
                            <h:outputText value="#{veiculoControlador.selecionado.dataFinalGarantia}"
                                          styleClass="negrito">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>

                            <h:outputLabel for="kmFinalGarantia" value="Km Final Garantia:"/>
                            <h:outputText value="#{veiculoControlador.selecionado.kmFimGarantia}"
                                          id="kmFinalGarantia"
                                          styleClass="negrito">
                                <f:convertNumber pattern="###,##0.00"/>
                            </h:outputText>

                            <h:outputLabel value="Observações:"/>
                            <h:panelGrid columns="2"
                                         cellpadding="0"
                                         cellspacing="0">
                                <p:inputTextarea value="#{veiculoControlador.selecionado.observacao}"
                                                 cols="70"
                                                 rows="5"
                                                 readonly="true"
                                                 maxlength="255"
                                                 counterTemplate="{0} Caracteres Restantes."
                                                 counter="counter-descricao"/>
                                <h:outputText id="counter-descricao"
                                              style="color: #497692"
                                              styleClass="mlef05"/>
                            </h:panelGrid>
                        </h:panelGrid>
                    </p:tab>

                    <p:tab title="Unidades">
                        <p:dataTable paginator="true"
                                     id="tabela-unidades"
                                     rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     rowIndexVar="rowIx"
                                     styleClass="mtop03"
                                     emptyMessage="Não foram localizados registros para serem apresentados"
                                     value="#{veiculoControlador.selecionado.unidades}"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>Unidades&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     rowsPerPageTemplate="10,25,50,100"
                                     var="unid">
                            <p:column headerText="Unidade Organizacional" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{unid.hierarquiaOrganizacional}"/>
                            </p:column>
                            <p:column headerText="Início de Vigência" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{unid.inicioVigencia}">
                                    <f:convertDateTime type="date"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Fim de Vigência" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{unid.fimVigencia}">
                                    <f:convertDateTime type="date"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Programa de Revisão do Veículo">
                        <p:dataTable paginator="true"
                                     id="tabelaProgramaRevisaoVeiculo"
                                     rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     rowIndexVar="rowIx"
                                     styleClass="mtop03"
                                     emptyMessage="Não foram localizados registros para serem apresentados"
                                     value="#{veiculoControlador.selecionado.programaRevisao}"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>Programações&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     rowsPerPageTemplate="10,25,50,100"
                                     var="programaRevisao">
                            <p:column headerText="Data de Lançamento" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{programaRevisao.dataLancamento}">
                                    <f:convertDateTime type="both"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Sequência" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{programaRevisao.sequencia}"/>
                            </p:column>
                            <p:column headerText="Vencimento por Quilometragem" styleClass="alinhamentoDireita">
                                <h:outputText value="#{programaRevisao.km} quilômetros"/>
                            </p:column>
                            <p:column headerText="Vencimento por Prazo" styleClass="alinhamentoDireita">
                                <h:outputText value="#{programaRevisao.prazo} meses"/>
                            </p:column>
                            <p:column headerText="Realizada" styleClass="alinhamentoCentralizado">
                                <h:outputText
                                    value="#{utilBean.converterBooleanSimOuNao(programaRevisao.revisaoRealizada)}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Movimentações de Km do Veículo">
                        <p:dataTable paginator="true"
                                     id="movimento-km"
                                     rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     rowIndexVar="rowIx"
                                     styleClass="mtop03"
                                     emptyMessage="Não foram localizados registros para serem apresentados"
                                     value="#{veiculoControlador.selecionado.kmPercorridos}"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>Movimentações&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     rowsPerPageTemplate="10,25,50,100"
                                     var="km">
                            <p:column headerText="#" style="width: 15px; text-align: center;">
                                <h:outputText value="#{rowIx+1}" styleClass="negrito"/>
                            </p:column>
                            <p:column headerText="Data de Lançamento" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{km.dataLancamento}">
                                    <f:convertDateTime type="both"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Km Atual" styleClass="alinhamentoDireita">
                                <h:outputText value="#{km.kmAtual}">
                                    <f:convertNumber pattern="###,##0.00"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </p:tab>


                    <p:tab title="Anexos">
                        <p:outputPanel id="panel-arquivos">
                            <fc:filesUploadWP selecionado="#{veiculoControlador.selecionado}" isTelaEditar="false"/>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Baixa" rendered="#{veiculoControlador.selecionado.baixaObjetoFrota ne null}">
                        <p:outputPanel>
                            <h:panelGrid columns="2">
                                <h:outputText value="Código: "/>
                                <h:outputText value="#{veiculoControlador.selecionado.baixaObjetoFrota.codigo}"
                                              styleClass="negrito"/>

                                <h:outputText value="Data: "/>
                                <h:outputText value="#{veiculoControlador.selecionado.baixaObjetoFrota.dataBaixa}"
                                              styleClass="negrito">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>

                                <h:outputText value="Responsável: "/>
                                <h:outputText
                                    value="#{veiculoControlador.selecionado.baixaObjetoFrota.responsavel.pessoaFisica}"
                                    styleClass="negrito"/>

                                <h:outputText value="Motivo:"/>
                                <p:inputTextarea id="ipt-motivo"
                                                 cols="70" rows="5"
                                                 title="Digite o motivo da baixa"
                                                 value="#{veiculoControlador.selecionado.baixaObjetoFrota.motivo}"/>
                            </h:panelGrid>
                        </p:outputPanel>
                    </p:tab>
                </p:tabView>
            </p:panel>

            <fc:rodapeVisualizarPretty controlador="#{veiculoControlador}"
                                       mostrarEditar="#{veiculoControlador.selecionado.baixaObjetoFrota eq null}"
                                       mostrarExcluir="#{veiculoControlador.selecionado.baixaObjetoFrota eq null}"/>
        </h:form>
    </ui:define>
</ui:composition>
</html>
