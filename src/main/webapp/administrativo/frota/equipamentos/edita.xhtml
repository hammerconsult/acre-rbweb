<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:adm="http://java.sun.com/jsf/composite/components/administrativo"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <h:form id="Formulario">

            <p:remoteCommand name="limparDadosBem"
                             process="@this"
                             update=":Formulario:tb-view-geral:pn-geral"
                             actionListener="#{equipamentoControlador.limparDadosDoBem()}"/>

            <fc:cabecalhoPretty origem="#{equipamentoControlador.caminhoPadrao}listar"
                                controlador="#{equipamentoControlador}"/>

            <p:panel header="Cadastro de Equipamento/Máquina">
                <p:tabView id="tb-view-geral">
                    <p:tab title="Dados Gerais">
                        <p:outputPanel id="pn-geral">
                            <h:panelGrid id="panel-geral" columns="2" cellspacing="2" cellpadding="2">
                                <h:outputText value="Órgão/Entidade/Fundo Vigente: "/>
                                <h:panelGroup>
                                    <h:outputText
                                        value="#{equipamentoControlador.selecionado.hierarquiaOrganizacional ne null ? equipamentoControlador.selecionado.hierarquiaOrganizacional : 'Utilize a aba unidades para informar o campo Órgão/Entidade/Fundo'}"
                                        styleClass="negrito"/>
                                </h:panelGroup>


                                <h:outputText value="Unidade Organizacional Responsável: "/>
                                <h:panelGroup>
                                    <p:autoComplete queryDelay="1000" id="acUnidadeResponsavel"
                                                    completeMethod="#{equipamentoControlador.completaHierarquiaOrganizacionalFrotasFilhas}"
                                                    converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                                    var="unidResp"
                                                    size="70"
                                                    dropdown="true"
                                                    panelStyle="max-width: 800px;max-height: 250px"
                                                    maxResults="50"
                                                    itemValue="#{unidResp.id}"
                                                    itemLabel="#{unidResp}"
                                                    value="#{equipamentoControlador.selecionado.hierarquiaOrganizacionalResponsavel}">
                                        <p:ajax event="itemSelect" process="@this"/>
                                    </p:autoComplete>

                                    <p:watermark value="Selecione o Órgão/Entidade/Fundo." for="acUnidadeResponsavel"
                                                 rendered="#{equipamentoControlador.selecionado.hierarquiaOrganizacional eq null}"/>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio value="Identificação: "/>
                                <p:inputText value="#{equipamentoControlador.selecionado.identificacao}"
                                             maxlength="20"
                                             onkeypress="soAlfaNumerico(this)">
                                    <p:ajax event="blur" process="@this"/>
                                </p:inputText>

                                <h:outputText value="Cedido: "/>
                                <p:selectOneRadio value="#{equipamentoControlador.selecionado.cedido}">
                                    <f:selectItem itemValue="#{true}" itemLabel="Sim"/>
                                    <f:selectItem itemValue="#{false}" itemLabel="Não"/>
                                    <p:ajax event="valueChange"
                                            process="@this"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            update="pn-geral"
                                            listener="#{equipamentoControlador.processaSelecaoCedido()}"/>
                                </p:selectOneRadio>

                                <h:outputText value="Cedido Por: "
                                              rendered="#{equipamentoControlador.selecionado.cedido}"/>
                                <p:inputText value="#{equipamentoControlador.selecionado.cedidoPor}"
                                             size="70"
                                             maxlength="70"
                                             rendered="#{equipamentoControlador.selecionado.cedido}"/>

                                <fc:outputLabelObrigatorio value="Tipo de Frota: "
                                                           rendered="#{!equipamentoControlador.selecionado.cedido}"/>
                                <h:selectOneMenu id="tipoFrota" rendered="#{!equipamentoControlador.selecionado.cedido}"
                                                 title="Selecione o tipo de frota"
                                                 value="#{equipamentoControlador.selecionado.tipoAquisicaoObjetoFrota}">
                                    <f:selectItems value="#{equipamentoControlador.tipos()}"/>
                                    <p:ajax event="valueChange"
                                            process="@this"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            update="pn-geral"
                                            listener="#{equipamentoControlador.processarMudancaDeTipo()}"/>
                                </h:selectOneMenu>

                                <fc:outputLabelObrigatorio for="contrato"
                                                           value="Contrato: "
                                                           rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaAlugado()}"/>
                                <p:autoComplete queryDelay="1000" id="contrato"
                                                value="#{equipamentoControlador.selecionado.contrato}"
                                                completeMethod="#{contratoAdmControlador.completaContratoUnidadeLogada}"
                                                var="contrato"
                                                itemLabel="#{contrato}"
                                                itemValue="#{contrato.id}"
                                                size="70"
                                                dropdown="true"
                                                panelStyle="max-width: 800px;max-height: 250px"
                                                maxResults="50"
                                                rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaAlugado()}"
                                                converter="#{contratoAdmControlador.converterGenerico}">
                                    <p:ajax event="itemSelect"
                                            process="@this"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            update="pn-geral"
                                            listener="#{equipamentoControlador.processaSelecaoContrato()}"/>
                                </p:autoComplete>

                                <h:outputText value="Objeto: "
                                              rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaAlugado()}"/>
                                <h:outputText value="#{equipamentoControlador.selecionado.contrato.objeto}"
                                              styleClass="negrito"
                                              rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaAlugado()}"/>

                                <h:outputText value="Data do Contrato: "
                                              rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaAlugado()}"/>
                                <h:outputText
                                    value="#{equipamentoControlador.selecionado.contrato.inicioVigencia}"
                                    styleClass="negrito"
                                    rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaAlugado()}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>

                                <h:outputText value="Validade do Contrato: "
                                              rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaAlugado()}"/>
                                <h:outputText
                                    value="#{equipamentoControlador.selecionado.contrato.terminoVigencia}"
                                    styleClass="negrito"
                                    rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaAlugado()}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>

                                <fc:outputLabelObrigatorio for="descricao"
                                                           value="Descrição:"
                                                           rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaAlugado()  or  equipamentoControlador.selecionado.cedido}"/>
                                <h:panelGrid columns="2" cellspacing="0" cellpadding="0"
                                             rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaAlugado() or equipamentoControlador.selecionado.cedido}">
                                    <p:inputTextarea value="#{equipamentoControlador.selecionado.descricao}"
                                                     id="descricao"
                                                     rows="5"
                                                     scrollHeight="5"
                                                     autoResize="false"
                                                     counterTemplate="{0} Caracteres Restantes."
                                                     counter="counterDesc"
                                                     maxlength="3000"
                                                     cols="70">
                                    </p:inputTextarea>
                                    <h:outputText id="counterDesc" styleClass="azul mlef05"/>
                                </h:panelGrid>

                                <fc:outputLabelObrigatorio value="Bem Patrimonial:"
                                                           rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaProprio()}"/>
                                <h:panelGroup
                                    rendered="#{equipamentoControlador.isTipoAquisicaoObjetoFrotaProprio()}">
                                    <p:autoComplete queryDelay="1000"
                                                    id="acBem"
                                                    title="Digite a descrição do bem patrimonial ligado a este equipamento"
                                                    value="#{equipamentoControlador.selecionado.bem}"
                                                    completeMethod="#{equipamentoControlador.completarBem}"
                                                    var="bem"
                                                    dropdown="true"
                                                    panelStyle="max-width: 800px;max-height: 250px"
                                                    maxResults="50"
                                                    itemLabel="#{bem}"
                                                    itemValue="#{bem.id}"
                                                    size="70"
                                                    styleClass="mrig05"
                                                    onkeyup="if(keyUpCampoVazio(this)){limparDadosBem()}"
                                                    converter="#{bemControlador.converterBem}"
                                                    disabled="#{equipamentoControlador.selecionado.hierarquiaOrganizacional == null}">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                update=":Formulario:tb-view-geral:pn-geral"/>
                                    </p:autoComplete>

                                    <p:outputPanel id="panelDetalhesBem"
                                                   rendered="#{equipamentoControlador.selecionado.bem ne null}">
                                        <adm:detalhes-do-bem bem="#{equipamentoControlador.selecionado.bem}"/>
                                    </p:outputPanel>

                                    <p:watermark
                                        value="Filtra Órgão/Entidade/Fundo e grupo patrimonial do parâmetro frota"
                                        for="acBem"/>
                                </h:panelGroup>

                                <h:outputLabel
                                    rendered="#{equipamentoControlador.selecionado.bem ne null}"
                                    for="dataAquisicaoBem" value="Data de Aquisição:"/>
                                <h:outputLabel id="dataAquisicaoBem"
                                               styleClass="negrito"
                                               rendered="#{equipamentoControlador.selecionado.bem ne null}"
                                               value="#{equipamentoControlador.selecionado.bem.dataAquisicao}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputLabel>

                                <h:outputLabel
                                    rendered="#{equipamentoControlador.selecionado.bem ne null}"
                                    for="marcaBem" value="Marca:"/>
                                <h:outputText id="marcaBem"
                                              styleClass="negrito"
                                              rendered="#{equipamentoControlador.selecionado.bem ne null}"
                                              value="#{equipamentoControlador.selecionado.bem.marca}"/>


                                <fc:outputLabelObrigatorio value="Data de Aquisição:"
                                                           rendered="#{equipamentoControlador.selecionado.cedido}"/>
                                <p:calendar title="Digite a data de aquisição do equipamento."
                                            value="#{equipamentoControlador.selecionado.dataAquisicao}"
                                            onkeypress="mascara(this, mdata)"
                                            rendered="#{equipamentoControlador.selecionado.cedido}"
                                            id="dataAquisicao"
                                            locale="pt_BR"
                                            size="15"
                                            navigator="true"
                                            showOn="button"
                                            pattern="dd/MM/yyyy"/>

                                <fc:outputLabelObrigatorio value="Hora(s) de Uso Aquisição:"/>
                                <p:inputText value="#{equipamentoControlador.selecionado.horasUsoAquisicao}">
                                    <f:convertNumber pattern="#0.#" maxFractionDigits="1"/>
                                    <p:ajax event="blur" update="@this" process="@this"/>
                                </p:inputText>

                                <fc:outputLabelObrigatorio value="Ano: "/>
                                <p:inputMask value="#{equipamentoControlador.selecionado.ano}" mask="9999"/>


                                <fc:outputLabelObrigatorio for="horaUsoInicicial" value="Hora(s) de Uso:"/>
                                <h:panelGroup>
                                    <p:inputText id="horaUsoInicicial"
                                                 value="#{equipamentoControlador.selecionado.horasUso}"
                                                 rendered="#{equipamentoControlador.operacaoNovo}">
                                        <f:convertNumber pattern="#0.#" maxFractionDigits="1"/>
                                        <p:ajax event="blur" update="@this" process="@this"/>
                                    </p:inputText>
                                    <h:outputText value="#{equipamentoControlador.selecionado.horasUso}"
                                                  rendered="#{equipamentoControlador.operacaoEditar}"
                                                  styleClass="negrito">
                                        <f:convertNumber pattern="###0.0" maxFractionDigits="1"/>
                                    </h:outputText>

                                    <h:outputText
                                        value="Hora uso no ato do cadastro do equipamento"
                                        styleClass="azul mlef10"/>
                                </h:panelGroup>

                                <h:outputLabel value="Hora(s) de Uso Atual:"
                                               rendered="#{equipamentoControlador.operacaoEditar}"/>
                                <h:panelGroup rendered="#{equipamentoControlador.operacaoEditar}">
                                    <h:outputText value="#{equipamentoControlador.selecionado.horaPercorrida.horaAtual}"
                                                  styleClass="negrito">
                                        <f:convertNumber pattern="###0.0" maxFractionDigits="1"/>
                                    </h:outputText>

                                    <h:outputText
                                        value="Hora(s) uso atual,  atualizado conforme movimentos do equipamento"
                                        styleClass="azul mlef10"/>
                                </h:panelGroup>

                                <h:outputText value="Data Final Garantia:"/>
                                <p:calendar title="Digite a data final de garantia do equipamento."
                                            value="#{equipamentoControlador.selecionado.dataFinalGarantia}"
                                            id="fimGarantia"
                                            onkeypress="mascara(this, mdata)"
                                            locale="pt_BR"
                                            showOn="button"
                                            size="15"
                                            navigator="true"
                                            pattern="dd/MM/yyyy"/>

                                <h:outputLabel value="Observações:"/>
                                <h:panelGrid columns="2"
                                             cellpadding="0"
                                             cellspacing="0">
                                    <p:inputTextarea title="Digite as observações do equipamento"
                                                     value="#{equipamentoControlador.selecionado.observacao}"
                                                     cols="70"
                                                     rows="5"
                                                     maxlength="255"
                                                     counterTemplate="{0} Caracteres Restantes."
                                                     counter="counter-descricao"/>
                                    <h:outputText id="counter-descricao"
                                                  style="color: #497692"
                                                  styleClass="mlef05"/>
                                </h:panelGrid>
                            </h:panelGrid>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Unidades">
                        <p:outputPanel id="panelUnidades">
                            <p:commandButton icon="ui-icon-plus"
                                             value="Novo"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             title="Clique para adicionar este registro."
                                             process="@this"
                                             update=":Formulario:tb-view-geral:panelUnidades"
                                             styleClass="padrao"
                                             rendered="#{equipamentoControlador.unidadeObjetoFrota eq null}"
                                             actionListener="#{equipamentoControlador.novaUnidade()}"/>

                            <h:panelGrid columns="2" rendered="#{equipamentoControlador.unidadeObjetoFrota ne null}">
                                <fc:outputLabelObrigatorio value="Órgão/Entidade/Fundo: "/>
                                <p:autoComplete queryDelay="1000" id="unidadeObjetoFrota"
                                                completeMethod="#{hierarquiaOrganizacionalControlador.completaHierarquiaOrganizacionalFrotas}"
                                                converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                                var="hoVeiculo"
                                                size="70"
                                                maxResults="50"
                                                dropdown="true"
                                                panelStyle="max-height: 250px; max-width: 800px"
                                                itemValue="#{hoVeiculo.id}"
                                                itemLabel="#{hoVeiculo}"
                                                value="#{equipamentoControlador.unidadeObjetoFrota.hierarquiaOrganizacional}">
                                    <p:ajax event="itemSelect"
                                            update="@none"
                                            process="@this"/>
                                </p:autoComplete>

                                <fc:outputLabelObrigatorio value="Início de Vigência:"/>
                                <p:calendar title="Informe o início de vigência"
                                            value="#{equipamentoControlador.unidadeObjetoFrota.inicioVigencia}"
                                            onkeypress="mascara(this, mdata)"
                                            id="inicioVigenciaUnidade"
                                            locale="pt_BR"
                                            size="15"
                                            navigator="true"
                                            showOn="button"
                                            pattern="dd/MM/yyyy"/>

                                <fc:outputLabelObrigatorio value="Fim de Vigência:"/>
                                <p:calendar title="Informe o início de vigência"
                                            value="#{equipamentoControlador.unidadeObjetoFrota.fimVigencia}"
                                            onkeypress="mascara(this, mdata)"
                                            id="fimVigenciaUnidade"
                                            locale="pt_BR"
                                            size="15"
                                            navigator="true"
                                            showOn="button"
                                            pattern="dd/MM/yyyy"/>

                            </h:panelGrid>

                            <p:commandButton icon="ui-icon-check"
                                             value="Adicionar"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             title="Clique para adicionar este registro."
                                             process=":Formulario:tb-view-geral:panelUnidades"
                                             update=":Formulario:tb-view-geral:panelUnidades :Formulario:tb-view-geral:panel-arquivos :Formulario:tb-view-geral:panel-geral"
                                             styleClass="mtop10 padrao"
                                             rendered="#{equipamentoControlador.unidadeObjetoFrota ne null}"
                                             actionListener="#{equipamentoControlador.adicionarUnidade}"/>

                            <p:commandButton icon="ui-icon-cancel"
                                             value="Cancelar"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             title="Clique para cancelar esta operação."
                                             process="@this"
                                             update=":Formulario:tb-view-geral:panelUnidades"
                                             styleClass="mtop10 padrao mlef05"
                                             rendered="#{equipamentoControlador.unidadeObjetoFrota ne null}"
                                             actionListener="#{equipamentoControlador.cancelarUnidade()}"/>

                            <p:dataTable paginator="true"
                                         id="tabela-unidades"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop03"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         value="#{equipamentoControlador.selecionado.unidades}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>Unidades&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="unid">
                                <p:column headerText="Ações" style="text-align: center; width: 8%;">
                                    <p:commandButton icon="ui-icon-pencil"
                                                     update=":Formulario:tb-view-geral:panelUnidades"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     title="Clique para editar este registro."
                                                     process="@this"
                                                     styleClass="mrig05"
                                                     actionListener="#{equipamentoControlador.editarUnidade(unid)}"/>

                                    <p:commandButton icon="ui-icon-trash"
                                                     update="tabela-unidades :Formulario:tb-view-geral:panel-geral"
                                                     onstart="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     title="Clique para remover este registro."
                                                     process="@this"
                                                     actionListener="#{equipamentoControlador.removerUnidade(unid)}"/>
                                </p:column>
                                <p:column headerText="Unidade Organizacional" styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{unid.hierarquiaOrganizacional}"/>
                                </p:column>
                                <p:column headerText="Início de Vigência" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{unid.inicioVigencia}">
                                        <f:convertDateTime type="date"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Fim de Vigência" styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{unid.fimVigencia}">
                                        <f:convertDateTime type="date"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Programa de Revisão do Equipamento">
                        <p:outputPanel id="panel-programa-revisao">
                            <p:commandButton icon="ui-icon-plus"
                                             value="Novo"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="panel-programa-revisao"
                                             process="@this"
                                             rendered="#{equipamentoControlador.programaRevisaoEquipamento eq null}"
                                             actionListener="#{equipamentoControlador.inicializarProgramaRevisaoEquipamento()}"
                                             styleClass="padrao"/>

                            <p:outputPanel id="panel-insercao-programa-revisao"
                                           rendered="#{equipamentoControlador.programaRevisaoEquipamento ne null}">
                                <h:panelGrid columns="3">
                                    <fc:outputLabelObrigatorio for="horasRevisao" value="Vencimento por Horas: "/>
                                    <p:inputText id="horasRevisao"
                                                 title="Digite o vencimento em horas para a próxima revisão do equipamento. Ex: 10:00"
                                                 value="#{equipamentoControlador.programaRevisaoEquipamento.prazoEmSegundos}">
                                        <p:ajax event="blur" update="@this"/>
                                        <f:convertNumber pattern="#0.#" maxFractionDigits="1"/>
                                    </p:inputText>
                                    <p:spacer/>

                                    <fc:outputLabelObrigatorio for="prazo" value="Vencimento por Prazo:"/>
                                    <p:spinner min="0"
                                               title="Digite o vencimento em meses para a próxima revisão do equipamento"
                                               id="prazo"
                                               value="#{equipamentoControlador.programaRevisaoEquipamento.prazoEmMeses}"/>
                                    <h:outputText value="meses" style="margin-left: 2px;"/>
                                </h:panelGrid>

                                <p:commandButton icon="ui-icon-plus" value="Adicionar"
                                                 update="panel-programa-revisao :Formulario:tb-view-geral:panel-arquivos"
                                                 onclick="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="panel-programa-revisao"
                                                 title="Clique para adicionar este registro."
                                                 actionListener="#{equipamentoControlador.adicionarProgramaRevisaoEquipamento}"
                                                 styleClass="padrao mtop05 mrig05"/>

                                <p:commandButton icon="ui-icon-cancel"
                                                 value="Cancelar"
                                                 process="@this"
                                                 update="panel-programa-revisao"
                                                 title="Clique para cancelar a operação."
                                                 onclick="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 actionListener="#{equipamentoControlador.cancelarProgramaRevisaoEquipamento()}"
                                                 styleClass="padrao mtop05"/>
                            </p:outputPanel>

                            <p:dataTable paginator="true"
                                         id="table-programa-revisao-equipamento"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop03"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         value="#{equipamentoControlador.selecionado.revisoesEquipamento}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>Programações&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="programaRevisao">
                                <p:column headerText="Ações" style="text-align: center; width: 130px;">
                                    <p:commandButton image="ui-icon-trash"
                                                     update="table-programa-revisao-equipamento"
                                                     process="@this"
                                                     disabled="#{programaRevisao.revisaoRealizada}"
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{equipamentoControlador.removeProgramaRevisaoEquipamento(programaRevisao)}"/>
                                </p:column>
                                <p:column headerText="Data de Lançamento" styleClass="centralizado">
                                    <h:outputText value="#{programaRevisao.dataLancamento}">
                                        <f:convertDateTime type="both"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Sequência" styleClass="centralizado">
                                    <h:outputText value="#{programaRevisao.sequencia}"/>
                                </p:column>
                                <p:column headerText="Vencimento por Horas" styleClass="centralizado">
                                    <h:outputText
                                        value="#{programaRevisao.prazoEmSegundos}">
                                        <f:convertNumber pattern="###0.0" maxFractionDigits="1"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Vencimento por Prazo" styleClass="centralizado">
                                    <h:outputText value="#{programaRevisao.prazoEmMeses} meses"/>
                                </p:column>
                                <p:column headerText="Realizada?" styleClass="centralizado">
                                    <h:outputText
                                        value="#{utilBean.converterBooleanSimOuNao(programaRevisao.revisaoRealizada)}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Movimentações de Horas do Equipamento">
                        <p:dataTable paginator="true"
                                     id="movimento-km"
                                     rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                     rowIndexVar="rowIx"
                                     styleClass="mtop03"
                                     emptyMessage="Não foram localizados registros para serem apresentados"
                                     value="#{equipamentoControlador.selecionado.itemHoraPercorrida}"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport} &lt;span class='titulo-tabela mrig10'>Movimentações&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages}"
                                     rowsPerPageTemplate="10,25,50,100"
                                     var="hora">
                            <p:column headerText="#" style="width: 15px; text-align: center;">
                                <h:outputText value="#{rowIx+1}" styleClass="negrito"/>
                            </p:column>
                            <p:column headerText="Data de Lançamento" styleClass="alinhamentoCentralizado">
                                <h:outputText value="#{hora.dataLancamento}">
                                    <f:convertDateTime type="both"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Hora Atual" styleClass="alinhamentoDireita">
                                <h:outputText value="#{hora.horaAtual}">
                                    <f:convertNumber pattern="###0.0" maxFractionDigits="1"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Anexos">
                        <p:outputPanel id="panel-arquivos">
                            <fc:filesUploadWP selecionado="#{equipamentoControlador.selecionado}"/>
                        </p:outputPanel>
                    </p:tab>
                </p:tabView>
            </p:panel>
            <fc:rodapePretty controlador="#{equipamentoControlador}"/>
        </h:form>
    </ui:define>
</ui:composition>
</html>
