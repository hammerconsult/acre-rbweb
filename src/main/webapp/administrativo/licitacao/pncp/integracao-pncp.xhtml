<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:fa="http://java.sun.com/jsf/composite/components/administrativo"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ad="http://java.sun.com/jsf/composite/components/administrativo"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="/corpo.xhtml">
    <ui:define name="body">

        <h:form id="Formulario">

            <p:panel header="Integração - PNCP" id="panelPrincipal">
                <p:tabView id="tab-geral" styleClass="mtop20">
                    <p:tab title="Eventos">
                        <p:outputPanel id="panel-eventos">
                            <p:commandButton value="Buscar Eventos"
                                             icon="ui-icon-search"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update=":Formulario:tab-geral:panel-eventos"
                                             process="@this"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.buscarTodosEventos()}"
                                             styleClass="padrao"/>

                            <fa:tabela-evento-pncp eventos="#{pncpControlador.eventos}"/>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Órgão / Entidade">
                        <br/>
                        <p:outputPanel id="panel-entidade">
                            <p:commandButton value="Buscar Dados"
                                             icon="ui-icon-search"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update=":Formulario:tab-geral:panel-entidade"
                                             process="@this"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.buscarOrgaoEntidade()}"
                                             styleClass="padrao"/>

                            <p:commandButton value="Enviar Todos"
                                             icon="ui-icon-transferthick-e-w"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="@this"
                                             process="@this"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.enviarEventoCargaInicialOrgaoEntidade()}"
                                             styleClass="prioritario mlef05"/>

                            <div class="mtop02" align="center" style="background: silver; padding: 4px">
                                ÓRGÃOS/ENTIDADES
                            </div>
                            <p:dataTable
                                value="#{pncpControlador.orgaosEntidades}"
                                style="overflow: scroll; max-height: 250px"
                                var="entidade"
                                rowIndexVar="rowIx"
                                rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                emptyMessage="Não foram localizados registros para serem apresentados.">
                                <p:column headerText="Integrador" style="text-align: center; width: 20%">
                                    <fa:botoes-pncp-tabela eventoPncpVO="#{entidade.eventoPncpVO}"
                                                           renderedBtnRemover="false"/>
                                </p:column>
                                <p:column headerText="Cnpj"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{entidade.cnpj}"/>
                                </p:column>
                                <p:column headerText="Razão Social"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{entidade.razaoSocial}"/>
                                </p:column>
                                <p:column headerText="Poder"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{entidade.poderId.descricao}"/>
                                </p:column>
                                <p:column headerText="Esfera"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{entidade.esferaId.descricao}"/>
                                </p:column>
                            </p:dataTable>

                            <p:commandButton value="Enviar Todas Unidades"
                                             icon="ui-icon-transferthick-e-w"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="@this"
                                             process="@this"
                                             actionListener="#{pncpControlador.enviarTodasUnidade()}"
                                             styleClass="prioritario mtop30"/>

                            <div class="mtop02" align="center" style="background: silver; padding: 4px">
                                UNIDADES
                            </div>
                            <p:dataTable
                                value="#{pncpControlador.unidades}"
                                style="overflow: scroll; max-height: 250px"
                                var="orgao"
                                rowIndexVar="rowIx"
                                rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                emptyMessage="Não foram localizados registros para serem apresentados.">
                                <p:column headerText="Integrador" style="text-align: center; width: 20%">
                                    <p:column headerText="Ações" style="text-align: center; width: 5%">
                                        <fa:botoes-pncp-tabela eventoPncpVO="#{orgao.eventoPncpVO}"
                                                               renderedBtnRemover="false"/>
                                    </p:column>
                                </p:column>
                                <p:column headerText="Código"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{orgao.codigoUnidade}"/>
                                </p:column>
                                <p:column headerText="Nome"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{orgao.nomeUnidade}"/>
                                </p:column>
                                <p:column headerText="Código IBGE"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{orgao.codigoIBGE}"/>
                                </p:column>
                            </p:dataTable>

                            <p:commandButton value="Enviar Usuário / Entes Autorizados"
                                             icon="ui-icon-transferthick-e-w"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="@this"
                                             process="@this"
                                             style="width: 300px"
                                             actionListener="#{pncpControlador.enviarUsuario()}"
                                             styleClass="prioritario mtop20"/>

                            <div class="mtop02" align="center" style="background: silver; padding: 4px">
                                USÁRIOS / ENTES AUTORIZADOS
                            </div>
                            <p:dataTable
                                value="#{pncpControlador.entesAutorizados}"
                                style="overflow: scroll; max-height: 250px"
                                var="usu"
                                rowIndexVar="rowIx"
                                rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                emptyMessage="Não foram localizados registros para serem apresentados.">
                                <p:column headerText="Integrador" style="text-align: center; width: 20%">
                                    <fa:botoes-pncp-tabela eventoPncpVO="#{usu.eventoPncpVO}"
                                                           renderedBtnAtualizar="false"/>
                                </p:column>
                                <p:column headerText="Entes Autorizados"
                                          styleClass="alinhamentoEsquerda">
                                    <p:dataTable
                                        styleClass="mtop05"
                                        value="#{usu.entesAutorizados}"
                                        style="overflow: scroll; max-height: 250px"
                                        var="ente"
                                        rowIndexVar="rowIx"
                                        rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                        emptyMessage="Não foram localizados registros para serem apresentados.">
                                        <p:column headerText="Cnpj"
                                                  styleClass="alinhamentoEsquerda">
                                            <h:outputText value="#{ente}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Plano de Contratações Anual - PCA">
                        <p:outputPanel id="panel-pca">

                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Data Inicial:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            value="#{pncpControlador.filtroConsulta.dataInicial}"
                                            navigator="true"
                                            id="dataInicialPCA"
                                            pattern="dd/MM/yyyy"
                                            size="10">
                                </p:calendar>

                                <fc:outputLabelObrigatorio value="Data Final:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            value="#{pncpControlador.filtroConsulta.dataFinal}"
                                            navigator="true"
                                            id="dataFinalPCA"
                                            pattern="dd/MM/yyyy"
                                            size="10">
                                </p:calendar>

                                <h:outputText value="Unidade Administrativa: "/>
                                <p:autoComplete queryDelay="1000"
                                                id="uniOrgPCA"
                                                title="Informe a unidade administrativa."
                                                value="#{pncpControlador.filtroConsulta.hierarquiaOrganizacional}"
                                                completeMethod="#{pncpControlador.completaHierarquia}"
                                                converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                                var="ho"
                                                itemLabel="#{ho}"
                                                itemValue="#{ho.id}"
                                                forceSelection="true"
                                                dropdown="true"
                                                panelStyle="max-height: 250px; max-width: 800px"
                                                maxResults="50"
                                                size="70">
                                    <p:ajax event="itemSelect"
                                            process="@this"
                                            onstart="aguarde.show();"
                                            oncomplete="aguarde.hide();"/>
                                </p:autoComplete>
                            </h:panelGrid>

                            <p:commandButton value="Buscar Dados"
                                             icon="ui-icon-search"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update=":Formulario:tab-geral:panel-pca"
                                             process=":Formulario:tab-geral:panel-pca"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.buscarPlanosContratacoesAnuais()}"
                                             styleClass="padrao mtop05"/>

                            <p:commandButton value="Enviar Todos"
                                             icon="ui-icon-transferthick-e-w"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="@this"
                                             process="@this"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.enviarEventoPlanoContratacaoAnual()}"
                                             styleClass="prioritario mlef05 mtop05"/>

                            <p:dataTable
                                id="tabela-pca"
                                value="#{pncpControlador.planosContratacoesAnuais}"
                                var="pca"
                                rowIndexVar="rowIx"
                                rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                rows="10"
                                rowsPerPageTemplate="10,50,100,200,300"
                                currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Planos de Contratações Anuais&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                paginator="true"
                                emptyMessage="Não foram localizados registros para serem apresentados.">
                                <p:column headerText="Integrador" style="text-align: center; width: 20%">
                                    <fa:botoes-pncp-tabela eventoPncpVO="#{pca.eventoPncpVO}"
                                                           update=":Formulario:tab-geral:panel-pca"/>
                                </p:column>
                                <p:column style="width: 3%; text-align: center" headerText="Itens">
                                    <p:commandButton
                                        icon="ui-icon-categorias"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide(); dlgItensPCA.show()"
                                        process="@this"
                                        styleClass="icone-25"
                                        title="Clique para ver os itens do PCA."
                                        actionListener="#{pncpControlador.buscarItensPlanoContratacaoAnual(pca)}"/>
                                </p:column>
                                <p:column headerText="Número"
                                          styleClass="alinhamentoDireita">

                                    <p:commandLink value="#{pca.numero}"
                                                   styleClass="negrito"
                                                   onclick="window.open('#{request.contextPath}#{pncpControlador.getCaminhoNavegacao(pca.tipoProcesso, pca.id)}', '_blank')"/>

                                </p:column>
                                <p:column headerText="Ano de Aplicação"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{pca.anoPca}"
                                        styleClass="text-word-wrap"/>
                                </p:column>
                                <p:column headerText="Unidade Organizacional"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{pca.codigoUnidade}"/>
                                </p:column>
                                <p:column headerText="Início da Elaboração"
                                          styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{pca.inicioElaboracao}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Fim da Elaboração"
                                          styleClass="alinhamentoCentralizado">
                                    <h:outputText value="#{pca.fimElaboracao}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Contratação">
                        <p:outputPanel id="panel-contratacao">

                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Data Inicial:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            value="#{pncpControlador.filtroConsulta.dataInicial}"
                                            navigator="true"
                                            id="dataInicial"
                                            pattern="dd/MM/yyyy"
                                            size="10">
                                </p:calendar>

                                <fc:outputLabelObrigatorio value="Data Final:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            value="#{pncpControlador.filtroConsulta.dataFinal}"
                                            navigator="true"
                                            id="dataFinal"
                                            pattern="dd/MM/yyyy"
                                            size="10">
                                </p:calendar>

                                <h:outputText value="Unidade Administrativa: "/>
                                <p:autoComplete queryDelay="1000" id="unidadeorganizacional"
                                                title="Informe a unidade administrativa."
                                                value="#{pncpControlador.filtroConsulta.hierarquiaOrganizacional}"
                                                completeMethod="#{pncpControlador.completaHierarquia}"
                                                converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                                var="ho"
                                                itemLabel="#{ho}"
                                                itemValue="#{ho.id}"
                                                forceSelection="true"
                                                dropdown="true"
                                                panelStyle="max-height: 250px; max-width: 800px"
                                                maxResults="50"
                                                size="70">
                                    <p:ajax event="itemSelect"
                                            process="@this"
                                            onstart="aguarde.show();"
                                            oncomplete="aguarde.hide();"/>
                                </p:autoComplete>
                            </h:panelGrid>

                            <p:commandButton value="Buscar Dados"
                                             icon="ui-icon-search"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update=":Formulario:tab-geral:panel-contratacao"
                                             process=":Formulario:tab-geral:panel-contratacao"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.buscarContratacao()}"
                                             styleClass="padrao mtop05"/>

                            <p:commandButton value="Enviar Todos"
                                             icon="ui-icon-transferthick-e-w"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="@this"
                                             process="@this"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.enviarEventoContratacao()}"
                                             styleClass="prioritario mlef05 mtop05"/>

                            <p:commandButton value="Enviar Carga Inicial"
                                             icon="ui-icon-transferthick-e-w"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="@this"
                                             process="@this"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.enviarEventoCargaInicialContratacao()}"
                                             styleClass="prioritario mlef05 mtop05"/>

                            <p:dataTable
                                id="tabela-contratacoes"
                                value="#{pncpControlador.contratacoes}"
                                var="contratacao"
                                rowIndexVar="rowIx"
                                rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                rows="10"
                                rowsPerPageTemplate="10,50,100,200,300"
                                currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Contratações&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                paginator="true"
                                emptyMessage="Não foram localizados registros para serem apresentados.">
                                <p:column headerText="Integrador" style="text-align: center; width: 20%">
                                    <fa:botoes-pncp-tabela eventoPncpVO="#{contratacao.eventoPncpVO}"
                                                           renderedBtnAtualizar="false"
                                                           update=":Formulario:tab-geral:panel-contratacao"/>
                                </p:column>
                                <p:column style="width: 3%; text-align: center" headerText="Itens">
                                    <p:commandButton
                                        icon="ui-icon-categorias"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide();dlgItemResultado.show()"
                                        process="@this"
                                        styleClass="icone-25"
                                        actionListener="#{pncpControlador.buscarItensContratacao(contratacao)}"
                                        title="Clique para ver os itens/resultado da contratação."/>
                                </p:column>
                                <p:column headerText="Modalidade"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{contratacao.modalidadeId}"
                                        styleClass="text-word-wrap"/>
                                </p:column>
                                <p:column headerText="Número"
                                          styleClass="alinhamentoEsquerda">
                                    <p:commandLink value="#{contratacao.numeroCompra}"
                                                   styleClass="negrito"
                                                   onclick="window.open('#{request.contextPath}#{pncpControlador.getCaminhoNavegacao(contratacao.tipoProcesso, contratacao.id)}', '_blank')"/>
                                </p:column>
                                <p:column headerText="Data de Abertura"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{contratacao.dataAberturaProposta}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Unidade Organizacional"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{contratacao.codigoUnidadeCompradora}"/>
                                </p:column>
                                <p:column headerText="Resumo do Objeto"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{contratacao.objetoCompra}"
                                        styleClass="text-word-wrap"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Atas Registro de Preço">
                        <p:outputPanel id="panel-ato-registro">

                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Data Inicial:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            value="#{pncpControlador.filtroConsulta.dataInicial}"
                                            navigator="true"
                                            id="dataInicialAta"
                                            pattern="dd/MM/yyyy"
                                            size="10">
                                </p:calendar>

                                <fc:outputLabelObrigatorio value="Data Final:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            value="#{pncpControlador.filtroConsulta.dataFinal}"
                                            navigator="true"
                                            id="dataFinalAta"
                                            pattern="dd/MM/yyyy"
                                            size="10">
                                </p:calendar>

                                <h:outputText value="Unidade Administrativa: "/>
                                <p:autoComplete queryDelay="1000"
                                                title="Informe a unidade administrativa."
                                                value="#{pncpControlador.filtroConsulta.hierarquiaOrganizacional}"
                                                completeMethod="#{pncpControlador.completaHierarquia}"
                                                converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                                var="ho"
                                                itemLabel="#{ho}"
                                                itemValue="#{ho.id}"
                                                forceSelection="true"
                                                dropdown="true"
                                                panelStyle="max-height: 250px; max-width: 800px"
                                                maxResults="50"
                                                size="70">
                                    <p:ajax event="itemSelect"
                                            process="@this"
                                            onstart="aguarde.show();"
                                            oncomplete="aguarde.hide();"/>
                                </p:autoComplete>
                            </h:panelGrid>

                            <p:commandButton value="Buscar Dados"
                                             icon="ui-icon-search"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update=":Formulario:tab-geral:panel-ato-registro"
                                             process=":Formulario:tab-geral:panel-ato-registro"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.buscarAtas()}"
                                             styleClass="padrao"/>

                            <p:commandButton value="Enviar Todos"
                                             icon="ui-icon-transferthick-e-w"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="@this"
                                             process="@this"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.enviarEventoAtas()}"
                                             styleClass="prioritario mlef05"/>

                            <p:commandButton value="Enviar Carga Inicial"
                                             icon="ui-icon-transferthick-e-w"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="@this"
                                             process="@this"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.enviarEventoCargaInicialAtaRegistroPreco()}"
                                             styleClass="prioritario mlef05"/>

                            <p:dataTable
                                id="tabela-atas"
                                value="#{pncpControlador.atasRegistroPreco}"
                                var="ata"
                                rowIndexVar="rowIxAta"
                                rowStyleClass="#{empty rowIxAta or rowIxAta mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                rows="10"
                                rowsPerPageTemplate="10,50,100,200,300"
                                currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Atas&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                paginator="true"
                                filteredValue="#{pncpControlador.atasRegistroPreco}"
                                emptyMessage="Não foram localizados registros para serem apresentados.">

                                <p:column headerText="Integrador" style="text-align: center; width: 25%">
                                    <fa:botoes-pncp-tabela eventoPncpVO="#{ata.eventoPncpVO}"/>
                                </p:column>
                                <p:column headerText="Número"
                                          styleClass="alinhamentoEsquerda">
                                    <p:commandLink value="#{ata.numeroAtaRegistroPreco}"
                                                   styleClass="negrito"
                                                   onclick="window.open('#{request.contextPath}#{pncpControlador.getCaminhoNavegacao(ata.tipoProcesso, ata.id)}', '_blank')"/>
                                </p:column>
                                <p:column headerText="Data de Assinatura"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{ata.dataAssinatura}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Data de Inicio"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{ata.dataVigenciaInicio}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Data de Fim"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{ata.dataVigenciaFim}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Sequencial da Compra"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{ata.sequencialCompra}"/>
                                </p:column>
                                <p:column headerText="Ano"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{ata.anoAta}"/>
                                </p:column>
                                <p:column headerText="Unidade Organizacional"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText value="#{ata.codigoUnidadeCompradora}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Contrato / Empenho">
                        <p:outputPanel id="panel-contrato">

                            <h:panelGrid columns="2">
                                <fc:outputLabelObrigatorio value="Data Inicial:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            value="#{pncpControlador.filtroConsulta.dataInicial}"
                                            navigator="true"
                                            pattern="dd/MM/yyyy"
                                            size="10"/>

                                <fc:outputLabelObrigatorio value="Data Final:"/>
                                <p:calendar onkeypress="mascara(this, mdata)" maxlength="10"
                                            value="#{pncpControlador.filtroConsulta.dataFinal}"
                                            navigator="true"
                                            pattern="dd/MM/yyyy"
                                            size="10"/>

                                <h:outputText value="Unidade Administrativa: "/>
                                <p:autoComplete queryDelay="1000"
                                                title="Informe a unidade administrativa."
                                                value="#{pncpControlador.filtroConsulta.hierarquiaOrganizacional}"
                                                completeMethod="#{pncpControlador.completaHierarquia}"
                                                converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                                var="ho"
                                                itemLabel="#{ho}"
                                                itemValue="#{ho.id}"
                                                forceSelection="true"
                                                dropdown="true"
                                                panelStyle="max-height: 250px; max-width: 800px"
                                                maxResults="50"
                                                size="70">
                                    <p:ajax event="itemSelect"
                                            process="@this"
                                            onstart="aguarde.show();"
                                            oncomplete="aguarde.hide();"/>
                                </p:autoComplete>
                            </h:panelGrid>

                            <p:commandButton value="Buscar Dados"
                                             icon="ui-icon-search"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update=":Formulario:tab-geral:panel-contrato"
                                             process=":Formulario:tab-geral:panel-contrato"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.buscarContratoEmpenho()}"
                                             styleClass="padrao"/>

                            <p:commandButton value="Enviar Todos"
                                             icon="ui-icon-transferthick-e-w"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="@this"
                                             process="@this"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.enviarEventoContratoEmpenho()}"
                                             styleClass="prioritario mlef05"/>

                            <p:commandButton value="Enviar Carga Inicial"
                                             icon="ui-icon-transferthick-e-w"
                                             onstart="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             update="@this"
                                             process="@this"
                                             style="width: 180px"
                                             actionListener="#{pncpControlador.enviarEventoCargaInicialContratoEmpenho()}"
                                             styleClass="prioritario mlef05"/>

                            <p:dataTable
                                value="#{pncpControlador.contratosEmpenhos}"
                                var="contEmp"
                                rowIndexVar="rowIxAta"
                                rowStyleClass="#{empty rowIxAta or rowIxAta mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                rows="10"
                                rowsPerPageTemplate="10,50,100,200,300"
                                currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Contratos/Empenhos&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                paginator="true"
                                emptyMessage="Não foram localizados registros para serem apresentados.">

                                <p:column headerText="Integrador" style="text-align: center; width: 25%">
                                    <fa:botoes-pncp-tabela eventoPncpVO="#{contEmp.eventoPncpVO}"/>
                                </p:column>
                                <p:column headerText="Número/Ano"
                                          styleClass="alinhamentoEsquerda">
                                    <p:commandLink value="#{contEmp.numeroAnoTermo}"
                                                   styleClass="negrito"
                                                   onclick="window.open('#{request.contextPath}#{pncpControlador.getCaminhoNavegacao(contEmp.tipoProcesso, contEmp.id)}', '_blank')"/>
                                </p:column>
                                <p:column headerText="Data de Assinatura"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{contEmp.dataAssinatura}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Fornecedor"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{contEmp.niFornecedor}"/>
                                </p:column>
                                <p:column headerText="Unidade Organizacional"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{contEmp.codigoUnidade}"/>
                                </p:column>
                                <p:column headerText="Sequencial da Compra"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{contEmp.sequencialCompra}"/>
                                </p:column>
                                <p:column headerText="Ano da Compra"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{contEmp.anoCompra}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>
                </p:tabView>

            </p:panel>
        </h:form>


        <p:dialog position="center"
                  modal="true"
                  dynamic="true"
                  header="Detalhes dos Itens do Plano de Contratações Anual - PCA"
                  draggable="true"
                  style="position: fixed!important;"
                  width="1100"
                  height="450"
                  widgetVar="dlgItensPCA"
                  closable="true">

            <h:form id="formDlgItemPCA">
                <div class="thumbnail">
                    <h:panelGrid columns="2">
                        <h:outputText value="Número: "/>
                        <h:outputText value="#{pncpControlador.planoContratacaoAnual.numero}"
                                      styleClass="negrito"/>

                        <h:outputText value="Ano de Aplicação: "/>
                        <h:outputText value="#{pncpControlador.planoContratacaoAnual.anoPca}"
                                      styleClass="negrito"/>

                        <h:outputText value="Unidade Organizacional: "/>
                        <h:outputText value="#{pncpControlador.planoContratacaoAnual.codigoUnidade}"
                                      styleClass="negrito"/>

                        <h:outputText value="Início da Elaboração: "/>
                        <h:outputText
                            styleClass="negrito"
                            value="#{pncpControlador.planoContratacaoAnual.inicioElaboracao}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>

                        <h:outputText value="Fim da Elaboração: "/>
                        <h:outputText
                            styleClass="negrito"
                            value="#{pncpControlador.planoContratacaoAnual.fimElaboracao}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                    </h:panelGrid>

                    <p:dataTable
                        id="tabela-itens-pca"
                        value="#{pncpControlador.planoContratacaoAnual.itensPlano}"
                        var="item"
                        rowIndexVar="rowIx"
                        rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                        rows="10"
                        rowsPerPageTemplate="10,50,100,200,300"
                        currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                        paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Itens&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        paginator="true"
                        emptyMessage="Não foram localizados registros para serem apresentados.">
                        <p:column headerText="Nº"
                                  style="width: 2%"
                                  styleClass="alinhamentoEsquerda">
                            <h:outputText
                                value="#{item.numero}"/>
                        </p:column>
                        <p:column headerText="Objeto de Compra"
                                  styleClass="alinhamentoEsquerda">
                            <h:outputText
                                value="#{item.objetoCompra}"/>
                        </p:column>
                        <p:column headerText="Especif."
                                  styleClass="alinhamentoEsquerda icone-25">
                            <ad:especificacao-objeto-compra especificacao="#{item.especificacao}"/>
                        </p:column>
                        <p:column headerText="Data Desejada"
                                  styleClass="alinhamentoCentralizado">
                            <h:outputText
                                styleClass="negrito"
                                value="#{item.dataDesejada}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Unid. Med."
                                  styleClass="alinhamentoEsquerda">
                            <h:outputText
                                value="#{item.unidadeMedida}"/>
                        </p:column>
                        <p:column headerText="Quantidade"
                                  styleClass="alinhamentoDireita">
                            <fc:output-mascara-unidade-medida
                                tipoMascara="#{item.mascaraQuantidade}"
                                value="#{item.quantidade}"/>
                        </p:column>
                        <p:column headerText="Valor Unitário (R$)"
                                  styleClass="alinhamentoDireita">
                            <fc:output-mascara-unidade-medida
                                tipoMascara="#{item.mascaraValorUnitario}"
                                value="#{item.valorUnitario}"/>
                        </p:column>
                        <p:column headerText="Valor Total (R$)"
                                  styleClass="alinhamentoDireita">
                            <h:outputText
                                value="#{item.valorTotal}">
                                <f:convertNumber pattern="#,##0.00"/>
                            </h:outputText>
                        </p:column>
                    </p:dataTable>
                </div>
            </h:form>
        </p:dialog>


        <p:dialog position="center"
                  modal="true"
                  dynamic="true"
                  header="Detalhes Itens/Resultado da Contratação"
                  draggable="true"
                  style="position: fixed!important;"
                  width="1100"
                  height="450"
                  widgetVar="dlgItemResultado"
                  closable="true">

            <h:form id="formDlgItemResultado">
                <div class="thumbnail">
                    <h:panelGrid columns="2">
                        <h:outputText value="Modalidade: "/>
                        <h:outputText value="#{pncpControlador.contratacaoConsultaDTO.modalidadeId}"
                                      styleClass="negrito"/>

                        <h:outputText value="Data de Abertura: "/>
                        <h:outputText value="#{pncpControlador.contratacaoConsultaDTO.dataAberturaProposta}"
                                      styleClass="negrito">
                            <f:convertDateTime type="date"/>
                        </h:outputText>

                        <h:outputText value="Unidade Organizacional: "/>
                        <h:outputText value="#{pncpControlador.contratacaoConsultaDTO.codigoUnidadeCompradora}"
                                      styleClass="negrito"/>

                        <h:outputText value="Resumo do Objeto: "/>
                        <p:inputTextarea value="#{pncpControlador.contratacaoConsultaDTO.objetoCompra}"
                                         cols="800"
                                         rows="5"
                                         readonly="true"
                                         style="border: none"
                                         styleClass="negrito"/>
                    </h:panelGrid>

                    <p:tabView id="tab-view-detalhes" styleClass="mtop05">
                        <p:tab title="Itens">
                            <p:dataTable
                                id="tabela-itens"
                                value="#{pncpControlador.contratacaoConsultaDTO.itensCompra}"
                                var="item"
                                rowIndexVar="rowIx"
                                rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                rows="10"
                                rowsPerPageTemplate="10,50,100,200,300"
                                currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Itens&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                paginator="true"
                                emptyMessage="Não foram localizados registros para serem apresentados.">

                                <p:column headerText="Item"
                                          style="width: 2%"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{item.numeroItem}"/>
                                </p:column>
                                <p:column headerText="Descrição"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{item.descricao}"
                                        styleClass="text-word-wrap"/>
                                </p:column>
                                <p:column headerText="Unid. Med."
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{item.unidadeMedida}"/>
                                </p:column>
                                <p:column headerText="Quantidade"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{item.quantidade}"/>
                                </p:column>
                                <p:column headerText="Valor Unitário (R$)"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{item.valorUnitarioEstimado}">
                                        <f:convertNumber pattern="#,##0.0000"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor Total (R$)"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{item.valorTotal}">
                                        <f:convertNumber pattern="#,##0.00"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Resultado">
                            <p:dataTable
                                id="tabela-resultados"
                                value="#{pncpControlador.contratacaoConsultaDTO.resultados}"
                                var="resultadoItem"
                                rowIndexVar="rowIx"
                                rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada' : 'trintaAltura'}"
                                rows="10"
                                rowsPerPageTemplate="10,50,100,200,300"
                                currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Resultados&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                paginator="true"
                                emptyMessage="Não foram localizados registros para serem apresentados.">
                                <p:column headerText="Sequencial Pncp"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{resultadoItem.sequencialPncp}"/>
                                </p:column>
                                <p:column headerText="Fornecedor"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{resultadoItem.nomeRazaoSocialFornecedor}"/>
                                </p:column>
                                <p:column headerText="Item"
                                          styleClass="alinhamentoEsquerda">
                                    <h:outputText
                                        value="#{resultadoItem.numeroItem}"/>
                                </p:column>
                                <p:column headerText="Quantidade"
                                          styleClass="alinhamentoDireita">
                                    <h:outputText
                                        value="#{resultadoItem.quantidadeHomologada}"/>
                                </p:column>
                                <p:column headerText="Valor Unitário (R$)"
                                          styleClass="alinhamentoDireita">
                                    <h:outputText
                                        value="#{resultadoItem.valorUnitarioHomologado}">
                                        <f:convertNumber pattern="#,##0.0000"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor Total (R$)"
                                          styleClass="alinhamentoDireita">
                                    <h:outputText
                                        value="#{resultadoItem.valorTotalHomologado}">
                                        <f:convertNumber pattern="#,##0.00"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                    </p:tabView>
                </div>

            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
</html>
