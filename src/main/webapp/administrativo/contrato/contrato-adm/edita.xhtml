<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:ad="http://java.sun.com/jsf/composite/components/administrativo"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:fcc="http://java.sun.com/jsf/composite/components/contabil"
      xmlns:fa="http://java.sun.com/jsf/composite/components/administrativo"
>

<ui:composition template="/corpo.xhtml">
    <ui:define name="body">
        <script type="text/javascript">

            function limparTabela(campoOrigem) {
                if (campoOrigem.value.toString().trim().length == 0 || campoOrigem.value == '' || campoOrigem.value == 'undefined') {
                    limparCampos();
                }
            }

            function expandirRowToggler() {
                $('.expandir-table').find('.ui-row-toggler').not('.ui-icon-circle-triangle-s').trigger('click');
            }

            function desabilitarCampoArquivo(campoOrigem, idCampoDestino) {
                var split = campoOrigem.id.toString().split(':');
                var idOrigem = split[split.length - 1];

                if (campoOrigem.value.toString().trim().length == 0 || campoOrigem.value == '' || campoOrigem.value == 'undefined') {
                    var idPanel = campoOrigem.id.replace(idOrigem, idCampoDestino);
                    var panel = document.getElementById(idPanel);
                    panel.disabled = true;
                    atribuirNullTipoDocumento();
                }
            }
        </script>

        <h:form id="Formulario">

            <p:remoteCommand name="limparDadosSmeInterna"
                             process="@this"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             actionListener="#{contratoAdmControlador.limparCamposGerais()}"/>

            <p:remoteCommand name="limparDadosUnidadeParticipante"
                             process="@this"
                             onstart="aguarde.show()"
                             oncomplete="aguarde.hide()"
                             actionListener="#{contratoAdmControlador.atribuirNullDadosIRP()}"/>

            <fc:cabecalhoPretty origem="#{contratoAdmControlador.caminhoPadrao}listar/"
                                controlador="#{contratoAdmControlador}"/>

            <p:remoteCommand name="limparCampos"
                             process="@this"
                             actionListener="#{contratoAdmControlador.limparCamposGerais()}"
                             update=":Formulario:tab-view-geral:panel-dados-gerais"/>

            <p:panel header="Contrato">

                <p:tabView id="tab-view-geral" activeIndex="#{contratoAdmControlador.indiceAba}" styleClass="mtop05">
                    <p:ajax event="tabChange"
                            process="@this"
                            listener="#{contratoAdmControlador.onTabChange}"
                            onstart="aguarde.show()"
                            oncomplete="aguarde.hide()"/>

                    <p:tab title="Dados Gerais">
                        <p:outputPanel id="panel-dados-gerais">

                            <h:panelGrid columns="2" id="gridDadosGerais">
                                <h:outputText value="Situação: "/>
                                <h:outputText value="#{contratoAdmControlador.selecionado.situacaoContrato.descricao}"
                                              styleClass="negrito"/>

                                <h:outputText value="Número do Contrato: "/>
                                <h:outputText value="#{contratoAdmControlador.selecionado.numeroContrato}"
                                              styleClass="negrito"/>

                                <h:outputText value="Data de Lançamento: "/>
                                <h:outputText value="#{contratoAdmControlador.selecionado.dataLancamento}"
                                              styleClass="negrito">
                                    <f:convertDateTime type="date"/>
                                </h:outputText>

                                <h:outputText value="Data de Aprovação: "
                                              rendered="#{contratoAdmControlador.selecionado.isContratoAprovado()}"/>
                                <h:outputText value="#{contratoAdmControlador.selecionado.dataAprovacao}"
                                              rendered="#{contratoAdmControlador.selecionado.isContratoAprovado()}"
                                              styleClass="negrito">
                                    <f:convertDateTime type="date"/>
                                </h:outputText>

                                <h:outputText value="Data de Deferimento: "
                                              rendered="#{contratoAdmControlador.selecionado.isContratoDeferido()}"/>
                                <h:outputText value="#{contratoAdmControlador.selecionado.dataDeferimento}"
                                              rendered="#{contratoAdmControlador.selecionado.isContratoDeferido()}"
                                              styleClass="negrito">
                                    <f:convertDateTime type="date"/>
                                </h:outputText>

                                <h:outputText value="Número/Ano do Termo: "/>
                                <h:panelGroup styleClass="negrito">
                                    <h:outputText value="#{contratoAdmControlador.selecionado.numeroTermo}"/>

                                    <h:outputText value="/"/>
                                    <h:outputText id="exercicio"
                                                  styleClass="negrito"
                                                  value="#{contratoAdmControlador.selecionado.exercicioContrato}"/>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio value="Tipo de Aquisição: "/>
                                <h:selectOneMenu title="Selecione o tipo de compra"
                                                 value="#{contratoAdmControlador.selecionado.tipoAquisicao}"
                                                 disabled="#{contratoAdmControlador.operacaoEditar}"
                                                 id="tipo-de-compra">
                                    <p:ajax event="valueChange"
                                            update=":Formulario:tab-view-geral:panel-dados-gerais :Formulario:tab-view-geral:panel-itens"
                                            process=":Formulario:tab-view-geral:panel-dados-gerais :Formulario:tab-view-geral:panel-itens"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            listener="#{contratoAdmControlador.listenerTipoAquisicao()}"/>
                                    <f:selectItems value="#{contratoAdmControlador.tiposAquisicaoContrato}"/>
                                </h:selectOneMenu>

                                <fc:outputLabelObrigatorio value="Licitação: "
                                                           rendered="#{contratoAdmControlador.selecionado.isDeLicitacao() or contratoAdmControlador.selecionado.isDeIrp()}"/>
                                <h:panelGroup
                                    rendered="#{contratoAdmControlador.selecionado.isDeLicitacao() or contratoAdmControlador.selecionado.isDeIrp()}">
                                    <p:autoComplete queryDelay="1000"
                                                    id="licitacao"
                                                    title="Digite a licitação"
                                                    value="#{contratoAdmControlador.objetoContrato.licitacao}"
                                                    completeMethod="#{contratoAdmControlador.completarLicitacoes}"
                                                    disabled="#{contratoAdmControlador.operacaoEditar}"
                                                    dropdown="true"
                                                    panelStyle="max-width: 700px;max-height: 250px"
                                                    var="lic"
                                                    itemLabel="#{lic}"
                                                    itemValue="#{lic.id}"
                                                    onclick="this.select();"
                                                    forceSelection="true"
                                                    size="70"
                                                    onkeyup="limparTabela(this)"
                                                    styleClass="mrig05"
                                                    converter="#{licitacaoControlador.converterGenerico}">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                update="bt-ver-licitacao @(.ui-tabs)"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                listener="#{contratoAdmControlador.listenerLicitacao}"/>
                                    </p:autoComplete>

                                    <fcc:botao_informacao
                                        style="width: 33px !important; height: 30px !important"
                                        descricao="Para consultar licitações específicas, digite o número da modalidade ou do processo seguido do ano
                                                 &lt;br/>Ex.: '1 2014' (digitar sem áspas)
                                                 &lt;br/>Para o caso acima o sistema consultará as licitações com o número da modalidade = 1
                                                 &lt;br/>ou número do processo = 1 no ano de 2014
                                                 &lt;br/>&lt;br/>O sistema irá listar somente as licitações homologadas e que o usuário tenha vínculo
                                                 &lt;br/>com a mesma unidade organizacional administrativa do processo de compra da licitação
                                                 &lt;br/>No caso do processo licitatório ser de intenção de registro de preço, o usuário deve ter vínculo com a unidade participante."/>

                                    <p:commandButton process="@none"
                                                     id="bt-ver-licitacao"
                                                     icon="ui-icon-search"
                                                     styleClass="mrig10 mlef05"
                                                     update="@none"
                                                     disabled="#{contratoAdmControlador.selecionado.licitacao eq null}"
                                                     onclick="window.open('#{request.contextPath}/licitacao/ver/#{contratoAdmControlador.selecionado.licitacao.id}/','_blank');"/>
                                </h:panelGroup>


                                <fc:outputLabelObrigatorio
                                    value="Credenciamento: "
                                    rendered="#{contratoAdmControlador.selecionado.isDeProcedimentosAuxiliares()}"/>
                                <h:panelGroup
                                    rendered="#{contratoAdmControlador.selecionado.isDeProcedimentosAuxiliares()}">
                                    <p:autoComplete queryDelay="1000"
                                                    title="Digite o credenciamento"
                                                    value="#{contratoAdmControlador.objetoContrato.licitacao}"
                                                    completeMethod="#{contratoAdmControlador.completarLicitacoes}"
                                                    disabled="#{contratoAdmControlador.operacaoEditar}"
                                                    dropdown="true"
                                                    panelStyle="max-width: 700px;max-height: 250px"
                                                    var="cred"
                                                    itemLabel="#{cred}"
                                                    itemValue="#{cred.id}"
                                                    onclick="this.select();"
                                                    size="70"
                                                    onkeyup="limparTabela(this)"
                                                    styleClass="mrig05"
                                                    converter="#{licitacaoControlador.converterGenerico}">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                update="bt-ver-credenciamento"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                listener="#{contratoAdmControlador.listenerCredenciamento}"/>
                                    </p:autoComplete>

                                    <fcc:botao_informacao
                                        style="width: 33px !important; height: 30px !important"
                                        descricao="Para consultar procedimentos auxiliares específicos, digite o número da modalidade ou do processo seguido do ano
                                                 &lt;br/>Ex.: '1/2014' (digitar sem áspas)
                                                 &lt;br/>Para o caso acima o sistema consultará as licitações com o número da modalidade = 1
                                                 &lt;br/>&lt;br/>O sistema irá listar somente os procedimentos auxiliares concluídos (homologados) e que o usuário tenha vínculo
                                                 &lt;br/>com a mesma unidade organizacional administrativa do processo de compra da licitação"/>

                                    <p:commandButton process="@none"
                                                     id="bt-ver-credenciamento"
                                                     icon="ui-icon-search"
                                                     styleClass="mrig10 mlef05"
                                                     update="@none"
                                                     disabled="#{contratoAdmControlador.selecionado.licitacao eq null}"
                                                     onclick="window.open('#{request.contextPath}/credenciamento/ver/#{contratoAdmControlador.selecionado.licitacao.id}/','_blank');"/>
                                </h:panelGroup>

                                <h:outputLabel value="Subtipo Objeto de Compra: "
                                               rendered="#{contratoAdmControlador.selecionado.isObrasEngenharia()}"/>
                                <h:outputText
                                    value="#{contratoAdmControlador.selecionado.objetoAdequado.subTipoObjetoCompra.descricao}"
                                    styleClass="negrito"
                                    rendered="#{contratoAdmControlador.selecionado.isObrasEngenharia()}"/>

                                <h:outputLabel value="Modalidade:"
                                               rendered="#{contratoAdmControlador.selecionado.licitacao ne null}"/>
                                <h:panelGroup rendered="#{contratoAdmControlador.selecionado.licitacao ne null}">
                                    <h:outputText styleClass="mrig10 negrito"
                                                  value="#{contratoAdmControlador.selecionado.licitacao.modalidadeLicitacao.descricao}"/>

                                    <h:outputLabel value="Natureza do Procedimento: "/>
                                    <h:outputText styleClass="negrito"
                                                  value="#{contratoAdmControlador.selecionado.licitacao.naturezaDoProcedimento.descricao}"/>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio value="Unidade Participante IRP: "
                                                           rendered="#{contratoAdmControlador.selecionado.isDeIrp()}"/>
                                <h:panelGroup rendered="#{contratoAdmControlador.selecionado.isDeIrp()}">
                                    <p:autoComplete queryDelay="1000"
                                                    id="orgao-secretaria-participante"
                                                    title="Digite o orgão/secretaria participante que deseja pesquisar."
                                                    value="#{contratoAdmControlador.objetoContrato.participanteIRP}"
                                                    disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                                    completeMethod="#{contratoAdmControlador.completarUnidadeParticipante}"
                                                    converter="#{participanteIRPControlador.converterGenerico}"
                                                    var="part"
                                                    onkeyup="if(keyUpCampoVazio(this)){limparDadosUnidadeParticipante();}"
                                                    dropdown="true"
                                                    panelStyle="max-height: 230px;max-width: 800px"
                                                    itemValue="#{part.id}"
                                                    itemLabel="#{part}"
                                                    maxResults="50"
                                                    size="70">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                listener="#{contratoAdmControlador.listenerIrp()}"/>
                                    </p:autoComplete>

                                    <p:commandButton process="@none"
                                                     id="bt-ver-irp"
                                                     icon="ui-icon-search"
                                                     styleClass="mlef05"
                                                     update="@none"
                                                     disabled="#{contratoAdmControlador.objetoContrato.participanteIRP eq null}"
                                                     onclick="window.open('#{request.contextPath}/participante-intencao-registro-de-preco/ver/#{contratoAdmControlador.objetoContrato.participanteIRP.id}/','_blank');"/>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio
                                    value="Solicitação de Adesão à Ata de Registro de Preço Interna: "
                                    rendered="#{contratoAdmControlador.selecionado.isDeAdesaoAtaRegistroPrecoInterna()}"/>
                                <h:panelGroup
                                    rendered="#{contratoAdmControlador.selecionado.isDeAdesaoAtaRegistroPrecoInterna()}">
                                    <p:autoComplete queryDelay="1000"
                                                    id="solMatExtInterna"
                                                    value="#{contratoAdmControlador.objetoContrato.solicitacaoMaterialExterno}"
                                                    completeMethod="#{contratoAdmControlador.completarSolicitacaoMaterial}"
                                                    disabled="#{contratoAdmControlador.operacaoEditar}"
                                                    dropdown="true"
                                                    panelStyle="max-width: 700px;max-height: 250px"
                                                    var="smeInterna"
                                                    itemLabel="#{smeInterna}"
                                                    itemValue="#{smeInterna.id}"
                                                    onclick="this.select();"
                                                    onkeyup="if(keyUpCampoVazio(this)){limparDadosSmeInterna();}"
                                                    size="70"
                                                    styleClass="mrig05"
                                                    converter="#{solicitacaoMaterialExternoControlador.converterGenerico}">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                listener="#{contratoAdmControlador.listenerAdesaoAtaInterna()}"/>
                                    </p:autoComplete>

                                    <fcc:botao_informacao
                                        style="width: 33px !important; height: 30px !important"
                                        descricao="Para consultar solicitações específicas, digite o número ou ano ou número/ano.
                                                 &lt;br/>&lt;br/>O sistema irá listar somente as solicitações de adesão à ata de registro de preço interna
                                                 &lt;br/>Onde o usuário é gestor do órgão/entidade/fundo solicitante."/>

                                    <p:commandButton process="@none"
                                                     id="bt-ver-smeInterna"
                                                     icon="ui-icon-search"
                                                     styleClass="mlef05"
                                                     disabled="#{contratoAdmControlador.selecionado.solicitacaoAdesaoAtaInterna eq null}"
                                                     update="@none"
                                                     onclick="window.open('#{request.contextPath}/solicitacao-adesao-ata-registro-preco-interna/ver/#{contratoAdmControlador.selecionado.solicitacaoAdesaoAtaInterna.id}/','_blank');"/>
                                </h:panelGroup>

                                <h:outputText value="Licitação: "
                                              rendered="#{contratoAdmControlador.selecionado.solicitacaoAdesaoAtaInterna ne null}"/>
                                <h:outputText value="#{contratoAdmControlador.selecionado.licitacao}"
                                              styleClass="negrito"
                                              rendered="#{contratoAdmControlador.selecionado.solicitacaoAdesaoAtaInterna ne null}"/>

                                <fc:outputLabelObrigatorio value="Dispensa de Licitação/Inexigibilidade:"
                                                           rendered="#{contratoAdmControlador.selecionado.isDeDispensaDeLicitacao()}"/>
                                <h:panelGroup
                                    rendered="#{contratoAdmControlador.selecionado.isDeDispensaDeLicitacao()}">
                                    <p:autoComplete queryDelay="1000"
                                                    id="dispensa"
                                                    title="Digite a Dispensa de Licitação/Inexigibilidade"
                                                    value="#{contratoAdmControlador.objetoContrato.dispensaDeLicitacao}"
                                                    completeMethod="#{contratoAdmControlador.buscarDispensaDeLicitacao}"
                                                    var="disp"
                                                    itemLabel="#{disp.toStringAutoComplete()}"
                                                    itemValue="#{disp.id}"
                                                    onclick="this.select();"
                                                    forceSelection="true"
                                                    disabled="#{contratoAdmControlador.operacaoEditar}"
                                                    dropdown="true"
                                                    panelStyle="max-height: 250px;max-width: 800px"
                                                    size="70"
                                                    onkeyup="limparTabela(this)"
                                                    styleClass="mrig05"
                                                    converter="#{dispensaDeLicitacaoControlador.converterGenerico}">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                update="modalidade-label modalidade-valor panelDispensa"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                listener="#{contratoAdmControlador.listenerDispensaLicitacao}"/>
                                    </p:autoComplete>

                                    <p:outputPanel id="panelDispensa">
                                        <fc:visualizarCampos
                                            objeto="#{contratoAdmControlador.selecionado.dispensaDeLicitacao}"
                                            styleClass="melf05"/>
                                    </p:outputPanel>

                                    <p:commandButton process="@none"
                                                     id="bt-ver-dispensa"
                                                     icon="ui-icon-search"
                                                     styleClass="mlef05"
                                                     update="@none"
                                                     disabled="#{contratoAdmControlador.objetoContrato.dispensaDeLicitacao eq null}"
                                                     onclick="window.open('#{request.contextPath}/dispensa-licitacao/ver/#{contratoAdmControlador.objetoContrato.dispensaDeLicitacao.id}/','_blank');"/>
                                </h:panelGroup>

                                <h:outputLabel id="modalidade-label"
                                               value="Modalidade:"
                                               rendered="#{contratoAdmControlador.selecionado.dispensaDeLicitacao ne null}"/>
                                <p:inputText id="modalidade-valor"
                                             value="#{contratoAdmControlador.selecionado.dispensaDeLicitacao.modalidade.descricao}"
                                             rendered="#{contratoAdmControlador.selecionado.dispensaDeLicitacao ne null}"
                                             readonly="true"
                                             size="70"/>

                                <fc:outputLabelObrigatorio value="Registro de Preço Externo:"
                                                           rendered="#{contratoAdmControlador.selecionado.isDeRegistroDePrecoExterno()}"/>
                                <h:panelGroup
                                    rendered="#{contratoAdmControlador.selecionado.isDeRegistroDePrecoExterno()}">
                                    <p:autoComplete queryDelay="1000" id="regpreco"
                                                    title="Digite a Dispensa de Licitação"
                                                    value="#{contratoAdmControlador.objetoContrato.registroPrecoExterno}"
                                                    completeMethod="#{contratoAdmControlador.buscarRegistroDePrecoExterno}"
                                                    var="reg"
                                                    itemLabel="#{reg.toStringAutoComplete()}"
                                                    itemValue="#{reg.id}"
                                                    onclick="this.select();"
                                                    forceSelection="true"
                                                    rendered="#{contratoAdmControlador.selecionado.isDeRegistroDePrecoExterno()}"
                                                    disabled="#{contratoAdmControlador.operacaoEditar}"
                                                    size="70"
                                                    dropdown="true"
                                                    panelStyle="max-width: 700px;max-height: 250px"
                                                    onkeyup="limparTabela(this)"
                                                    styleClass="mrig05"
                                                    converter="#{contratoAdmControlador.converterRegistroPrecoExterno}">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                listener="#{contratoAdmControlador.listenerRegistroPrecoExterno}"/>
                                    </p:autoComplete>

                                    <p:commandButton process="@none"
                                                     id="bt-ver-registro-preco"
                                                     icon="ui-icon-search"
                                                     styleClass="mlef05"
                                                     update="@none"
                                                     disabled="#{contratoAdmControlador.objetoContrato.registroPrecoExterno eq null}"
                                                     onclick="window.open('#{request.contextPath}/adesao-a-ata-de-registro-de-preco-externo/ver/#{contratoAdmControlador.objetoContrato.registroPrecoExterno.id}/','_blank');"/>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio value="Unidade Administrativa: "/>
                                <p:autoComplete queryDelay="1000"
                                                id="orgao-secretaria"
                                                title="Digite unidade administrativa que deseja pesquisar."
                                                value="#{contratoAdmControlador.selecionado.unidadeAdministrativa}"
                                                disabled="#{contratoAdmControlador.desabilitarAutoCompleteUnidadeContrato()}"
                                                completeMethod="#{contratoAdmControlador.completarUnidadeContrato}"
                                                converter="#{hierarquiaOrganizacionalControlador.converterHierarquiaOrganizacional}"
                                                var="hoAdm"
                                                dropdown="true"
                                                panelStyle="max-height: 230px;max-width: 800px"
                                                itemValue="#{hoAdm.id}"
                                                itemLabel="#{hoAdm}"
                                                maxResults="50"
                                                size="70">
                                    <p:ajax event="itemSelect"
                                            process="@this"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            listener="#{contratoAdmControlador.validarUnidadeAtaRegistroPrecoUtilizadaContrato()}"
                                            update="@this :Formulario:tab-view-geral:gridDadosGerais"/>
                                </p:autoComplete>

                                <h:outputText value="Ata Registro de Preço: "
                                              rendered="#{contratoAdmControlador.ataRegistroPreco ne null}"/>
                                <h:panelGroup rendered="#{contratoAdmControlador.ataRegistroPreco ne null}">
                                    <h:outputText value="#{contratoAdmControlador.ataRegistroPreco}"
                                                  rendered="#{contratoAdmControlador.ataRegistroPreco ne null}"/>

                                    <p:commandButton process="@none"
                                                     id="bt-ver-ata"
                                                     icon="ui-icon-search"
                                                     styleClass="mlef05"
                                                     update="@none"
                                                     onclick="window.open('#{request.contextPath}/ata-registro-preco/ver/#{contratoAdmControlador.ataRegistroPreco.id}/','_blank');"/>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio value="Regime de Execução:"
                                                           rendered="#{!contratoAdmControlador.selecionado.isDeRegistroDePrecoExterno()}"/>
                                <p:inputText value="#{contratoAdmControlador.selecionado.regimeExecucao}"
                                             size="70"
                                             maxlength="255"
                                             disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                             rendered="#{!contratoAdmControlador.selecionado.isDeRegistroDePrecoExterno()}"/>

                                <fc:outputLabelObrigatorio value="Objeto:"/>
                                <h:panelGrid columns="2"
                                             cellpadding="0"
                                             cellspacing="0">
                                    <p:inputTextarea title="Digite o objeto do contrato"
                                                     value="#{contratoAdmControlador.selecionado.objeto}"
                                                     readonly="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                                     id="objeto-do-contrato"
                                                     cols="70"
                                                     maxlength="3000"
                                                     autoResize="true"
                                                     counterTemplate="{0} Caracteres Restantes."
                                                     counter="counter-objeto-do-contrato"/>
                                    <h:outputText id="counter-objeto-do-contrato"
                                                  style="color: #497692"
                                                  styleClass="mlef05"/>
                                </h:panelGrid>

                                <fc:outputLabelObrigatorio value="Valor do Contrato:"/>
                                <p:outputPanel id="valor-total-contrato">
                                    <h:outputText value="#{contratoAdmControlador.selecionado.valorTotal}"
                                                  converter="moneyConverter"
                                                  styleClass="negrito">
                                    </h:outputText>
                                </p:outputPanel>

                                <h:outputText value="Variação Atual do Contrato: "/>
                                <h:outputText value="#{contratoAdmControlador.selecionado.variacaoAtualContrato}"
                                              converter="percentualConverter"
                                              styleClass="negrito">
                                </h:outputText>

                                <h:outputText value="Valor Atual do Contrato: "/>
                                <p:outputPanel id="valor-atual-contrato">
                                    <h:outputText value="#{contratoAdmControlador.selecionado.valorAtualContrato}"
                                                  converter="moneyConverter"
                                                  styleClass="negrito">
                                    </h:outputText>
                                </p:outputPanel>

                                <h:outputText value="Saldo Atual do Contrato: "/>
                                <p:outputPanel id="saldo-atual-contrato">
                                    <h:outputText value="#{contratoAdmControlador.selecionado.saldoAtualContrato}"
                                                  converter="moneyConverter"
                                                  styleClass="negrito">
                                    </h:outputText>
                                </p:outputPanel>

                                <fc:outputLabelObrigatorio value="Fornecedor:"/>
                                <h:panelGroup>
                                    <p:autoComplete queryDelay="1000" title="Digite o contratado que deseja pesquisar."
                                                    value="#{contratoAdmControlador.selecionado.contratado}"
                                                    completeMethod="#{contratoAdmControlador.completaContratado}"
                                                    converter="#{contratoAdmControlador.converterPessoa}"
                                                    disabled="#{!contratoAdmControlador.selecionado.isDeCompraDireta() or !contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                                    var="p"
                                                    dropdown="true"
                                                    panelStyle="max-height: 230px;max-width: 800px"
                                                    maxResults="50"
                                                    itemValue="#{p.id}"
                                                    itemLabel="#{p}"
                                                    styleClass="mrig05"
                                                    size="70">
                                    </p:autoComplete>
                                    <p:commandButton icon="ui-icon-pencil"
                                                     rendered="#{contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                                     actionListener="#{contratoAdmControlador.recuperarVencedoresDoObjetoLicitatorio()}"
                                                     process="@this"
                                                     oncomplete="fornecedoresVencedores.show()"/>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio value="Responsável Unidade Administrativa: "/>
                                <p:autoComplete queryDelay="1000"
                                                title="Digite o responsável pela prefeitura que deseja pesquisar."
                                                value="#{contratoAdmControlador.selecionado.responsavelPrefeitura}"
                                                completeMethod="#{contratoAdmControlador.completarContratosFP}"
                                                converter="#{contratoFPControlador.converterGenerico}"
                                                disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                                rendered="#{!contratoAdmControlador.responsavelUnidadePessoaFisica}"
                                                var="contrato"
                                                dropdown="true"
                                                panelStyle="max-height: 230px;max-width: 800px"
                                                maxResults="50"
                                                forceSelection="true"
                                                itemValue="#{contrato.id}"
                                                itemLabel="#{contrato}"
                                                size="70"/>

                                <p:autoComplete queryDelay="1000"
                                                title="Digite o responsável que deseja pesquisar."
                                                value="#{contratoAdmControlador.selecionado.responsavelPrefeituraPf}"
                                                completeMethod="#{contratoAdmControlador.completarPessoaFisica}"
                                                converter="#{contratoAdmControlador.converterPessoa}"
                                                disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                                rendered="#{contratoAdmControlador.responsavelUnidadePessoaFisica}"
                                                var="pf"
                                                dropdown="true"
                                                panelStyle="max-height: 230px;max-width: 800px"
                                                maxResults="50"
                                                itemValue="#{pf.id}"
                                                itemLabel="#{pf}"
                                                styleClass="mrig05"
                                                size="70"/>

                                <fc:outputLabelObrigatorio value="Responsável pelo Fornecedor:"/>
                                <p:autoComplete queryDelay="1000"
                                                title="Digite o responsável pela empresa que deseja pesquisar."
                                                value="#{contratoAdmControlador.selecionado.responsavelEmpresa}"
                                                completeMethod="#{contratoAdmControlador.completaPessoaFisica}"
                                                converter="#{contratoAdmControlador.converterPessoa}"
                                                disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                                var="p"
                                                dropdown="true"
                                                panelStyle="max-height: 230px;max-width: 800px"
                                                maxResults="50"
                                                forceSelection="true"
                                                itemValue="#{p.id}"
                                                itemLabel="#{p}"
                                                size="70">
                                </p:autoComplete>

                                <fc:outputLabelObrigatorio value="Início de Vigência:"/>
                                <p:calendar onkeypress="mascara(this, mdata)"
                                            showOn="button"
                                            disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                            title="Digite a data de início de vigência do contrato."
                                            value="#{contratoAdmControlador.selecionado.inicioVigencia}"
                                            locale="pt_BR"
                                            navigator="true"
                                            pattern="dd/MM/yyyy"
                                            size="15">
                                </p:calendar>

                                <fc:outputLabelObrigatorio value="Término de Vigência:"/>
                                <p:calendar maxlength="19"
                                            onkeypress="mascara(this, mdata)"
                                            id="terminoVigencia"
                                            disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                            showOn="button"
                                            title="Digite a data de término de vigência do contrato."
                                            value="#{contratoAdmControlador.selecionado.terminoVigencia}"
                                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                            size="15">
                                    <p:ajax event="dateSelect"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            process="@this :Formulario:tab-view-geral:gridDadosGerais"
                                            update="terminoVigenciaAtual :Formulario:gridBotoes"
                                            listener="#{contratoAdmControlador.atribuirTerminoVigenciaAtual()}"/>

                                    <p:ajax event="change"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            process="@this :Formulario:tab-view-geral:gridDadosGerais"
                                            update="terminoVigenciaAtual :Formulario:gridBotoes"
                                            listener="#{contratoAdmControlador.atribuirTerminoVigenciaAtual()}"/>
                                </p:calendar>

                                <h:outputText value="Término de Vigência Atual: "/>
                                <p:outputPanel id="terminoVigenciaAtual">
                                    <h:outputText value="#{contratoAdmControlador.selecionado.terminoVigenciaAtual}"
                                                  styleClass="negrito">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:outputPanel>

                                <fc:outputLabelObrigatorio value="Início de Execução:"/>
                                <p:calendar maxlength="19"
                                            id="inicioExecucao"
                                            onkeydown="mascara(this, mdata)"
                                            disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                            showOn="button"
                                            title="Digite a data de início de execução do contrato."
                                            value="#{contratoAdmControlador.selecionado.inicioExecucao}"
                                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                            size="15">
                                    <p:ajax event="dateSelect"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            process="@this :Formulario:tab-view-geral:gridDadosGerais"
                                            update=":Formulario:gridBotoes"/>

                                    <p:ajax event="change"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            process="@this :Formulario:tab-view-geral:gridDadosGerais"
                                            update=":Formulario:gridBotoes"/>
                                </p:calendar>

                                <fc:outputLabelObrigatorio value="Término de Execução:"/>
                                <p:calendar maxlength="19"
                                            onkeydown="mascara(this, mdata)"
                                            id="terminoExecucao"
                                            disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                            showOn="button"
                                            title="Digite a data de término de execução do contrato."
                                            value="#{contratoAdmControlador.selecionado.terminoExecucao}"
                                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                            size="15">
                                    <p:ajax event="dateSelect"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            process="@this :Formulario:tab-view-geral:gridDadosGerais"
                                            update="terminoExecucaoAtual :Formulario:gridBotoes"
                                            listener="#{contratoAdmControlador.atribuirTerminoExecucaoAtual()}"/>

                                    <p:ajax event="change"
                                            onstart="aguarde.show()"
                                            oncomplete="aguarde.hide()"
                                            process="@this :Formulario:tab-view-geral:gridDadosGerais"
                                            update="terminoExecucaoAtual :Formulario:gridBotoes"
                                            listener="#{contratoAdmControlador.atribuirTerminoExecucaoAtual()}"/>
                                </p:calendar>

                                <h:outputText value="Término de Execução Atual: "/>
                                <p:outputPanel id="terminoExecucaoAtual">
                                    <h:outputText value="#{contratoAdmControlador.selecionado.terminoExecucaoAtual}"
                                                  styleClass="negrito">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:outputPanel>

                                <h:outputText value="Data de Assinatura: "
                                              rendered="#{contratoAdmControlador.selecionado.isContratoDeferido()}"/>
                                <h:outputText value="#{contratoAdmControlador.selecionado.dataAssinatura}"
                                              styleClass="negrito"
                                              rendered="#{contratoAdmControlador.selecionado.isContratoDeferido()}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>

                                <h:outputLabel value="Local de Entrega/Execução:" for="localEntrega"/>
                                <p:inputText value="#{contratoAdmControlador.selecionado.localEntrega}"
                                             id="localEntrega"
                                             maxlength="255"
                                             size="70">
                                </p:inputText>

                                <h:outputLabel value="Observações:"/>
                                <h:panelGrid columns="2"
                                             cellpadding="0"
                                             cellspacing="0">
                                    <p:inputTextarea title="Digite as observações do contrato"
                                                     value="#{contratoAdmControlador.selecionado.observacoes}"
                                                     cols="70"
                                                     maxlength="3000"
                                                     autoResize="true"
                                                     disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                                     counterTemplate="{0} Caracteres Restantes."
                                                     counter="counter-observacoesContrato"/>
                                    <h:outputText id="counter-observacoesContrato"
                                                  style="color: #497692"
                                                  styleClass="mlef05"/>
                                </h:panelGrid>

                                <h:outputText value="Contrato de Concessão: "/>
                                <p:selectBooleanCheckbox value="#{contratoAdmControlador.selecionado.contratoConcessao}"
                                                         disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"/>
                            </h:panelGrid>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Itens">
                        <p:outputPanel id="panel-itens">
                            <p:outputPanel
                                rendered="#{contratoAdmControlador.selecionado.isRegistroDePrecos() and contratoAdmControlador.hasItensContratoPorQuantidade()}">
                                <div class="alert alert-info"
                                     style="text-align: center; font-size: 14px; padding: 4px;">
                                    <h:outputText value="Para contratos que são de registro de preços, "/>
                                    <h:outputText value="É PERMITIDO " styleClass="negrito"/>
                                    <h:outputText value="alterar a coluna referente à valor/quantidade do contrato"/>
                                </div>
                            </p:outputPanel>

                            <p:outputPanel
                                rendered="#{!contratoAdmControlador.selecionado.isRegistroDePrecos() and !contratoAdmControlador.selecionado.isDeProcedimentosAuxiliares()}">
                                <div class="alert alert-block"
                                     style="text-align: center; font-size: 14px; padding: 4px; margin: 0px!important;">
                                    <h:outputText value="Para contratos que não são registro de preços, "/>
                                    <h:outputText value="NÃO É PERMITIDO " styleClass="negrito"/>
                                    <h:outputText
                                        value="realizar alterar a coluna referente à valor/quantidade do contrato "/>
                                </div>
                            </p:outputPanel>

                            <p:dataTable paginator="true"
                                         id="tabela-itens-qtde"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         style="overflow: scroll; width: auto; max-height: 500px"
                                         paginatorPosition="top"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         rowKey="#{itemQtde.id}"
                                         value="#{contratoAdmControlador.itensControleQuantidade}"
                                         rendered="#{contratoAdmControlador.hasItensContratoPorQuantidade()}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='negrito titulo-tabela mrig10'>ITENS DO CONTRATO POR QUANTIDADE&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,50,100"
                                         var="itemQtde">
                                <f:facet name="header">
                                    <i class="fa fa-check negrito mrig05" style="color: #2779aa; font-size: 15px"/>
                                    Selecione os itens que irão fazer parte deste contrato
                                </f:facet>
                                <c:if test="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}">
                                    <p:column headerText="Mov." styleClass="alinhamentoCentralizado"
                                              style="width: 5%">
                                        <p:commandButton onstart="aguarde.show()"
                                                         icon="ui-icon-search"
                                                         styleClass="icone-25"
                                                         process="@this"
                                                         update="@this :formMovimentoItens"
                                                         oncomplete="aguarde.hide();dlgMovItemContrato.show()"
                                                         actionListener="#{contratoAdmControlador.setItemContrato(itemQtde)}"
                                                         title="Clique para ver detalhes dos movimentos do item do contrato."/>
                                    </p:column>
                                </c:if>
                                <p:column style="width: 30px!important"
                                          rendered="#{!contratoAdmControlador.selecionado.situacaoContrato.isDeferido()}">
                                    <f:facet name="header">
                                        <p:commandButton icon="ui-icon-none"
                                                         process="@this"
                                                         disabled="#{itemQtde.utilizadoProcesso}"
                                                         rendered="#{!contratoAdmControlador.todosItensQuantidadeSelecionados}"
                                                         update=":Formulario:tab-view-geral:tabela-itens-qtde :Formulario:tab-view-geral:vl-total-itens
                                                                :Formulario:tab-view-geral:vl-total-por-qtde"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         actionListener="#{contratoAdmControlador.selecionarTodosItensQuantidade(true)}"
                                                         styleClass="icone-20"/>

                                        <p:commandButton icon="ui-icon-check"
                                                         process="@this"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         disabled="#{itemQtde.utilizadoProcesso}"
                                                         rendered="#{contratoAdmControlador.todosItensQuantidadeSelecionados}"
                                                         update=":Formulario:tab-view-geral:tabela-itens-qtde :Formulario:tab-view-geral:vl-total-itens
                                                                 :Formulario:tab-view-geral:vl-total-por-qtde"
                                                         actionListener="#{contratoAdmControlador.selecionarTodosItensQuantidade(false)}"
                                                         styleClass="icone-20"/>
                                    </f:facet>
                                    <p:outputPanel id="btn-selecionar-item-qtde">
                                        <p:commandButton icon="ui-icon-none"
                                                         process="@this"
                                                         update="btn-selecionar-item-qtde qtde-item-contrato :Formulario:tab-view-geral:vl-total-itens
                                                                :Formulario:tab-view-geral:vl-total-por-qtde vl-total-item-qtde"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         disabled="#{itemQtde.utilizadoProcesso}"
                                                         rendered="#{!itemQtde.selecionado}"
                                                         actionListener="#{contratoAdmControlador.selecionarItemContrato(itemQtde, true)}"
                                                         styleClass="icone-20"/>
                                        <p:commandButton icon="ui-icon-check"
                                                         update="btn-selecionar-item-qtde qtde-item-contrato :Formulario:tab-view-geral:vl-total-itens
                                                                :Formulario:tab-view-geral:vl-total-por-qtde vl-total-item-qtde"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         process="@this"
                                                         disabled="#{itemQtde.utilizadoProcesso}"
                                                         rendered="#{itemQtde.selecionado}"
                                                         actionListener="#{contratoAdmControlador.selecionarItemContrato(itemQtde, false)}"
                                                         styleClass="icone-20"/>
                                    </p:outputPanel>
                                </p:column>
                                <p:column headerText="Cód CMED" style="text-align: center">
                                    <p:commandButton title="Clique aqui para editar o Código CMED."
                                                     update=":form-codigo-cmed"
                                                     process="@this" icon="ui-icon-pencil"
                                                     actionListener="#{contratoAdmControlador.editarItemContrato(itemQtde)}"
                                                     onclick="dialogCodigoCmed.show();"
                                                     styleClass="mrig05 icone-25 prioritario"/>
                                    <h:outputText style="font-size: 17px!important;"
                                                  rendered="#{itemQtde.codigoCmed ne null}"
                                                  value=" &#10004; "
                                                  title="Código CMED: #{itemQtde.codigoCmed}"
                                                  styleClass="verdenegrito mlef05"/>
                                </p:column>
                                <p:column headerText="Grupo">
                                    <p:rowToggler/>
                                </p:column>
                                <p:column headerText="Nº Lote" style="text-align: center;">
                                    <h:outputText value="#{itemQtde.itemAdequado.numeroLote}"/>
                                </p:column>
                                <p:column headerText="Nº Item" style="text-align: center;">
                                    <h:outputText value="#{itemQtde.itemAdequado.numeroItem}"/>
                                </p:column>
                                <p:column headerText="Descrição" style="text-align: left; ">
                                    <h:outputText value="#{itemQtde.itemAdequado.objetoCompra}"/>
                                </p:column>
                                <c:if test="#{!contratoAdmControlador.selecionado.isDeRegistroDePrecoExterno()}">
                                    <p:column headerText="Esp" style="text-align: center">
                                        <ad:especificacao-objeto-compra
                                            styleClass="icone-25"
                                            especificacao="#{itemQtde.itemAdequado.descricaoComplementar}"/>
                                    </p:column>
                                </c:if>
                                <p:column headerText="Qtde Licitada" style="text-align: center;">
                                    <fc:output-mascara-unidade-medida
                                        tipoMascara="#{itemQtde.itemAdequado.unidadeMedida.mascaraQuantidade}"
                                        value="#{itemQtde.quantidadeLicitada}"/>
                                </p:column>
                                <p:column headerText="Qtde Outros Contratos" style="text-align: right">
                                    <fc:output-mascara-unidade-medida
                                        tipoMascara="#{itemQtde.itemAdequado.unidadeMedida.mascaraQuantidade}"
                                        value="#{itemQtde.quantidadeEmOutrosContratos}"/>
                                </p:column>
                                <p:column headerText="Qtde Disponível" style="text-align: right;">
                                    <fc:output-mascara-unidade-medida
                                        tipoMascara="#{itemQtde.itemAdequado.unidadeMedida.mascaraQuantidade}"
                                        value="#{itemQtde.quantidadeDisponivel}"/>
                                </p:column>
                                <p:column headerText="Qtde deste Contrato"
                                          style="text-align: right;">
                                    <p:outputPanel id="qtde-item-contrato">
                                        <fc:input-mascara-unidade-medida
                                            tipoMascara="#{itemQtde.itemAdequado.unidadeMedida.mascaraQuantidade}"
                                            process="@this"
                                            size="10"
                                            update=":Formulario:tab-view-geral:tabela-itens-qtde:vl-total-item-qtde
                                                    :Formulario:tab-view-geral:vl-total-por-qtde
                                                    :Formulario:tab-view-geral:vl-total-itens"
                                            listener="#{contratoAdmControlador.processarQuantidadeItemContrato(itemQtde)}"
                                            value="#{itemQtde.quantidadeTotalContrato}"
                                            disabled="#{!contratoAdmControlador.permitiDigitarQuantidadeOrValor(itemQtde)}"/>
                                    </p:outputPanel>
                                </p:column>
                                <p:column headerText="Valor Unitário (R$)" style="text-align: right; width: 100px;">
                                    <fc:output-mascara-unidade-medida
                                        tipoMascara="#{itemQtde.itemAdequado.unidadeMedida.mascaraValorUnitario}"
                                        value="#{itemQtde.valorUnitario}"/>
                                </p:column>
                                <p:column headerText="Valor Total (R$)" style="text-align: right; width: 100px;">
                                    <p:outputPanel id="vl-total-item-qtde">
                                        <h:outputText value="#{itemQtde.valorTotal}">
                                            <f:convertNumber type="currency" pattern="#,##0.00"/>
                                        </h:outputText>
                                    </p:outputPanel>
                                </p:column>
                                <p:rowExpansion>
                                    <h:panelGrid columns="4" cellspacing="4" cellpadding="4"
                                                 style="background-color: lightyellow">
                                        <h:outputText value="Grupo:" style="margin-left: 150px; color: dimgrey"/>
                                        <h:outputText
                                            value="#{itemQtde.itemAdequado.objetoCompra.grupoContaDespesa.grupo}"/>

                                        <h:outputText value="Conta: " styleClass="alinhamentoEsquerda"/>
                                        <ad:conta-desdobrada-por-grupo
                                            styleClass="default"
                                            grupoContaDespesa="#{itemQtde.itemAdequado.objetoCompra.grupoContaDespesa}"/>
                                    </h:panelGrid>
                                </p:rowExpansion>
                            </p:dataTable>

                            <div align="right"
                                 style="border: solid 1px; padding: 5px; border-color: lightgrey;display: ${contratoAdmControlador.hasItensContratoPorQuantidade() ? 'block' : 'none'}">

                                <p:commandLink
                                    style="float: left; color: dimgrey"
                                    process="@this"
                                    value="Clique para retornar a aba dados gerais"
                                    update=":Formulario:tab-view-geral"
                                    onclick="aguarde.show()"
                                    oncomplete="aguarde.hide()"
                                    actionListener="#{contratoAdmControlador.redirecionarParaAbaPrincipal()}"/>

                                <p:outputPanel id="vl-total-por-qtde">
                                    <h:outputText value="Total por Quantidade: " styleClass="negrito"/>
                                    <h:outputText
                                        style="margin-right: 15px"
                                        value="#{contratoAdmControlador.valorTotalItensContratoPorQuantidade}"
                                        styleClass="negrito">
                                        <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </p:outputPanel>
                            </div>

                            <p:dataTable paginator="true"
                                         styleClass="mtop20"
                                         id="tabela-itens-valor"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         style="overflow: scroll; width: auto; max-height: 500px"
                                         paginatorPosition="top"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         rendered="#{contratoAdmControlador.hasItensContratoPorValor()}"
                                         value="#{contratoAdmControlador.itensControleValor}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='negrito titulo-tabela mrig10'>ITENS DO CONTRATO POR VALOR&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,50,100"
                                         var="itemValor">
                                <f:facet name="header">
                                    <i class="fa fa-check negrito mrig05" style="color: #2779aa; font-size: 15px"/>
                                    Selecione os itens que irão fazer parte deste contrato
                                </f:facet>
                                <c:if test="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}">
                                    <p:column headerText="Mov." styleClass="alinhamentoCentralizado">
                                        <p:commandButton onstart="aguarde.show()"
                                                         icon="ui-icon-search"
                                                         styleClass="icone-25"
                                                         process="@this"
                                                         update="@this :formMovimentoItens"
                                                         oncomplete="aguarde.hide();dlgMovItemContrato.show()"
                                                         actionListener="#{contratoAdmControlador.setItemContrato(itemValor)}"
                                                         title="Clique para ver detalhes dos movimentos do item do contrato."/>
                                    </p:column>
                                </c:if>
                                <p:column style="width: 30px!important"
                                          rendered="#{!contratoAdmControlador.selecionado.situacaoContrato.isDeferido()}">
                                    <f:facet name="header">
                                        <p:commandButton icon="ui-icon-none"
                                                         process="@this"
                                                         disabled="#{itemValor.utilizadoProcesso}"
                                                         rendered="#{!contratoAdmControlador.todosItensValorSelecionados}"
                                                         update="tabela-itens-valor :Formulario:tab-view-geral:vl-total-contrato-valor
                                                                :Formulario:tab-view-geral:vl-total-itens"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         actionListener="#{contratoAdmControlador.selecionarTodosItensValor(true)}"
                                                         styleClass="icone-20"/>

                                        <p:commandButton icon="ui-icon-check"
                                                         process="@this"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         disabled="#{itemValor.utilizadoProcesso}"
                                                         rendered="#{contratoAdmControlador.todosItensValorSelecionados}"
                                                         update="tabela-itens-valor :Formulario:tab-view-geral:vl-total-contrato-valor
                                                                :Formulario:tab-view-geral:vl-total-itens"
                                                         actionListener="#{contratoAdmControlador.selecionarTodosItensValor(false)}"
                                                         styleClass="icone-20"/>
                                    </f:facet>
                                    <p:outputPanel id="selecionar-item-valor">
                                        <p:commandButton icon="ui-icon-none"
                                                         process="@this"
                                                         id="btn-marcar-item-valor"
                                                         update="vl-total-item selecionar-item-valor :Formulario:tab-view-geral:vl-total-contrato-valor
                                                                 :Formulario:tab-view-geral:vl-total-itens"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         disabled="#{itemValor.utilizadoProcesso}"
                                                         rendered="#{!itemValor.selecionado}"
                                                         actionListener="#{contratoAdmControlador.selecionarItemContrato(itemValor, true)}"
                                                         styleClass="icone-20"/>

                                        <p:commandButton icon="ui-icon-check"
                                                         update="vl-total-item selecionar-item-valor :Formulario:tab-view-geral:vl-total-contrato-valor
                                                                :Formulario:tab-view-geral:vl-total-itens"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide()"
                                                         process="@this"
                                                         disabled="#{itemValor.utilizadoProcesso}"
                                                         rendered="#{itemValor.selecionado}"
                                                         actionListener="#{contratoAdmControlador.selecionarItemContrato(itemValor, false)}"
                                                         styleClass="icone-20"/>
                                    </p:outputPanel>
                                </p:column>
                                <p:column headerText="Cód. CMED" style="text-align: center">
                                    <p:commandButton id="bteditaItem"
                                                     title="Clique aqui para editar o Código CMED."
                                                     update=":form-codigo-cmed"
                                                     process="@this"
                                                     icon="ui-icon-pencil"
                                                     actionListener="#{contratoAdmControlador.editarItemContrato(itemValor)}"
                                                     onclick="dialogCodigoCmed.show();"
                                                     styleClass="mrig05 icone-25 prioritario"/>
                                    <h:outputText style="font-size: 17px!important;"
                                                  rendered="#{itemValor.codigoCmed ne null}"
                                                  value=" &#10004; "
                                                  title="Código CMED: #{itemValor.codigoCmed}"
                                                  styleClass="verdenegrito mlef05"/>
                                </p:column>
                                <p:column headerText="Grupo">
                                    <p:rowToggler/>
                                </p:column>
                                <p:column headerText="Lote" style="text-align: center;">
                                    <h:outputText value="#{itemValor.itemAdequado.numeroLote}"/>
                                </p:column>
                                <p:column headerText="Item" style="text-align: center;">
                                    <h:outputText value="#{itemValor.itemAdequado.numeroItem}"/>
                                </p:column>
                                <p:column headerText="Descrição" style="text-align: left; ">
                                    <h:outputText value="#{itemValor.itemAdequado.objetoCompra}"/>
                                </p:column>
                                <p:column headerText="Vl Licitado Item (R$)"
                                          style="text-align: right; width: 100px;">
                                    <h:outputText value="#{itemValor.valorLicitadoItem}">
                                        <f:convertNumber type="currency" pattern="#,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Vl Outros Contratos (R$)"
                                          style="text-align: right; width: 100px;">
                                    <h:outputText value="#{itemValor.valorEmOutrosContratos}">
                                        <f:convertNumber type="currency" pattern="#,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Vl Disponível (R$)"
                                          style="text-align: right; width: 100px;">
                                    <h:outputText value="#{itemValor.valorDisponivel}">
                                        <f:convertNumber type="currency" pattern="#,##0.00"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Vl Total (R$)" style="text-align: right; width: 100px;">
                                    <p:outputPanel id="vl-total-item">
                                        <p:inputText title="Digite o valor"
                                                     disabled="#{!contratoAdmControlador.permitiDigitarQuantidadeOrValor(itemValor)}"
                                                     value="#{itemValor.valorTotal}"
                                                     maxlength="15"
                                                     size="15"
                                                     onkeypress="mascara(this, mvalor)"
                                                     styleClass="alinhamentoDireita">
                                            <f:convertNumber pattern="#,##0.00"/>
                                            <p:ajax event="blur"
                                                    process="@this"
                                                    update=":Formulario:tab-view-geral:vl-total-itens :Formulario:tab-view-geral:vl-total-contrato-valor"
                                                    listener="#{contratoAdmControlador.processarValorTotalItemContrato(itemValor)}"/>
                                        </p:inputText>
                                    </p:outputPanel>
                                </p:column>
                                <p:rowExpansion>
                                    <h:panelGrid columns="4" cellspacing="4" cellpadding="4"
                                                 style="background-color: lightyellow">
                                        <h:outputText value="Grupo:" style="margin-left: 150px; color: dimgrey"/>
                                        <h:outputText
                                            value="#{itemValor.itemAdequado.objetoCompra.grupoContaDespesa.grupo}"/>

                                        <h:outputText value="Conta: " styleClass="alinhamentoEsquerda"/>
                                        <ad:conta-desdobrada-por-grupo
                                            styleClass="default"
                                            grupoContaDespesa="#{itemValor.itemAdequado.objetoCompra.grupoContaDespesa}"/>
                                    </h:panelGrid>
                                </p:rowExpansion>
                            </p:dataTable>

                            <div align="right"
                                 style="border: solid 1px; padding: 5px; border-color: lightgrey;display: ${contratoAdmControlador.hasItensContratoPorValor() ? 'block' : 'none'}">
                                <p:commandLink
                                    style="float: left; color: dimgrey"
                                    process="@this"
                                    value="Clique para retornar a aba dados gerais"
                                    update=":Formulario:tab-view-geral"
                                    onclick="aguarde.show()"
                                    oncomplete="aguarde.hide()"
                                    actionListener="#{contratoAdmControlador.redirecionarParaAbaPrincipal()}"/>

                                <h:outputText value="Total por Valor: " styleClass="negrito"/>
                                <h:outputText
                                    id="vl-total-contrato-valor"
                                    style="margin-right: 15px"
                                    value="#{contratoAdmControlador.valorTotalItensContratoPorValor}"
                                    styleClass="negrito">
                                    <f:convertNumber type="currency"/>
                                </h:outputText>
                            </div>

                            <div align="center" class="alert alert-info"
                                 style="padding: 5px; font-size: 14px">
                                <h:outputText value="Valor Total dos Itens: "/>
                                <h:outputText
                                    id="vl-total-itens"
                                    value="#{contratoAdmControlador.valorTotalItensContratoSelecionados}"
                                    styleClass="negrito">
                                    <f:convertNumber type="currency"/>
                                </h:outputText>
                            </div>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Execuções"
                           id="tab-execucao"
                           rendered="#{contratoAdmControlador.isOperacaoEditar()}">
                        <ad:resumo-execucao-contrato
                            filtroConsulta="#{contratoAdmControlador.filtroResumoExecucaoContrato}"/>
                    </p:tab>

                    <p:tab title="Unidades">
                        <p:dataTable paginator="true"
                                     id="tabela-unidades"
                                     rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                     rowIndexVar="rowIx"
                                     styleClass="mtop05"
                                     emptyMessage="Não foram localizados registros para serem apresentados"
                                     value="#{contratoAdmControlador.selecionado.unidades}"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Unidades&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                     rowsPerPageTemplate="10,25,50,100"
                                     var="unid">
                            <p:column headerText="Unidade Administrativa" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{unid.hierarquiaAdm}"/>
                            </p:column>
                            <p:column headerText="Início de Vigência" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{unid.inicioVigencia}">
                                    <f:convertDateTime type="date"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Fim de Vigência" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{unid.fimVigencia}">
                                    <f:convertDateTime type="date"/>
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Ordem de Compra / Serviço"
                           id="tab-oc">
                        <ad:ordem-compra filtro="#{contratoAdmControlador.filtroOrdemCompraVO}"/>

                        <p:panel id="panel-os" header="Ordem de Serviço" styleClass="mtop20">
                            <p:commandButton value="Nova Ordem de Serviço"
                                             icon="ui-icon-circle-plus"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             rendered="#{contratoAdmControlador.ordemDeServicoSelecionada eq null}"
                                             actionListener="#{contratoAdmControlador.novoOrdemDeServico()}"
                                             process="@this"
                                             update=":Formulario:tab-view-geral:panel-os"/>

                            <p:outputPanel id="panel-nova-os">
                                <h:panelGrid columns="2"
                                             rendered="#{contratoAdmControlador.ordemDeServicoSelecionada ne null}"
                                             styleClass="mbot05">
                                    <h:outputLabel value="Número:"/>
                                    <h:panelGrid columns="2"
                                                 cellpadding="0"
                                                 cellspacing="0">
                                        <p:inputText value="#{contratoAdmControlador.ordemDeServicoSelecionada.numero}"
                                                     size="5"
                                                     readonly="true"
                                                     style="text-align: right;"
                                                     styleClass="mrig05"/>
                                        <h:outputText value="O número é gerado automaticamente pelo sistema"
                                                      styleClass="azul"/>
                                    </h:panelGrid>

                                    <h:outputLabel value="Data de Expedição: "/>
                                    <p:calendar onkeypress="mascara(this, mdata)"
                                                maxlength="10"
                                                style="text-align: right"
                                                autocomplete="off"
                                                showOn="button"
                                                title="Digite a data de expedição da ordem de serviço."
                                                value="#{contratoAdmControlador.ordemDeServicoSelecionada.dataExpedicao}"
                                                locale="pt_BR"
                                                navigator="true"
                                                pattern="dd/MM/yyyy"
                                                size="12"/>

                                    <h:outputLabel value="Tipo da Ordem de Serviço:"/>
                                    <h:selectOneMenu title="Selecione o tipo da ordem de serviço"
                                                     value="#{contratoAdmControlador.ordemDeServicoSelecionada.tipo}">
                                        <f:selectItems value="#{contratoAdmControlador.tiposOrdemDeServico}"/>
                                    </h:selectOneMenu>

                                    <h:outputLabel value="Data de Recebimento:"/>
                                    <p:calendar onkeypress="mascara(this, mdata)"
                                                maxlength="10"
                                                style="text-align: right"
                                                autocomplete="off"
                                                showOn="button"
                                                title="Digite a data de recebimento da ordem de serviço."
                                                value="#{contratoAdmControlador.ordemDeServicoSelecionada.dataRecebimento}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="12"/>
                                </h:panelGrid>

                                <p:commandButton value="Confirmar"
                                                 styleClass="mrig05 prioritario"
                                                 onclick="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="panel-os"
                                                 update=":Formulario:tab-view-geral:panel-os"
                                                 rendered="#{contratoAdmControlador.ordemDeServicoSelecionada ne null}"
                                                 actionListener="#{contratoAdmControlador.confirmarOrdemDeServico}"
                                                 icon="ui-icon-check"/>

                                <p:commandButton value="Cancelar"
                                                 process="@this"
                                                 styleClass="padrao"
                                                 onclick="aguarde.show(); "
                                                 oncomplete="aguarde.hide()"
                                                 rendered="#{contratoAdmControlador.ordemDeServicoSelecionada ne null}"
                                                 actionListener="#{contratoAdmControlador.cancelarOrdemDeServico}"
                                                 update=":Formulario:tab-view-geral:panel-os"
                                                 icon="ui-icon-cancel"/>
                            </p:outputPanel>

                            <p:dataTable paginator="true"
                                         id="tabela-os"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         value="#{contratoAdmControlador.selecionado.ordensDeServico}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>ORDENS DE SERVIÇO&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="os">

                                <p:column headerText="Ações"
                                          style="text-align: center; width: 90px;">
                                    <p:commandButton icon="ui-icon-pencil"
                                                     title="Clique para alterar este registro."
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide();"
                                                     process="@this"
                                                     actionListener="#{contratoAdmControlador.selecionarOrdemDeServico(os)}"
                                                     update=":Formulario:tab-view-geral:panel-os"
                                                     styleClass="mrig05"/>

                                    <p:commandButton icon="ui-icon-trash"
                                                     process="@this"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{contratoAdmControlador.removerOrdemDeServico(os)}"
                                                     title="Clique para remover este registro."
                                                     update="tabela-os"
                                                     styleClass="mrig05"/>
                                </p:column>
                                <p:column headerText="Número" style="text-align: right;">
                                    <h:outputText value="#{os.numero}"/>
                                </p:column>
                                <p:column headerText="Data de Expedição" style="text-align: center;">
                                    <h:outputText value="#{os.dataExpedicao}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Tipo da Ordem de Serviço" style="text-align: left;">
                                    <h:outputText value="#{os.tipo.descricao}"/>
                                </p:column>
                                <p:column headerText="Data do Recebimento" style="text-align: center;">
                                    <h:outputText value="#{os.dataRecebimento}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </p:tab>

                    <p:tab title="Garantias Contratuais">
                        <p:outputPanel id="panel-caucao">
                            <p:commandButton value="Nova Garantia"
                                             icon="ui-icon-circle-plus"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             rendered="#{contratoAdmControlador.caucaoContratoSelecionada eq null}"
                                             disabled="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                             actionListener="#{contratoAdmControlador.novoCaucaoContrato()}"
                                             process="@this"
                                             update=":Formulario:tab-view-geral:panel-caucao"/>

                            <p:panel header="Nova/Editar Garantia"
                                     id="panel-novo-caucao"
                                     rendered="#{contratoAdmControlador.caucaoContratoSelecionada ne null}"
                                     styleClass="mtop05 mbot05">
                                <h:panelGrid columns="2"
                                             rendered="#{contratoAdmControlador.tipoCaucaoContrato eq 'EM_DINHEIRO'}"
                                             styleClass="mbot05">

                                    <fc:outputLabelObrigatorio value="Tipo de Movimentação: "/>
                                    <h:selectOneMenu
                                        value="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado}">
                                        <f:selectItems value="#{contratoAdmControlador.tipoMovimentacaoContrato}"/>
                                        <p:ajax event="change"
                                                listener="#{contratoAdmControlador.recuperarUltimaGarantiaAdicionada()}"
                                                update="panel-caucao" process="@this" onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="Tipo: "/>
                                    <h:selectOneMenu title="Selecione o tipo da garantia"
                                                     disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ==null or contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA'
                                                 and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'SUBSTITUICAO'}"
                                                     value="#{contratoAdmControlador.tipoCaucaoContrato}">
                                        <f:selectItems value="#{contratoAdmControlador.tiposDeCaucoes}"/>
                                        <p:ajax process="@this" update="panel-novo-caucao"
                                                onstart="aguarde.show()"
                                                event="change"
                                                oncomplete="aguarde.hide()"
                                                listener="#{contratoAdmControlador.definirCaucaoContratoPorTipo()}"/>
                                    </h:selectOneMenu>

                                    <fc:outputLabelObrigatorio value="Responsável: "/>
                                    <p:autoComplete queryDelay="1000"
                                                    title="Digite o orgão/secretaria que deseja pesquisar."
                                                    value="#{contratoAdmControlador.caucaoContratoSelecionada.orgao}"
                                                    completeMethod="#{contratoAdmControlador.completarResponsavelGarantia}"
                                                    converter="#{hierarquiaOrganizacionalControlador.converterUnidadeOrganizacional}"
                                                    var="ho"
                                                    disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA'}"
                                                    forceSelection="true"
                                                    itemValue="#{ho.subordinada.id}"
                                                    itemLabel="#{ho}"
                                                    maxResults="10"
                                                    size="70">
                                    </p:autoComplete>

                                    <h:outputText value="Banco:"/>
                                    <p:autoComplete queryDelay="1000" title="Informe o nome do banco" size="70"
                                                    value="#{contratoAdmControlador.caucaoContratoSelecionada.banco}"
                                                    completeMethod="#{contratoAdmControlador.completaBanco}"
                                                    var="b"
                                                    disabled="#{contratoAdmControlador.caucaoContratoSelecionada.banco != null and
                                                contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA'}"
                                                    maxResults="10"
                                                    itemLabel="#{b}"
                                                    itemValue="#{b.id}"
                                                    forceSelection="true"
                                                    converter="#{bancoControlador.converterGenerico}">
                                        <p:ajax event="itemSelect" process="@this"/>
                                    </p:autoComplete>

                                    <h:outputText value="Agência:"/>
                                    <p:autoComplete queryDelay="1000" title="Digite o número da Agência Bancária"
                                                    size="70"
                                                    value="#{contratoAdmControlador.caucaoContratoSelecionada.agencia}"
                                                    completeMethod="#{contratoAdmControlador.completaAgenciaDoBancoCaucao}"
                                                    var="a"
                                                    maxResults="10"
                                                    disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.caucaoContratoSelecionada.agencia != null}"
                                                    itemLabel="#{a}"
                                                    itemValue="#{a.id}"
                                                    forceSelection="true"
                                                    converter="#{agenciaControlador.converterGenerico}">
                                        <p:ajax event="itemSelect" process="@this"/>
                                    </p:autoComplete>

                                    <h:outputText value="Número da Conta Corrente:"/>
                                    <p:autoComplete queryDelay="1000" title="Digite o número da Agência Bancária"
                                                    size="70"
                                                    disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.caucaoContratoSelecionada.contaCorrenteBancaria != null}"
                                                    value="#{contratoAdmControlador.caucaoContratoSelecionada.contaCorrenteBancaria}"
                                                    completeMethod="#{contratoAdmControlador.completaContaCorrenteBancaria}"
                                                    var="cc"
                                                    maxResults="10"
                                                    itemLabel="#{cc}"
                                                    itemValue="#{cc.id}"
                                                    forceSelection="true"
                                                    converter="#{contaCorrenteBancariaControlador.converterGenerico}">
                                    </p:autoComplete>

                                    <h:outputLabel value="Data da garantia:"/>
                                    <p:calendar onkeypress="mascara(this, Data)"
                                                maxlength="10"
                                                disabled="#{contratoAdmControlador.caucaoContratoSelecionada.dataCaucao != null
                                             and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA'
                                            and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'RENOVACAO'}"
                                                style="text-align: right"
                                                autocomplete="off"
                                                title="Digite a data da garantia."
                                                value="#{contratoAdmControlador.caucaoContratoSelecionada.dataCaucao}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"/>

                                    <fc:outputLabelObrigatorio value="Valor do Contrato:"/>
                                    <p:inputText onkeydown="mascaraMonetaria(this);"
                                                 style="text-align: right"
                                                 size="15"
                                                 disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and
                                             contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'REDUCAO'
                                             and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'REFORCO'}"
                                                 value="#{contratoAdmControlador.caucaoContratoSelecionada.valor}"
                                                 converter="#{contratoAdmControlador.moneyConverter}"
                                                 title="Informe o valor do contrato.">
                                    </p:inputText>
                                </h:panelGrid>

                                <h:panelGrid columns="2"
                                             rendered="#{contratoAdmControlador.tipoCaucaoContrato eq 'TITULOS_DA_DIVIDA_PUBLICA'}"
                                             styleClass="mbot05">
                                    <fc:outputLabelObrigatorio value="Tipo de Movimentação: "/>
                                    <h:selectOneMenu
                                        value="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado}">
                                        <f:selectItems value="#{contratoAdmControlador.tipoMovimentacaoContrato}"/>
                                        <p:ajax event="change"
                                                onstart="aguarde.show()"
                                                oncomplete="aguarde.hide()"
                                                listener="#{contratoAdmControlador.recuperarUltimaGarantiaAdicionada()}"
                                                update="panel-caucao" process="@this"/>
                                    </h:selectOneMenu>
                                    <h:outputText value="Tipo: "/>
                                    <h:selectOneMenu title="Selecione o tipo da garantia"
                                                     disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'SUBSTITUICAO'}"
                                                     value="#{contratoAdmControlador.tipoCaucaoContrato}">
                                        <f:selectItems value="#{contratoAdmControlador.tiposDeCaucoes}"/>
                                        <p:ajax process="@this" update="panel-novo-caucao"
                                                onstart="aguarde.show()"
                                                event="change"
                                                oncomplete="aguarde.hide()"
                                                listener="#{contratoAdmControlador.definirCaucaoContratoPorTipo()}"/>
                                    </h:selectOneMenu>
                                    <fc:outputLabelObrigatorio value="Responsável: "/>
                                    <p:autoComplete queryDelay="1000"
                                                    disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA'}"
                                                    title="Digite o orgão/secretaria que deseja pesquisar."
                                                    value="#{contratoAdmControlador.caucaoContratoSelecionada.orgao}"
                                                    completeMethod="#{contratoAdmControlador.completaOrgaoSecretaria}"
                                                    converter="#{hierarquiaOrganizacionalControlador.converterUnidadeOrganizacional}"
                                                    var="ho"
                                                    forceSelection="true"
                                                    itemValue="#{ho.subordinada.id}"
                                                    itemLabel="#{ho}"
                                                    maxResults="10"
                                                    size="70">
                                    </p:autoComplete>

                                    <h:outputLabel value="Número da Escritura:"/>
                                    <p:inputText
                                        value="#{contratoAdmControlador.caucaoContratoSelecionada.numeroEscritura}"
                                        disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.caucaoContratoSelecionada.numeroEscritura != null}"
                                        size="10"/>

                                    <h:outputLabel value="Número do Registro SLC:"/>
                                    <p:inputText
                                        value="#{contratoAdmControlador.caucaoContratoSelecionada.numeroRegistroSCL}"
                                        disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.caucaoContratoSelecionada.numeroRegistroSCL != null}"
                                        size="10"/>

                                    <h:outputLabel value="Número da Custódia:"/>
                                    <p:inputText
                                        value="#{contratoAdmControlador.caucaoContratoSelecionada.numeroCustodia}"
                                        disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.caucaoContratoSelecionada.numeroCustodia != null}"
                                        size="10"/>

                                    <h:outputLabel value="Data da garantia:"/>
                                    <p:calendar onkeypress="mascara(this, Data)"
                                                maxlength="10"
                                                style="text-align: right"
                                                autocomplete="off"
                                                disabled="#{contratoAdmControlador.caucaoContratoSelecionada.dataCaucao != null
                                             and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA'
                                            and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'RENOVACAO'}"
                                                title="Digite a data da garantia."
                                                value="#{contratoAdmControlador.caucaoContratoSelecionada.dataCaucao}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"/>

                                    <fc:outputLabelObrigatorio value="Valor do Contrato: "/>
                                    <p:inputText onkeydown="mascaraMonetaria(this);"
                                                 style="text-align: right"
                                                 size="15"
                                                 disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and
                                             contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'REDUCAO'
                                             and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'REFORCO'}"
                                                 value="#{contratoAdmControlador.caucaoContratoSelecionada.valor}"
                                                 converter="#{contratoAdmControlador.moneyConverter}"
                                                 title="Informe o valor do contrato.">
                                    </p:inputText>

                                    <h:outputLabel value="Validade:"/>
                                    <p:calendar onkeypress="mascara(this, Data)"
                                                maxlength="10"
                                                disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.caucaoContratoSelecionada.validade != null}"
                                                style="text-align: right"
                                                autocomplete="off"
                                                title="Digite a validade."
                                                value="#{contratoAdmControlador.caucaoContratoSelecionada.validade}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"/>
                                </h:panelGrid>

                                <h:panelGrid columns="2"
                                             rendered="#{contratoAdmControlador.tipoCaucaoContrato eq 'SEGURO_GARANTIA'}"
                                             styleClass="mbot05">
                                    <fc:outputLabelObrigatorio value="Tipo de Movimentação: "/>
                                    <h:selectOneMenu
                                        value="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado}">
                                        <f:selectItems value="#{contratoAdmControlador.tipoMovimentacaoContrato}"/>
                                        <p:ajax event="change"
                                                listener="#{contratoAdmControlador.recuperarUltimaGarantiaAdicionada()}"
                                                update="panel-caucao" process="@this"/>
                                    </h:selectOneMenu>
                                    <h:outputText value="Tipo: "/>
                                    <h:selectOneMenu title="Selecione o tipo da garantia"
                                                     disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'SUBSTITUICAO'}"
                                                     value="#{contratoAdmControlador.tipoCaucaoContrato}">
                                        <f:selectItems value="#{contratoAdmControlador.tiposDeCaucoes}"/>
                                        <p:ajax process="@this" update="panel-novo-caucao"
                                                onstart="aguarde.show()"
                                                event="change"
                                                oncomplete="aguarde.hide()"
                                                listener="#{contratoAdmControlador.definirCaucaoContratoPorTipo()}"/>
                                    </h:selectOneMenu>
                                    <fc:outputLabelObrigatorio value="Responsável: "/>
                                    <p:autoComplete queryDelay="1000"
                                                    disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA'}"
                                                    title="Digite o orgão/secretaria que deseja pesquisar."
                                                    value="#{contratoAdmControlador.caucaoContratoSelecionada.orgao}"
                                                    completeMethod="#{contratoAdmControlador.completaOrgaoSecretaria}"
                                                    converter="#{hierarquiaOrganizacionalControlador.converterUnidadeOrganizacional}"
                                                    var="ho"
                                                    forceSelection="true"
                                                    itemValue="#{ho.subordinada.id}"
                                                    itemLabel="#{ho}"
                                                    maxResults="10"
                                                    size="70">
                                    </p:autoComplete>

                                    <h:outputLabel value="Nome do Segurado:"/>
                                    <p:inputText
                                        value="#{contratoAdmControlador.caucaoContratoSelecionada.nomeSegurado}"
                                        disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.caucaoContratoSelecionada.nomeSegurado != null}"
                                        size="70"/>

                                    <h:outputLabel value="Nome Seguradora:"/>
                                    <p:inputText
                                        value="#{contratoAdmControlador.caucaoContratoSelecionada.nomeSeguradora}"
                                        disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.caucaoContratoSelecionada.nomeSeguradora != null}"
                                        size="70"/>

                                    <h:outputLabel value="Número da Apólice:"/>
                                    <p:inputText
                                        value="#{contratoAdmControlador.caucaoContratoSelecionada.numeroSeguro}"
                                        disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.caucaoContratoSelecionada.numeroSeguro != null}"
                                        size="10"/>

                                    <h:outputLabel value="Data garantia:"/>
                                    <p:calendar onkeypress="mascara(this, Data)"
                                                maxlength="10"
                                                disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'RENOVACAO'}"
                                                style="text-align: right"
                                                autocomplete="off"
                                                title="Digite a data da garantia."
                                                value="#{contratoAdmControlador.caucaoContratoSelecionada.dataCaucao}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"/>

                                    <fc:outputLabelObrigatorio value="Valor do Contrato:"/>
                                    <p:inputText onkeydown="mascaraMonetaria(this);"
                                                 style="text-align: right"
                                                 disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and
                                             contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'REDUCAO'
                                             and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'REFORCO'}"
                                                 size="15"
                                                 value="#{contratoAdmControlador.caucaoContratoSelecionada.valor}"
                                                 converter="#{contratoAdmControlador.moneyConverter}"
                                                 title="Informe o valor do contrato."/>
                                </h:panelGrid>

                                <h:panelGrid columns="2"
                                             rendered="#{contratoAdmControlador.tipoCaucaoContrato eq 'FIANCA_BANCARIA'}"
                                             styleClass="mbot05">
                                    <fc:outputLabelObrigatorio value="Tipo de Movimentação: "/>
                                    <h:selectOneMenu
                                        value="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado}">
                                        <f:selectItems value="#{contratoAdmControlador.tipoMovimentacaoContrato}"/>
                                        <p:ajax event="change"
                                                listener="#{contratoAdmControlador.recuperarUltimaGarantiaAdicionada()}"
                                                update="panel-caucao" process="@this"/>
                                    </h:selectOneMenu>
                                    <h:outputText value="Tipo: "/>
                                    <h:selectOneMenu title="Selecione o tipo da garantia"
                                                     disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'SUBSTITUICAO'}"
                                                     value="#{contratoAdmControlador.tipoCaucaoContrato}">
                                        <f:selectItems value="#{contratoAdmControlador.tiposDeCaucoes}"/>
                                        <p:ajax process="@this" update="panel-novo-caucao"
                                                onstart="aguarde.show()"
                                                event="change"
                                                oncomplete="aguarde.hide()"
                                                listener="#{contratoAdmControlador.definirCaucaoContratoPorTipo()}"/>
                                    </h:selectOneMenu>
                                    <fc:outputLabelObrigatorio value="Responsável: "/>
                                    <p:autoComplete queryDelay="1000"
                                                    disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA'}"
                                                    title="Digite o orgão/secretaria que deseja pesquisar."
                                                    value="#{contratoAdmControlador.caucaoContratoSelecionada.orgao}"
                                                    completeMethod="#{contratoAdmControlador.completaOrgaoSecretaria}"
                                                    converter="#{hierarquiaOrganizacionalControlador.converterUnidadeOrganizacional}"
                                                    var="ho"
                                                    forceSelection="true"
                                                    itemValue="#{ho.subordinada.id}"
                                                    itemLabel="#{ho}"
                                                    maxResults="10"
                                                    size="70">
                                    </p:autoComplete>

                                    <h:outputText value="Banco:"/>
                                    <p:autoComplete queryDelay="1000" title="Informe o nome do banco" size="70"
                                                    value="#{contratoAdmControlador.caucaoContratoSelecionada.banco}"
                                                    completeMethod="#{contratoAdmControlador.completaBanco}"
                                                    var="b"
                                                    disabled="#{contratoAdmControlador.caucaoContratoSelecionada.banco != null and
                                                contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA'}"
                                                    maxResults="10"
                                                    itemLabel="#{b}"
                                                    itemValue="#{b.id}"
                                                    forceSelection="true"
                                                    converter="#{bancoControlador.converterGenerico}">
                                        <p:ajax event="itemSelect" process="@this"/>
                                    </p:autoComplete>

                                    <h:outputText value="Agência:"/>
                                    <p:autoComplete queryDelay="1000" title="Digite o número da Agência Bancária"
                                                    size="70"
                                                    disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA'
                                                and contratoAdmControlador.caucaoContratoSelecionada.agencia != null}"
                                                    value="#{contratoAdmControlador.caucaoContratoSelecionada.agencia}"
                                                    completeMethod="#{contratoAdmControlador.completaAgenciaDoBancoCaucao}"
                                                    var="a"
                                                    maxResults="10"
                                                    itemLabel="#{a}"
                                                    itemValue="#{a.id}"
                                                    forceSelection="true"
                                                    converter="#{agenciaControlador.converterGenerico}">
                                        <p:ajax event="itemSelect" process="@this"/>
                                    </p:autoComplete>

                                    <h:outputLabel value="Número da Fiança:"/>
                                    <p:inputText
                                        value="#{contratoAdmControlador.caucaoContratoSelecionada.numeroFianca}"
                                        disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and contratoAdmControlador.caucaoContratoSelecionada.numeroFianca != null}"
                                        size="10"/>

                                    <h:outputLabel value="Data da garantia:"/>
                                    <p:calendar onkeypress="mascara(this, Data)"
                                                maxlength="10"
                                                disabled="#{contratoAdmControlador.caucaoContratoSelecionada.dataCaucao != null
                                             and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA'
                                            and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'RENOVACAO'}"
                                                style="text-align: right"
                                                autocomplete="off"
                                                title="Digite a data da garantia."
                                                value="#{contratoAdmControlador.caucaoContratoSelecionada.dataCaucao}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"/>

                                    <h:outputLabel value="Valor do Contrato:"/>
                                    <p:inputText onkeydown="mascaraMonetaria(this);"
                                                 style="text-align: right"
                                                 size="15"
                                                 disabled="#{contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'ORDINARIA' and
                                             contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'REDUCAO'
                                             and contratoAdmControlador.tipoMovimentacaoContratoSelecionado ne 'REFORCO'}"
                                                 value="#{contratoAdmControlador.caucaoContratoSelecionada.valor}"
                                                 converter="#{contratoAdmControlador.moneyConverter}"
                                                 title="Informe o valor do contrato."/>
                                </h:panelGrid>

                                <p:commandButton value="Confirmar"
                                                 styleClass="mrig05 padrao"
                                                 onclick="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="panel-novo-caucao"
                                                 update=":Formulario:tab-view-geral:panel-caucao"
                                                 actionListener="#{contratoAdmControlador.confirmarCaucaoContrato}"
                                                 icon="ui-icon-check"/>

                                <p:commandButton value="Cancelar"
                                                 process="@this"
                                                 styleClass="padrao"
                                                 onclick="aguarde.show(); "
                                                 oncomplete="aguarde.hide()"
                                                 actionListener="#{contratoAdmControlador.cancelarCaucaoContrato}"
                                                 update=":Formulario:tab-view-geral:panel-caucao"
                                                 icon="ui-icon-cancel"/>
                            </p:panel>

                            <p:dataTable paginator="true"
                                         id="tabela-caucao"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         value="#{contratoAdmControlador.selecionado.caucoes}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>GARANTIAS CONTRATUAIS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="caucao">

                                <p:column headerText="Detalhes" style="text-align: center; width: 50px;">
                                    <p:commandButton icon="ui-icon-search"
                                                     title="Clique para ver os detalhes deste registro."
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide(); dialogCaucao.show()"
                                                     actionListener="#{contratoAdmControlador.selecionarCaucaoContrato(caucao)}"
                                                     process="@this"
                                                     update=":form-dialog-caucao"/>
                                </p:column>

                                <p:column headerText="Tipo de Movimentação" style="text-align: right;">
                                    <h:outputText value="#{caucao.tipoMovimentacaoContrato.descricao}"/>
                                </p:column>
                                <p:column headerText="Tipo" style="text-align: right;">
                                    <h:outputText value="#{caucao.tipo.descricao}"/>
                                </p:column>
                                <p:column headerText="Data" style="text-align: center;">
                                    <h:outputText value="#{caucao.dataCaucao}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor" style="text-align: center;">
                                    <h:outputText value="#{caucao.valor}">
                                        <f:convertNumber type="currency" pattern="#,##0.00"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Aditivo">
                        <ad:tabela-alteracoes-contratuais
                            alteracoesContratuais="#{contratoAdmControlador.selecionado.aditivos}"/>
                    </p:tab>

                    <p:tab title="Apostilamento">
                        <ad:tabela-alteracoes-contratuais
                            alteracoesContratuais="#{contratoAdmControlador.selecionado.apostilamentos}"/>
                    </p:tab>

                    <p:tab title="Ajuste">
                        <ad:tabela-ajuste-contrato
                            contrato="#{contratoAdmControlador.selecionado}"
                            ajustes="#{contratoAdmControlador.selecionado.ajustes}"/>
                    </p:tab>

                    <p:tab title="Gestor e Fiscal">
                        <p:fieldset id="panel-fiscal" legend="Fiscal"
                                    styleClass="mtop05">
                            <p:commandButton value="Novo Fiscal"
                                             icon="ui-icon-circle-plus"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             styleClass="mtop10"
                                             rendered="#{contratoAdmControlador.fiscalContrato eq null}"
                                             actionListener="#{contratoAdmControlador.novoFiscalContrato()}"
                                             process="@this"
                                             update=":Formulario:tab-view-geral:panel-fiscal"/>

                            <h:panelGrid columns="2"
                                         rendered="#{contratoAdmControlador.fiscalContrato ne null}"
                                         styleClass="mbot05">

                                <fc:outputLabelObrigatorio value="Tipo de Fiscal: "/>
                                <h:selectOneRadio title="Selecione o tipo de fiscal"
                                                  value="#{contratoAdmControlador.fiscalContrato.tipo}">
                                    <f:selectItems value="#{contratoAdmControlador.tiposFiscal}"/>
                                    <p:ajax process="@this"
                                            update="panel-fiscal"
                                            listener="#{contratoAdmControlador.definirFiscalPorTipo()}"/>
                                </h:selectOneRadio>

                                <fc:outputLabelObrigatorio value="Servidor: "
                                                           rendered="#{contratoAdmControlador.fiscalContrato.tipo.isInterno()}"/>
                                <p:autoComplete queryDelay="1000"
                                                rendered="#{contratoAdmControlador.fiscalContrato.tipo.isInterno()
                                                    and !contratoAdmControlador.responsavelUnidadePessoaFisica}"
                                                title="Digite o responsável pela prefeitura que deseja pesquisar."
                                                value="#{contratoAdmControlador.fiscalContrato.servidor}"
                                                completeMethod="#{contratoAdmControlador.completarContratosFPVigentes}"
                                                converter="#{contratoFPControlador.converterGenerico}"
                                                var="c"
                                                dropdown="true"
                                                panelStyle="max-height: 250px; max-width: 800px"
                                                maxResults="50"
                                                itemValue="#{c.id}"
                                                itemLabel="#{c}"
                                                size="70">
                                </p:autoComplete>

                                <p:autoComplete queryDelay="1000"
                                                rendered="#{contratoAdmControlador.fiscalContrato.tipo.isInterno()
                                                    and contratoAdmControlador.responsavelUnidadePessoaFisica}"
                                                title="Digite o responsável pela prefeitura que deseja pesquisar."
                                                value="#{contratoAdmControlador.fiscalContrato.servidorPF}"
                                                completeMethod="#{contratoAdmControlador.completarPessoaFisica}"
                                                converter="#{contratoAdmControlador.converterPessoa}"
                                                var="c"
                                                dropdown="true"
                                                panelStyle="max-height: 250px; max-width: 800px"
                                                maxResults="50"
                                                itemValue="#{c.id}"
                                                itemLabel="#{c}"
                                                size="70">
                                </p:autoComplete>

                                <fc:outputLabelObrigatorio value="Ato Legal: "
                                                           rendered="#{contratoAdmControlador.fiscalContrato.tipo.isInterno()}"/>
                                <h:panelGroup rendered="#{contratoAdmControlador.fiscalContrato.tipo.isInterno()}">
                                    <p:autoComplete queryDelay="1000"
                                                    title="Digite o nome do ato legal que deseja pesquisar."
                                                    value="#{contratoAdmControlador.fiscalContrato.atoLegal}"
                                                    completeMethod="#{contratoAdmControlador.completarAtoLegal}"
                                                    converter="#{atoLegalControlador.converterGenerico}"
                                                    var="ato"
                                                    dropdown="true"
                                                    panelStyle="max-height: 250px; max-width: 800px"
                                                    maxResults="50"
                                                    itemValue="#{ato.id}"
                                                    itemLabel="#{ato}"
                                                    size="70">
                                        <p:ajax event="itemSelect"
                                                process="@this"
                                                update="bt-ver-ato"/>
                                    </p:autoComplete>

                                    <p:commandButton process="@none"
                                                     id="bt-ver-ato"
                                                     icon="ui-icon-search"
                                                     styleClass="mlef05"
                                                     update="@none"
                                                     disabled="#{contratoAdmControlador.fiscalContrato.atoLegal eq null}"
                                                     onclick="window.open('#{request.contextPath}/atolegal/ver/#{contratoAdmControlador.fiscalContrato.atoLegal.id}/','_blank');"/>

                                    <fc:botaoInformacao id="infoAtoLegal"
                                                        styleClassBotao="icone-30 mrig03"
                                                        title="Informações adicionais"
                                                        resumo="Informativo: "
                                                        detalhes="Para aprovação do cadastro do contrato, será validado a obrigação de carga de anexo junto ao cadastro dessa portaria."/>

                                    <p:commandButton icon="ui-icon-plus"
                                                     title="Novo"
                                                     styleClass="mrig10"
                                                     onstart="aguarde.show();"
                                                     oncomplete="aguarde.hide();"
                                                     process="@this"
                                                     onclick="window.open('#{request.contextPath}/atolegal/novo/','_blank');"/>
                                </h:panelGroup>

                                <fc:outputLabelObrigatorio value="Contrato Firmado: "
                                                           rendered="#{contratoAdmControlador.fiscalContrato.tipo.isExterno()}"/>
                                <p:autoComplete queryDelay="1000"
                                                rendered="#{contratoAdmControlador.fiscalContrato.tipo.isExterno()}"
                                                value="#{contratoAdmControlador.fiscalContrato.contratoFiscal}"
                                                completeMethod="#{contratoAdmControlador.buscarContratoPorNumeroOrAno}"
                                                converter="#{contratoFPControlador.converterGenerico}"
                                                var="c"
                                                dropdown="true"
                                                panelStyle="max-height: 250px;max-width: 800px"
                                                maxResults="50"
                                                itemValue="#{c.id}"
                                                itemLabel="#{c}"
                                                size="70">
                                </p:autoComplete>

                                <fc:outputLabelObrigatorio value="Início de Vigência: "/>
                                <p:calendar onkeypress="mascara(this, mdata)"
                                            maxlength="10"
                                            style="text-align: right"
                                            autocomplete="off"
                                            title="Digite inicio da vigência."
                                            value="#{contratoAdmControlador.fiscalContrato.inicioVigencia}"
                                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                            size="10"/>

                                <h:outputText value="Fim de Vigência: "/>
                                <p:calendar onkeypress="mascara(this, mdata)"
                                            maxlength="10"
                                            style="text-align: right"
                                            autocomplete="off"
                                            title="Digite o final da vigência."
                                            value="#{contratoAdmControlador.fiscalContrato.finalVigencia}"
                                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                            size="10"/>
                            </h:panelGrid>

                            <p:commandButton value="Confirmar"
                                             styleClass="mtop10 prioritario"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             process="panel-fiscal"
                                             update=":Formulario:tab-view-geral:panel-fiscal"
                                             rendered="#{contratoAdmControlador.fiscalContrato ne null}"
                                             actionListener="#{contratoAdmControlador.confirmarFiscalContrato()}"
                                             icon="ui-icon-check"/>

                            <p:commandButton value="Cancelar"
                                             styleClass="mtop10 mlef05"
                                             process="@this"
                                             onclick="aguarde.show(); "
                                             oncomplete="aguarde.hide()"
                                             rendered="#{contratoAdmControlador.fiscalContrato ne null}"
                                             actionListener="#{contratoAdmControlador.cancelarFiscalContrato()}"
                                             update=":Formulario:tab-view-geral:panel-fiscal"
                                             icon="ui-icon-cancel"/>

                            <p:dataTable paginator="true"
                                         id="tabela-fiscal"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         value="#{contratoAdmControlador.selecionado.fiscais}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>FISCAIS&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="fiscal">

                                <p:column headerText="Ações"
                                          style="text-align: center; width: 8%">
                                    <p:commandButton icon="ui-icon-pencil"
                                                     title="Clique para alterar este registro."
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide();"
                                                     process="@this"
                                                     actionListener="#{contratoAdmControlador.selecionarFiscalContrato(fiscal)}"
                                                     update=":Formulario:tab-view-geral:panel-fiscal"
                                                     styleClass="mrig05"/>

                                    <p:commandButton icon="ui-icon-trash"
                                                     process="@this"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{contratoAdmControlador.removerFiscalContrato(fiscal)}"
                                                     title="Clique para remover este registro."
                                                     update="tabela-fiscal"
                                                     styleClass="mrig05"/>
                                </p:column>
                                <p:column headerText="Tipo" style="text-align: left">
                                    <h:outputText value="#{fiscal.tipo.descricao}"/>
                                </p:column>
                                <p:column headerText="Responsável" style="text-align: left;">
                                    <h:outputText value="#{fiscal.responsavel}"/>
                                </p:column>
                                <p:column headerText="Ato Legal" style="text-align: left;">
                                    <p:commandLink value="#{fiscal.atoLegal} "
                                                   onclick="window.open('#{request.contextPath}/atolegal/ver/#{fiscal.atoLegal.id}/','_blank');"/>

                                    <br/>
                                    <h:outputText value="Anexo: " style="color: grey"/>
                                    <a target="_blank" title="Clique para abrir o arquivo em nova aba"
                                       style="font-weight: bold; color: greyt"
                                       href="${facesContext.externalContext.requestContextPath}/arquivos/#{fiscal.atoLegal.arquivo.nome}?id=#{fiscal.atoLegal.arquivo.id}">#{fiscal.atoLegal.arquivo.nome}</a>
                                </p:column>
                                <p:column headerText="Início de Vigência" style="text-align: center;">
                                    <h:outputText value="#{fiscal.inicioVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Fim de Vigência" style="text-align: center;">
                                    <h:outputText value="#{fiscal.finalVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:fieldset>

                        <p:fieldset id="panel-gestor" legend="Gestor"
                                    styleClass="mtop50">
                            <p:commandButton value="Novo Gestor"
                                             styleClass="mtop10"
                                             icon="ui-icon-circle-plus"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             rendered="#{contratoAdmControlador.gestorContrato eq null}"
                                             actionListener="#{contratoAdmControlador.novoGestorContrato()}"
                                             process="@this"
                                             update=":Formulario:tab-view-geral:panel-gestor"/>

                            <h:panelGrid columns="2" styleClass="mbot05" id="grid-gestor"
                                         rendered="#{contratoAdmControlador.gestorContrato ne null}">
                                <fc:outputLabelObrigatorio value="Servidor: "/>
                                <p:autoComplete queryDelay="1000"
                                                title="Digite o servidor que deseja pesquisar."
                                                value="#{contratoAdmControlador.gestorContrato.servidor}"
                                                completeMethod="#{contratoAdmControlador.completarContratosFPVigentes}"
                                                converter="#{contratoFPControlador.converterGenerico}"
                                                rendered="#{!contratoAdmControlador.responsavelUnidadePessoaFisica}"
                                                var="serv"
                                                itemValue="#{serv.id}"
                                                itemLabel="#{serv}"
                                                dropdown="true"
                                                panelStyle="max-height: 250px;max-width: 800px"
                                                maxResults="50"
                                                size="70">
                                </p:autoComplete>

                                <p:autoComplete queryDelay="1000"
                                                title="Digite o servidor que deseja pesquisar."
                                                value="#{contratoAdmControlador.gestorContrato.servidorPF}"
                                                completeMethod="#{contratoAdmControlador.completarPessoaFisica}"
                                                converter="#{contratoAdmControlador.converterPessoa}"
                                                rendered="#{contratoAdmControlador.responsavelUnidadePessoaFisica}"
                                                var="serv"
                                                itemValue="#{serv.id}"
                                                itemLabel="#{serv}"
                                                dropdown="true"
                                                panelStyle="max-height: 250px;max-width: 800px"
                                                maxResults="50"
                                                size="70">
                                </p:autoComplete>

                                <fc:outputLabelObrigatorio value="Início de Vigência: "/>
                                <p:calendar onkeypress="mascara(this, mdata)"
                                            maxlength="10"
                                            style="text-align: right"
                                            autocomplete="off"
                                            title="Digite inicio da vigência."
                                            value="#{contratoAdmControlador.gestorContrato.inicioVigencia}"
                                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                            size="10"/>

                                <h:outputLabel value="Fim de Vigência: "/>
                                <p:calendar onkeypress="mascara(this, mdata)"
                                            maxlength="10"
                                            style="text-align: right"
                                            autocomplete="off"
                                            title="Digite o final da vigência."
                                            value="#{contratoAdmControlador.gestorContrato.finalVigencia}"
                                            locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                            size="10"/>
                            </h:panelGrid>

                            <p:commandButton value="Confirmar"
                                             styleClass="mtop10 prioritario"
                                             onclick="aguarde.show()"
                                             oncomplete="aguarde.hide()"
                                             process="grid-gestor @this"
                                             update=":Formulario:tab-view-geral:panel-gestor"
                                             rendered="#{contratoAdmControlador.gestorContrato ne null}"
                                             actionListener="#{contratoAdmControlador.confirmarGestorContrato()}"
                                             icon="ui-icon-check"/>

                            <p:commandButton value="Cancelar"
                                             process="@this"
                                             styleClass="mtop10 mlef05"
                                             onclick="aguarde.show(); "
                                             oncomplete="aguarde.hide()"
                                             rendered="#{contratoAdmControlador.gestorContrato ne null}"
                                             actionListener="#{contratoAdmControlador.cancelarGestorContrato()}"
                                             update=":Formulario:tab-view-geral:panel-gestor"
                                             icon="ui-icon-cancel"/>

                            <p:dataTable paginator="true"
                                         id="tabela-gestor"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         value="#{contratoAdmControlador.selecionado.gestores}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>GESTORES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="gestor">

                                <p:column headerText="Ações" style="text-align: center; width: 10%;">
                                    <p:commandButton icon="ui-icon-pencil"
                                                     title="Clique para alterar este registro."
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide();"
                                                     process="@this"
                                                     actionListener="#{contratoAdmControlador.editarGestorContrato(gestor)}"
                                                     update=":Formulario:tab-view-geral:panel-gestor"
                                                     styleClass="mrig05"/>

                                    <p:commandButton icon="ui-icon-trash"
                                                     process="@this"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{contratoAdmControlador.removerGestorContrato(gestor)}"
                                                     title="Clique para remover este registro."
                                                     update="tabela-gestor"
                                                     styleClass="mrig05"/>
                                </p:column>
                                <p:column headerText="Servidor" style="text-align: left;">
                                    <h:outputText value="#{gestor.gestor}"/>
                                </p:column>
                                <p:column headerText="Início de Vigência" style="text-align: center;">
                                    <h:outputText value="#{gestor.inicioVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Fim de Vigência" style="text-align: center;">
                                    <h:outputText value="#{gestor.finalVigencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:fieldset>
                    </p:tab>

                    <p:tab title="Penalidades">
                        <p:outputPanel id="panel-penalidade">
                            <p:commandButton value="Nova Penalidade"
                                             icon="ui-icon-circle-plus"
                                             onclick="aguarde.show()"
                                             styleClass="padrao"
                                             rendered="#{contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                             oncomplete="aguarde.hide()"
                                             immediate="true"
                                             actionListener="#{contratoAdmControlador.novoPenalidade()}"
                                             process="@this"
                                             update=":Formulario:tab-view-geral:panel-penalidade"/>

                            <p:panel header="Novo/Editar Penalidade"
                                     id="panel-novo-penalidade"
                                     rendered="#{contratoAdmControlador.penalidadeContratoSelecionado ne null}"
                                     styleClass="mtop05 mbot05">
                                <h:outputText value="Tipo de Penalidade: "/>
                                <h:selectOneMenu title="Selecione o tipo de penalidade"
                                                 disabled="#{contratoAdmControlador.penalidadeContratoSelecionado.operacao eq 'EDITAR'}"
                                                 value="#{contratoAdmControlador.penalidadeContratoSelecionado.tipo}">
                                    <f:selectItems value="#{contratoAdmControlador.tiposDePenalidade}"/>
                                    <f:ajax execute="@this" render="panel-novo-penalidade"
                                            listener="#{contratoAdmControlador.definirPenalidadePorTipo()}"/>
                                </h:selectOneMenu>
                                <p:separator/>
                                <h:panelGrid columns="2"
                                             rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.tipo eq 'ADVERTENCIA' or contratoAdmControlador.penalidadeContratoSelecionado.tipo eq 'MULTA'}"
                                             styleClass="mbot05">
                                    <fc:outputLabelObrigatorio value="Data da Ocorrência:"/>
                                    <p:calendar onkeypress="mascara(this, Data)"
                                                maxlength="10"
                                                style="text-align: right"
                                                autocomplete="off"
                                                title="Digite a data da ocorrência."
                                                value="#{contratoAdmControlador.penalidadeContratoSelecionado.dataOcorrencia}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"/>

                                    <fc:outputLabelObrigatorio value="Descrição da Ocorrência:"/>
                                    <h:panelGrid columns="2"
                                                 cellpadding="0"
                                                 cellspacing="0">
                                        <p:inputTextarea title="Digite a descrição da ocorrência"
                                                         value="#{contratoAdmControlador.penalidadeContratoSelecionado.descricaoOcorrencia}"
                                                         cols="70"
                                                         maxlength="255"
                                                         autoResize="true"
                                                         counterTemplate="{0} Caracteres Restantes."
                                                         counter="counter-descricao-ocorrencia"/>
                                        <h:outputText id="counter-descricao-ocorrencia"
                                                      style="color: #497692"
                                                      styleClass="mlef05"/>
                                    </h:panelGrid>

                                    <fc:outputLabelObrigatorio value="Responsável pela Ciência:"/>
                                    <p:autoComplete queryDelay="1000"
                                                    title="Digite o resposável pela ciência da penalidade."
                                                    value="#{contratoAdmControlador.penalidadeContratoSelecionado.pessoaFisica}"
                                                    completeMethod="#{contratoAdmControlador.completaPessoaFisica}"
                                                    converter="#{contratoAdmControlador.converterPessoa}"
                                                    var="p"
                                                    forceSelection="true"
                                                    itemValue="#{p.id}"
                                                    itemLabel="#{p}"
                                                    maxResults="10"
                                                    size="70">
                                    </p:autoComplete>

                                    <fc:outputLabelObrigatorio value="Data da Ciência:"/>
                                    <p:calendar onkeypress="mascara(this, mdata)"
                                                maxlength="10"
                                                style="text-align: right"
                                                autocomplete="off"
                                                title="Digite a data da ciência."
                                                value="#{contratoAdmControlador.penalidadeContratoSelecionado.dataAssinatura}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"/>

                                    <fc:outputLabelObrigatorio value="Dívida Diversa:"
                                                               rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.isMulta()}"/>
                                    <h:panelGrid columns="2"
                                                 rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.isMulta()}"
                                                 cellpadding="0" cellspacing="0">
                                        <p:autoComplete
                                            value="#{contratoAdmControlador.penalidadeContratoSelecionado.calculoDividaDiversa}"
                                            completeMethod="#{calculoDividaDiversaControlador.buscarCalculoDividaDiversaPorNumero}"
                                            converter="#{calculoDividaDiversaControlador.converterGenerico}"
                                            var="divida"
                                            itemLabel="#{divida}" itemValue="#{divida.id}"
                                            maxResults="10" size="70">
                                            <p:ajax event="itemSelect" update="bt-visualizar-divida-diversa"/>
                                        </p:autoComplete>
                                        <p:commandButton id="bt-visualizar-divida-diversa"
                                                         styleClass="mlef05"
                                                         icon="ui-icon-search"
                                                         disabled="#{contratoAdmControlador.penalidadeContratoSelecionado.calculoDividaDiversa eq null}"
                                                         actionListener="#{contratoAdmControlador.buscarResultadoParcelaDoCalculoDividaDividaDaPenalidade()}"
                                                         update="@this :form-parcelas-divida-diversa"
                                                         process="@this :form-parcelas-divida-diversa"
                                                         onclick="aguarde.show()"
                                                         oncomplete="aguarde.hide(); dlgParcelasDividaDiversa.show(); "/>
                                    </h:panelGrid>

                                    <fc:outputLabelObrigatorio value="Percentual Multa:"
                                                               rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.isMulta()}"/>
                                    <p:inputText id="percentualMulta"
                                                 rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.isMulta()}"
                                                 maxlength="6"
                                                 size="10"
                                                 converter="percentualConverter"
                                                 onkeypress="mascara(this, porcentagem2)"
                                                 value="#{contratoAdmControlador.penalidadeContratoSelecionado.percentual}">
                                    </p:inputText>

                                    <fc:outputLabelObrigatorio value="Observações:"/>
                                    <h:panelGrid columns="2"
                                                 cellpadding="0"
                                                 cellspacing="0">
                                        <p:inputTextarea title="Digite a descrição da ocorrência"
                                                         value="#{contratoAdmControlador.penalidadeContratoSelecionado.observacoes}"
                                                         cols="70"
                                                         maxlength="3000"
                                                         autoResize="true"
                                                         counterTemplate="{0} Caracteres Restantes."
                                                         counter="counter-obs-ocorrencia"/>
                                        <h:outputText id="counter-obs-ocorrencia"
                                                      style="color: #497692"
                                                      styleClass="mlef05"/>
                                    </h:panelGrid>
                                </h:panelGrid>

                                <h:panelGrid columns="2"
                                             rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.isSuspensaoTemporaria()  or contratoAdmControlador.penalidadeContratoSelecionado.isDeclaracaoInidoneidade()}"
                                             styleClass="mbot05">
                                    <fc:outputLabelObrigatorio value="Data da Ocorrência:"/>
                                    <p:calendar onkeypress="mascara(this, Data)"
                                                maxlength="10"
                                                style="text-align: right"
                                                autocomplete="off"
                                                title="Digite a data da ocorrência."
                                                value="#{contratoAdmControlador.penalidadeContratoSelecionado.dataOcorrencia}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"/>

                                    <fc:outputLabelObrigatorio value="Descrição da Ocorrência:"/>
                                    <h:panelGrid columns="2"
                                                 cellpadding="0"
                                                 cellspacing="0">
                                        <p:inputTextarea title="Digite a descrição da ocorrência"
                                                         value="#{contratoAdmControlador.penalidadeContratoSelecionado.descricaoOcorrencia}"
                                                         cols="70"
                                                         maxlength="255"
                                                         autoResize="true"
                                                         counterTemplate="{0} Caracteres Restantes."
                                                         counter="counter-descricao-ocorrencia-1"/>
                                        <h:outputText id="counter-descricao-ocorrencia-1"
                                                      style="color: #497692"
                                                      styleClass="mlef05"/>
                                    </h:panelGrid>

                                    <fc:outputLabelObrigatorio value="Responsável pela Ciência:"/>
                                    <p:autoComplete queryDelay="1000"
                                                    title="Digite o responsável pela ciência da penalidade."
                                                    value="#{contratoAdmControlador.penalidadeContratoSelecionado.pessoaFisica}"
                                                    completeMethod="#{contratoAdmControlador.completaPessoaFisica}"
                                                    converter="#{contratoAdmControlador.converterPessoa}"
                                                    var="p"
                                                    forceSelection="true"
                                                    itemValue="#{p.id}"
                                                    itemLabel="#{p}"
                                                    maxResults="10"
                                                    size="70">
                                    </p:autoComplete>

                                    <fc:outputLabelObrigatorio value="Data da Ciência:"/>
                                    <p:calendar onkeypress="mascara(this, Data)"
                                                maxlength="10"
                                                style="text-align: right"
                                                autocomplete="off"
                                                title="Digite a data da ciência."
                                                value="#{contratoAdmControlador.penalidadeContratoSelecionado.dataAssinatura}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"/>

                                    <fc:outputLabelObrigatorio value="Veículo de Publicação:"/>
                                    <p:autoComplete queryDelay="1000" title="Digite o veículo de publicação."
                                                    value="#{contratoAdmControlador.penalidadeContratoSelecionado.veiculoDePublicacao}"
                                                    completeMethod="#{contratoAdmControlador.completaVeiculoDePublicacao}"
                                                    converter="#{veiculoDePublicacaoControlador.converterGenerico}"
                                                    var="vp"
                                                    forceSelection="true"
                                                    itemValue="#{vp.id}"
                                                    itemLabel="#{vp}"
                                                    maxResults="10"
                                                    size="70">
                                    </p:autoComplete>

                                    <fc:outputLabelObrigatorio value="Data da Publicação:"/>
                                    <p:calendar onkeypress="mascara(this, Data)"
                                                maxlength="10"
                                                style="text-align: right"
                                                autocomplete="off"
                                                title="Digite a data de publicação"
                                                value="#{contratoAdmControlador.penalidadeContratoSelecionado.dataDePublicacao}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"/>

                                    <fc:outputLabelObrigatorio value="Número Publicação: "
                                                               rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.isSuspensaoTemporaria()}"/>
                                    <p:inputText
                                        value="#{contratoAdmControlador.penalidadeContratoSelecionado.numeroPublicacao}"
                                        size="3"
                                        rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.isSuspensaoTemporaria()}"
                                        style="text-align: right"
                                        styleClass="mrig05"/>

                                    <fc:outputLabelObrigatorio value="Inicia Em:"
                                                               rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.isSuspensaoTemporaria()}"/>
                                    <p:calendar onkeypress="mascara(this, Data)"
                                                maxlength="10"
                                                style="text-align: right"
                                                autocomplete="off"
                                                title="Digite a data de início da suspensão"
                                                value="#{contratoAdmControlador.penalidadeContratoSelecionado.iniciaEm}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"
                                                rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.isSuspensaoTemporaria()}"/>

                                    <fc:outputLabelObrigatorio value="Finaliza Em:"
                                                               rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.isSuspensaoTemporaria()}"/>
                                    <p:calendar onkeypress="mascara(this, Data)"
                                                maxlength="10"
                                                style="text-align: right"
                                                autocomplete="off"
                                                title="Digite a data de fim da suspensão"
                                                value="#{contratoAdmControlador.penalidadeContratoSelecionado.finalizaEm}"
                                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                                size="10"
                                                rendered="#{contratoAdmControlador.penalidadeContratoSelecionado.isSuspensaoTemporaria()}"/>

                                    <fc:outputLabelObrigatorio value="Observações:"/>
                                    <h:panelGrid columns="2"
                                                 cellpadding="0"
                                                 cellspacing="0">
                                        <p:inputTextarea title="Digite a descrição da ocorrência"
                                                         value="#{contratoAdmControlador.penalidadeContratoSelecionado.observacoes}"
                                                         cols="70"
                                                         maxlength="3000"
                                                         autoResize="true"
                                                         counterTemplate="{0} Caracteres Restantes."
                                                         counter="counter-obs-ocorrencia-1"/>
                                        <h:outputText id="counter-obs-ocorrencia-1"
                                                      style="color: #497692"
                                                      styleClass="mlef05"/>
                                    </h:panelGrid>
                                </h:panelGrid>

                                <p:commandButton value="Confirmar"
                                                 styleClass="padrao"
                                                 onclick="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="panel-novo-penalidade"
                                                 update=":Formulario:tab-view-geral:panel-penalidade"
                                                 actionListener="#{contratoAdmControlador.confirmarPenalidade}"
                                                 icon="ui-icon-check"/>

                                <p:commandButton value="Cancelar"
                                                 process="@this"
                                                 styleClass="padrao"
                                                 onclick="aguarde.show(); "
                                                 oncomplete="aguarde.hide()"
                                                 actionListener="#{contratoAdmControlador.cancelarPenalidade}"
                                                 update=":Formulario:tab-view-geral:panel-penalidade"
                                                 icon="ui-icon-cancel"/>
                            </p:panel>

                            <p:dataTable paginator="true"
                                         id="tabela-penalidade"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         value="#{contratoAdmControlador.selecionado.penalidades}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>PENALIDADES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="penalidade">

                                <p:column headerText="Ações"
                                          rendered="#{contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                          style="text-align: center; width: 90px;">
                                    <p:commandButton icon="ui-icon-pencil"
                                                     title="Clique para alterar este registro."
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide();"
                                                     process="@this"
                                                     actionListener="#{contratoAdmControlador.selecionarPenalidade(penalidade)}"
                                                     update=":Formulario:tab-view-geral:panel-penalidade"
                                                     styleClass="mrig05"/>

                                    <p:commandButton icon="ui-icon-trash"
                                                     process="@this"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{contratoAdmControlador.removerPenalidade(penalidade)}"
                                                     title="Clique para remover este registro."
                                                     update="tabela-penalidade"
                                                     styleClass="mrig05"/>
                                </p:column>

                                <p:column headerText="Tipo" style="text-align: center; width: 200px;">
                                    <h:outputText value="#{penalidade.tipo.descricao}"/>
                                </p:column>
                                <p:column headerText="Data da Ocorrência" style="text-align: center; width: 100px;">
                                    <h:outputText value="#{penalidade.dataOcorrencia}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Descrição Ocorrência" style="text-align: left;">
                                    <h:outputText value="#{penalidade.descricaoOcorrencia}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Prepostos">
                        <p:outputPanel id="panel-preposto">
                            <p:commandButton value="Novo Preposto"
                                             icon="ui-icon-circle-plus"
                                             onclick="aguarde.show()"
                                             rendered="#{contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                             oncomplete="aguarde.hide()"
                                             immediate="true"
                                             styleClass="padrao"
                                             actionListener="#{contratoAdmControlador.novoPreposto()}"
                                             process="@this"
                                             update=":Formulario:tab-view-geral:panel-preposto"/>

                            <p:panel header="Novo/Editar Preposto"
                                     id="panel-novo-preposto"
                                     rendered="#{contratoAdmControlador.contatoContratoSelecionado ne null}"
                                     styleClass="mtop05 mbot05">

                                <h:panelGrid columns="2"
                                             styleClass="mbot05">
                                    <fc:outputLabelObrigatorio value="Nome:"/>
                                    <p:inputText value="#{contratoAdmControlador.contatoContratoSelecionado.nome}"
                                                 size="50"/>

                                    <fc:outputLabelObrigatorio value="Telefone:"/>
                                    <p:inputMask mask="(99) 9999-9999?9"
                                                 value="#{contratoAdmControlador.contatoContratoSelecionado.telefone}"/>

                                    <h:outputLabel value="E-mail:"/>
                                    <p:inputText value="#{contratoAdmControlador.contatoContratoSelecionado.email}"
                                                 size="60"/>

                                    <h:outputLabel value="Cargo:"/>
                                    <p:inputText value="#{contratoAdmControlador.contatoContratoSelecionado.cargo}"
                                                 size="50"/>
                                </h:panelGrid>

                                <p:commandButton value="Confirmar"
                                                 styleClass="mrig05"
                                                 onclick="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="panel-novo-preposto"
                                                 update=":Formulario:tab-view-geral:panel-preposto"
                                                 actionListener="#{contratoAdmControlador.confirmarPreposto()}"
                                                 icon="ui-icon-check"/>

                                <p:commandButton value="Cancelar"
                                                 process="@this"
                                                 onclick="aguarde.show(); "
                                                 oncomplete="aguarde.hide()"
                                                 actionListener="#{contratoAdmControlador.cancelarPreposto()}"
                                                 update=":Formulario:tab-view-geral:panel-preposto"
                                                 icon="ui-icon-cancel"/>
                            </p:panel>

                            <p:dataTable paginator="true"
                                         id="tabela-preposto"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         value="#{contratoAdmControlador.selecionado.contatos}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Prepostos&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="preposto">

                                <p:column headerText="Ações"
                                          rendered="#{contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                          style="text-align: center; width: 90px;">
                                    <p:commandButton icon="ui-icon-pencil"
                                                     title="Clique para alterar este registro."
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide();"
                                                     process="@this"
                                                     actionListener="#{contratoAdmControlador.selecionarPreposto(preposto)}"
                                                     update=":Formulario:tab-view-geral:panel-preposto"
                                                     styleClass="mrig05"/>

                                    <p:commandButton icon="ui-icon-trash"
                                                     process="@this"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{contratoAdmControlador.removerPreposto(preposto)}"
                                                     title="Clique para remover este registro."
                                                     update="tabela-preposto"
                                                     styleClass="mrig05"/>
                                </p:column>

                                <p:column headerText="Nome" style="text-align: left; width: 300px;">
                                    <h:outputText value="#{preposto.nome}"/>
                                </p:column>
                                <p:column headerText="Telefone" style="text-align: right; width: 200px;">
                                    <h:outputText value="#{preposto.telefone}"/>
                                </p:column>
                                <p:column headerText="Email" style="text-align: left; width: 300px;">
                                    <h:outputText value="#{preposto.email}"/>
                                </p:column>
                                <p:column headerText="Cargo" style="text-align: left;">
                                    <h:outputText value="#{preposto.cargo}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>

                    <p:tab title="Documentos">
                        <p:outputPanel id="panel-documento">
                            <p:commandButton value="Novo Documento"
                                             icon="ui-icon-circle-plus"
                                             onclick="aguarde.show()"
                                             rendered="#{contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                             oncomplete="aguarde.hide()"
                                             immediate="true"
                                             actionListener="#{contratoAdmControlador.novoDocumento()}"
                                             process="@this"
                                             update=":Formulario:tab-view-geral:panel-documento"/>

                            <p:panel header="Novo/Editar Documento"
                                     id="panel-novo-documento"
                                     rendered="#{contratoAdmControlador.documentoContratoSelecionado ne null}"
                                     styleClass="mtop05 mbot05">

                                <h:panelGrid columns="2"
                                             styleClass="mbot05">
                                    <fc:outputLabelObrigatorio value="Modelo de Documento do Contrato:"/>
                                    <p:outputPanel>
                                        <p:autoComplete queryDelay="1000"
                                                        title="Digite o orgão/secretaria que deseja pesquisar."
                                                        value="#{contratoAdmControlador.documentoContratoSelecionado.modeloDocumentoContrato}"
                                                        completeMethod="#{contratoAdmControlador.completaModeloDocumentoContrato}"
                                                        converter="#{modeloDocumentoContratoControlador.converterGenerico}"
                                                        var="mdc"
                                                        forceSelection="true"
                                                        itemValue="#{mdc.id}"
                                                        itemLabel="#{mdc}"
                                                        maxResults="10"
                                                        size="70">
                                        </p:autoComplete>

                                        <p:commandButton process="@none"
                                                         icon="ui-icon-servico"
                                                         styleClass="mlef05"
                                                         title="Clique para gerenciar os documentos"
                                                         update="@none"
                                                         onclick="window.open('#{request.contextPath}/modelo-documento-contrato/listar/','_blank');"/>
                                    </p:outputPanel>
                                </h:panelGrid>

                                <p:commandButton value="Confirmar"
                                                 styleClass="mrig05"
                                                 onclick="aguarde.show()"
                                                 oncomplete="aguarde.hide()"
                                                 process="panel-novo-documento"
                                                 update=":Formulario:tab-view-geral:panel-documento"
                                                 actionListener="#{contratoAdmControlador.confirmarDocumento()}"
                                                 icon="ui-icon-check"/>

                                <p:commandButton value="Cancelar"
                                                 process="@this"
                                                 onclick="aguarde.show(); "
                                                 oncomplete="aguarde.hide()"
                                                 actionListener="#{contratoAdmControlador.cancelarDocumento()}"
                                                 update=":Formulario:tab-view-geral:panel-documento"
                                                 icon="ui-icon-cancel"/>
                            </p:panel>

                            <p:dataTable paginator="true"
                                         id="tabela-documento"
                                         rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                         rowIndexVar="rowIx"
                                         styleClass="mtop05"
                                         emptyMessage="Não foram localizados registros para serem apresentados"
                                         value="#{contratoAdmControlador.selecionado.documentos}"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Documentos&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                         rowsPerPageTemplate="10,25,50,100"
                                         var="doc">

                                <p:column headerText="Ações"
                                          rendered="#{contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                          style="text-align: center; width: 90px;">
                                    <p:commandButton icon="ui-icon-pencil"
                                                     title="Clique para alterar este registro."
                                                     onclick="aguarde.show()"
                                                     oncomplete="aguarde.hide();"
                                                     process="@this"
                                                     actionListener="#{contratoAdmControlador.selecionarDocumento(doc)}"
                                                     update=":Formulario:tab-view-geral:panel-documento"
                                                     styleClass="mrig05"/>

                                    <p:commandButton icon="ui-icon-trash"
                                                     process="@this"
                                                     onclick="if (!confirm('Tem certeza que deseja remover este registro?')) {return false; } else {aguarde.show();}"
                                                     oncomplete="aguarde.hide()"
                                                     actionListener="#{contratoAdmControlador.removerDocumento(doc)}"
                                                     title="Clique para remover este registro."
                                                     update="tabela-documento"
                                                     styleClass="mrig05"/>
                                </p:column>

                                <p:column headerText="Imprimir"
                                          rendered="#{contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                          style="text-align: center; width: 30px;">
                                    <h:commandLink actionListener="#{contratoAdmControlador.gerarDocumentoPadrao(doc)}"
                                                   target="_blank"
                                                   title="#{contratoAdmControlador.selecionado.id eq null ? 'A impressão só pode ser realizada com o contrato salvo.' : 'Clique para imprimir este documento.'}"
                                                   disabled="#{contratoAdmControlador.selecionado.id eq null}">
                                        <p:commandButton icon="ui-icon-print"
                                                         ajax="false"
                                                         disabled="#{contratoAdmControlador.selecionado.id eq null}"/>
                                    </h:commandLink>
                                </p:column>

                                <p:column headerText="Nome" style="text-align: left;">
                                    <h:outputText value="#{doc.modeloDocumentoContrato.nome}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>
                    </p:tab>
                    <p:tab title="Publicações">
                        <p:dataTable paginator="true"
                                     id="tabela-publicacoes"
                                     rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                     rowIndexVar="rowIx"
                                     styleClass="mtop03"
                                     emptyMessage="Não foram localizados registros para serem apresentados"
                                     value="#{contratoAdmControlador.selecionado.publicacoes}"
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>Publicações&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                     rowsPerPageTemplate="10,25,50,100"
                                     var="pub">
                            <p:column headerText="Data de Publicação" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{pub.dataPublicacao}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Veículo de Publicação" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{pub.veiculoDePublicacao}"/>
                            </p:column>
                            <p:column headerText="Número da Publicação" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{pub.numero}"/>
                            </p:column>
                            <p:column headerText="Página da Publicação" styleClass="alinhamentoEsquerda">
                                <h:outputText value="#{pub.pagina}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Histórico do Processo"
                           titleStyle="background: #d9edf7" id="tab-historico"
                           rendered="#{contratoAdmControlador.operacaoEditar}">
                        <fa:historico-processo-licitatorio
                            filtroProcesso="#{contratoAdmControlador.filtroHistoricoProcesso}"/>
                    </p:tab>

                    <p:tab id="tabAnexo" title="Anexos">
                        <fc:detentorDocumentoLicitacao selecionado="#{contratoAdmControlador.selecionado}"/>
                    </p:tab>
                </p:tabView>
            </p:panel>

            <p:outputPanel id="gridBotoes">
                <h:panelGrid columns="3" cellspacing="0" cellpadding="0">
                    <fc:rodapePretty id="rpRodapePretty"
                                     desabilitaSalvar="#{contratoAdmControlador.selecionado.isRescindido()}"
                                     controlador="#{contratoAdmControlador}"/>

                    <p:commandButton icon="ui-icon-check"
                                     process="@this"
                                     value="Aprovar Contrato"
                                     update=":formAprovarContrato"
                                     rendered="#{contratoAdmControlador.selecionado.isContratoEmElaboracao() and contratoAdmControlador.isOperacaoEditar()}"
                                     onclick="aguarde.show()"
                                     actionListener="#{contratoAdmControlador.aprovarContrato()}"
                                     oncomplete="aguarde.hide();"
                                     title="Clique para aprovar o contrato."
                                     styleClass="mlef05 mtop10 operacao prioritario"/>

                    <p:commandButton icon="ui-icon-check"
                                     process="@this"
                                     value="Deferir Contrato"
                                     update=":formDeferirContrato"
                                     rendered="#{contratoAdmControlador.selecionado.isContratoAprovado()}"
                                     onclick="aguarde.show()"
                                     actionListener="#{contratoAdmControlador.deferirContrato()}"
                                     oncomplete="aguarde.hide()"
                                     title="Clique para aprovar o contrato."
                                     styleClass="mlef05 mtop10 operacao prioritario"/>

                </h:panelGrid>
            </p:outputPanel>
        </h:form>

        <p:dialog showHeader="false"
                  modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  draggable="false"
                  resizable="false"
                  widgetVar="dialogCaucao"
                  closable="false">
            <h:form id="form-dialog-caucao">
                <div style="text-align: center" class="mtop05">
                    <p:panel header="Detalhes da Garantia">
                        <table cellpadding="0" cellspacing="0">
                            <tbody>
                            <c:forEach
                                items="#{contratoAdmControlador.recuperarCamposDe(contratoAdmControlador.caucaoContratoSelecionada)}"
                                var="campo"
                                varStatus="vs">
                                <tr style="background-color: #{vs.index%2==0?'#d7e3e9':'white'}">
                                    <td align="right">
                                        <h:outputText value="#{contratoAdmControlador.recuperarNomeDe(campo)}:"
                                                      styleClass="mrig05"
                                                      style="font-size: 12px; font-weight: bold"/>
                                    </td>
                                    <td align="left">
                                        <h:outputText
                                            value="#{contratoAdmControlador.recuperarValorDe(campo, contratoAdmControlador.caucaoContratoSelecionada)}"
                                            styleClass="mrig05"
                                            style="font-size: 12px;"/>
                                    </td>
                                </tr>
                            </c:forEach>
                            </tbody>
                        </table>
                    </p:panel>

                    <p:commandButton icon="ui-icon-check"
                                     value="Ok"
                                     actionListener="#{contratoAdmControlador.cancelarCaucaoContrato()}"
                                     process="@this"
                                     onclick="aguarde.show()"
                                     oncomplete="aguarde.hide(); dialogCaucao.hide();"
                                     styleClass="mtop10 padrao"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  height="470"
                  resizable="false"
                  widgetVar="fornecedoresVencedores"
                  closable="false">
            <h:form id="form-fornecedores-vencedores">
                <legend class="legenda mbot02">
                    Fornecedores Vencedores
                </legend>

                <div style="text-align: center" class="mtop05">
                    <p:dataTable paginator="true"
                                 id="tabela-fornecedores-vencedores"
                                 rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                 rowIndexVar="rowIx"
                                 styleClass="mtop05"
                                 emptyMessage="Não foram localizados registros para serem apresentados"
                                 value="#{contratoAdmControlador.fornecedoresGanhadoresLicitacao}"
                                 selection="#{contratoAdmControlador.selecionado.contratado}"
                                 rows="10"
                                 paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>FORNECEDORES&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                 rowsPerPageTemplate="10,25,50,100"
                                 var="pessoa"
                                 rowKey="#{pessoa.id}">
                        <p:column selectionMode="single" style="width:35px;"/>
                        <p:column headerText="Fornecedor Vencedor"
                                  filterBy="#{pessoa.nome}"
                                  filterMatchMode="contains"
                                  filterStyle="width: 70%; text-align: left !important;"
                                  style="text-align: left;">
                            <h:outputText value="#{pessoa}"/>
                        </p:column>
                    </p:dataTable>

                    <p:commandButton icon="ui-icon-check"
                                     value="Confirmar"
                                     process=":form-fornecedores-vencedores"
                                     update=":Formulario:tab-view-geral:panel-dados-gerais :Formulario:tab-view-geral:panel-itens"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{contratoAdmControlador.confirmarSelecaoFornecedor()}"
                                     style="height: 30px"
                                     styleClass="mtop10 padrao prioritario"/>

                    <p:commandButton icon="ui-icon-cancel"
                                     value="Cancelar"
                                     update=":Formulario:tab-view-geral:panel-dados-gerais :Formulario:tab-view-geral:panel-itens"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{contratoAdmControlador.cancelarSelecaoFornecedor()}"
                                     style="height: 30px"
                                     styleClass="mtop10 padrao mlef05"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog header="Nova Nota Fiscal"
                  modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  draggable="false"
                  resizable="false"
                  widgetVar="novaNotaFiscalExecucao"
                  closable="false">
            <h:form id="form-nota-fiscal-execucao">
                <h:panelGrid columns="2" style="text-align: left;">
                    <fc:outputLabelObrigatorio value="Número da Nota:"/>
                    <p:inputText value="#{contratoAdmControlador.notaFiscalExecucaoContratoSelecionado.numero}"
                                 autocomplete="off"
                                 size="5"/>

                    <fc:outputLabelObrigatorio value="Data de Emissão:"/>
                    <p:calendar onkeypress="mascara(this, Data)"
                                maxlength="10"
                                style="text-align: right"
                                autocomplete="off"
                                title="Digite a data da assinatura do contrato."
                                value="#{contratoAdmControlador.notaFiscalExecucaoContratoSelecionado.emitidaEm}"
                                locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
                                size="10"/>

                    <h:outputLabel value="Observações:"/>
                    <h:panelGrid columns="2"
                                 cellpadding="0"
                                 cellspacing="0">
                        <p:inputTextarea title="Digite a observação da nota fiscal"
                                         value="#{contratoAdmControlador.notaFiscalExecucaoContratoSelecionado.observacoes}"
                                         id="obs-nota-fiscal"
                                         cols="40"
                                         maxlength="3000"
                                         autoResize="true"
                                         counterTemplate="{0} Caracteres Restantes."
                                         counter="counter-obs-nota-fiscal"/>
                        <h:outputText id="counter-obs-nota-fiscal"
                                      style="color: #497692"
                                      styleClass="mlef05"/>
                    </h:panelGrid>
                </h:panelGrid>

                <div style="text-align: center" class="mtop05">
                    <p:commandButton icon="ui-icon-check"
                                     value="Confirmar"
                                     process="form-nota-fiscal-execucao"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{contratoAdmControlador.confirmarNotaFiscalExecucaoContrato()}"
                                     styleClass="mtop05 mrig05"/>

                    <p:commandButton icon="ui-icon-cancel"
                                     value="Cancelar"
                                     process="@this"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide(); novaNotaFiscalExecucao.hide();"
                                     actionListener="#{contratoAdmControlador.cancelarNotaFiscalExecucaoContrato()}"
                                     styleClass="mtop05"/>
                </div>
            </h:form>
        </p:dialog>


        <p:dialog modal="true"
                  dynamic="true"
                  showHeader="false"
                  position="center"
                  style="position: fixed !important;"
                  draggable="false"
                  resizable="false"
                  width="400"
                  widgetVar="dialogEscolhaMaterialServico"
                  closable="false">
            <h:form id="form-tipo-do-contrato">
                <legend class="legenda">
                    Tipo de Contrato
                </legend>

                <div style="text-align: center" class="mtop05">
                    <p:dataTable id="tabela-tipo-do-contrato"
                                 rowIndexVar="rowIx"
                                 styleClass="mtop05"
                                 emptyMessage="Não foram localizados registros para serem apresentados"
                                 value="#{contratoAdmControlador.tiposDeContratoParaEsteContrato}"
                                 selection="#{contratoAdmControlador.selecionado.tipoContrato}"
                                 var="tipo"
                                 rowKey="#{tipo}">
                        <p:column selectionMode="single" style="width:35px;"/>
                        <p:column headerText="Tipo do Contrato" style="text-align: left;">
                            <h:outputText value="#{tipo.descricao}"/>
                        </p:column>
                    </p:dataTable>

                    <p:commandButton icon="ui-icon-check"
                                     value="Confirmar"
                                     process="form-tipo-do-contrato"
                                     onstart="aguarde.show()"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{contratoAdmControlador.confirmarSelecaoTipoContrato()}"
                                     styleClass="mtop05 padrao"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog header="Itens da Ordem de Compra"
                  modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  draggable="false"
                  resizable="false"
                  widgetVar="dialogOrdemDeCompra"
                  closable="false">
            <h:form id="form-itens-ordem-de-compra">
                <div style="text-align: center" class="mtop05">
                    <p:dataTable paginator="true"
                                 id="tabela-ordem-compra"
                                 rowStyleClass="#{empty rowIx or rowIx mod 2 ne 0 ? 'linha-selecionada trintaAltura' : 'trintaAltura'}"
                                 rowIndexVar="rowIx"
                                 styleClass="mtop05"
                                 emptyMessage="Não foram localizados registros para serem apresentados"
                                 value="#{contratoAdmControlador.itensOrdemDeCompra}"
                                 rows="10"
                                 paginatorTemplate="{CurrentPageReport}  &lt;span class='titulo-tabela mrig10'>ITENS PARA ORDEM DE COMPRA&lt;/span> {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 currentPageReportTemplate="({startRecord} - {endRecord} de {totalRecords}, Página: {currentPage}/{totalPages})"
                                 rowsPerPageTemplate="10,25,50,100"
                                 var="ioc">

                        <p:column headerText="Item" style="text-align: left;">
                            <h:outputText value="#{ioc.itemContrato}"/>
                        </p:column>
                        <p:column headerText="Qtde. em Execução" style="text-align: right;">
                            <h:outputText value="#{ioc.quantidadeEmExecucao}"/>
                        </p:column>
                        <p:column headerText="Qtde. Outras Ordens de Compra" style="text-align: right;">
                            <h:outputText value="#{ioc.quantidadeEmOutrasOrdensDeCompra}"/>
                        </p:column>
                        <p:column headerText="Qtde. Desta Ordem De Compra" style="text-align: right;">
                            <p:inputText value="#{ioc.quantidade}"
                                         title="Informe a quantidade desta ordem de compra"
                                         size="10"
                                         style="text-align: right">
                                <p:ajax event="valueChange"
                                        onstart="aguarde.show()"
                                        oncomplete="aguarde.hide()"
                                        process="@this"
                                        listener="#{contratoAdmControlador.validarQuantidadeOrdemDeCompra}"/>
                                <f:attribute name="ioc" value="#{ioc}"/>
                            </p:inputText>
                        </p:column>
                    </p:dataTable>

                    <div style="text-align: center" class="mtop10">
                        <p:commandButton value="Ok"
                                         icon="ui-icon-check"
                                         style="width: 100px;"
                                         process="@this"
                                         rendered="#{!contratoAdmControlador.selecionado.isContratoEmElaboracao()}"
                                         styleClass="mrig05"
                                         actionListener="#{contratoAdmControlador.confirmarItensOrdemDeCompra}"
                                         onclick="aguarde.show();"
                                         oncomplete="aguarde.hide(); dialogOrdemDeCompra.hide();"/>

                        <h:commandLink actionListener="#{contratoAdmControlador.imprimirOrdemDeCompraSelecionadaDialog}"
                                       target="_blank">
                            <p:commandButton value="Imprimir"
                                             icon="ui-icon-print"
                                             style="width: 100px;"
                                             ajax="false"
                                             styleClass="mrig05"/>
                        </h:commandLink>

                        <p:commandButton value="Cancelar"
                                         icon="ui-icon-cancel"
                                         style="width: 100px;"
                                         process="@this"
                                         styleClass="mrig05"
                                         update="@none"
                                         onclick="dialogOrdemDeCompra.hide();"/>
                    </div>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog showHeader="false"
                  modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  resizable="false"
                  widgetVar="dlgParcelasDividaDiversa"
                  closable="false">
            <h:form id="form-parcelas-divida-diversa">
                <legend
                    class="legenda">Parcelas da Dívida Diversas
                    <p:commandButton icon="ui-icon-close"
                                     title="Clique para fechar."
                                     process="@this"
                                     style="float: right !important;"
                                     styleClass="mtop10"
                                     onclick="aguarde.show();"
                                     oncomplete="aguarde.hide();dlgParcelasDividaDiversa.hide();"/>
                </legend>

                <fc:mostrarParcelas
                    parcelas="#{contratoAdmControlador.resultadoParcelaCalculoDividaDiversaDaPenalidade}"/>
            </h:form>
        </p:dialog>

        <p:dialog modal="true"
                  dynamic="true"
                  position="center"
                  height="450"
                  width="1100"
                  style="position: fixed !important;"
                  widgetVar="dlgAprovarContrato"
                  closable="false">
            <h:form id="formAprovarContrato">
                <legend class="legenda mbot05">Aprovar Contrato</legend>

                <table class="table-bordered" style="width: 100%">
                    <tr>
                        <td>
                            <div class="alert alert-block" style="font-size: 13px; padding: 5px">
                                <div class="ui-messages-warn-icon mrig10"/>
                                Regras para Aprovação
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div style="font-size: 13px; padding: 5px" class="mlef20">
                                <i class="fa fa-check" style="color: darkred"></i>
                                A data de aprovação deve ser menor ou igual que a data de assinatura.
                            </div>
                            <div style="font-size: 13px; padding: 5px" class="mlef20">
                                <i class="fa fa-check" style="color: darkred"></i>
                                O ano da data de aprovação deve ser igual que o ano da data de assinatura.
                            </div>
                            <div style="font-size: 13px; padding: 5px" class="mlef20">
                                <i class="fa fa-check" style="color: darkred"></i>
                                O ano do termo deve ser igual que o ano da data de aprovação.
                            </div>
                            <div style="font-size: 13px; padding: 5px" class="mlef20">
                                <i class="fa fa-check" style="color: darkred"></i>
                                O ano do termo deve ser igual que o ano da data de assinatura.
                            </div>
                        </td>
                    </tr>
                </table>

                <div class="label label-info mtop10" style="font-size: 14px; text-decoration: none">
                    APROVAÇÃO DO CONTRATO
                </div>
                <div class="thumbnail">
                    <h:panelGrid columns="2">
                        <fc:outputLabelObrigatorio value="Data de Aprovação: "/>
                        <p:calendar onkeypress="mascara(this, mdata)"
                                    id="dataAprovacao"
                                    showOn="button"
                                    title="Informe a data de aprovação do contrato."
                                    value="#{contratoAdmControlador.selecionado.dataAprovacao}"
                                    locale="pt_BR"
                                    navigator="true"
                                    pattern="dd/MM/yyyy"
                                    size="12">
                            <p:ajax event="dateSelect"
                                    listener="#{contratoAdmControlador.definirNumeroAnoTermoContrato()}"
                                    onstart="aguarde.show()"
                                    oncomplete="aguarde.hide()"
                                    update=":formAprovarContrato"/>

                            <p:ajax event="valueChange"
                                    listener="#{contratoAdmControlador.definirNumeroAnoTermoContrato()}"
                                    onstart="aguarde.show()"
                                    oncomplete="aguarde.hide()"
                                    update=":formAprovarContrato"/>
                        </p:calendar>

                        <fc:outputLabelObrigatorio value="Número/Ano do Termo: "
                                                   rendered="#{contratoAdmControlador.selecionado.isContratoAprovadoAte2020()}"/>
                        <h:panelGroup columns="4" id="panelNumeroTermo"
                                      rendered="#{contratoAdmControlador.selecionado.isContratoAprovadoAte2020()}">
                            <p:inputText value="#{contratoAdmControlador.numeroTermo}"
                                         size="10"
                                         onkeypress="somenteNumeros(event, this, false, false, true)"
                                         maxlength="8"
                                         style="text-align: right"/>

                            <h:outputText value="/"/>
                            <h:outputText value="#{contratoAdmControlador.selecionado.exercicioContrato.ano}"
                                          styleClass="negrito"/>
                        </h:panelGroup>

                        <h:outputText value="Número/Ano Termo: "
                                      rendered="#{!contratoAdmControlador.selecionado.isContratoAprovadoAte2020()}"/>
                        <h:panelGroup columns="4"
                                      rendered="#{!contratoAdmControlador.selecionado.isContratoAprovadoAte2020()}">
                            <h:outputText value="#{contratoAdmControlador.numeroTermo}" styleClass="negrito"/>

                            <h:outputText value="/"/>
                            <h:outputText value="#{contratoAdmControlador.selecionado.exercicioContrato.ano}"
                                          styleClass="negrito"/>
                        </h:panelGroup>

                        <h:outputText value="Valor Atual do Contrato: "/>
                        <h:outputText
                            value="#{contratoAdmControlador.contratoAprovacaoVO.valorAtualContrato}"
                            styleClass="negrito">
                            <f:convertNumber pattern="#,##0.00"/>
                        </h:outputText>

                        <h:outputText value="Saldo Atual do Contrato: "/>
                        <h:panelGroup>
                            <h:outputText
                                value="#{contratoAdmControlador.contratoAprovacaoVO.valorAtualContrato}"
                                styleClass="negrito">
                                <f:convertNumber pattern="#,##0.00"/>
                            </h:outputText>

                            <a class="fa fa-arrow-right mlef20 mrig10" style="font-size: 15px"/>
                            <h:outputText value="O valor/saldo do contrato está correto? "/>
                            <h:selectBooleanCheckbox
                                value="#{contratoAdmControlador.contratoAprovacaoVO.checkValorContrato}"
                                styleClass="mlef05">
                                <p:ajax event="change"
                                        process="@this"
                                        update=":formAprovarContrato:btn-confirmar-aprovacao"/>
                            </h:selectBooleanCheckbox>
                        </h:panelGroup>

                        <h:outputText value="Término de Vigência: "/>
                        <h:panelGroup>
                            <h:outputText
                                value="#{contratoAdmControlador.contratoAprovacaoVO.terminoVigencia}"
                                styleClass="negrito">
                                <f:convertDateTime type="date"/>
                            </h:outputText>

                            <a class="fa fa-arrow-right mlef20 mrig10" style="font-size: 15px"/>
                            <h:outputText value="O término de vigência do contrato está correto? "/>
                            <h:selectBooleanCheckbox
                                value="#{contratoAdmControlador.contratoAprovacaoVO.checkTerminoVigencia}"
                                styleClass="mlef05">
                                <p:ajax event="change"
                                        process="@this"
                                        update=":formAprovarContrato:btn-confirmar-aprovacao"/>
                            </h:selectBooleanCheckbox>
                        </h:panelGroup>

                        <h:outputText value="Término de Execução: "/>
                        <h:panelGroup>
                            <h:outputText
                                value="#{contratoAdmControlador.contratoAprovacaoVO.terminoExecucao}"
                                styleClass="negrito">
                                <f:convertDateTime type="date"/>
                            </h:outputText>

                            <a class="fa fa-arrow-right mlef20 mrig10" style="font-size: 15px"/>
                            <h:outputText value="O término de execução do contrato está correto? "/>
                            <h:selectBooleanCheckbox
                                value="#{contratoAdmControlador.contratoAprovacaoVO.checkTerminoExecucao}"
                                styleClass="mlef05">
                                <p:ajax event="change"
                                        process="@this"
                                        update=":formAprovarContrato:btn-confirmar-aprovacao"/>
                            </h:selectBooleanCheckbox>
                        </h:panelGroup>
                    </h:panelGrid>
                </div>

                <div class="label label-info mtop10" style="font-size: 14px; text-decoration: none">
                    APROVAÇÃO ITENS DO CONTRATO
                </div>
                <p:scrollPanel mode="native" style="max-height: 200px">
                    <p:dataGrid
                        var="itemAp"
                        columns="1"
                        value="#{contratoAdmControlador.contratoAprovacaoVO.itensAprovacao}">

                        <div class="thumbnail">
                            <h:panelGrid columns="2">
                                <h:outputText value="Lote: "/>
                                <h:outputText value="#{itemAp.itemContrato.itemAdequado.numeroLote}"
                                              styleClass="negrito"/>

                                <h:outputText value="Item: "/>
                                <h:outputText value="#{itemAp.itemContrato.itemAdequado.numeroItem}"
                                              styleClass="negrito"/>

                                <h:outputText value="Objeto de Compra: "/>
                                <h:outputText value="#{itemAp.itemContrato.itemAdequado.objetoCompra}"
                                              styleClass="negrito"/>

                                <h:outputText value="Grupo: "
                                              rendered="#{itemAp.grupoContaDespesa ne null}"/>
                                <h:outputText value="#{itemAp.grupoContaDespesa.grupo}"
                                              rendered="#{itemAp.grupoContaDespesa ne null}"
                                              styleClass="negrito"/>

                                <h:outputText value="Desdobramentos do Grupo: "
                                              rendered="#{itemAp.grupoContaDespesa ne null}"/>
                                <p:dataList value="#{itemAp.grupoContaDespesa.contasDespesa}"
                                            rendered="#{itemAp.grupoContaDespesa ne null}"
                                            var="desdGrupo">
                                    #{desdGrupo}
                                </p:dataList>
                            </h:panelGrid>

                            <table style="width: 100%">
                                <tr>
                                    <td style="width: 30%">
                                        <div class="label label-default" style="text-decoration: none">
                                            Controle de Execução - #{itemAp.itemContrato.tipoControle.descricao}
                                        </div>
                                        <div class="thumbnail">
                                            <h:panelGrid columns="2">
                                                <h:outputText value="Quantiade: "/>
                                                <fc:output-mascara-unidade-medida
                                                    styleClass="#{itemAp.itemContrato.tipoControle.isTipoControlePorQuantidade() ? 'label label-default' : 'negrito'}"
                                                    tipoMascara="#{itemAp.itemContrato.itemAdequado.unidadeMedida.mascaraQuantidade}"
                                                    value="#{itemAp.itemContrato.quantidadeTotalContrato}"/>

                                                <h:outputText value="Valor Unitário: "/>
                                                <fc:output-mascara-unidade-medida
                                                    styleClass="negrito"
                                                    tipoMascara="#{itemAp.itemContrato.itemAdequado.unidadeMedida.mascaraValorUnitario}"
                                                    value="#{itemAp.itemContrato.valorUnitario}"/>

                                                <h:outputText value="Valor Total: "/>
                                                <h:outputText
                                                    value="#{itemAp.itemContrato.valorTotal}"
                                                    styleClass="#{itemAp.itemContrato.tipoControle.isTipoControlePorValor() ? 'label label-info' : 'negrito'}">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </h:panelGrid>
                                        </div>
                                    </td>

                                    <td style="width: 30%">
                                        <div class="label label-default" style="text-decoration: none">
                                            Saldo Item #{itemAp.movimentoItemExecucao.origemTipoSubTipo}
                                        </div>
                                        <div class="thumbnail">
                                            <h:panelGrid columns="2">
                                                <h:outputText value="Quantiade: "/>
                                                <fc:output-mascara-unidade-medida
                                                    styleClass="#{itemAp.itemContrato.tipoControle.isTipoControlePorQuantidade() ? 'label label-default' : 'negrito'}"
                                                    tipoMascara="#{itemAp.movimentoItemExecucao.itemContrato.itemAdequado.unidadeMedida.mascaraQuantidade}"
                                                    value="#{itemAp.movimentoItemExecucao.quantidade}"/>

                                                <h:outputText value="Valor Unitário: "/>
                                                <fc:output-mascara-unidade-medida
                                                    style="color: grey"
                                                    tipoMascara="#{itemAp.movimentoItemExecucao.itemContrato.itemAdequado.unidadeMedida.mascaraValorUnitario}"
                                                    value="#{itemAp.movimentoItemExecucao.valorUnitario}"/>

                                                <h:outputText value="Valor Total: "/>
                                                <h:outputText
                                                    value="#{itemAp.movimentoItemExecucao.itemContrato.valorTotal}"
                                                    styleClass="#{itemAp.itemContrato.tipoControle.isTipoControlePorValor() ? 'label label-info' : 'negrito'}">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </h:panelGrid>
                                        </div>
                                    </td>

                                    <td style="width: 30%">
                                        <div class="label label-default" style="text-decoration: none">
                                            Saldo Item #{itemAp.movimentoItemVariacao.origemTipoSubTipo}
                                        </div>
                                        <div class="thumbnail">
                                            <h:panelGrid columns="2">
                                                <h:outputText value="Quantiade: "/>
                                                <fc:output-mascara-unidade-medida
                                                    styleClass="#{itemAp.itemContrato.tipoControle.isTipoControlePorQuantidade() ? 'label label-default' : 'negrito'}"
                                                    tipoMascara="#{itemAp.movimentoItemVariacao.itemContrato.itemAdequado.unidadeMedida.mascaraQuantidade}"
                                                    value="#{itemAp.movimentoItemVariacao.quantidade}"/>

                                                <h:outputText value="Valor Unitário: "/>
                                                <fc:output-mascara-unidade-medida
                                                    style="color: grey"
                                                    tipoMascara="#{itemAp.movimentoItemVariacao.itemContrato.itemAdequado.unidadeMedida.mascaraValorUnitario}"
                                                    value="#{itemAp.movimentoItemVariacao.valorUnitario}"/>

                                                <h:outputText value="Valor Total: "/>
                                                <h:outputText
                                                    value="#{itemAp.movimentoItemVariacao.itemContrato.valorTotal}"
                                                    styleClass="#{itemAp.itemContrato.tipoControle.isTipoControlePorValor() ? 'label label-info' : 'negrito'}">
                                                    <f:convertNumber pattern="#,##0.00"/>
                                                </h:outputText>
                                            </h:panelGrid>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <f:facet name="footer">
                            <h:outputText value="Todos os itens estão corretos? "/>
                            <h:selectBooleanCheckbox
                                value="#{contratoAdmControlador.contratoAprovacaoVO.checkItens}"
                                styleClass="mlef05">
                                <p:ajax event="change"
                                        process="@this"
                                        update=":formAprovarContrato:btn-confirmar-aprovacao"/>
                            </h:selectBooleanCheckbox>
                        </f:facet>
                    </p:dataGrid>
                </p:scrollPanel>


                <div class="modal-footer">
                    <p:commandButton value="Confirmar"
                                     id="btn-confirmar-aprovacao"
                                     icon="ui-icon-check"
                                     process="formAprovarContrato"
                                     styleClass="padrao mtop10 prioritario"
                                     title="Clique para confirmar a aprovação do contrato."
                                     update="@none"
                                     onclick="aguarde.show();"
                                     oncomplete="aguarde.hide()"
                                     disabled="#{!contratoAdmControlador.contratoAprovacaoVO.isAprovacaoConferida()}"
                                     actionListener="#{contratoAdmControlador.confirmarAprovacaoContrato()}"/>

                    <p:commandButton value="Cancelar"
                                     icon="ui-icon-cancel"
                                     styleClass="padrao mlef05 mtop10"
                                     title="Clique para cancelar a aprovação do contrato."
                                     process="@this"
                                     onclick="aguarde.show();"
                                     actionListener="#{contratoAdmControlador.cancelarAprovacaoContrato()}"
                                     oncomplete="aguarde.hide();dlgAprovarContrato.hide();"/>
                </div>

            </h:form>
        </p:dialog>


        <p:dialog modal="true"
                  dynamic="true"
                  position="center"
                  showHeader="false"
                  style="position: fixed !important;"
                  draggable="false"
                  resizable="false"
                  widgetVar="dlgDeferirContrato"
                  closable="false">
            <h:form id="formDeferirContrato">

                <legend class="legenda">Deferir Contrato</legend>

                <table class="table-bordered">
                    <tr>
                        <td>
                            <div class="alert alert-block" style="font-size: 13px; padding: 5px">
                                <div class="ui-messages-warn-icon mrig10"/>
                                Regras para Deferimento
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div style="font-size: 13px; padding: 5px" class="mlef20">
                                <i class="fa fa-check" style="color: darkred"></i>
                                A data de aprovação deve ser menor ou igual que a data de assinatura.
                            </div>
                            <div style="font-size: 13px; padding: 5px" class="mlef20">
                                <i class="fa fa-check" style="color: darkred"></i>
                                O ano da data de aprovação deve ser igual que o ano da data de assinatura.
                            </div>
                            <div style="font-size: 13px; padding: 5px" class="mlef20">
                                <i class="fa fa-check" style="color: darkred"></i>
                                O ano do termo deve ser igual que o ano da data de aprovação.
                            </div>
                            <div style="font-size: 13px; padding: 5px" class="mlef20">
                                <i class="fa fa-check" style="color: darkred"></i>
                                O ano do termo deve ser igual que o ano da data de assinatura.
                            </div>
                        </td>
                    </tr>
                </table>

                <h:panelGrid columns="2">
                    <h:outputText value="Data de Aprovação: "/>
                    <h:outputText value="#{contratoAdmControlador.selecionado.dataAprovacao}"
                                  styleClass="negrito">
                        <f:convertDateTime type="date"/>
                    </h:outputText>

                    <h:outputText value="Data de Deferimento: "/>
                    <h:outputText value="#{contratoAdmControlador.selecionado.dataDeferimento}"
                                  styleClass="negrito">
                        <f:convertDateTime type="date"/>
                    </h:outputText>

                    <fc:outputLabelObrigatorio value="Data de Assinatura: "/>
                    <p:calendar maxlength="19"
                                onkeypress="mascara(this, mdata)"
                                id="dataAssinatura"
                                showOn="button"
                                title="Informe a data de assinatura do contrato."
                                value="#{contratoAdmControlador.selecionado.dataAssinatura}"
                                locale="pt_BR"
                                navigator="true"
                                pattern="dd/MM/yyyy"
                                size="12">
                    </p:calendar>

                    <h:outputText value="Número/Ano Termo: "/>
                    <h:panelGroup>
                        <h:outputText value="#{contratoAdmControlador.selecionado.numeroTermo}" styleClass="negrito"/>

                        <h:outputText value="/"/>
                        <h:outputText value="#{contratoAdmControlador.selecionado.exercicioContrato.ano}"
                                      styleClass="negrito"/>
                    </h:panelGroup>
                </h:panelGrid>

                <div style="text-align: center">
                    <p:commandButton value="Confirmar"
                                     icon="ui-icon-check"
                                     process="formDeferirContrato"
                                     styleClass="mrig05 padrao mtop20 prioritario"
                                     title="Clique para confirmar o deferimento do contrato."
                                     update="@none"
                                     onclick="aguarde.show();"
                                     oncomplete="aguarde.hide()"
                                     actionListener="#{contratoAdmControlador.confirmarDeferimentoContrato()}"/>

                    <p:commandButton value="Cancelar"
                                     icon="ui-icon-cancel"
                                     title="Clique para cancelar o deferimento do contrato."
                                     process="@this"
                                     styleClass="padrao mtop20"
                                     onclick="aguarde.show();"
                                     actionListener="#{contratoAdmControlador.cancelarDeferimentoContrato()}"
                                     oncomplete="aguarde.hide();dlgDeferirContrato.hide();"/>

                </div>
            </h:form>
        </p:dialog>

        <p:dialog showHeader="false"
                  modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  draggable="false"
                  resizable="false"
                  widgetVar="dlgFinalizarProcesso"
                  closable="false">
            <h:form id="formFinalizarProcesso">
                <legend
                    class="legenda">Contrato Aprovado
                </legend>

                <div align="center">
                    <div class="alert alert-success" style="font-size: 12px">
                        <strong>Contrato Aprovado com Sucesso!</strong>
                        Deseja realizar a execução neste momento?
                    </div>

                    <p:commandButton icon="ui-icon-document"
                                     title="Clique para redirecionar para execução do contrato."
                                     process="@this"
                                     value="Realizar Execução"
                                     actionListener="#{contratoAdmControlador.redirecionarParaNovaExecucao()}"
                                     styleClass="mtop20 padrao"
                                     style="width: 170px"
                                     onclick="aguarde.show();"/>

                    <p:commandButton icon="ui-icon-voltar"
                                     title="Clique para redirecionar para lista de contratos"
                                     process="@this"
                                     value="Lista de Contratos"
                                     actionListener="#{contratoAdmControlador.cancelar()}"
                                     styleClass="mtop20 padrao mlef05"
                                     style="width: 170px"
                                     onclick="aguarde.show();"/>

                </div>
            </h:form>
        </p:dialog>

        <p:dialog header="Editar Código CMED"
                  modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  draggable="false"
                  resizable="false"
                  widgetVar="dialogCodigoCmed"
                  closable="false">
            <h:form id="form-codigo-cmed">
                <p:panel id="panelCodigo">
                    <h:panelGrid columns="2">
                        <h:outputLabel value="Item: "/>
                        <h:outputText value="#{contratoAdmControlador.itemContrato.numeroDescricao}"
                                      styleClass="negrito"/>

                        <h:outputLabel value="Código CMED: "/>
                        <p:inputTextarea title="Digite o código CMED."
                                         value="#{contratoAdmControlador.itemContrato.codigoCmed}"
                                         maxlength="255"
                                         cols="60"
                                         rows="6"/>
                    </h:panelGrid>

                    <div style="text-align: center;">
                        <p:commandButton icon="ui-icon-check"
                                         value="Confirmar"
                                         actionListener="#{contratoAdmControlador.confirmarCodigoCMED()}"
                                         oncomplete="aguarde.hide();"
                                         process="form-codigo-cmed"
                                         onclick="aguarde.show();"
                                         update=":Formulario:tab-view-geral:panel-itens"
                                         styleClass="mrig05 mtop05 prioritario"/>

                        <p:commandButton icon="ui-icon-cancel"
                                         value="Cancelar"
                                         actionListener="#{contratoAdmControlador.cancelarCodigoCMED()}"
                                         onclick="dialogCodigoCmed.hide()"
                                         process="@none"
                                         update=":Formulario:tab-view-geral:panel-itens"
                                         styleClass="mtop05 operacao"/>
                    </div>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog modal="true"
                  dynamic="true"
                  position="center"
                  showHeader="false"
                  style="position: fixed !important;"
                  draggable="false"
                  resizable="false"
                  closable="true"
                  widgetVar="dlgTipoObetoDeferimento">
            <h:form id="formDlgTipoObetoDeferimento">

                <legend class="legenda">Validação ao Deferir Contrato</legend>

                <table class="thumbnail">
                    <ui:repeat value="#{contratoAdmControlador.tiposObjetoCompraDeferimento}"
                               var="tipoOc">
                        <tr>
                            <ui:repeat value="#{tipoOc.mensagens}" var="msg">
                                <tr class="alert alert-danger">
                                    <td
                                        colspan="6">
                                        <h:outputText value="#{msg}"
                                                      escape="false"
                                                      styleClass="mlef05"/>
                                    </td>
                                </tr>
                            </ui:repeat>
                        </tr>

                        <tr>
                            <td colspan="6">
                                <p:separator/>
                            </td>
                        </tr>

                        <tr>
                            <th class="alinhamentoEsquerda">Tipo Objeto de Compra</th>
                            <th class="alinhamentoDireita">Valor Contratado (R$)</th>
                            <th class="alinhamentoDireita">Valor Executado (R$)</th>
                            <th class="alinhamentoDireita">Valor Empenhado (R$)</th>
                            <th class="alinhamentoDireita">Valor Estornado (R$)</th>
                            <th class="alinhamentoDireita">Saldo (R$)</th>
                        </tr>

                        <tr class="table">
                            <td class="alinhamentoEsquerda">
                                <h:outputText value="#{tipoOc.tipoObjetoCompra.descricao}"/>
                            </td>
                            <td class="alinhamentoDireita">
                                <h:outputText value="#{tipoOc.valorContratado}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </td>
                            <td class="alinhamentoDireita">
                                <h:outputText value="#{tipoOc.valorExecutado}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </td>
                            <td class="alinhamentoDireita">
                                <h:outputText value="#{tipoOc.valorEmpenhado}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </td>
                            <td class="alinhamentoDireita">
                                <h:outputText value="#{tipoOc.valorEstornado}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </td>
                            <td class="alinhamentoDireita">
                                <h:outputText value="#{tipoOc.saldoRestante}">
                                    <f:convertNumber pattern="#,##0.00"/>
                                </h:outputText>
                            </td>
                        </tr>
                    </ui:repeat>
                </table>

                <div class="modal-footer">
                    <p:commandButton icon="ui-icon-close"
                                     value="Fechar"
                                     onclick="dlgTipoObetoDeferimento.hide()"
                                     process="@this"
                                     styleClass="operacao"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog modal="true"
                  dynamic="true"
                  position="center"
                  style="position: fixed !important;"
                  draggable="true"
                  width="1200"
                  resizable="false"
                  widgetVar="dlgMovItemContrato">

            <h:form id="formMovimentoItens">
                <ad:detalhes-movimento-item-contrato itemContrato="#{contratoAdmControlador.itemContrato}"/>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
</html>
