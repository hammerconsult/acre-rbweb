<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//PT" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fc="http://java.sun.com/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:composition template="/corpo.xhtml">
        <ui:define name="body">
            <p:messages autoUpdate="true" showDetail="true" id="mensagem"/>
            <h:form id="Formulario">
                <fc:cabecalhoPretty controlador="#{deParaControlador}"
                                    origem="#{deParaControlador.caminhoPadrao}listar/"/>
                <p:panel header=" Cadastro de De/Para">
                    <fc:outputLabelObrigatorio value="Descrição"/>
                    <p:inputText value="#{deParaControlador.selecionado.descricao}" size="70" maxlength="70" title="Descrição do Conjunto de Itens do De/Para"/>
                </p:panel>
                <div id="divTables" style="overflow">
                    <p:panelGrid columns="3" style="width:100% ">
                        <p:panel header="Administrativa Nova(Origem)">
                            <h:outputText value="Data Vigente Adm Nova"/>
                            <p:calendar title="Informe a Data de Inicio" id="dataVigenteAdmNova"
                                        value="#{deParaControlador.dataVigenteAdmNova}"
                                        pattern="dd/MM/yyyy" locale="pt_BR" navigator="true">
                                <p:ajax event="dateSelect" update=":Formulario" />
                            </p:calendar>
                            <p:spacer width="5"/>
                            <br/>
                            <br/>
                            <p:dataTable id="tabelNovaAdm" var="novaAdm" value="#{deParaControlador.hierarquiasNovasAdm()}"
                                         paginator="true" rows="10" rowsPerPageTemplate="10,20,50" rowKey="#{novaAdm.id}"
                                         emptyMessage="Nenhuma Unidadade Administrativa Nova encontrada"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink}
                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}
                                         {RowsPerPageDropdown}" selection="#{deParaControlador.hoVigenteAdmNova}" selectionMode="single">
                                <p:column headerText="Codigo"
                                          sortBy="#{novaAdm.codigo}"
                                          filterBy="#{novaAdm.codigo}"
                                          filterMatchMode="contains">
                                    <h:outputText value="#{novaAdm.codigo}"/>
                                </p:column>
                                <p:column headerText="Unidade"
                                          sortBy="#{novaAdm.subordinada}"
                                          filterBy="#{novaAdm.subordinada}"
                                          filterMatchMode="contains">
                                    <h:outputText value="#{novaAdm.subordinada}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panel header="Administrativa Antiga(Destino)">
                            <h:outputText value="Data Vigente Adm Antiga"/>
                            <p:calendar title="Informe a Data de Inicio" id="dataVigenteAdmAntiga"
                                        value="#{deParaControlador.dataVigenteAdmAntiga}"
                                        pattern="dd/MM/yyyy" locale="pt_BR" navigator="true">
                                <p:ajax event="dateSelect" update=":Formulario"/>
                            </p:calendar>
                            <p:spacer width="5"/>
                            <br/>
                            <br/>
                            <p:dataTable id="tabelAntiAdm" var="antigaAdm" value="#{deParaControlador.hierarquiasAntigasAdm()}"
                                         paginator="true" rows="10" rowsPerPageTemplate="10,20,50" rowKey="#{antigaAdm.id}"
                                         emptyMessage="Nenhuma Unidadade Administrativa Antiga encontrada"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink}
                                         {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         selection="#{deParaControlador.hoVigenteAdmAntiga}" selectionMode="single">
                                <p:column headerText="Codigo"
                                          sortBy="#{antigaAdm.codigo}"
                                          filterBy="#{antigaAdm.codigo}"
                                          filterMatchMode="contains">
                                    <h:outputText value="#{antigaAdm.codigo}"/>
                                </p:column>
                                <p:column headerText="Unidade"
                                          sortBy="#{antigaAdm.subordinada}"
                                          filterBy="#{antigaAdm.subordinada}"
                                          filterMatchMode="contains">
                                    <h:outputText value="#{antigaAdm.subordinada}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panel header="Orçamentaria Atual(Origem)">
                            <h:outputText value="Data Vigente Orc Atual"/>
                            <p:calendar title="Informe a Data de Inicio" id="dataVigenteOrcAntiga"
                                        value="#{deParaControlador.dataVigenteOrcAntiga}"
                                        pattern="dd/MM/yyyy" locale="pt_BR" navigator="true">
                                <p:ajax event="dateSelect" update=":Formulario" />
                            </p:calendar>
                            <p:spacer width="5"/>
                            <br/>
                            <br/>

                            <p:dataTable id="tabelOrcAdm" var="antigaOrc" value="#{deParaControlador.hierarquiasAntigasOrc()}"
                                         paginator="true" rows="10" rowsPerPageTemplate="10,20,50" rowKey="#{antigaOrc.id}"
                                         emptyMessage="Nenhuma Unidadade Orçamentaria Atual encontrada"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink}
                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}
                                         {RowsPerPageDropdown}" selection="#{deParaControlador.hoVigenteOrcAntiga}" selectionMode="single">
                                <p:column headerText="Codigo"
                                          sortBy="#{antigaOrc.codigo}"
                                          filterBy="#{antigaOrc.codigo}"
                                          filterMatchMode="contains">
                                    <h:outputText value="#{antigaOrc.codigo}"/>
                                </p:column>
                                <p:column headerText="Unidade"
                                          sortBy="#{antigaOrc.subordinada}"
                                          filterBy="#{antigaOrc.subordinada}"
                                          filterMatchMode="contains">
                                    <h:outputText value="#{antigaOrc.subordinada}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                    </p:panelGrid >
                </div>
                <br/>

                <p:commandButton value="Adiconar"
                                 icon="ui-icon-circle-plus"
                                 title="Clique para adicionar na lista o Item Selecionado( Administrativa Nova, Administrativa Antiga e Orçamentaria Antiga)"
                                 actionListener="#{deParaControlador.adiconaItemDePara}" update=":Formulario"/>
                <br/>
                <br/>
                <p:dataTable id="tabItens" var="item"
                             value="#{deParaControlador.selecionado.deParaItems}" emptyMessage="Nenhum Registro na Tabela, é necessario pelo menos um item para salvar o De/Para">
                    <p:column headerText="Código">
                        <h:outputText value="#{item.codigoAdmNova}"/>
                    </p:column>
                    <p:column headerText="Unidade Adm Nova (Origem)">
                        <h:outputText value="#{item.unidadeAdmNova}"/>
                    </p:column>
                    <p:column headerText="Código">
                        <h:outputText value="#{item.codigoAdmAntiga}"/>
                    </p:column>
                    <p:column headerText="Unidade Adm Antiga (destino)">
                        <h:outputText value="#{item.unidadeAdmAntiga}"/>
                    </p:column>
                    <p:column headerText="Código">
                        <h:outputText value="#{item.codigoOrcAntiga}"/>
                    </p:column>
                    <p:column headerText="Unidade Orc Atual (Destino)">
                        <h:outputText value="#{item.unidadeOrcAntiga}"/>
                    </p:column>
                    <p:column headerText="Operação" style="text-align: center">
                        <p:commandButton icon="ui-icon-closethick"
                                         update=":Formulario:tabItens"
                                         immediate="true"
                                         styleClass="vinteLarguraVinteAltura"
                                         title="Clique para Remover este Item"
                                         actionListener="#{deParaControlador.removerItem(item)}"/>
                    </p:column>
                </p:dataTable>
                <fc:rodapePretty controlador="#{deParaControlador}"/>
            </h:form>
        </ui:define>
    </ui:composition>
</html>
