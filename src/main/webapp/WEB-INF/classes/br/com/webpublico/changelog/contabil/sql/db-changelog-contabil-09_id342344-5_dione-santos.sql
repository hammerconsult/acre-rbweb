DECLARE
texto CLOB := '{"consulta":"select diaria.codigo                                                                      as numero,\r\n       diaria.datalancamento                                                              as data,\r\n       diaria.tipoproposta                                                                as tipo,\r\n       ex.ano                                                                             as exercicio,\r\n       un.codigo || '' - '' || un.descricao                                                 as unidade,\r\n       diaria.situacaodiaria                                                              as situacao,\r\n       ''Núm.: '' || emp.numero || '', Data: '' || to_char(emp.dataempenho, ''dd/MM/yyyy'') || '', Credor: '' ||\r\n       coalesce(pfemp.nome, pjemp.razaosocial) || '', Valor: '' || emp.valor                as empenho,\r\n       pf.nome                                                                            as pessoa,\r\n       ato.nome                                                                           as atolegal,\r\n       via.tipoviagem                                                                     as tipodeviagem,\r\n       via.itinerario                                                                     as itinerario,\r\n       case when via.meiodetransporte is null then ''OUTROS'' else via.meiodetransporte end as meiodetransporte,\r\n       diaria.valor                                                                       as valor,\r\n       to_char(via.datainicialsaida, ''dd/MM/yyyy HH24:mi:ss'')                             as saida,\r\n       to_char(via.datainicialretorno, ''dd/MM/yyyy HH24:mi:ss'')                           as retorno,\r\n       coalesce(fornecedorpj.razaosocial, fornecedorpf.nome)                              as fornecedor,\r\n       diaria.numerocontrato                                                              as numerodocontrato\r\nfrom propostaconcessaodiaria diaria\r\n         inner join empenho emp on diaria.id = emp.propostaconcessaodiaria_id\r\n         inner join exercicio ex on diaria.exercicio_id = ex.id\r\n         inner join vwhierarquiaorcamentaria un on diaria.unidadeorganizacional_id = un.subordinada_id\r\n         inner join pessoafisica pf on diaria.pessoafisica_id = pf.id\r\n         left join viagemdiaria via on diaria.id = via.propostaconcessaodiaria_id\r\n         left join pessoafisica pfemp on emp.fornecedor_id = pfemp.id\r\n         left join pessoajuridica pjemp on emp.fornecedor_id = pjemp.id\r\n         left join atolegal ato on diaria.atolegal_id = ato.id\r\n         left join pessoafisica fornecedorpf on diaria.fornecedor_id = fornecedorpf.id\r\n         left join pessoajuridica fornecedorpj on diaria.fornecedor_id = fornecedorpj.id\r\nwhere trunc(diaria.datalancamento) between un.iniciovigencia and coalesce(un.fimvigencia, trunc(diaria.datalancamento)) $WHERE","count":"select count(1)\r\nfrom propostaconcessaodiaria diaria\r\n         inner join empenho emp on diaria.id = emp.propostaconcessaodiaria_id\r\n         inner join exercicio ex on diaria.exercicio_id = ex.id\r\n         inner join vwhierarquiaorcamentaria un on diaria.unidadeorganizacional_id = un.subordinada_id\r\n         inner join pessoafisica pf on diaria.pessoafisica_id = pf.id\r\n         left join viagemdiaria via on diaria.id = via.propostaconcessaodiaria_id\r\n         left join pessoafisica pfemp on emp.fornecedor_id = pfemp.id\r\n         left join pessoajuridica pjemp on emp.fornecedor_id = pjemp.id\r\n         left join atolegal ato on diaria.atolegal_id = ato.id\r\n         left join pessoafisica fornecedorpf on diaria.fornecedor_id = fornecedorpf.id\r\n         left join pessoajuridica fornecedorpj on diaria.fornecedor_id = fornecedorpj.id\r\nwhere trunc(diaria.datalancamento) between un.iniciovigencia and coalesce(un.fimvigencia, trunc(diaria.datalancamento)) $WHERE","totalRegistros":3702,"fields":[{"posicao":1,"descricao":"NÚMERO","columnName":"NUMERO","columnValue":"NUMERO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":2,"descricao":"DATA","columnName":"DATA","columnValue":"DATA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":3,"descricao":"TIPO","columnName":"TIPO","columnValue":"TIPO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoProposta","valorPadrao":[null,"SUPRIMENTO_FUNDO","CONCESSAO_DIARIA","CONCESSAO_DIARIACAMPO","COLABORADOR_EVENTUAL"],"escondido":false},{"posicao":4,"descricao":"EXERCÍCIO","columnName":"EXERCICIO","columnValue":"EXERCICIO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":5,"descricao":"UNIDADE","columnName":"UNIDADE","columnValue":"UNIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":6,"descricao":"SITUAÇÃO","columnName":"SITUACAO","columnValue":"SITUACAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.SituacaoDiaria","valorPadrao":[null,"ABERTO","DEFERIDO","INDEFERIDO"],"escondido":false},{"posicao":7,"descricao":"EMPENHO","columnName":"EMPENHO","columnValue":"EMPENHO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":8,"descricao":"PESSOA","columnName":"PESSOA","columnValue":"PESSOA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":9,"descricao":"ATO LEGAL","columnName":"ATOLEGAL","columnValue":"ATOLEGAL","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":10,"descricao":"TIPO DE VIAGEM","columnName":"TIPODEVIAGEM","columnValue":"TIPODEVIAGEM","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoViagem","valorPadrao":[null,"ESTADUAL","INTERESTADUAL","INTERNACIONAL"],"escondido":false},{"posicao":11,"descricao":"ITINERÁRIO","columnName":"ITINERARIO","columnValue":"ITINERARIO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":12,"descricao":"MEIO DE TRANSPORTE","columnName":"MEIODETRANSPORTE","columnValue":"MEIODETRANSPORTE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.MeioDeTransporte","valorPadrao":[null,"AEREO","TERRESTRE","OUTROS"],"escondido":false},{"posicao":13,"descricao":"VALOR","columnName":"VALOR","columnValue":"VALOR","tipoAlinhamento":"ESQUERDA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":14,"descricao":"SAIDA","columnName":"SAIDA","columnValue":"SAIDA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":15,"descricao":"RETORNO","columnName":"RETORNO","columnValue":"RETORNO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":16,"descricao":"FORNECEDOR","columnName":"FORNECEDOR","columnValue":"FORNECEDOR","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":17,"descricao":"NUMERODOCONTRATO","columnName":"NUMERODOCONTRATO","columnValue":"NUMERODOCONTRATO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false}],"pesquisaveis":[],"tabs":[]}';
BEGIN
update PAGINAPREFEITURAPORTAL set CONTEUDO = texto where NOME = 'Ver Diária';
END;
