DECLARE
texto CLOB := '{"consulta":"select lic.id from licitacao lic where lic.id is null $WHERE","count":"select count(lic.id) from licitacao lic where lic.id is null $WHERE","totalRegistros":0,"fields":[],"pesquisaveis":[],"tabs":[{"titulo":"Próximas Licitações","consulta":"select\r\n        lic.NUMERODADISPENSA || ''/'' || ex.ano as numero,\r\n        lic.modalidade as modalidade,\r\n        coalesce(orgao.codigo, vwAdm.codigo) || '' - '' || coalesce(orgao.descricao, vwAdm.descricao) as secretaria,\r\n        trunc(lic.DATADADISPENSA) as dataAbertura,\r\n        ''Em elaboracao'' as situacao,\r\n        lic.resumoDoObjeto as objeto,\r\n        lic.ID as idLicitacao\r\nfrom DispensaDeLicitacao lic\r\n         inner join exercicio ex on ex.id = lic.EXERCICIODADISPENSA_ID\r\n         left join processoDeCompra pdc on pdc.id = lic.processoDeCompra_id\r\n         left join vwhierarquiaadministrativa vwAdm on vwAdm.subordinada_id = pdc.unidadeOrganizacional_id\r\n    and sysdate between vwAdm.iniciovigencia and coalesce(vwAdm.fimvigencia, sysdate)\r\n         left join (with hierarquia (codigo, descricao, nivel, id, subordinada_id, superior_id) as (\r\n    select vw.codigo, vw.descricao, nivelestrutura(vw.codigo, ''.'') as nivel, vw.id, vw.subordinada_id, vw.superior_id\r\n    from vwhierarquiaadministrativa vw\r\n    where sysdate between vw.iniciovigencia and coalesce(vw.fimvigencia, sysdate)\r\n    union all\r\n    select vw.codigo, vw.descricao, nivelestrutura(vw.codigo, ''.'') as nivel, vw.id, vw.subordinada_id, vw.superior_id\r\n    from vwhierarquiaadministrativa vw\r\n             inner join hierarquia filho on filho.superior_id = vw.subordinada_id\r\n    where sysdate between vw.iniciovigencia and coalesce(vw.fimvigencia, sysdate)\r\n) select distinct hierarquia.* from hierarquia where hierarquia.nivel = 2) orgao on orgao.subordinada_id = pdc.unidadeOrganizacional_id\r\nwhere (lic.DATADADISPENSA is null or lic.DATADADISPENSA > sysdate)\r\n  and lic.modalidade in (''DISPENSA_LICITACAO'', ''INEXIGIBILIDADE'')\r\n  and lic.situacao = ''EM_ELABORACAO''\r\n  and ex.ano = $ANO  $WHERE\r\norder by lic.NUMERODADISPENSA\r\n","count":"select count(1)\r\nfrom DispensaDeLicitacao lic\r\n         inner join exercicio ex on ex.id = lic.EXERCICIODADISPENSA_ID\r\n         left join processoDeCompra pdc on pdc.id = lic.processoDeCompra_id\r\n         left join vwhierarquiaadministrativa vwAdm on vwAdm.subordinada_id = pdc.unidadeOrganizacional_id\r\n    and sysdate between vwAdm.iniciovigencia and coalesce(vwAdm.fimvigencia, sysdate)\r\n         left join (with hierarquia (codigo, descricao, nivel, id, subordinada_id, superior_id) as (\r\n    select vw.codigo, vw.descricao, nivelestrutura(vw.codigo, ''.'') as nivel, vw.id, vw.subordinada_id, vw.superior_id\r\n    from vwhierarquiaadministrativa vw\r\n    where sysdate between vw.iniciovigencia and coalesce(vw.fimvigencia, sysdate)\r\n    union all\r\n    select vw.codigo, vw.descricao, nivelestrutura(vw.codigo, ''.'') as nivel, vw.id, vw.subordinada_id, vw.superior_id\r\n    from vwhierarquiaadministrativa vw\r\n             inner join hierarquia filho on filho.superior_id = vw.subordinada_id\r\n    where sysdate between vw.iniciovigencia and coalesce(vw.fimvigencia, sysdate)\r\n) select distinct hierarquia.* from hierarquia where hierarquia.nivel = 2) orgao on orgao.subordinada_id = pdc.unidadeOrganizacional_id\r\nwhere (lic.DATADADISPENSA is null or lic.DATADADISPENSA > sysdate)\r\n  and lic.modalidade in (''DISPENSA_LICITACAO'', ''INEXIGIBILIDADE'')\r\n  and lic.situacao = ''EM_ELABORACAO''\r\n  and ex.ano = $ANO $WHERE","totalRegistros":null,"pesquisaveis":[{"descricao":"Modalidade","columnName":"lic.modalidade","columnValue":null,"tipo":"ENUM","operacaoPadrao":null,"tipoEnum":"br.com.webpublico.enums.ModalidadeLicitacao","valorPadrao":[null,"CONVITE","TOMADA_PRECO","CONCORRENCIA_PUBLICA","CONCURSO","PREGAO","DISPENSA_LICITACAO","INEXIGIBILIDADE","RDC"],"tipoMultiSelect":null},{"descricao":"Objeto","columnName":"lic.resumoDoObjeto","columnValue":null,"tipo":"STRING","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null}],"fields":[{"posicao":1,"descricao":"Número","columnName":"numero","columnValue":"LIC.NUMERODADISPENSA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"processo-licitatorio-ver","columnOrigem":"IDLICITACAO","columnDestino":"dados.idProcessoLicitatorio"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":2,"descricao":"Modalidade","columnName":"MODALIDADE","columnValue":"MODALIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.ModalidadeLicitacao","valorPadrao":[null,"CONVITE","TOMADA_PRECO","CONCORRENCIA_PUBLICA","CONCURSO","PREGAO","DISPENSA_LICITACAO","INEXIGIBILIDADE","RDC"],"escondido":false},{"posicao":3,"descricao":"Secretaria","columnName":"SECRETARIA","columnValue":"SECRETARIA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":4,"descricao":"Data de Abertura","columnName":"DATAABERTURA","columnValue":"DATAABERTURA","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":5,"descricao":"Situação","columnName":"SITUACAO","columnValue":"SITUACAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoSituacaoLicitacao","valorPadrao":[null,"ADJUDICADA","ANDAMENTO","ANULADA","CANCELADA","DESERTA","EM_RECURSO","FRACASSADA","HOMOLOGADA","PRORROGADA","REVOGADA","SUSPENSA"],"escondido":false},{"posicao":6,"descricao":"Objeto","columnName":"OBJETO","columnValue":"OBJETO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":7,"descricao":"IDLICITACAO","columnName":"IDLICITACAO","columnValue":"IDLICITACAO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":true}]},{"titulo":"Licitações Concluídas","consulta":"select\r\n        lic.NUMERODADISPENSA || ''/'' || ex.ano as numero,\r\n        lic.MODALIDADE as modalidade,\r\n        coalesce(orgao.codigo, vwAdm.codigo) || '' - '' || coalesce(orgao.descricao, vwAdm.descricao) as secretaria,\r\n        trunc(lic.DATADADISPENSA) as dataAbertura,\r\n        ''Concluído'' as situacao,\r\n        lic.resumoDoObjeto as objeto,\r\n        lic.ID as idLicitacao\r\nfrom DispensaDeLicitacao lic\r\n         inner join exercicio ex on ex.id = lic.EXERCICIODADISPENSA_ID\r\n         left join processoDeCompra pdc on pdc.id = lic.processoDeCompra_id\r\n         left join vwhierarquiaadministrativa vwAdm on vwAdm.subordinada_id = pdc.unidadeOrganizacional_id\r\n    and sysdate between vwAdm.iniciovigencia and coalesce(vwAdm.fimvigencia, sysdate)\r\n         left join (with hierarquia (codigo, descricao, nivel, id, subordinada_id, superior_id) as (\r\n    select vw.codigo, vw.descricao, nivelestrutura(vw.codigo, ''.'') as nivel, vw.id, vw.subordinada_id, vw.superior_id\r\n    from vwhierarquiaadministrativa vw\r\n    where sysdate between vw.iniciovigencia and coalesce(vw.fimvigencia, sysdate)\r\n    union all\r\n    select vw.codigo, vw.descricao, nivelestrutura(vw.codigo, ''.'') as nivel, vw.id, vw.subordinada_id, vw.superior_id\r\n    from vwhierarquiaadministrativa vw\r\n             inner join hierarquia filho on filho.superior_id = vw.subordinada_id\r\n    where sysdate between vw.iniciovigencia and coalesce(vw.fimvigencia, sysdate)\r\n) select distinct hierarquia.* from hierarquia where hierarquia.nivel = 2) orgao on orgao.subordinada_id = pdc.unidadeOrganizacional_id\r\nwhere lic.DATADADISPENSA is not null\r\n  and lic.DATADADISPENSA <= sysdate\r\n  and lic.MODALIDADE  in (''DISPENSA_LICITACAO'', ''INEXIGIBILIDADE'')\r\n  and lic.situacao = ''CONCLUIDO''\r\n  and ex.ano = $ANO $WHERE\r\norder by lic.NUMERODADISPENSA","count":"select count(1)\r\n   from DispensaDeLicitacao lic\r\n         inner join exercicio ex on ex.id = lic.EXERCICIODADISPENSA_ID\r\n         left join processoDeCompra pdc on pdc.id = lic.processoDeCompra_id\r\n         left join vwhierarquiaadministrativa vwAdm on vwAdm.subordinada_id = pdc.unidadeOrganizacional_id\r\n    and sysdate between vwAdm.iniciovigencia and coalesce(vwAdm.fimvigencia, sysdate)\r\n         left join (with hierarquia (codigo, descricao, nivel, id, subordinada_id, superior_id) as (\r\n    select vw.codigo, vw.descricao, nivelestrutura(vw.codigo, ''.'') as nivel, vw.id, vw.subordinada_id, vw.superior_id\r\n    from vwhierarquiaadministrativa vw\r\n    where sysdate between vw.iniciovigencia and coalesce(vw.fimvigencia, sysdate)\r\n    union all\r\n    select vw.codigo, vw.descricao, nivelestrutura(vw.codigo, ''.'') as nivel, vw.id, vw.subordinada_id, vw.superior_id\r\n    from vwhierarquiaadministrativa vw\r\n             inner join hierarquia filho on filho.superior_id = vw.subordinada_id\r\n    where sysdate between vw.iniciovigencia and coalesce(vw.fimvigencia, sysdate)\r\n) select distinct hierarquia.* from hierarquia where hierarquia.nivel = 2) orgao on orgao.subordinada_id = pdc.unidadeOrganizacional_id\r\nwhere lic.DATADADISPENSA is not null\r\n  and lic.DATADADISPENSA <= sysdate\r\n  and lic.MODALIDADE  in (''DISPENSA_LICITACAO'', ''INEXIGIBILIDADE'')\r\n  and lic.situacao = ''CONCLUIDO''\r\n  and ex.ano = $ANO  $WHERE","totalRegistros":null,"pesquisaveis":[{"descricao":"Modalidade","columnName":"lic.modalidade","columnValue":null,"tipo":"ENUM","operacaoPadrao":null,"tipoEnum":"br.com.webpublico.enums.ModalidadeLicitacao","valorPadrao":[null,"CONVITE","TOMADA_PRECO","CONCORRENCIA_PUBLICA","CONCURSO","PREGAO","DISPENSA_LICITACAO","INEXIGIBILIDADE","RDC"],"tipoMultiSelect":null},{"descricao":"Objeto","columnName":"lic.resumoDoObjeto","columnValue":null,"tipo":"STRING","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null}],"fields":[{"posicao":1,"descricao":"Número","columnName":"numero","columnValue":"LIC.NUMERODADISPENSA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"processo-licitatorio-ver","columnOrigem":"IDLICITACAO","columnDestino":"dados.idProcessoLicitatorio"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":2,"descricao":"Modalidade","columnName":"MODALIDADE","columnValue":"MODALIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.ModalidadeLicitacao","valorPadrao":[null,"CONVITE","TOMADA_PRECO","CONCORRENCIA_PUBLICA","CONCURSO","PREGAO","DISPENSA_LICITACAO","INEXIGIBILIDADE","RDC"],"escondido":false},{"posicao":3,"descricao":"Secretaria","columnName":"SECRETARIA","columnValue":"SECRETARIA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":4,"descricao":"Data de Abertura","columnName":"DATAABERTURA","columnValue":"DATAABERTURA","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":5,"descricao":"Situação","columnName":"SITUACAO","columnValue":"SITUACAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoSituacaoLicitacao","valorPadrao":[null,"ADJUDICADA","ANDAMENTO","ANULADA","CANCELADA","DESERTA","EM_RECURSO","FRACASSADA","HOMOLOGADA","PRORROGADA","REVOGADA","SUSPENSA"],"escondido":false},{"posicao":6,"descricao":"Objeto","columnName":"OBJETO","columnValue":"OBJETO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":7,"descricao":"IDLICITACAO","columnName":"IDLICITACAO","columnValue":"IDLICITACAO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":true}]}]}';
BEGIN
update PAGINAPREFEITURAPORTAL set CONTEUDO = texto where NOME = 'Dispensas/Inexigibilidades' and chave= 'licitacao-dispensa';
END;
