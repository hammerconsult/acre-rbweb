DECLARE
 texto CLOB := '{"consulta":"select distinct prog.codigo      as codigo,\r\n                prog.denominacao as denominacao,\r\n                unidade.descricao     as responsavel,\r\n                pe.descricao        ppa,\r\n                prog.id          as id\r\nfrom programappa prog\r\n         inner join ppa on prog.ppa_id = ppa.id\r\n         inner join itens_plan item on item.id = prog.itemplanejamentoestrategico_id\r\n         inner join unidadeorganizacional unidade on prog.responsavel_id = unidade.id\r\n         inner join hierarquiaorganizacional ho on ho.subordinada_id = unidade.id\r\n         inner join planejamentoestrategico pe on ppa.planejamentoestrategico_id = pe.id\r\n         inner join exercicio e on prog.exercicio_id = e.id\r\nwhere e.ano = $ANO  and ho.SUBORDINADA_ID in (select UNIDADE_ID from UNIDADEPREFEITURAPORTAL where PREFEITURA_ID = $PREFEITURAPORTAL_ID)  $WHERE","count":"select  count (distinct prog.id )\r\nfrom programappa prog\r\n         inner join ppa on prog.ppa_id = ppa.id\r\n         inner join itens_plan item on item.id = prog.itemplanejamentoestrategico_id\r\n         inner join unidadeorganizacional unidade on prog.responsavel_id = unidade.id\r\n         inner join hierarquiaorganizacional ho on ho.subordinada_id = unidade.id\r\n         inner join planejamentoestrategico pe on ppa.planejamentoestrategico_id = pe.id\r\n         inner join exercicio e on prog.exercicio_id = e.id\r\nwhere e.ano = $ANO","totalRegistros":23,"fields":[{"posicao":1,"descricao":"CODIGO","columnName":"CODIGO","columnValue":"CODIGO","tipoAlinhamento":"CENTRO","totalizar":false,"link":{"chaveDestino":"ver-programa","columnOrigem":"ID","columnDestino":"prog.id"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":2,"descricao":"DENOMINACAO","columnName":"DENOMINACAO","columnValue":"DENOMINACAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":3,"descricao":"RESPONSAVEL","columnName":"RESPONSAVEL","columnValue":"RESPONSAVEL","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":4,"descricao":"PPA","columnName":"PPA","columnValue":"PPA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":5,"descricao":"ID","columnName":"ID","columnValue":"ID","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":true}],"pesquisaveis":[],"tabs":[]}';
BEGIN
update PAGINAPREFEITURAPORTAL set CONTEUDO = texto where NOME = 'Programas' and CHAVE = 'programa';
END;
