DECLARE
texto CLOB := '{"consulta":"select c.codigo,\r\n       c.ano,\r\n       vw.codigo || '' - '' || vw.descricao as unidade,\r\n       c.nome,\r\n       c.descricao,\r\n       c.homologacao,\r\n       c.iniciovigencia as abertura,\r\n       c.finalvigencia as encerramento,\r\n       to_char(c.inicioinscricao, ''dd/MM/yyyy'') as inicioinscricao,\r\n       to_char(c.finalinscricao, ''dd/MM/yyyy'') as finalinscricao\r\nfrom concurso c\r\n         inner join vwhierarquiaadministrativa vw on vw.subordinada_id = c.unidadeorganizacional_id\r\nwhere trunc(c.iniciovigencia) between vw.iniciovigencia and coalesce(vw.fimvigencia, trunc(c.iniciovigencia))\r\n$WHERE","count":"select count(c.id)\r\nfrom concurso c\r\n         inner join vwhierarquiaadministrativa vw on vw.subordinada_id = c.unidadeorganizacional_id\r\nwhere trunc(c.iniciovigencia) between vw.iniciovigencia and coalesce(vw.fimvigencia, trunc(c.iniciovigencia))\r\n$WHERE","totalRegistros":1,"fields":[{"posicao":1,"descricao":"Código","columnName":"CODIGO","columnValue":"CODIGO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":2,"descricao":"Ano","columnName":"ANO","columnValue":"ANO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":3,"descricao":"Órgão","columnName":"UNIDADE","columnValue":"UNIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":4,"descricao":"Nome","columnName":"NOME","columnValue":"NOME","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":5,"descricao":"Descrição","columnName":"DESCRICAO","columnValue":"DESCRICAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":6,"descricao":"Data de Homologação","columnName":"HOMOLOGACAO","columnValue":"HOMOLOGACAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":7,"descricao":"Abertura","columnName":"ABERTURA","columnValue":"ABERTURA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":8,"descricao":"Encerramento","columnName":"ENCERRAMENTO","columnValue":"ENCERRAMENTO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":9,"descricao":"Início das Inscrições","columnName":"INICIOINSCRICAO","columnValue":"INICIOINSCRICAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":10,"descricao":"Final das Inscrições","columnName":"FINALINSCRICAO","columnValue":"FINALINSCRICAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false}],"pesquisaveis":[],"tabs":[{"titulo":"Locais","subTitulo":"","consulta":"select lc.tipolocalconcurso as tipo,\r\n       ec.cep,\r\n       ec.uf,\r\n       ec.localidade as cidade,\r\n       ec.bairro,\r\n       ec.logradouro,\r\n       ec.complemento,\r\n       ec.numero,\r\n       lc.telefone\r\nfrom concurso c\r\n        inner join localconcurso lc on lc.concurso_id = c.id\r\n        inner join enderecocorreio ec on ec.id = lc.enderecocorreio_id\r\nwhere ec.cep is not null\r\n$WHERE","count":"select count(lc.id)\r\nfrom concurso c\r\n        inner join localconcurso lc on lc.concurso_id = c.id\r\n        inner join enderecocorreio ec on ec.id = lc.enderecocorreio_id\r\nwhere ec.cep is not null\r\n$WHERE","totalRegistros":null,"ordem":1,"pesquisaveis":[],"fields":[{"posicao":1,"descricao":"Tipo","columnName":"TIPO","columnValue":"TIPO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"TipoLocalConcurso","valorPadrao":[],"escondido":false,"agrupador":false},{"posicao":2,"descricao":"CEP","columnName":"CEP","columnValue":"CEP","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":3,"descricao":"UF","columnName":"UF","columnValue":"UF","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":4,"descricao":"Cidade","columnName":"CIDADE","columnValue":"CIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":5,"descricao":"Bairro","columnName":"BAIRRO","columnValue":"BAIRRO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":6,"descricao":"Logradouro","columnName":"LOGRADOURO","columnValue":"LOGRADOURO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":7,"descricao":"Complemento","columnName":"COMPLEMENTO","columnValue":"COMPLEMENTO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":8,"descricao":"Número","columnName":"NUMERO","columnValue":"NUMERO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":9,"descricao":"Telefone","columnName":"TELEFONE","columnValue":"TELEFONE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false}]},{"titulo":"Cargos","subTitulo":"","consulta":"select ca.codigodocargo || '' - '' || ca.descricao as cargo,\r\n       cc.vagasdisponiveis,\r\n       cc.vagasespeciais,\r\n       cc.vagastotais,\r\n       cc.taxainscricao\r\nfrom concurso c\r\n         inner join cargoconcurso cc on cc.concurso_id = c.id\r\n         inner join cargo ca on ca.id = cc.cargo_id\r\nwhere ca.codigodocargo is not null\r\n$WHERE","count":"select count(cc.id)\r\nfrom concurso c\r\n         inner join cargoconcurso cc on cc.concurso_id = c.id\r\n         inner join cargo ca on ca.id = cc.cargo_id\r\nwhere ca.codigodocargo is not null\r\n$WHERE","totalRegistros":null,"ordem":2,"pesquisaveis":[],"fields":[{"posicao":1,"descricao":"Cargo","columnName":"CARGO","columnValue":"CARGO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":2,"descricao":"Vagas Disponíveis","columnName":"VAGASDISPONIVEIS","columnValue":"VAGASDISPONIVEIS","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":3,"descricao":"Vagas Especiais","columnName":"VAGASESPECIAIS","columnValue":"VAGASESPECIAIS","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":4,"descricao":"Vagas Totais","columnName":"VAGASTOTAIS","columnValue":"VAGASTOTAIS","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":5,"descricao":"Taxa de Inscrição","columnName":"TAXAINSCRICAO","columnValue":"TAXAINSCRICAO","tipoAlinhamento":"DIREITA","totalizar":false,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false}]},{"titulo":"Critério de Desempate","subTitulo":"","consulta":"select dc.ordem || ''º'' as ordem,\r\n       dc.criteriodesempate\r\nfrom concurso c\r\n         inner join desempateconcurso dc on dc.concurso_id = c.id\r\nwhere dc.criteriodesempate is not null\r\n$WHERE\r\norder by ordem","count":"select count(dc.id)\r\nfrom concurso c\r\n         inner join desempateconcurso dc on dc.concurso_id = c.id\r\nwhere dc.criteriodesempate is not null\r\n$WHERE","totalRegistros":null,"ordem":3,"pesquisaveis":[],"fields":[{"posicao":1,"descricao":"Ordem","columnName":"ORDEM","columnValue":"ORDEM","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":2,"descricao":"Critério de Desempate","columnName":"CRITERIODESEMPATE","columnValue":"CRITERIODESEMPATE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"CriterioDesempate","valorPadrao":[],"escondido":false,"agrupador":false}]},{"titulo":"Etapas","subTitulo":"","consulta":"select to_char(ec.data, ''dd/MM/yyyy HH24:mi:ss'') as dataCriacao,\r\n       ec.tipoetapa\r\nfrom concurso c\r\n         inner join etapaconcurso ec on ec.concurso_id = c.id\r\nwhere ec.tipoetapa is not null\r\n$WHERE\r\norder by ec.data","count":"select count(ec.id)\r\nfrom concurso c\r\n         inner join etapaconcurso ec on ec.concurso_id = c.id\r\nwhere ec.tipoetapa is not null\r\n$WHERE","totalRegistros":null,"ordem":4,"pesquisaveis":[],"fields":[{"posicao":1,"descricao":"Data de Criação","columnName":"DATACRIACAO","columnValue":"DATACRIACAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":2,"descricao":"Tipo","columnName":"TIPOETAPA","columnValue":"TIPOETAPA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"TipoEtapa","valorPadrao":[],"escondido":false,"agrupador":false}]},{"titulo":"Publicações","subTitulo":"","consulta":"select pc.cadastradaem as datapublicacao,\r\n       case when ato.id is not null then ''N° '' || ato.numero || '' - '' || ato.nome else '''' end as ato,\r\n       ato.arquivo_id as idArquivo\r\nfrom concurso c\r\n         inner join publicacaoconcurso pc on pc.concurso_id = c.id\r\n         inner join atolegal ato on ato.id = pc.atolegal_id\r\nwhere ato.id is not null\r\n$WHERE\r\norder by pc.cadastradaem","count":"select count(pc.id)\r\nfrom concurso c\r\n         inner join publicacaoconcurso pc on pc.concurso_id = c.id\r\n         inner join atolegal ato on ato.id = pc.atolegal_id\r\nwhere ato.id is not null\r\n$WHERE","totalRegistros":null,"ordem":5,"pesquisaveis":[],"fields":[{"posicao":1,"descricao":"Data de Publicação","columnName":"DATAPUBLICACAO","columnValue":"DATAPUBLICACAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":2,"descricao":"Ato Legal","columnName":"ATO","columnValue":"ATO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":3,"descricao":"Edital","columnName":"IDARQUIVO","columnValue":"IDARQUIVO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"ARQUIVO","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false}]},{"titulo":"Membros da Comissão","subTitulo":"","consulta":"select pf.nome as integrante,\r\n       mc.atribuicaocomissao as tipo\r\nfrom concurso c\r\n         inner join publicacaoconcurso pc on pc.concurso_id = c.id\r\n         inner join atolegal ato on ato.id = pc.atolegal_id\r\n         inner join atodecomissao atoc on atoc.atolegal_id = pc.atolegal_id\r\n         inner join comissao com on com.atodecomissao_id = atoc.id\r\n         inner join membrocomissao mc on mc.comissao_id = com.id\r\n         inner join pessoafisica pf on pf.id = mc.pessoafisica_id\r\nwhere mc.id is not null\r\n$WHERE\r\norder by pf.nome","count":"select count(mc.id)\r\nfrom concurso c\r\n         inner join publicacaoconcurso pc on pc.concurso_id = c.id\r\n         inner join atolegal ato on ato.id = pc.atolegal_id\r\n         inner join atodecomissao atoc on atoc.atolegal_id = pc.atolegal_id\r\n         inner join comissao com on com.atodecomissao_id = atoc.id\r\n         inner join membrocomissao mc on mc.comissao_id = com.id\r\n         inner join pessoafisica pf on pf.id = mc.pessoafisica_id\r\nwhere mc.id is not null\r\n$WHERE","totalRegistros":null,"ordem":6,"pesquisaveis":[],"fields":[{"posicao":1,"descricao":"Integrante","columnName":"INTEGRANTE","columnValue":"INTEGRANTE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false,"agrupador":false},{"posicao":2,"descricao":"Tipo","columnName":"TIPO","columnValue":"TIPO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"AtribuicaoComissao","valorPadrao":[],"escondido":false,"agrupador":false}]}],"paineis":[]}';
BEGIN
update paginaprefeituraportal set conteudo = texto where nome = 'Detalhes do Concurso Público' and chave = 'concurso-publico-ver';
END;
