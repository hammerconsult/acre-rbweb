declare
texto clob := '{"consulta":"select CD.id                                        as id,\r\n       cd.NUMERO                                    as numero,\r\n       cd.DATAASS                                   as data,\r\n       cd.OBJETO                                    as objeto,\r\n       cd.VALORCONVENIO                             as valor_convenio,\r\n       (select pc.TIPOPRESTACAOCONTAS\r\n        from PRESTACAOCONTAS pc\r\n        WHERE pc.CONVENIODESPESA_ID = cd.ID\r\n        order by pc.DATALANCAMENTO desc FETCH FIRST 1 ROW ONLY) as situacao\r\nfrom CONVENIODESPESA cd\r\n         left join exercicio ex on cd.EXERCICIO_ID = ex.ID\r\n         left join entidade e on cd.ORGAOCONVENENTE_ID = e.ID\r\n         left join pessoajuridica pje on e.PESSOAJURIDICA_ID = pje.ID\r\n         left join VWHIERARQUIAORCAMENTARIA vw on vw.SUBORDINADA_ID = e.UNIDADEORGANIZACIONALORC_ID and\r\n                                                  trunc(cd.DATAVIGENCIAINICIAL) BETWEEN vw.iniciovigencia and coalesce(vw.fimvigencia, trunc(cd.DATAVIGENCIAINICIAL))\r\n         left join entidadebeneficiaria eb on cd.ENTIDADEBENEFICIARIA_ID = eb.ID\r\n         left join pessoajuridica pjeb on eb.PESSOAJURIDICA_ID = pjeb.ID\r\n         left join periodicidade p on cd.PERIODICIDADE_ID = p.Id\r\nwhere trunc(cd.DATAVIGENCIAINICIAL) BETWEEN to_date(''01/01/$ANO'', ''dd/MM/yyyy'') AND to_date(''31/12/$ANO'', ''dd/MM/yyyy'') $WHERE\r\norder by cd.dataass desc","count":"select count(*)\r\nfrom CONVENIODESPESA cd\r\n         left join exercicio ex on cd.EXERCICIO_ID = ex.ID\r\n         left join entidade e on cd.ORGAOCONVENENTE_ID = e.ID\r\n         left join pessoajuridica pje on e.PESSOAJURIDICA_ID = pje.ID\r\n         left join VWHIERARQUIAORCAMENTARIA vw on vw.SUBORDINADA_ID = e.UNIDADEORGANIZACIONALORC_ID and\r\n                                                  trunc(cd.DATAVIGENCIAINICIAL) BETWEEN vw.iniciovigencia and coalesce(vw.fimvigencia, trunc(cd.DATAVIGENCIAINICIAL))\r\n         left join entidadebeneficiaria eb on cd.ENTIDADEBENEFICIARIA_ID = eb.ID\r\n         left join pessoajuridica pjeb on eb.PESSOAJURIDICA_ID = pjeb.ID\r\n         left join periodicidade p on cd.PERIODICIDADE_ID = p.Id\r\nwhere trunc(cd.DATAVIGENCIAINICIAL) BETWEEN to_date(''01/01/$ANO'', ''dd/MM/yyyy'') AND to_date(''31/12/$ANO'', ''dd/MM/yyyy'') $WHERE\r\norder by cd.dataass desc","totalRegistros":531,"fields":[{"posicao":0,"descricao":"id","columnName":"id","columnValue":"id","tipoAlinhamento":null,"totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":true},{"posicao":1,"descricao":"Número","columnName":"NUMERO","columnValue":"NUMERO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"convenio-despesa-ver","columnOrigem":"id","columnDestino":"cd.id"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":2,"descricao":"Data","columnName":"DATA","columnValue":"DATA","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":3,"descricao":"Objeto","columnName":"OBJETO","columnValue":"OBJETO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":4,"descricao":"Valor","columnName":"VALOR_CONVENIO","columnValue":"VALOR_CONVENIO","tipoAlinhamento":"DIREITA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":6,"descricao":"Situação","columnName":"SITUACAO","columnValue":"SITUACAO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoPrestacaoContas","valorPadrao":[null,"APROVADO","EM_ANALISE","EM_DILIGENCIA","EM_TCE","REPROVADO"],"escondido":false}],"pesquisaveis":[{"descricao":"Unidade","columnName":"vw.SUBORDINADA_ID","columnValue":null,"tipo":"MULTI_SELECT","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":"UNIDADE_ORCAMENTARIA"},{"descricao":"Objeto","columnName":"cd.objeto","columnValue":null,"tipo":"STRING","operacaoPadrao":"LIKE","tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Número","columnName":"cd.NUMERO","columnValue":null,"tipo":"STRING","operacaoPadrao":"LIKE","tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null},{"descricao":"Periodicidade","columnName":"cd.dataass","columnValue":null,"tipo":"PERIODO","operacaoPadrao":null,"tipoEnum":null,"valorPadrao":"","tipoMultiSelect":null}],"tabs":[]}';
begin
update paginaprefeituraportal set conteudo = texto where nome = 'Convênio de Despesa';
end;
