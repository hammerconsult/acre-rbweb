DECLARE
texto CLOB := '{"consulta":"select fiscal.tiporesponsavel,\r\n       fiscal.tiporesponsaveltecnico,\r\n       fiscal.tipofiscal,\r\n       case when c.id is not null then c.numerocontrato || ''/'' || extract(year from (c.datalancamento)) || '' - '' || c.numerotermo || ''/'' || ex.ano || '' - '' ||\r\n       coalesce(formatacpfcnpj(pfcont.cpf), formatacpfcnpj(pjcont.cnpj)) || '' - '' || coalesce(pfcont.nome, pjcont.razaosocial) else '''' end as contrato,\r\n    c.id as idcontrato,\r\n       case when mfp.id is not null then mfp.matricula || ''/'' || vfp.numero|| '' - '' || pfserv.nome else '''' end as servidor,\r\n       fiscal.creacau,\r\n       case when pc.id is not null then pc.codigo || '' - '' || pc.tituloabreviado else '''' end as especialidade,\r\n       fiscal.atribuicao\r\nfrom responsaveltecnicofiscal fiscal\r\n         left join profissionalconfea pc on fiscal.profissionalconfea_id = pc.id\r\n         left join contratofp cfp on fiscal.contratofp_id = cfp.id\r\n         left join vinculofp vfp on cfp.id = vfp.id\r\n         left join matriculafp mfp on vfp.matriculafp_id = mfp.id\r\n         left join cargo on cfp.cargo_id = cargo.id\r\n         left join modalidadecontratofp modcfp on cfp.modalidadecontratofp_id = modcfp.id\r\n         left join jornadadetrabalho jt on cfp.jornadadetrabalho_id = jt.id\r\n         left join tiporegime reg on cfp.tiporegime_id = reg.id\r\n         left join atolegal ato on cfp.atolegal_id = ato.id\r\n         left join contrato c on fiscal.contrato_id = c.id\r\n         left join exercicio ex on c.exerciciocontrato_id = ex.id\r\n         left join pessoa p on c.contratado_id = p.id\r\n         left join pessoafisica pfcont on p.id = pfcont.id\r\n         left join pessoajuridica pjcont on p.id = pjcont.id\r\n         left join pessoafisica pfserv on mfp.pessoa_id = pfserv.id\r\n$WHERE\r\norder by pfserv.nome","count":"select count(fiscal.id)\r\nfrom responsaveltecnicofiscal fiscal\r\n         left join profissionalconfea pc on fiscal.profissionalconfea_id = pc.id\r\n         left join contratofp cfp on fiscal.contratofp_id = cfp.id\r\n         left join vinculofp vfp on cfp.id = vfp.id\r\n         left join matriculafp mfp on vfp.matriculafp_id = mfp.id\r\n         left join cargo on cfp.cargo_id = cargo.id\r\n         left join modalidadecontratofp modcfp on cfp.modalidadecontratofp_id = modcfp.id\r\n         left join jornadadetrabalho jt on cfp.jornadadetrabalho_id = jt.id\r\n         left join tiporegime reg on cfp.tiporegime_id = reg.id\r\n         left join atolegal ato on cfp.atolegal_id = ato.id\r\n         left join contrato c on fiscal.contrato_id = c.id\r\n         left join exercicio ex on c.exerciciocontrato_id = ex.id\r\n         left join pessoa p on c.contratado_id = p.id\r\n         left join pessoafisica pfcont on p.id = pfcont.id\r\n         left join pessoajuridica pjcont on p.id = pjcont.id\r\n         left join pessoafisica pfserv on mfp.pessoa_id = pfserv.id\r\n$WHERE","totalRegistros":30,"fields":[{"posicao":1,"descricao":"Tipo do Responsável ","columnName":"TIPORESPONSAVEL","columnValue":"TIPORESPONSAVEL","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoResponsavelFiscal","valorPadrao":[null,"TECNICO","FISCAL"],"escondido":false},{"posicao":2,"descricao":"Tipo Responsável Técnico ","columnName":"TIPORESPONSAVELTECNICO","columnValue":"TIPORESPONSAVELTECNICO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoResponsavelTecnico","valorPadrao":[null,"CONTRATANTE","CONTRATADO"],"escondido":false},{"posicao":3,"descricao":"Tipo Fiscal ","columnName":"TIPOFISCAL","columnValue":"TIPOFISCAL","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.TipoFiscalContrato","valorPadrao":[null,"INTERNO","EXTERNO"],"escondido":false},{"posicao":4,"descricao":"Contrato ","columnName":"CONTRATO","columnValue":"CONTRATO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"contrato-ver","columnOrigem":"IDCONTRATO","columnDestino":"c.id"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":5,"descricao":"IDCONTRATO","columnName":"IDCONTRATO","columnValue":"IDCONTRATO","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":true},{"posicao":6,"descricao":"Servidor ","columnName":"SERVIDOR","columnValue":"SERVIDOR","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":7,"descricao":"CREA/CAU","columnName":"CREACAU","columnValue":"CREACAU","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":8,"descricao":"Especialidade","columnName":"ESPECIALIDADE","columnValue":"ESPECIALIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":9,"descricao":"Atribuição","columnName":"ATRIBUICAO","columnValue":"ATRIBUICAO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.ObraAtribuicao","valorPadrao":[null,"FISCAL","RESPONSAVEL_TECNICO","PROJETISTA"],"escondido":false}],"pesquisaveis":[],"tabs":[],"paineis":[]}';
BEGIN
update PAGINAPREFEITURAPORTAL set CONTEUDO = texto where NOME = 'Fiscais e Gestores de Contrato' and CHAVE = 'fiscal-contrato';
END;
