DECLARE
texto CLOB := '{"consulta":"select e.numero,\r\n       e.dataemenda,\r\n       coalesce(pf.nome, pj.razaosocial) as vereador,\r\n       e.statuscamara,\r\n       e.statusprefeitura,\r\n       e.modalidadeemenda,\r\n       e.esferaorcamentaria,\r\n       e.objetoresumido,\r\n       e.descricaodetalhada\r\nfrom emenda e\r\n         inner join exercicio ex on ex.id = e.exercicio_id\r\n         inner join vereador v on e.vereador_id = v.id\r\n         left join pessoafisica pf on pf.id = v.pessoa_id\r\n         left join pessoajuridica pj on pj.id = v.pessoa_id\r\n$WHERE","count":"select count(e.id) from emenda e $WHERE","totalRegistros":1,"fields":[{"posicao":1,"descricao":"Número","columnName":"NUMERO","columnValue":"NUMERO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":2,"descricao":"Data","columnName":"DATAEMENDA","columnValue":"DATAEMENDA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"DATE","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":3,"descricao":"Autor","columnName":"VEREADOR","columnValue":"VEREADOR","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"pessoa-ver","columnOrigem":"VEREADOR","columnDestino":"coalesce(pf.nome, pj.razaosocial)"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":4,"descricao":"Status da Câmara","columnName":"STATUSCAMARA","columnValue":"STATUSCAMARA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.StatusEmenda","valorPadrao":[null,"ABERTO","APROVADO","REJEITADO"],"escondido":false},{"posicao":5,"descricao":"Status da Prefeitura","columnName":"STATUSPREFEITURA","columnValue":"STATUSPREFEITURA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.StatusEmenda","valorPadrao":[null,"ABERTO","APROVADO","REJEITADO"],"escondido":false},{"posicao":6,"descricao":"Modalidade","columnName":"MODALIDADEEMENDA","columnValue":"MODALIDADEEMENDA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.ModalidadeEmenda","valorPadrao":[null,"DIRETA","INDIRETA"],"escondido":false},{"posicao":7,"descricao":"Esfera Orçamentária","columnName":"ESFERAORCAMENTARIA","columnValue":"ESFERAORCAMENTARIA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"ENUM","tipoEnum":"br.com.webpublico.enums.EsferaOrcamentaria","valorPadrao":[null,"ORCAMENTOGERAL","ORCAMENTOFISCAL","ORCAMENTOSEGURIDADESOCIAL"],"escondido":false},{"posicao":8,"descricao":"Objeto Resumido","columnName":"OBJETORESUMIDO","columnValue":"OBJETORESUMIDO","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":9,"descricao":"Descrição Detalhada","columnName":"DESCRICAODETALHADA","columnValue":"DESCRICAODETALHADA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false}],"pesquisaveis":[],"tabs":[{"titulo":"Acréscimo à Programação","subTitulo":"","consulta":"select vw.codigo || '' - '' || vw.descricao as unidade,\r\n       ap.codigo || '' - '' || ap.descricao as projetoAtividade,\r\n       sap.codigo || '' - '' || sap.descricao as subProjetoAtividade,\r\n       cDesp.codigo || '' - '' || cDesp.descricao as contaDespesa,\r\n       fr.codigo || '' - '' || fr.descricao as fonte,\r\n       se.valor,\r\n       vw.id as idUnidade\r\nfrom emenda e\r\n   inner join suplementacaoemenda se on se.emenda_id = e.id\r\n   inner join vwhierarquiaorcamentaria vw on vw.subordinada_id = se.unidadeorganizacional_id\r\n   inner join acaoppa ap on ap.id = se.acaoppa_id\r\n   inner join subacaoppa sap on sap.id = se.subacaoppa_id\r\n   inner join conta cDesp on cDesp.id = se.conta_id\r\n   inner join contadedestinacao cDest on cDest.id = se.destinacaoderecursos_id\r\n   inner join fontederecursos fr on fr.id = cDest.fontederecursos_id\r\nwhere trunc(coalesce(e.dataemenda, sysdate)) between vw.iniciovigencia and coalesce(vw.fimvigencia, trunc(coalesce(e.dataemenda, sysdate)))\r\n$WHERE","count":"select count(se.id)\r\nfrom emenda e\r\n   inner join suplementacaoemenda se on se.emenda_id = e.id\r\n   inner join vwhierarquiaorcamentaria vw on vw.subordinada_id = se.unidadeorganizacional_id\r\n   inner join acaoppa ap on ap.id = se.acaoppa_id\r\n   inner join subacaoppa sap on sap.id = se.subacaoppa_id\r\n   inner join conta cDesp on cDesp.id = se.conta_id\r\n   inner join contadedestinacao cDest on cDest.id = se.destinacaoderecursos_id\r\n   inner join fontederecursos fr on fr.id = cDest.fontederecursos_id\r\nwhere trunc(coalesce(e.dataemenda, sysdate)) between vw.iniciovigencia and coalesce(vw.fimvigencia, trunc(coalesce(e.dataemenda, sysdate)))\r\n$WHERE","totalRegistros":null,"ordem":1,"pesquisaveis":[],"fields":[{"posicao":1,"descricao":"Unidade Organizacional","columnName":"UNIDADE","columnValue":"UNIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"unidade-ver","columnOrigem":"IDUNIDADE","columnDestino":"ho.id"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":2,"descricao":"Projeto/Atividade","columnName":"PROJETOATIVIDADE","columnValue":"PROJETOATIVIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":3,"descricao":"Sub-Projeto/Atividade","columnName":"SUBPROJETOATIVIDADE","columnValue":"SUBPROJETOATIVIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":4,"descricao":"Conta de Despesa","columnName":"CONTADESPESA","columnValue":"CONTADESPESA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":5,"descricao":"Fonte de Recurso","columnName":"FONTE","columnValue":"FONTE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":6,"descricao":"Valor","columnName":"VALOR","columnValue":"VALOR","tipoAlinhamento":"DIREITA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":7,"descricao":"IDUNIDADE","columnName":"IDUNIDADE","columnValue":"IDUNIDADE","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":true}]},{"titulo":"Cancelamento Compnesatórios","subTitulo":"","consulta":"select vw.codigo || '' - '' || vw.descricao as unidade,\r\n       ap.codigo || '' - '' || ap.descricao as projetoAtividade,\r\n       sap.codigo || '' - '' || sap.descricao as subProjetoAtividade,\r\n       cDesp.codigo || '' - '' || cDesp.descricao as contaDespesa,\r\n       fr.codigo || '' - '' || fr.descricao as fonte,\r\n       ae.valor,\r\n       vw.id as idUnidade\r\nfrom emenda e\r\n   inner join anulacaoemenda ae on ae.emenda_id = e.id\r\n   inner join vwhierarquiaorcamentaria vw on vw.subordinada_id = ae.unidadeorganizacional_id\r\n   inner join acaoppa ap on ap.id = ae.acaoppa_id\r\n   inner join subacaoppa sap on sap.id = ae.subacaoppa_id\r\n   inner join conta cDesp on cDesp.id = ae.conta_id\r\n   inner join contadedestinacao cDest on cDest.id = ae.destinacaoderecursos_id\r\n   inner join fontederecursos fr on fr.id = cDest.fontederecursos_id\r\nwhere trunc(coalesce(e.dataemenda, sysdate)) between vw.iniciovigencia and coalesce(vw.fimvigencia, trunc(coalesce(e.dataemenda, sysdate)))\r\n$WHERE","count":"select count(ae.id)\r\nfrom emenda e\r\n   inner join anulacaoemenda ae on ae.emenda_id = e.id\r\n   inner join vwhierarquiaorcamentaria vw on vw.subordinada_id = ae.unidadeorganizacional_id\r\n   inner join acaoppa ap on ap.id = ae.acaoppa_id\r\n   inner join subacaoppa sap on sap.id = ae.subacaoppa_id\r\n   inner join conta cDesp on cDesp.id = ae.conta_id\r\n   inner join contadedestinacao cDest on cDest.id = ae.destinacaoderecursos_id\r\n   inner join fontederecursos fr on fr.id = cDest.fontederecursos_id\r\nwhere trunc(coalesce(e.dataemenda, sysdate)) between vw.iniciovigencia and coalesce(vw.fimvigencia, trunc(coalesce(e.dataemenda, sysdate)))\r\n$WHERE","totalRegistros":null,"ordem":2,"pesquisaveis":[],"fields":[{"posicao":1,"descricao":"Unidade Organizacional","columnName":"UNIDADE","columnValue":"UNIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":{"chaveDestino":"unidade-ver","columnOrigem":"IDUNIDADE","columnDestino":"ho.id"},"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":2,"descricao":"Projeto/Atividade","columnName":"PROJETOATIVIDADE","columnValue":"PROJETOATIVIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":3,"descricao":"Sub-Projeto/Atividade","columnName":"SUBPROJETOATIVIDADE","columnValue":"SUBPROJETOATIVIDADE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":4,"descricao":"Conta de Despesa","columnName":"CONTADESPESA","columnValue":"CONTADESPESA","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":5,"descricao":"Fonte de Recurso","columnName":"FONTE","columnValue":"FONTE","tipoAlinhamento":"ESQUERDA","totalizar":false,"link":null,"tipo":"STRING","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":6,"descricao":"Valor","columnName":"VALOR","columnValue":"VALOR","tipoAlinhamento":"DIREITA","totalizar":true,"link":null,"tipo":"MONETARIO","tipoEnum":null,"valorPadrao":null,"escondido":false},{"posicao":7,"descricao":"IDUNIDADE","columnName":"IDUNIDADE","columnValue":"IDUNIDADE","tipoAlinhamento":"CENTRO","totalizar":false,"link":null,"tipo":"INTEGER","tipoEnum":null,"valorPadrao":null,"escondido":true}]}],"paineis":[]}';
BEGIN
update PAGINAPREFEITURAPORTAL set CONTEUDO = texto where NOME = 'Detalhes da Emenda' and CHAVE = 'emenda-ver';
END;
